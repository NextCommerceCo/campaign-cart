---
title: Common Issues
description: Comprehensive troubleshooting guide for Next Commerce SDK including common problems, solutions, debugging techniques, and prevention strategies.
---

# Common Issues

Troubleshoot Next Commerce SDK issues quickly with this comprehensive guide covering the most common problems and their solutions.

## Quick Diagnostics

### SDK Health Check

#### Basic Connectivity Test
```javascript
// Quick health check for SDK functionality
function runSDKHealthCheck() {
  const healthCheck = {
    sdkLoaded: typeof window.NextCommerce !== 'undefined',
    configDefined: typeof window.nextConfig !== 'undefined',
    apiConnectivity: false,
    cartFunctionality: false,
    checkoutAvailable: false
  };
  
  // Test API connectivity
  if (healthCheck.sdkLoaded) {
    next.ping().then(() => {
      healthCheck.apiConnectivity = true;
      console.log('✅ API connectivity: OK');
    }).catch(err => {
      console.error('❌ API connectivity: Failed', err);
    });
    
    // Test cart operations
    try {
      const cartData = next.getCartData();
      healthCheck.cartFunctionality = true;
      console.log('✅ Cart functionality: OK');
    } catch (err) {
      console.error('❌ Cart functionality: Failed', err);
    }
    
    // Test checkout availability
    try {
      const checkoutConfig = next.getCheckoutConfig();
      healthCheck.checkoutAvailable = true;
      console.log('✅ Checkout availability: OK');
    } catch (err) {
      console.error('❌ Checkout availability: Failed', err);
    }
  }
  
  console.log('SDK Health Check Results:', healthCheck);
  return healthCheck;
}

// Run health check on page load
window.nextReady.push(runSDKHealthCheck);
```

#### Debug Mode Activation
```javascript
// Enable comprehensive debug mode
window.nextConfig = {
  apiKey: 'your-api-key',
  debug: true  // Enable debug logging
};

// Or activate debug mode via URL parameter
// Add ?debug=true to any page URL

// Enhanced debug utilities
window.nextReady.push(function() {
  if (next.isDebugMode()) {
    // Enable debug panel
    next.showDebugPanel();
    
    // Log all SDK events
    next.on('*', function(eventName, data) {
      console.log(`[DEBUG] ${eventName}:`, data);
    });
    
    // Performance monitoring
    console.log('SDK Load Time:', next.getLoadTime());
    console.log('Campaign Data:', next.getCampaignData());
    console.log('Current Config:', next.getConfig());
  }
});
```

## SDK Loading Issues

### Problem: SDK Not Loading

#### Symptoms
- `window.NextCommerce` is undefined
- No SDK-related console logs
- Data attributes not working

#### Solutions

**Check Script Loading**
```html
<!-- Verify script URL is correct -->
<script src="https://cdn.jsdelivr.net/gh/NextCommerceCo/campaign-cart@latest/public/loader.js"></script>

<!-- Check for HTTPS/HTTP mixed content issues -->
<!-- Ensure you're using HTTPS for both your site and SDK -->

<!-- Test with direct script inclusion -->
<script>
console.log('Script tag executed');
</script>
```

**Verify Network Connectivity**
```javascript
// Test CDN accessibility
fetch('https://cdn.jsdelivr.net/gh/NextCommerceCo/campaign-cart@latest/public/loader.js')
  .then(response => {
    if (response.ok) {
      console.log('✅ CDN accessible');
    } else {
      console.error('❌ CDN response error:', response.status);
    }
  })
  .catch(error => {
    console.error('❌ CDN network error:', error);
  });
```

**Check Content Security Policy**
```html
<!-- Add to your CSP if needed -->
<meta http-equiv="Content-Security-Policy" 
      content="script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://core.spreedly.com;">
```

**Alternative Loading Method**
```html
<!-- Fallback loading approach -->
<script>
window.nextConfig = {
  apiKey: 'your-api-key'
};

// Load SDK with error handling
(function() {
  const script = document.createElement('script');
  script.src = 'https://cdn.jsdelivr.net/gh/NextCommerceCo/campaign-cart@latest/public/loader.js';
  script.async = true;
  
  script.onload = function() {
    console.log('✅ SDK loaded successfully');
  };
  
  script.onerror = function() {
    console.error('❌ SDK failed to load');
    // Implement fallback behavior
    loadFallbackSDK();
  };
  
  document.head.appendChild(script);
})();

function loadFallbackSDK() {
  // Load from alternative CDN or local copy
  const fallbackScript = document.createElement('script');
  fallbackScript.src = '/path/to/local/next-commerce-sdk.js';
  document.head.appendChild(fallbackScript);
}
</script>
```

### Problem: Configuration Not Applied

#### Symptoms
- SDK loads but uses default configuration
- API key errors
- Features not working as configured

#### Solutions

**Verify Configuration Timing**
```html
<!-- WRONG: Config defined after SDK -->
<script src="loader.js"></script>
<script>
window.nextConfig = { apiKey: 'key' }; // Too late!
</script>

<!-- CORRECT: Config defined before SDK -->
<script>
window.nextConfig = { apiKey: 'key' };
</script>
<script src="loader.js"></script>
```

**Check Configuration Syntax**
```javascript
// Validate configuration object
function validateConfig(config) {
  const errors = [];
  
  if (!config.apiKey) {
    errors.push('Missing required apiKey');
  }
  
  if (config.analytics && typeof config.analytics !== 'object') {
    errors.push('Invalid analytics configuration');
  }
  
  if (config.paymentConfig && !config.paymentConfig.expressCheckout) {
    errors.push('Invalid payment configuration');
  }
  
  if (errors.length > 0) {
    console.error('Configuration errors:', errors);
    return false;
  }
  
  return true;
}

// Validate before SDK loads
if (window.nextConfig) {
  validateConfig(window.nextConfig);
}
```

## API and Network Issues

### Problem: API Connection Failures

#### Symptoms
- Network errors in console
- Cart operations fail
- Checkout not initializing

#### Solutions

**Check API Key Validity**
```javascript
window.nextReady.push(function() {
  // Test API key
  next.validateApiKey()
    .then(result => {
      if (result.valid) {
        console.log('✅ API key is valid');
        console.log('Campaign:', result.campaign);
      } else {
        console.error('❌ Invalid API key');
      }
    })
    .catch(error => {
      console.error('❌ API key validation failed:', error);
    });
});
```

**Network Troubleshooting**
```javascript
// Test API endpoints
function testAPIConnectivity() {
  const endpoints = [
    'https://api.nextcommerce.co/health',
    'https://api.nextcommerce.co/v1/campaigns',
    'https://core.spreedly.com/v1/payment_methods'
  ];
  
  endpoints.forEach(endpoint => {
    fetch(endpoint, { method: 'HEAD' })
      .then(response => {
        console.log(`✅ ${endpoint}: ${response.status}`);
      })
      .catch(error => {
        console.error(`❌ ${endpoint}:`, error);
      });
  });
}

// Check for CORS issues
window.nextReady.push(function() {
  next.on('api:error', function(error) {
    if (error.type === 'cors') {
      console.error('CORS issue detected:', error);
      console.log('Solution: Ensure your domain is whitelisted');
    }
  });
});
```

**Proxy Configuration for Corporate Networks**
```javascript
// Configure for corporate proxy
window.nextConfig = {
  apiKey: 'your-api-key',
  network: {
    proxy: {
      enabled: true,
      host: 'your-proxy-host',
      port: 8080,
      auth: {
        username: 'proxy-user',
        password: 'proxy-pass'
      }
    },
    timeout: 30000, // 30 second timeout
    retries: 3
  }
};
```

### Problem: Slow API Responses

#### Symptoms
- Long delays in cart updates
- Slow checkout initialization
- Timeout errors

#### Solutions

**Optimize API Calls**
```javascript
window.nextConfig = {
  apiKey: 'your-api-key',
  performance: {
    // Batch API requests
    batchRequests: true,
    batchDelay: 100, // Wait 100ms before sending batch
    
    // Cache responses
    cacheExpiry: 300, // 5 minutes
    
    // Reduce payload size
    minimalResponses: true
  }
};
```

**Implement Request Queuing**
```javascript
window.nextReady.push(function() {
  // Monitor API response times
  const responseTimeMonitor = {
    times: [],
    threshold: 2000, // 2 seconds
    
    record: function(time) {
      this.times.push(time);
      if (this.times.length > 10) {
        this.times.shift(); // Keep only last 10
      }
      
      const average = this.times.reduce((a, b) => a + b, 0) / this.times.length;
      if (average > this.threshold) {
        console.warn(`Slow API responses detected: ${average}ms average`);
        this.showOptimizationSuggestions();
      }
    },
    
    showOptimizationSuggestions: function() {
      console.log('Optimization suggestions:');
      console.log('- Enable request batching');
      console.log('- Increase cache expiry');
      console.log('- Check network connectivity');
    }
  };
  
  // Monitor all API calls
  next.on('api:request-complete', function(data) {
    responseTimeMonitor.record(data.responseTime);
  });
});
```

## Cart and State Issues

### Problem: Cart Not Updating

#### Symptoms
- Add to cart button doesn't work
- Cart count not updating
- Items disappear from cart

#### Solutions

**Verify Data Attributes**
```html
<!-- Check attribute syntax -->
<!-- WRONG -->
<button data-next-action="add-cart" data-package-id="1">Add to Cart</button>

<!-- CORRECT -->
<button data-next-action="add-to-cart" data-next-package-id="1">Add to Cart</button>
```

**Debug Cart State**
```javascript
window.nextReady.push(function() {
  // Monitor cart events
  next.on('cart:item-adding', function(data) {
    console.log('Adding item to cart:', data);
  });
  
  next.on('cart:item-added', function(data) {
    console.log('Item added successfully:', data);
  });
  
  next.on('cart:error', function(error) {
    console.error('Cart error:', error);
  });
  
  // Debug cart state
  window.debugCart = function() {
    const cart = next.getCartData();
    console.log('Current cart state:', cart);
    console.log('Cart items:', cart.items);
    console.log('Cart total:', cart.total);
    console.log('Cart count:', cart.count);
  };
});
```

**Fix Common Cart Issues**
```javascript
// Clear corrupted cart data
function resetCart() {
  next.clearCart();
  localStorage.removeItem('next-cart-data');
  sessionStorage.removeItem('next-cart-data');
  console.log('Cart reset completed');
}

// Handle quantity validation
next.on('cart:quantity-invalid', function(data) {
  console.warn('Invalid quantity:', data);
  // Automatically fix invalid quantities
  if (data.quantity < 1) {
    next.updateCartQuantity(data.itemId, 1);
  } else if (data.quantity > data.maxQuantity) {
    next.updateCartQuantity(data.itemId, data.maxQuantity);
  }
});

// Sync cart across tabs
window.addEventListener('storage', function(e) {
  if (e.key === 'next-cart-data') {
    next.syncCartState();
  }
});
```

### Problem: Display Elements Not Updating

#### Symptoms
- Data attributes not showing values
- Static placeholder text remains
- DOM not reflecting cart changes

#### Solutions

**Check Element Selection**
```javascript
// Debug data attribute rendering
function debugDataAttributes() {
  const elements = document.querySelectorAll('[data-next-display]');
  console.log(`Found ${elements.length} data-next-display elements`);
  
  elements.forEach((element, index) => {
    const attribute = element.getAttribute('data-next-display');
    const currentValue = element.textContent;
    console.log(`Element ${index}: ${attribute} = "${currentValue}"`);
    
    // Test data path resolution
    try {
      const resolvedValue = next.resolveDataPath(attribute);
      console.log(`Resolved value: ${resolvedValue}`);
    } catch (error) {
      console.error(`Error resolving ${attribute}:`, error);
    }
  });
}

window.nextReady.push(debugDataAttributes);
```

**Force Display Updates**
```javascript
// Manually trigger display updates
function refreshDisplayElements() {
  const elements = document.querySelectorAll('[data-next-display]');
  elements.forEach(element => {
    const path = element.getAttribute('data-next-display');
    const value = next.getDisplayValue(path);
    element.textContent = value;
  });
  console.log('Display elements refreshed');
}

// Auto-refresh on cart changes
next.on('cart:updated', refreshDisplayElements);
```

## Checkout and Payment Issues

### Problem: Checkout Not Working

#### Symptoms
- Checkout button doesn't respond
- Payment forms don't appear
- Checkout process stalls

#### Solutions

**Verify Checkout Configuration**
```javascript
window.nextReady.push(function() {
  // Check checkout availability
  const checkoutConfig = next.getCheckoutConfig();
  console.log('Checkout config:', checkoutConfig);
  
  if (!checkoutConfig.enabled) {
    console.error('Checkout is disabled');
    return;
  }
  
  // Test payment methods
  const paymentMethods = next.getAvailablePaymentMethods();
  console.log('Available payment methods:', paymentMethods);
  
  if (paymentMethods.length === 0) {
    console.error('No payment methods available');
  }
});
```

**Debug Checkout Flow**
```javascript
// Monitor checkout events
window.nextReady.push(function() {
  next.on('checkout:started', function(data) {
    console.log('Checkout started:', data);
  });
  
  next.on('checkout:form-validation', function(data) {
    console.log('Form validation:', data);
    if (!data.valid) {
      console.error('Form validation errors:', data.errors);
    }
  });
  
  next.on('checkout:payment-processing', function(data) {
    console.log('Payment processing:', data);
  });
  
  next.on('checkout:error', function(error) {
    console.error('Checkout error:', error);
    // Implement error recovery
    handleCheckoutError(error);
  });
});

function handleCheckoutError(error) {
  switch (error.type) {
    case 'validation':
      // Show validation errors
      showValidationErrors(error.fields);
      break;
    case 'payment':
      // Show payment error message
      showPaymentError(error.message);
      break;
    case 'network':
      // Retry checkout
      setTimeout(() => {
        next.retryCheckout();
      }, 2000);
      break;
  }
}
```

### Problem: Payment Processing Failures

#### Symptoms
- Payment methods not loading
- Card processing errors
- Express checkout not working

#### Solutions

**Test Payment Gateway Connectivity**
```javascript
// Test Spreedly connectivity
function testPaymentGateway() {
  return fetch('https://core.spreedly.com/v1/payment_methods.json', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': 'Basic ' + btoa(next.getSpreedlyKey() + ':')
    },
    body: JSON.stringify({
      payment_method: {
        credit_card: {
          number: '4111111111111111',
          verification_value: '123',
          month: '12',
          year: '2025',
          first_name: 'Test',
          last_name: 'User'
        }
      }
    })
  })
  .then(response => response.json())
  .then(data => {
    if (data.transaction) {
      console.log('✅ Payment gateway connectivity: OK');
    } else {
      console.error('❌ Payment gateway test failed:', data);
    }
  })
  .catch(error => {
    console.error('❌ Payment gateway connectivity error:', error);
  });
}
```

**Fix Express Checkout Issues**
```javascript
// Debug express checkout
window.nextReady.push(function() {
  // Check express checkout configuration
  const expressConfig = next.getExpressCheckoutConfig();
  console.log('Express checkout config:', expressConfig);
  
  // Test PayPal availability
  if (window.paypal) {
    console.log('✅ PayPal SDK loaded');
  } else {
    console.error('❌ PayPal SDK not loaded');
    // Load PayPal SDK
    loadPayPalSDK();
  }
  
  // Test Apple Pay availability
  if (window.ApplePaySession) {
    const canMakePayments = ApplePaySession.canMakePayments();
    console.log('Apple Pay available:', canMakePayments);
  } else {
    console.log('Apple Pay not available on this device');
  }
});

function loadPayPalSDK() {
  const script = document.createElement('script');
  script.src = 'https://www.paypal.com/sdk/js?client-id=your-paypal-client-id';
  script.onload = () => {
    console.log('PayPal SDK loaded');
    next.initializeExpressCheckout();
  };
  document.head.appendChild(script);
}
```

## Performance Issues

### Problem: Slow Loading

#### Symptoms
- Long initial load times
- Delayed cart updates
- Slow checkout process

#### Solutions

**Enable Performance Optimizations**
```javascript
window.nextConfig = {
  apiKey: 'your-api-key',
  performance: {
    preloadCampaign: true,    // Preload campaign data
    lazyLoad: ['analytics'],  // Lazy load non-critical features
    cacheExpiry: 3600,        // Cache for 1 hour
    debounceCartUpdates: 300, // Debounce cart updates
    enableCompression: true   // Enable gzip compression
  }
};
```

**Monitor Performance Metrics**
```javascript
window.nextReady.push(function() {
  // Track loading performance
  const performanceMonitor = {
    startTime: performance.now(),
    
    trackEvent: function(eventName) {
      const currentTime = performance.now();
      const elapsed = currentTime - this.startTime;
      console.log(`[PERF] ${eventName}: ${elapsed.toFixed(2)}ms`);
      
      // Alert on slow operations
      if (elapsed > 2000) {
        console.warn(`Slow operation detected: ${eventName}`);
      }
    }
  };
  
  next.on('cart:loaded', () => performanceMonitor.trackEvent('Cart Loaded'));
  next.on('checkout:initialized', () => performanceMonitor.trackEvent('Checkout Initialized'));
  next.on('api:response', (data) => {
    performanceMonitor.trackEvent(`API Response: ${data.endpoint}`);
  });
});
```

### Problem: Memory Leaks

#### Symptoms
- Increasing memory usage
- Browser becoming slow
- Tab crashes

#### Solutions

**Implement Proper Cleanup**
```javascript
// Clean up event listeners
window.addEventListener('beforeunload', function() {
  // Remove all SDK event listeners
  next.removeAllListeners();
  
  // Clear intervals and timeouts
  clearInterval(window.nextPollingInterval);
  clearTimeout(window.nextUpdateTimeout);
  
  // Clear large objects
  window.nextCachedData = null;
});

// Monitor memory usage
function monitorMemoryUsage() {
  if (!performance.memory) return;
  
  const memory = performance.memory;
  const usedMB = Math.round(memory.usedJSHeapSize / 1048576);
  const limitMB = Math.round(memory.jsHeapSizeLimit / 1048576);
  
  console.log(`Memory usage: ${usedMB}MB / ${limitMB}MB`);
  
  if (usedMB / limitMB > 0.8) {
    console.warn('High memory usage detected');
    // Trigger garbage collection
    triggerGarbageCollection();
  }
}

// Check memory every 30 seconds
setInterval(monitorMemoryUsage, 30000);
```

## Browser Compatibility Issues

### Problem: Browser-Specific Errors

#### Symptoms
- Works in some browsers but not others
- Different behavior across browsers
- Console errors in specific browsers

#### Solutions

**Browser Detection and Polyfills**
```javascript
// Detect browser capabilities
function checkBrowserSupport() {
  const support = {
    es6: typeof Symbol !== 'undefined',
    fetch: typeof fetch !== 'undefined',
    localStorage: typeof Storage !== 'undefined',
    customElements: typeof customElements !== 'undefined'
  };
  
  console.log('Browser support:', support);
  
  // Load polyfills if needed
  if (!support.fetch) {
    loadPolyfill('https://cdn.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.js');
  }
  
  if (!support.es6) {
    loadPolyfill('https://cdn.jsdelivr.net/npm/core-js-bundle@3.25.2/minified.js');
  }
  
  return support;
}

function loadPolyfill(url) {
  const script = document.createElement('script');
  script.src = url;
  script.async = false;
  document.head.appendChild(script);
}

// Check support before SDK loads
checkBrowserSupport();
```

**Internet Explorer Compatibility**
```html
<!-- IE compatibility -->
<!--[if IE]>
<script src="https://cdn.jsdelivr.net/npm/core-js-bundle@3.25.2/minified.js"></script>
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.js"></script>
<![endif]-->

<script>
// IE-specific workarounds
if (navigator.userAgent.indexOf('MSIE') > -1 || navigator.userAgent.indexOf('Trident') > -1) {
  window.nextConfig = Object.assign(window.nextConfig || {}, {
    compatibility: {
      ie: true,
      disableES6: true,
      polyfillPromises: true
    }
  });
}
</script>
```

## Development and Debugging Tools

### Debug Console Commands

```javascript
// Add debug commands to browser console
window.nextReady.push(function() {
  // Debug utilities
  window.nextDebug = {
    // Get current state
    getState: () => next.getState(),
    
    // Get cart data
    getCart: () => next.getCartData(),
    
    // Get configuration
    getConfig: () => next.getConfig(),
    
    // Test API connectivity
    testAPI: () => next.ping(),
    
    // Clear all data
    reset: () => {
      next.clearCart();
      localStorage.clear();
      sessionStorage.clear();
      location.reload();
    },
    
    // Simulate cart operations
    addTestItem: () => next.addToCart(1, 1),
    
    // Export debug report
    exportReport: () => {
      const report = {
        timestamp: new Date().toISOString(),
        userAgent: navigator.userAgent,
        url: location.href,
        config: next.getConfig(),
        cart: next.getCartData(),
        errors: next.getErrorLog(),
        performance: next.getPerformanceMetrics()
      };
      
      const blob = new Blob([JSON.stringify(report, null, 2)], {
        type: 'application/json'
      });
      
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `next-commerce-debug-${Date.now()}.json`;
      a.click();
    }
  };
  
  console.log('Debug utilities available via window.nextDebug');
});
```

### Error Logging and Reporting

```javascript
// Comprehensive error logging
window.nextReady.push(function() {
  const errorLogger = {
    errors: [],
    
    log: function(error, context) {
      const errorEntry = {
        timestamp: new Date().toISOString(),
        message: error.message,
        stack: error.stack,
        context: context,
        url: location.href,
        userAgent: navigator.userAgent
      };
      
      this.errors.push(errorEntry);
      console.error('SDK Error:', errorEntry);
      
      // Send to error reporting service
      this.reportError(errorEntry);
    },
    
    reportError: function(error) {
      // Example: Send to your error reporting service
      fetch('/api/errors', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(error)
      }).catch(err => {
        console.warn('Failed to report error:', err);
      });
    },
    
    getErrorReport: function() {
      return {
        errorCount: this.errors.length,
        errors: this.errors.slice(-10), // Last 10 errors
        summary: this.generateSummary()
      };
    },
    
    generateSummary: function() {
      const errorTypes = {};
      this.errors.forEach(error => {
        const type = error.context || 'unknown';
        errorTypes[type] = (errorTypes[type] || 0) + 1;
      });
      return errorTypes;
    }
  };
  
  // Capture all SDK errors
  next.on('error', (error) => errorLogger.log(error, 'sdk'));
  
  // Capture global errors
  window.addEventListener('error', (event) => {
    if (event.filename && event.filename.includes('next-commerce')) {
      errorLogger.log(event.error, 'global');
    }
  });
  
  // Make error logger available globally
  window.nextErrorLogger = errorLogger;
});
```

## Prevention and Best Practices

### Proactive Monitoring

```javascript
// Set up proactive monitoring
window.nextReady.push(function() {
  // Health check every 5 minutes
  setInterval(() => {
    next.ping().catch(error => {
      console.warn('Health check failed:', error);
      // Attempt reconnection
      next.reconnect();
    });
  }, 300000);
  
  // Monitor cart state consistency
  setInterval(() => {
    const cartData = next.getCartData();
    if (cartData.items.length !== cartData.count) {
      console.warn('Cart count inconsistency detected');
      next.recalculateCart();
    }
  }, 60000);
  
  // Performance budget monitoring
  next.on('api:slow-response', (data) => {
    if (data.responseTime > 5000) {
      console.warn('Extremely slow API response:', data);
      // Consider switching to cached data
      next.enableOfflineMode();
    }
  });
});
```

### Configuration Validation

```javascript
// Validate configuration on startup
function validateConfiguration() {
  const config = window.nextConfig;
  const warnings = [];
  const errors = [];
  
  // Required fields
  if (!config.apiKey) {
    errors.push('Missing required apiKey');
  }
  
  // Performance recommendations
  if (!config.performance?.preloadCampaign) {
    warnings.push('Consider enabling preloadCampaign for better performance');
  }
  
  if (!config.analytics?.enabled) {
    warnings.push('Analytics tracking is disabled');
  }
  
  // Security checks
  if (config.debug && location.hostname !== 'localhost') {
    warnings.push('Debug mode should not be enabled in production');
  }
  
  // Report issues
  if (errors.length > 0) {
    console.error('Configuration errors:', errors);
    throw new Error('Invalid configuration: ' + errors.join(', '));
  }
  
  if (warnings.length > 0) {
    console.warn('Configuration warnings:', warnings);
  }
  
  console.log('✅ Configuration validation passed');
}

// Run validation before SDK loads
if (window.nextConfig) {
  validateConfiguration();
}
```

## Getting Help

### Before Contacting Support

1. **Check this troubleshooting guide** - Most issues have solutions here
2. **Enable debug mode** - Add `?debug=true` to your URL
3. **Check browser console** - Look for error messages and warnings
4. **Test in different browsers** - Verify if it's browser-specific
5. **Try in incognito/private mode** - Rule out extension conflicts

### What to Include in Support Requests

```javascript
// Generate support information
function generateSupportInfo() {
  const info = {
    // Environment
    url: location.href,
    userAgent: navigator.userAgent,
    timestamp: new Date().toISOString(),
    
    // SDK information
    sdkVersion: next.getVersion(),
    sdkMode: next.isDebugMode() ? 'debug' : 'production',
    
    // Configuration (sanitized)
    config: sanitizeConfig(next.getConfig()),
    
    // Current state
    cartData: next.getCartData(),
    
    // Recent errors
    errors: window.nextErrorLogger?.getErrorReport(),
    
    // Performance metrics
    performance: next.getPerformanceMetrics(),
    
    // Network information
    connection: navigator.connection ? {
      effectiveType: navigator.connection.effectiveType,
      downlink: navigator.connection.downlink
    } : null
  };
  
  return info;
}

function sanitizeConfig(config) {
  // Remove sensitive information
  const sanitized = { ...config };
  if (sanitized.apiKey) {
    sanitized.apiKey = sanitized.apiKey.substring(0, 8) + '...';
  }
  return sanitized;
}

// Make available for support
window.generateSupportInfo = generateSupportInfo;
```

### Emergency Procedures

```javascript
// Emergency recovery procedures
window.nextEmergency = {
  // Complete reset
  fullReset: function() {
    localStorage.clear();
    sessionStorage.clear();
    next.clearCart();
    location.reload();
  },
  
  // Safe mode (minimal functionality)
  safeMode: function() {
    window.nextConfig = {
      apiKey: window.nextConfig.apiKey,
      debug: true,
      performance: {
        preloadCampaign: false,
        lazyLoad: ['analytics', 'expressCheckout']
      }
    };
    location.reload();
  },
  
  // Offline mode
  offlineMode: function() {
    next.enableOfflineMode();
    console.log('Offline mode enabled - using cached data only');
  }
};
```

## Related Documentation

- [Performance Optimization](../optimization/performance/) - Performance-related issues
- [Configuration](../../configuration/) - Configuration troubleshooting
- [Migration Guide](../migration/) - Migration-specific problems
- [Analytics](../../javascript-api/analytics/) - Analytics and tracking issues
