!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).NextCommerce={})}(this,function(t){"use strict";var e=Object.defineProperty,i=Object.defineProperties,n=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,d=Reflect.get,l=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,c=(t,e)=>{for(var i in e||(e={}))r.call(e,i)&&l(t,i,e[i]);if(s)for(var i of s(e))o.call(e,i)&&l(t,i,e[i]);return t},u=(t,e)=>i(t,n(e)),h=(t,e)=>{var i={};for(var n in t)r.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&s)for(var n of s(t))e.indexOf(n)<0&&o.call(t,n)&&(i[n]=t[n]);return i},p=(t,e,i)=>d(a(t),i,e),m=(t,e,i)=>new Promise((n,s)=>{var a=t=>{try{o(i.next(t))}catch(e){s(e)}},r=t=>{try{o(i.throw(t))}catch(e){s(e)}},o=t=>t.done?n(t.value):Promise.resolve(t.value).then(a,r);o((i=i.apply(t,e)).next())});const f=t=>{let e;const i=new Set,n=(t,n)=>{const s="function"==typeof t?t(e):t;if(!Object.is(s,e)){const t=e;e=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},e,s),i.forEach(i=>i(e,t))}},s=()=>e,a={setState:n,getState:s,getInitialState:()=>r,subscribe:t=>(i.add(t),()=>i.delete(t)),destroy:()=>{i.clear()}},r=e=t(n,s,a);return a};function g(t){return t&&t.t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v,$,y={exports:{}},b={};function x(){if(v)return b;v=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),r=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),u=Symbol.for("react.activity"),h=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function g(t,e,i){this.props=t,this.context=e,this.refs=f,this.updater=i||p}function $(){}function y(t,e,i){this.props=t,this.context=e,this.refs=f,this.updater=i||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},$.prototype=g.prototype;var x=y.prototype=new $;x.constructor=y,m(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray;function _(){}var k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(e,i,n){var s=n.ref;return{$$typeof:t,type:e,key:i,ref:void 0!==s?s:null,props:n}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===t}var E=/\/+/g;function I(t,e){return"object"==typeof t&&null!==t&&null!=t.key?(i=""+t.key,n={"=":"=0",":":"=2"},"$"+i.replace(/[=:]/g,function(t){return n[t]})):e.toString(36);var i,n}function T(i,n,s,a,r){var o=typeof i;"undefined"!==o&&"boolean"!==o||(i=null);var d,l,u=!1;if(null===i)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(i.$$typeof){case t:case e:u=!0;break;case c:return T((u=i.p)(i._),n,s,a,r)}}if(u)return r=r(i),u=""===a?"."+I(i,0):a,w(r)?(s="",null!=u&&(s=u.replace(E,"$&/")+"/"),T(r,n,s,"",function(t){return t})):null!=r&&(P(r)&&(d=r,l=s+(null==r.key||i&&i.key===r.key?"":(""+r.key).replace(E,"$&/")+"/")+u,r=C(d.type,l,d.props)),n.push(r)),1;u=0;var p,m=""===a?".":a+":";if(w(i))for(var f=0;f<i.length;f++)u+=T(a=i[f],n,s,o=m+I(a,f),r);else if("function"==typeof(f=null===(p=i)||"object"!=typeof p?null:"function"==typeof(p=h&&p[h]||p["@@iterator"])?p:null))for(i=f.call(i),f=0;!(a=i.next()).done;)u+=T(a=a.value,n,s,o=m+I(a,f++),r);else if("object"===o){if("function"==typeof i.then)return T(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"==typeof t.status?t.then(_,_):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(i),n,s,a,r);throw n=String(i),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(i).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(t,e,i){if(null==t)return t;var n=[],s=0;return T(t,n,"","",function(t){return e.call(i,t,s++)}),n}function M(t){if(-1===t.k){var e=t.q;(e=e()).then(function(e){0!==t.k&&-1!==t.k||(t.k=1,t.q=e)},function(e){0!==t.k&&-1!==t.k||(t.k=2,t.q=e)}),-1===t.k&&(t.k=0,t.q=e)}if(1===t.k)return t.q.default;throw t.q}var L="function"==typeof reportError?reportError:function(t){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof t&&null!==t&&"string"==typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",t)},F={map:A,forEach:function(t,e,i){A(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return A(t,function(){e++}),e},toArray:function(t){return A(t,function(t){return t})||[]},only:function(t){if(!P(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};return b.Activity=u,b.Children=F,b.Component=g,b.Fragment=i,b.Profiler=s,b.PureComponent=y,b.StrictMode=n,b.Suspense=d,b.nt=k,b.rt={__proto__:null,c:function(t){return k.H.useMemoCache(t)}},b.cache=function(t){return function(){return t.apply(null,arguments)}},b.cacheSignal=function(){return null},b.cloneElement=function(t,e,i){if(null==t)throw Error("The argument must be a React element, but you passed "+t+".");var n=m({},t.props),s=t.key;if(null!=e)for(a in void 0!==e.key&&(s=""+e.key),e)!S.call(e,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===e.ref||(n[a]=e[a]);var a=arguments.length-2;if(1===a)n.children=i;else if(1<a){for(var r=Array(a),o=0;o<a;o++)r[o]=arguments[o+2];n.children=r}return C(t.type,s,n)},b.createContext=function(t){return(t={$$typeof:r,ot:t,dt:t,ct:0,Provider:null,Consumer:null}).Provider=t,t.Consumer={$$typeof:a,ut:t},t},b.createElement=function(t,e,i){var n,s={},a=null;if(null!=e)for(n in void 0!==e.key&&(a=""+e.key),e)S.call(e,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(s[n]=e[n]);var r=arguments.length-2;if(1===r)s.children=i;else if(1<r){for(var o=Array(r),d=0;d<r;d++)o[d]=arguments[d+2];s.children=o}if(t&&t.defaultProps)for(n in r=t.defaultProps)void 0===s[n]&&(s[n]=r[n]);return C(t,a,s)},b.createRef=function(){return{current:null}},b.forwardRef=function(t){return{$$typeof:o,render:t}},b.isValidElement=P,b.lazy=function(t){return{$$typeof:c,_:{k:-1,q:t},p:M}},b.memo=function(t,e){return{$$typeof:l,type:t,compare:void 0===e?null:e}},b.startTransition=function(t){var e=k.T,i={};k.T=i;try{var n=t(),s=k.S;null!==s&&s(i,n),"object"==typeof n&&null!==n&&"function"==typeof n.then&&n.then(_,L)}catch(a){L(a)}finally{null!==e&&null!==i.types&&(e.types=i.types),k.T=e}},b.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},b.use=function(t){return k.H.use(t)},b.useActionState=function(t,e,i){return k.H.useActionState(t,e,i)},b.useCallback=function(t,e){return k.H.useCallback(t,e)},b.useContext=function(t){return k.H.useContext(t)},b.useDebugValue=function(){},b.useDeferredValue=function(t,e){return k.H.useDeferredValue(t,e)},b.useEffect=function(t,e){return k.H.useEffect(t,e)},b.useEffectEvent=function(t){return k.H.useEffectEvent(t)},b.useId=function(){return k.H.useId()},b.useImperativeHandle=function(t,e,i){return k.H.useImperativeHandle(t,e,i)},b.useInsertionEffect=function(t,e){return k.H.useInsertionEffect(t,e)},b.useLayoutEffect=function(t,e){return k.H.useLayoutEffect(t,e)},b.useMemo=function(t,e){return k.H.useMemo(t,e)},b.useOptimistic=function(t,e){return k.H.useOptimistic(t,e)},b.useReducer=function(t,e,i){return k.H.useReducer(t,e,i)},b.useRef=function(t){return k.H.useRef(t)},b.useState=function(t){return k.H.useState(t)},b.useSyncExternalStore=function(t,e,i){return k.H.useSyncExternalStore(t,e,i)},b.useTransition=function(){return k.H.useTransition()},b.version="19.2.0",b}function w(){return $||($=1,y.exports=x()),y.exports}const _=g(w());var k,S,C,P,E={exports:{}},I={},T={exports:{}},A={};const M=g((P||(P=1,E.exports=function(){if(C)return I;C=1;var t=w(),e=(S||(S=1,T.exports=function(){if(k)return A;k=1;var t=w(),e="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},i=t.useState,n=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function r(t){var i=t.getSnapshot;t=t.value;try{var n=i();return!e(t,n)}catch(s){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var o=e(),d=i({inst:{value:o,getSnapshot:e}}),l=d[0].inst,c=d[1];return s(function(){l.value=o,l.getSnapshot=e,r(l)&&c({inst:l})},[t,o,e]),n(function(){return r(l)&&c({inst:l}),t(function(){r(l)&&c({inst:l})})},[t]),a(o),o};return A.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:o,A}()),T.exports),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},n=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,r=t.useMemo,o=t.useDebugValue;return I.useSyncExternalStoreWithSelector=function(t,e,d,l,c){var u=s(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=r(function(){function t(t){if(!a){if(a=!0,n=t,t=l(t),void 0!==c&&h.hasValue){var e=h.value;if(c(e,t))return s=e}return s=t}if(e=s,i(n,t))return e;var r=l(t);return void 0!==c&&c(e,r)?(n=t,e):(n=t,s=r)}var n,s,a=!1,r=void 0===d?null:d;return[function(){return t(e())},null===r?void 0:function(){return t(r())}]},[e,d,l,c]);var p=n(t,u[0],u[1]);return a(function(){h.hasValue=!0,h.value=p},[p]),o(p),p},I}()),E.exports)),L={},{useDebugValue:F}=_,{useSyncExternalStoreWithSelector:D}=M;let N=!1;const U=t=>t,O=t=>{const e="function"==typeof t?(t=>t?f(t):f)(t):t,i=(t,i)=>function(t,e=U,i){"production"!==(L?"production":void 0)&&i&&!N&&(N=!0);const n=D(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,i);return F(n),n}(e,t,i);return Object.assign(i,e),i},z=t=>t?O(t):O,R={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},q=new Map,j=t=>{const e=q.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([t,e])=>[t,e.getState()])):{}},H=(t,e)=>{let i;try{i=JSON.parse(t)}catch(n){}void 0!==i&&e(i)},B=t=>(e,i,n)=>{const s=n.subscribe;return n.subscribe=(t,e,i)=>{let a=t;if(e){const s=(null==i?void 0:i.equalityFn)||Object.is;let r=t(n.getState());a=i=>{const n=t(i);if(!s(r,n)){const t=r;e(r=n,t)}},(null==i?void 0:i.fireImmediately)&&e(r,r)}return s(a)},t(e,i,n)};function V(t,e){let i;try{i=t()}catch(n){return}return{getItem:t=>{var e;const n=t=>null===t?null:JSON.parse(t,void 0),s=null!=(e=i.getItem(t))?e:null;return s instanceof Promise?s.then(n):n(s)},setItem:(t,e)=>i.setItem(t,JSON.stringify(e,void 0)),removeItem:t=>i.removeItem(t)}}const G=t=>e=>{try{const i=t(e);return i instanceof Promise?i:{then:t=>G(t)(i),catch(t){return this}}}catch(i){return{then(t){return this},catch:t=>G(t)(i)}}},K=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((t,e)=>(i,n,s)=>{let a=c({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:t=>t,version:0,merge:(t,e)=>c(c({},e),t)},e),r=!1;const o=new Set,d=new Set;let l;try{l=a.getStorage()}catch(v){}if(!l)return t((...t)=>{i(...t)},n,s);const u=G(a.serialize),h=()=>{const t=a.partialize(c({},n()));let e;const i=u({state:t,version:a.version}).then(t=>l.setItem(a.name,t)).catch(t=>{e=t});if(e)throw e;return i},p=s.setState;s.setState=(t,e)=>{p(t,e),h()};const m=t((...t)=>{i(...t),h()},n,s);let f;const g=()=>{var t;if(!l)return;r=!1,o.forEach(t=>t(n()));const e=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,n()))||void 0;return G(l.getItem.bind(l))(a.name).then(t=>{if(t)return a.deserialize(t)}).then(t=>{if(t){if("number"!=typeof t.version||t.version===a.version)return t.state;if(a.migrate)return a.migrate(t.state,t.version)}}).then(t=>{var e;return f=a.merge(t,null!=(e=n())?e:m),i(f,!0),h()}).then(()=>{null==e||e(f,void 0),r=!0,d.forEach(t=>t(f))}).catch(t=>{null==e||e(void 0,t)})};return s.persist={setOptions:t=>{a=c(c({},a),t),t.getStorage&&(l=t.getStorage())},clearStorage:()=>{null==l||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>r,onHydrate:t=>(o.add(t),()=>{o.delete(t)}),onFinishHydration:t=>(d.add(t),()=>{d.delete(t)})},g(),f||m})(t,e):((t,e)=>(i,n,s)=>{let a=c({storage:V(()=>localStorage),partialize:t=>t,version:0,merge:(t,e)=>c(c({},e),t)},e),r=!1;const o=new Set,d=new Set;let l=a.storage;if(!l)return t((...t)=>{i(...t)},n,s);const u=()=>{const t=a.partialize(c({},n()));return l.setItem(a.name,{state:t,version:a.version})},h=s.setState;s.setState=(t,e)=>{h(t,e),u()};const p=t((...t)=>{i(...t),u()},n,s);let m;s.getInitialState=()=>p;const f=()=>{var t,e;if(!l)return;r=!1,o.forEach(t=>{var e;return t(null!=(e=n())?e:p)});const s=(null==(e=a.onRehydrateStorage)?void 0:e.call(a,null!=(t=n())?t:p))||void 0;return G(l.getItem.bind(l))(a.name).then(t=>{if(t){if("number"!=typeof t.version||t.version===a.version)return[!1,t.state];if(a.migrate)return[!0,a.migrate(t.state,t.version)]}return[!1,void 0]}).then(t=>{var e;const[s,r]=t;if(m=a.merge(r,null!=(e=n())?e:p),i(m,!0),s)return u()}).then(()=>{null==s||s(m,void 0),m=n(),r=!0,d.forEach(t=>t(m))}).catch(t=>{null==s||s(void 0,t)})};return s.persist={setOptions:t=>{a=c(c({},a),t),t.storage&&(l=t.storage)},clearStorage:()=>{null==l||l.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>f(),hasHydrated:()=>r,onHydrate:t=>(o.add(t),()=>{o.delete(t)}),onFinishHydration:t=>(d.add(t),()=>{d.delete(t)})},a.skipHydration||f(),m||p})(t,e);var J=(t=>(t[t.ERROR=0]="ERROR",t[t.WARN=1]="WARN",t[t.INFO=2]="INFO",t[t.DEBUG=3]="DEBUG",t))(J||{});const Z=()=>{if("undefined"==typeof window)return!1;const t=new URLSearchParams(window.location.search);return"true"===t.get("debug")||"true"===t.get("debugger")},W=class t{constructor(t){this.context=t}static setLogLevel(e){t.globalLevel=e}static getLogLevel(){return t.globalLevel}error(e,...i){t.globalLevel}warn(e,...i){Z()&&t.globalLevel}info(e,...i){Z()&&t.globalLevel}debug(e,...i){Z()&&t.globalLevel}};W.globalLevel=2;let Q=W;class Y extends Q{constructor(t){super(t)}warn(t,...e){Z()&&super.warn(t,...e)}info(t,...e){Z()&&super.info(t,...e)}debug(t,...e){Z()&&super.debug(t,...e)}}function X(t){return new Y(t)}X("SDK");class tt{constructor(t={}){var e,i,n;this.logger=X("StorageManager"),this.storage=null!=(e=t.storage)?e:sessionStorage,this.serialize=null!=(i=t.serialize)?i:JSON.stringify,this.deserialize=null!=(n=t.deserialize)?n:JSON.parse}set(t,e){try{const i=this.serialize(e);return this.storage.setItem(t,i),this.logger.debug(`Stored value for key: ${t}`),!0}catch(i){return this.logger.error(`Failed to store value for key ${t}:`,i),!1}}get(t,e){try{const i=this.storage.getItem(t);if(null===i)return this.logger.debug(`No value found for key: ${t}`),e;const n=this.deserialize(i);return this.logger.debug(`Retrieved value for key: ${t}`),n}catch(i){return this.logger.error(`Failed to retrieve value for key ${t}:`,i),e}}remove(t){try{return this.storage.removeItem(t),this.logger.debug(`Removed value for key: ${t}`),!0}catch(e){return this.logger.error(`Failed to remove value for key ${t}:`,e),!1}}clear(){try{return this.storage.clear(),this.logger.debug("Cleared all storage"),!0}catch(t){return this.logger.error("Failed to clear storage:",t),!1}}has(t){return null!==this.storage.getItem(t)}keys(){const t=[];for(let e=0;e<this.storage.length;e++){const i=this.storage.key(e);null!==i&&t.push(i)}return t}size(){let t=0;for(let e=0;e<this.storage.length;e++){const i=this.storage.key(e);if(null!==i){const e=this.storage.getItem(i);null!==e&&(t+=i.length+e.length)}}return t}}const et=new tt({storage:sessionStorage});new tt({storage:localStorage});const it="next-cart-state",nt="next-campaign-cache";class st{constructor(){this.listeners=new Map}static getInstance(){return st.instance||(st.instance=new st),st.instance}on(t,e){this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)}emit(t,e){const i=this.listeners.get(t);i&&i.forEach(t=>{try{t(e)}catch(i){}})}off(t,e){const i=this.listeners.get(t);i&&i.delete(e)}removeAllListeners(t){t?this.listeners.delete(t):this.listeners.clear()}}const at=Object.freeze(Object.defineProperty({__proto__:null,EventBus:st},Symbol.toStringTag,{value:"Module"})),rt=6e5,ot=X("CampaignStore"),dt={data:null,packages:[],isLoading:!1,error:null},lt=z((t,e)=>u(c({},dt),{processPackagesWithVariants:t=>t.map(t=>{if(t.product_id&&t.product_variant_id){const e={id:t.product_id,name:t.product_name||"",variant:{id:t.product_variant_id,name:t.product_variant_name||"",attributes:t.product_variant_attribute_values||[],sku:t.product_sku},purchase_availability:t.product_purchase_availability||"available",inventory_availability:t.product_inventory_availability||"untracked"};return u(c({},t),{product:e})}return t}),loadCampaign:i=>m(null,null,function*(){t({isLoading:!0,error:null});try{const{useConfigStore:n}=yield Promise.resolve().then(()=>$t),s=n.getState(),a=s.selectedCurrency||s.detectedCurrency||"USD",r=Date.now(),o=`${nt}_${a}`,d=`${nt}_USD`,l=new URLSearchParams(window.location.search).get("currency"),h=l&&l===a;let p=et.get(o);if(p||"USD"===a||h||(p=et.get(d),p&&ot.info(`No cache for ${a}, checking USD cache as potential fallback`)),p&&p.apiKey===i&&r-p.timestamp<rt&&(!h||p.campaign.currency===a)){const i=p.campaign.currency;if(ot.info(`🎯 Using cached campaign data for ${i} (expires in `+Math.round((rt-(r-p.timestamp))/1e3)+" seconds)"),i!==a){ot.warn(`⚠️ Requested ${a} but using cached ${i} (fallback)`),s.updateConfig({selectedCurrency:i,currencyFallbackOccurred:!0}),sessionStorage.setItem("next_selected_currency",i);const{EventBus:t}=yield Promise.resolve().then(()=>at);t.getInstance().emit("currency:fallback",{requested:a,actual:i,reason:"cached"})}p.campaign.payment_env_key&&s.setSpreedlyEnvironmentKey(p.campaign.payment_env_key);const n=e().processPackagesWithVariants(p.campaign.packages);return void t({data:u(c({},p.campaign),{packages:n}),packages:n,isLoading:!1,error:null,isFromCache:!0,cacheAge:r-p.timestamp})}h&&(null==p?void 0:p.campaign.currency)!==a&&ot.info(`🔄 URL parameter forcing fresh fetch for currency: ${a} (cache had ${(null==p?void 0:p.campaign.currency)||"none"})`),ot.info(`🌐 Fetching campaign data from API with currency: ${a}...`);const{ApiClient:m}=yield Promise.resolve().then(()=>jt),f=new m(i),g=yield f.getCampaigns(a);if(!g)throw new Error("Campaign data not found");const v=g.currency||a;if(v!==a){ot.warn(`⚠️ API Fallback: Requested ${a}, received ${v}`),s.updateConfig({selectedCurrency:v,currencyFallbackOccurred:!0}),sessionStorage.setItem("next_selected_currency",v);const{EventBus:t}=yield Promise.resolve().then(()=>at);t.getInstance().emit("currency:fallback",{requested:a,actual:v,reason:"api"})}else s.updateConfig({currencyFallbackOccurred:!1});g.payment_env_key&&(s.setSpreedlyEnvironmentKey(g.payment_env_key),ot.info("💳 Spreedly environment key updated from campaign API: "+g.payment_env_key));const $=e().processPackagesWithVariants(g.packages),y=`${nt}_${v}`,b={campaign:u(c({},g),{packages:$}),timestamp:r,apiKey:i};et.set(y,b),ot.info(`💾 Campaign data cached for ${v} (10 minutes)`),v!==a&&(sessionStorage.removeItem(o),ot.debug(`Cleared invalid cache for ${a}`)),t({data:u(c({},g),{packages:$}),packages:$,isLoading:!1,error:null,isFromCache:!1,cacheAge:0});const{useCartStore:x}=yield Promise.resolve().then(()=>It),w=x.getState();!w.isEmpty&&w.lastCurrency&&w.lastCurrency!==v?(ot.info("Currency changed, refreshing cart prices..."),yield w.refreshItemPrices(),w.setLastCurrency(v)):w.lastCurrency||w.setLastCurrency(v)}catch(n){const e=n instanceof Error?n.message:"Failed to load campaign";throw t({data:null,packages:[],isLoading:!1,error:e}),ot.error("Campaign load failed:",n),n}}),getPackage:t=>{var i;const{packages:n}=e();return null!=(i=n.find(e=>e.ref_id===t))?i:null},getProduct:t=>e().getPackage(t),setError:e=>{t({error:e})},reset:()=>{t(dt)},clearCache:()=>{try{const t=window.sessionStorage,e=[];for(let i=0;i<t.length;i++){const n=t.key(i);n&&(n.startsWith(nt)||n===nt)&&e.push(n)}e.forEach(t=>{et.remove(t),ot.debug(`Removed cache: ${t}`)}),ot.info(`🗑️ Campaign cache cleared (${e.length} entries removed)`)}catch(t){ot.error("Failed to clear campaign cache:",t),["USD","EUR","GBP","CAD","AUD","JPY","BRL","MXN","INR"].forEach(t=>{et.remove(`${nt}_${t}`)}),et.remove(nt)}},getCacheInfo:()=>{const{useConfigStore:t}=require("./configStore"),e=t.getState(),i=e.selectedCurrency||e.detectedCurrency||"USD",n=`${nt}_${i}`,s=et.get(n);if(!s)return{cached:!1};const a=Date.now(),r=rt-(a-s.timestamp);return{cached:!0,expiresIn:Math.max(0,Math.round(r/1e3)),apiKey:s.apiKey,currency:i}},getVariantsByProductId:t=>{const{packages:i}=e(),n=i.filter(e=>e.product_id===t);if(0===n.length)return null;const s=new Set;n.forEach(t=>{var e;null==(e=t.product_variant_attribute_values)||e.forEach(t=>{s.add(t.code)})});const a=n[0];return{productId:t,productName:a.product_name||"",attributeTypes:Array.from(s),variants:n.map(t=>({variantId:t.product_variant_id||0,variantName:t.product_variant_name||"",packageRefId:t.ref_id,attributes:t.product_variant_attribute_values||[],sku:t.product_sku,price:t.price,availability:{purchase:t.product_purchase_availability||"available",inventory:t.product_inventory_availability||"untracked"}}))}},getAvailableVariantAttributes:(t,i)=>{const n=e().getVariantsByProductId(t);if(!n)return[];const s=new Set;return n.variants.forEach(t=>{const e=t.attributes.find(t=>t.code===i);e&&s.add(e.value)}),Array.from(s).sort()},getPackageByVariantSelection:(t,i)=>{var n;const{packages:s}=e();return null!=(n=s.find(e=>{var n;if(e.product_id!==t)return!1;for(const[t,s]of Object.entries(i))if(!(null==(n=e.product_variant_attribute_values)?void 0:n.some(e=>e.code===t&&e.value===s)))return!1;return!0}))?n:null},getProductVariantsWithPricing:t=>{const{packages:i}=e(),n=i.filter(e=>e.product_id===t);if(0===n.length)return null;const s=new Map,a=new Set;n.forEach(t=>{var e,i;const n=(null==(e=t.product_variant_attribute_values)?void 0:e.map(t=>`${t.code}:${t.value}`).sort().join("|"))||"";null==(i=t.product_variant_attribute_values)||i.forEach(t=>{a.add(t.code)}),s.has(n)||s.set(n,{variantId:t.product_variant_id||0,variantName:t.product_variant_name||"",attributes:t.product_variant_attribute_values||[],sku:t.product_sku,availability:{purchase:t.product_purchase_availability||"available",inventory:t.product_inventory_availability||"untracked"},pricingTiers:[]});const r=t.name.match(/^(Buy \d+|Subscribe)/i),o=r?r[1]:"Standard";s.get(n).pricingTiers.push({packageRefId:t.ref_id,name:t.name,price:t.price,retailPrice:t.price_retail,quantity:t.qty,tierType:o})}),s.forEach(t=>{t.pricingTiers.sort((t,e)=>parseFloat(t.price)-parseFloat(e.price))});const r=n[0];return{productId:t,productName:r.product_name||"",attributeTypes:Array.from(a),variants:s}},getVariantPricingTiers:(t,i)=>{const n=e().getProductVariantsWithPricing(t);if(!n)return[];const s=n.variants.get(i);return s?s.pricingTiers:[]},getLowestPriceForVariant:(t,i)=>{const n=e().getVariantPricingTiers(t,i);return 0===n.length?null:n.reduce((t,e)=>parseFloat(e.price)<parseFloat(t.price)?e:t)}})),ct=Object.freeze(Object.defineProperty({__proto__:null,useCampaignStore:lt},Symbol.toStringTag,{value:"Module"})),ut=new tt({storage:localStorage}),ht=X("ProfileStore"),pt={profiles:new Map,activeProfileId:null,previousProfileId:null,mappingHistory:[],originalCartSnapshot:void 0},mt=z()(K(B((t,e)=>u(c({},pt),{registerProfile:e=>{t(t=>{const i=new Map(t.profiles),n={};return Object.entries(e.packageMappings).forEach(([t,e])=>{n[e]=parseInt(t,10)}),i.set(e.id,u(c({},e),{reverseMapping:n})),ht.info(`Profile "${e.id}" registered with ${Object.keys(e.packageMappings).length} mappings`),{profiles:i}})},activateProfile:i=>{const n=e();n.profiles.has(i)?(t({previousProfileId:n.activeProfileId,activeProfileId:i}),ht.info(`Profile "${i}" activated`)):ht.error(`Cannot activate profile "${i}" - not found`)},deactivateProfile:()=>{const i=e();t({previousProfileId:i.activeProfileId,activeProfileId:null}),ht.info("Profile deactivated")},getMappedPackageId:t=>{const i=e();if(!i.activeProfileId)return t;const n=i.profiles.get(i.activeProfileId);if(!n)return t;const s=n.packageMappings[t];return void 0!==s?(ht.debug(`Mapped package ${t} -> ${s} (profile: ${i.activeProfileId})`),s):t},getOriginalPackageId:t=>{const i=e();if(!i.activeProfileId)return null;const n=i.profiles.get(i.activeProfileId);if(!n)return null;if(n.reverseMapping&&void 0!==n.reverseMapping[t])return n.reverseMapping[t];for(const[e,s]of Object.entries(n.packageMappings))if(s===t)return parseInt(e,10);return null},mapPackageIds:t=>{const i=e().getMappedPackageId;return t.map(t=>i(t))},getActiveProfile:()=>{const t=e();return t.activeProfileId&&t.profiles.get(t.activeProfileId)||null},hasProfile:t=>e().profiles.has(t),getProfileById:t=>e().profiles.get(t)||null,getAllProfiles:()=>Array.from(e().profiles.values()),setOriginalCartSnapshot:e=>{t({originalCartSnapshot:[...e]}),ht.debug(`Cart snapshot saved with ${e.length} items`)},clearOriginalCartSnapshot:()=>{t({originalCartSnapshot:void 0}),ht.debug("Cart snapshot cleared")},addMappingEvent:e=>{t(t=>({mappingHistory:[...t.mappingHistory,u(c({},e),{timestamp:Date.now()})].slice(-50)}))},clearHistory:()=>{t({mappingHistory:[]})},reset:()=>{t(pt),ht.info("ProfileStore reset to initial state")}})),{name:"next-profile-store",storage:{getItem:t=>{var e;const i=ut.get(t);if(!i)return null;const n=JSON.parse(i);return(null==(e=n.state)?void 0:e.profiles)&&(n.state.profiles=new Map(n.state.profiles)),n},setItem:(t,e)=>{var i;const n=c({},e);(null==(i=n.state)?void 0:i.profiles)instanceof Map&&(n.state.profiles=Array.from(n.state.profiles.entries())),ut.set(t,JSON.stringify(n))},removeItem:t=>{ut.remove(t)}}})),ft=Object.freeze(Object.defineProperty({__proto__:null,useProfileStore:mt},Symbol.toStringTag,{value:"Module"})),gt={apiKey:"",campaignId:"",debug:!1,pageType:"product",paymentConfig:{},googleMapsConfig:{},addressConfig:{},autoInit:!0,rateLimit:4,cacheTtl:300,retryAttempts:3,timeout:1e4,testMode:!1,maxRetries:3,requestTimeout:3e4,enableAnalytics:!0,enableDebugMode:!1,environment:"production",discounts:{},tracking:"auto",detectedCountry:"",detectedCurrency:"",selectedCurrency:"",locationData:null,currencyBehavior:"auto",currencyFallbackOccurred:!1,profiles:{},defaultProfile:void 0,activeProfile:void 0},vt=z((t,e)=>u(c({},gt),{loadFromMeta:()=>{var e,i;if("undefined"==typeof document)return;const n={},s=document.querySelector('meta[name="next-api-key"]');s&&(n.apiKey=null!=(e=s.getAttribute("content"))?e:"");const a=document.querySelector('meta[name="next-campaign-id"]');a&&(n.campaignId=null!=(i=a.getAttribute("content"))?i:"");const r=document.querySelector('meta[name="next-debug"]');r&&(n.debug="true"===r.getAttribute("content"));const o=document.querySelector('meta[name="next-page-type"]');o&&(n.pageType=o.getAttribute("content"));const d=document.querySelector('meta[name="next-spreedly-key"]')||document.querySelector('meta[name="next-payment-env-key"]');if(d){const t=d.getAttribute("content");t&&(n.spreedlyEnvironmentKey=t)}Object.keys(n).length>0&&t(n)},loadFromWindow:()=>{if("undefined"==typeof window)return;const e=window.nextConfig;if(!e||"object"!=typeof e)return;const i={};if("string"==typeof e.apiKey&&(i.apiKey=e.apiKey),"string"==typeof e.campaignId&&(i.campaignId=e.campaignId),"boolean"==typeof e.debug&&(i.debug=e.debug),"string"==typeof e.storeName&&(i.storeName=e.storeName),"string"==typeof e.pageType&&(i.pageType=e.pageType),"string"==typeof e.spreedlyEnvironmentKey&&(i.spreedlyEnvironmentKey=e.spreedlyEnvironmentKey),e.payment&&"object"==typeof e.payment&&(i.paymentConfig=e.payment),e.paymentConfig&&"object"==typeof e.paymentConfig&&(i.paymentConfig=e.paymentConfig),e.spreedly&&"object"==typeof e.spreedly&&(i.paymentConfig||(i.paymentConfig={}),i.paymentConfig.spreedly=e.spreedly),e.spreedlyConfig&&"object"==typeof e.spreedlyConfig&&(i.paymentConfig||(i.paymentConfig={}),i.paymentConfig.spreedly=e.spreedlyConfig),e.googleMaps&&"object"==typeof e.googleMaps&&(i.googleMapsConfig=e.googleMaps),e.addressConfig&&"object"==typeof e.addressConfig&&(i.addressConfig=e.addressConfig),!e.currencyBehavior||"auto"!==e.currencyBehavior&&"manual"!==e.currencyBehavior||(i.currencyBehavior=e.currencyBehavior),e.discounts&&"object"==typeof e.discounts&&(i.discounts=e.discounts),"string"==typeof e.tracking&&(i.tracking=e.tracking),e.analytics&&"object"==typeof e.analytics&&(i.analytics=e.analytics),e.utmTransfer&&"object"==typeof e.utmTransfer&&(i.utmTransfer=e.utmTransfer),e.profiles&&"object"==typeof e.profiles&&(i.profiles=e.profiles),"string"==typeof e.defaultProfile&&(i.defaultProfile=e.defaultProfile),"string"==typeof e.activeProfile&&(i.activeProfile=e.activeProfile),Object.keys(i).length>0&&(t(i),i.profiles)){const t=mt.getState();Object.entries(i.profiles).forEach(([e,i])=>{t.registerProfile({id:e,name:i.name,description:i.description||"",packageMappings:i.packageMappings})})}},loadProfiles:()=>{const t=e();if(!t.profiles||0===Object.keys(t.profiles).length)return;const i=mt.getState();Object.entries(t.profiles).forEach(([t,e])=>{i.registerProfile({id:t,name:e.name,description:e.description||"",packageMappings:e.packageMappings})})},updateConfig:e=>{t(t=>c(c({},t),e))},setSpreedlyEnvironmentKey:e=>{t({spreedlyEnvironmentKey:e})},reset:()=>{t(gt)}})),$t=Object.freeze(Object.defineProperty({__proto__:null,configStore:vt,useConfigStore:vt},Symbol.toStringTag,{value:"Module"})),yt=class{static getCurrentCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}static getUserLocale(){return sessionStorage.getItem("next_selected_locale")||navigator.language||"en-US"}static clearCache(){this.formatters.clear(),this.formattersNoZeroCents.clear(),this.numberFormatter=null}static getCurrencyFormatter(t,e=!1){const i=this.getUserLocale(),n=`${i}-${t}-${e}`,s=e?this.formattersNoZeroCents:this.formatters;if(!s.has(n)){const a={style:"currency",currency:t,currencyDisplay:"narrowSymbol"};e&&(a.minimumFractionDigits=0,a.maximumFractionDigits=2),s.set(n,new Intl.NumberFormat(i,a))}return s.get(n)}static getNumberFormatter(){const t=this.getUserLocale();return this.numberFormatter||(this.numberFormatter=new Intl.NumberFormat(t,{minimumFractionDigits:0,maximumFractionDigits:2})),this.numberFormatter}static formatCurrency(t,e,i){const n="string"==typeof t?parseFloat(t):t;if(isNaN(n))return"";const s=e||this.getCurrentCurrency();return this.getCurrencyFormatter(s,null==i?void 0:i.hideZeroCents).format(n)}static formatNumber(t){const e="string"==typeof t?parseFloat(t):t;return isNaN(e)?"":this.getNumberFormatter().format(e)}static formatPercentage(t,e=0){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)+"%"}static getCurrencySymbol(t){const e=t||this.getCurrentCurrency();return this.getCurrencyFormatter(e).format(0).replace(/[0-9.,\s]/g,"").trim()}static isAlreadyFormatted(t,e){if("string"!=typeof t)return!1;const i=this.getCurrencySymbol(e);return t.includes(i)}};yt.formatters=new Map,yt.formattersNoZeroCents=new Map,yt.numberFormatter=null;let bt=yt;const xt=bt.formatCurrency.bind(bt),wt=bt.formatNumber.bind(bt),_t=bt.formatPercentage.bind(bt),kt=bt.getCurrencySymbol.bind(bt),St=Object.freeze(Object.defineProperty({__proto__:null,CurrencyFormatter:bt,formatCurrency:xt,formatNumber:wt,formatPercentage:_t,getCurrencySymbol:kt},Symbol.toStringTag,{value:"Module"})),Ct=X("CartStore"),Pt={items:[],subtotal:0,shipping:0,tax:0,total:0,totalQuantity:0,isEmpty:!0,appliedCoupons:[],enrichedItems:[],totals:{subtotal:{value:0,formatted:"$0.00"},shipping:{value:0,formatted:"FREE"},tax:{value:0,formatted:"$0.00"},discounts:{value:0,formatted:"$0.00"},total:{value:0,formatted:"$0.00"},totalExclShipping:{value:0,formatted:"$0.00"},count:0,isEmpty:!0,savings:{value:0,formatted:"$0.00"},savingsPercentage:{value:0,formatted:"0%"},compareTotal:{value:0,formatted:"$0.00"},hasSavings:!1,totalSavings:{value:0,formatted:"$0.00"},totalSavingsPercentage:{value:0,formatted:"0%"},hasTotalSavings:!1}},Et=z()(K(B((t,e)=>u(c({},Pt),{addItem:i=>m(null,null,function*(){var n,s,a;const{useCampaignStore:r}=yield Promise.resolve().then(()=>ct),{useProfileStore:o}=yield Promise.resolve().then(()=>ft),d=r.getState(),l=o.getState();let h=null!=(n=i.packageId)?n:0;if(!i.originalPackageId&&l.activeProfileId){const t=l.getMappedPackageId(h);t!==h&&(Ct.debug(`Applying profile mapping: ${h} -> ${t}`),h=t)}const p=d.getPackage(h);if(!p)throw new Error(`Package ${h} not found in campaign data`);t(t=>{var e,n,s,a,r,o,d,l;const m={id:Date.now(),packageId:h,originalPackageId:i.originalPackageId||(h!==(null!=(e=i.packageId)?e:0)?i.packageId:void 0),quantity:null!=(n=i.quantity)?n:1,price:parseFloat(p.price_total),title:null!=(s=i.title)?s:p.name,is_upsell:null!=(a=i.isUpsell)&&a,image:null!=(o=null!=(r=i.image)?r:p.image)?o:void 0,sku:null!=(l=null!=(d=i.sku)?d:p.product_sku)?l:void 0,price_per_unit:p.price,qty:p.qty,price_total:p.price_total,price_retail:p.price_retail,price_retail_total:p.price_retail_total,price_recurring:p.price_recurring,is_recurring:p.is_recurring,interval:p.interval,interval_count:p.interval_count,productId:p.product_id,productName:p.product_name,variantId:p.product_variant_id,variantName:p.product_variant_name,variantAttributes:p.product_variant_attribute_values,variantSku:p.product_sku||void 0};i.isUpsell&&Ct.debug("Adding upsell item:",{packageId:m.packageId,isUpsell:i.isUpsell,finalItemIsUpsell:m.is_upsell,itemData:m});const f=t.items.findIndex(t=>t.packageId===m.packageId);let g;return f>=0?(g=[...t.items],g[f].quantity+=m.quantity):g=[...t.items,m],u(c({},t),{items:g})}),e().calculateTotals();const m=st.getInstance();m.emit("cart:item-added",{packageId:null!=(s=i.packageId)?s:0,quantity:null!=(a=i.quantity)?a:1}),m.emit("cart:updated",e())}),removeItem:i=>m(null,null,function*(){const n=e().items.find(t=>t.packageId===i);if(t(t=>{const e=t.items.filter(t=>t.packageId!==i);return u(c({},t),{items:e})}),e().calculateTotals(),n){const t=st.getInstance();t.emit("cart:item-removed",{packageId:i}),t.emit("cart:updated",e())}}),updateQuantity:(i,n)=>m(null,null,function*(){var s;if(n<=0)return e().removeItem(i);const a=e().items.find(t=>t.packageId===i),r=null!=(s=null==a?void 0:a.quantity)?s:0;if(t(t=>{const e=t.items.map(t=>t.packageId===i?u(c({},t),{quantity:n}):t);return u(c({},t),{items:e})}),e().calculateTotals(),a){const t=st.getInstance();t.emit("cart:quantity-changed",{packageId:i,quantity:n,oldQuantity:r}),t.emit("cart:updated",e())}}),swapPackage:(i,n)=>m(null,null,function*(){var s,a,r,o,d,l,h,p,m,f,g;const{useCampaignStore:v}=yield Promise.resolve().then(()=>ct),{useProfileStore:$}=yield Promise.resolve().then(()=>ft),y=v.getState(),b=$.getState();let x=i;if(b.activeProfileId){const t=b.getMappedPackageId(i);t!==i&&(Ct.debug(`Applying profile mapping to remove package: ${i} -> ${t}`),x=t)}let w=null!=(s=n.packageId)?s:0;if(b.activeProfileId){const t=b.getMappedPackageId(w);t!==w&&(Ct.debug(`Applying profile mapping in swapPackage: ${w} -> ${t}`),w=t)}const _=y.getPackage(w);if(!_)throw new Error(`Package ${w} not found in campaign data`);const k=e().items.find(t=>t.packageId===x),S={id:Date.now(),packageId:w,originalPackageId:w!==(null!=(a=n.packageId)?a:0)?null!=(r=n.packageId)?r:0:void 0,quantity:null!=(o=n.quantity)?o:1,price:parseFloat(_.price_total),title:null!=(d=n.title)?d:_.name,is_upsell:null!=(l=n.isUpsell)&&l,image:null!=(p=null!=(h=n.image)?h:_.image)?p:void 0,sku:null!=(f=null!=(m=n.sku)?m:_.product_sku)?f:void 0,price_per_unit:_.price,qty:_.qty,price_total:_.price_total,price_retail:_.price_retail,price_retail_total:_.price_retail_total,price_recurring:_.price_recurring,is_recurring:_.is_recurring,interval:_.interval,interval_count:_.interval_count,productId:_.product_id,productName:_.product_name,variantId:_.product_variant_id,variantName:_.product_variant_name,variantAttributes:_.product_variant_attribute_values,variantSku:_.product_sku||void 0},C=S.price-(null!=(g=null==k?void 0:k.price)?g:0);t(t=>{const e=t.items.filter(t=>t.packageId!==x),i=e.findIndex(t=>t.packageId===S.packageId);return i>=0?e[i].quantity+=S.quantity:e.push(S),u(c({},t),{items:e,swapInProgress:!1})}),e().calculateTotals();const P=st.getInstance(),E={previousPackageId:x,newPackageId:w,newItem:S,priceDifference:C,source:"package-selector"};k&&(E.previousItem=k),P.emit("cart:package-swapped",E),P.emit("cart:updated",e())}),clear:()=>m(null,null,function*(){t(t=>u(c({},t),{items:[]})),e().calculateTotals()}),swapCart:i=>m(null,null,function*(){var n,s;const{useCampaignStore:a}=yield Promise.resolve().then(()=>ct),{useProfileStore:r}=yield Promise.resolve().then(()=>ft),o=a.getState(),d=r.getState(),l=st.getInstance();Ct.debug("Swapping cart with new items:",i),t(t=>u(c({},t),{swapInProgress:!0}));const h=[];for(const t of i){let e=t.packageId,i=t.originalPackageId;if(!i&&d.activeProfileId){const t=d.getMappedPackageId(e);t!==e&&(Ct.debug(`Applying profile mapping: ${e} -> ${t}`),i=e,e=t)}const a=o.getPackage(e);if(!a){Ct.warn(`Package ${e} not found in campaign data, skipping`),Ct.debug("Available packages:",null==(s=null==(n=o.data)?void 0:n.packages)?void 0:s.map(t=>t.ref_id));continue}Ct.debug(`Package ${e} found:`,a);const r={id:Date.now()+Math.random(),packageId:e,originalPackageId:i,title:a.name||`Package ${e}`,price:parseFloat(a.price_total),price_retail:a.price_retail,quantity:t.quantity,is_upsell:t.isUpsell||!1,image:a.image,sku:a.product_sku||void 0,qty:a.qty,price_total:a.price_total,price_retail_total:a.price_retail_total,price_per_unit:a.price,price_recurring:a.price_recurring,is_recurring:a.is_recurring,interval:a.interval,interval_count:a.interval_count,productId:a.product_id,productName:a.product_name,variantId:a.product_variant_id,variantName:a.product_variant_name,variantAttributes:a.product_variant_attribute_values,variantSku:a.product_sku||void 0};h.push(r)}t(t=>u(c({},t),{items:h,swapInProgress:!1})),e().calculateTotals(),l.emit("cart:updated",e()),Ct.info(`Cart swapped successfully with ${h.length} items`)}),syncWithAPI:()=>m(null,null,function*(){Ct.debug("syncWithAPI not yet implemented")}),calculateTotals:()=>m(null,null,function*(){try{const{useCampaignStore:i}=yield Promise.resolve().then(()=>ct),n=i.getState(),s=e(),a=s.items.reduce((t,e)=>t+e.price*e.quantity,0),r=s.items.reduce((t,e)=>t+e.quantity,0),o=0===s.items.length,d=s.items.reduce((t,e)=>{const i=n.getPackage(e.packageId);let s=0;return(null==i?void 0:i.price_retail_total)?s=parseFloat(i.price_retail_total):(null==i?void 0:i.price_total)&&(s=parseFloat(i.price_total)),t+s*e.quantity},0),l=Math.max(0,d-a),h=d>0?l/d*100:0,p=l>0,m=e().calculateShipping(),f=e().calculateTax();let g=0;const v=(s.appliedCoupons||[]).map(t=>{const i=e().calculateDiscountAmount(t.definition);return g+=i,u(c({},t),{discount:i})});v.length>0&&t(t=>u(c({},t),{appliedCoupons:v}));const $=a+m+f-g,y=a+f-g,b=l+g,x=d>0?b/d*100:0,w=b>0,_={subtotal:{value:a,formatted:xt(a)},shipping:{value:m,formatted:0===m?"FREE":xt(m)},tax:{value:f,formatted:xt(f)},discounts:{value:g,formatted:xt(g)},total:{value:$,formatted:xt($)},totalExclShipping:{value:y,formatted:xt(y)},count:r,isEmpty:o,savings:{value:l,formatted:xt(l)},savingsPercentage:{value:h,formatted:_t(h)},compareTotal:{value:d,formatted:xt(d)},hasSavings:p,totalSavings:{value:b,formatted:xt(b)},totalSavingsPercentage:{value:x,formatted:_t(x)},hasTotalSavings:w};t({subtotal:a,shipping:m,tax:f,total:$,totalQuantity:r,isEmpty:o,totals:_}),yield e().calculateEnrichedItems()}catch(i){t({subtotal:0,shipping:0,tax:0,total:0,totalQuantity:0,isEmpty:!0,totals:{subtotal:{value:0,formatted:"$0.00"},shipping:{value:0,formatted:"FREE"},tax:{value:0,formatted:"$0.00"},discounts:{value:0,formatted:"$0.00"},total:{value:0,formatted:"$0.00"},totalExclShipping:{value:0,formatted:"$0.00"},count:0,isEmpty:!0,savings:{value:0,formatted:"$0.00"},savingsPercentage:{value:0,formatted:"0%"},compareTotal:{value:0,formatted:"$0.00"},hasSavings:!1,totalSavings:{value:0,formatted:"$0.00"},totalSavingsPercentage:{value:0,formatted:"0%"},hasTotalSavings:!1}})}}),hasItem:t=>e().items.some(e=>e.packageId===t),getItem:t=>e().items.find(e=>e.packageId===t),getItemQuantity:t=>{var i;const n=e().items.find(e=>e.packageId===t);return null!=(i=null==n?void 0:n.quantity)?i:0},calculateShipping:()=>{const t=e();return t.isEmpty||0===t.items.length?0:t.shippingMethod?t.shippingMethod.price:0},calculateTax:()=>0,setShippingMethod:i=>m(null,null,function*(){try{const{useCampaignStore:n}=yield Promise.resolve().then(()=>ct),{useCheckoutStore:s}=yield Promise.resolve().then(()=>Mt),a=n.getState(),r=s.getState(),o=a.data;if(!(null==o?void 0:o.shipping_methods))throw new Error("No shipping methods available");const d=o.shipping_methods.find(t=>t.ref_id===i);if(!d)throw new Error(`Shipping method ${i} not found`);const l=parseFloat(d.price||"0");t(t=>u(c({},t),{shippingMethod:{id:d.ref_id,name:d.code,price:l,code:d.code}})),r.setShippingMethod({id:d.ref_id,name:d.code,price:l,code:d.code}),e().calculateTotals(),st.getInstance().emit("shipping:method-changed",{methodId:i,method:d})}catch(n){throw n}}),getTotalWeight:()=>e().items.reduce((t,e)=>t+e.quantity,0),getTotalItemCount:()=>e().items.reduce((t,e)=>t+e.quantity,0),calculateEnrichedItems:()=>m(null,null,function*(){try{const{useCampaignStore:i}=yield Promise.resolve().then(()=>ct),n=i.getState(),s=e().items.map(t=>{var e,i;const s=n.getPackage(t.packageId),a=parseFloat((null==s?void 0:s.price)||"0"),r=parseFloat((null==s?void 0:s.price_retail)||(null==s?void 0:s.price)||"0"),o=t.price*t.quantity;let d=0;(null==s?void 0:s.price_retail_total)?d=parseFloat(s.price_retail_total):(null==s?void 0:s.price_total)&&(d=parseFloat(s.price_total));const l=d*t.quantity,c=Math.max(0,r-a),u=Math.max(0,l-o),h=r>a?Math.round(c/r*100):0,p=!0===(null==s?void 0:s.is_recurring),m=p?parseFloat((null==s?void 0:s.price_recurring)||"0"):0,f=p?(null==s?void 0:s.interval_count)&&s.interval_count>1?`Every ${s.interval_count} ${s.interval}s`:`Per ${s.interval}`:"One time";return{id:t.id,packageId:t.packageId,quantity:t.quantity,price:{excl_tax:{value:a,formatted:xt(a)},incl_tax:{value:a,formatted:xt(a)},original:{value:r,formatted:xt(r)},savings:{value:c,formatted:xt(c)},recurring:{value:m,formatted:xt(m)},lineTotal:{value:o,formatted:xt(o)},lineCompare:{value:l,formatted:xt(l)},lineSavings:{value:u,formatted:xt(u)},savingsPct:{value:h,formatted:_t(h)}},product:{title:t.title||(null==s?void 0:s.name)||"",sku:(null==(e=null==s?void 0:s.external_id)?void 0:e.toString())||"",image:t.image||(null==s?void 0:s.image)||""},is_upsell:null!=(i=t.is_upsell)&&i,is_recurring:p,interval:(null==s?void 0:s.interval)||void 0,interval_count:null==s?void 0:s.interval_count,frequency:f,is_bundle:!1,bundleComponents:void 0,hasSavings:u>0,hasComparePrice:r>a,showCompare:r>a?"show":"hide",showSavings:u>0?"show":"hide",showRecurring:p?"show":"hide"}});t({enrichedItems:s})}catch(i){}}),applyCoupon:i=>m(null,null,function*(){const{useConfigStore:n}=yield Promise.resolve().then(()=>$t),s=n.getState(),a=e(),r=i.toUpperCase().trim();if((a.appliedCoupons||[]).some(t=>t.code===r))return{success:!1,message:"Coupon already applied"};const o=s.discounts[r];if(!o)return{success:!1,message:"Invalid coupon code"};const d=e().validateCoupon(r);return d.valid?(t(t=>u(c({},t),{appliedCoupons:[...t.appliedCoupons,{code:r,discount:0,definition:o}]})),e().calculateTotals(),{success:!0,message:`Coupon ${r} applied successfully`}):{success:!1,message:d.message||"Coupon cannot be applied"}}),removeCoupon:i=>{t(t=>u(c({},t),{appliedCoupons:(t.appliedCoupons||[]).filter(t=>t.code!==i)})),e().calculateTotals()},getCoupons:()=>e().appliedCoupons||[],validateCoupon:t=>{const i=e(),n=window.nextConfig;if(!(null==n?void 0:n.discounts))return{valid:!1,message:"No discounts configured"};const s=n.discounts[t];return s?s.minOrderValue&&i.subtotal<s.minOrderValue?{valid:!1,message:`Minimum order value of $${s.minOrderValue} required`}:!s.combinable&&(i.appliedCoupons||[]).length>0?{valid:!1,message:"Cannot combine with other coupons"}:{valid:!0}:{valid:!1,message:"Invalid coupon code"}},calculateDiscountAmount:t=>{const i=e();let n=0;if("order"===t.scope)"percentage"===t.type?(n=i.subtotal*(t.value/100),t.maxDiscount&&(n=Math.min(n,t.maxDiscount))):n=t.value;else if("package"===t.scope&&t.packageIds){const e=i.items.filter(e=>{var i;return null==(i=t.packageIds)?void 0:i.includes(e.packageId)}).reduce((t,e)=>t+e.price*e.quantity,0);"percentage"===t.type?(n=e*(t.value/100),t.maxDiscount&&(n=Math.min(n,t.maxDiscount))):n=Math.min(t.value,e)}return Math.min(n,i.subtotal)},refreshItemPrices:()=>m(null,null,function*(){try{Ct.info("Refreshing cart item prices with new currency data...");const{useCampaignStore:i}=yield Promise.resolve().then(()=>ct),n=i.getState();if(!n.data)return void Ct.warn("No campaign data available to refresh prices");const s=e(),a=s.items.map(t=>{var e,i,s,a,r,o;const d=n.getPackage(t.packageId);return d?u(c({},t),{price:parseFloat(d.price_total),price_per_unit:d.price,price_total:d.price_total,price_retail:d.price_retail,price_retail_total:d.price_retail_total,price_recurring:d.price_recurring,productId:null!=(e=t.productId)?e:d.product_id,productName:null!=(i=t.productName)?i:d.product_name,variantId:null!=(s=t.variantId)?s:d.product_variant_id,variantName:null!=(a=t.variantName)?a:d.product_variant_name,variantAttributes:null!=(r=t.variantAttributes)?r:d.product_variant_attribute_values,variantSku:null!=(o=t.variantSku)?o:d.product_sku}):(Ct.warn(`Package ${t.packageId} not found in campaign data`),t)});let r=s.shippingMethod;if(r&&n.data.shipping_methods){const t=n.data.shipping_methods.find(t=>t.ref_id===r.id);if(t){const e=parseFloat(t.price||"0");r=u(c({},r),{price:e}),Ct.info(`Updated shipping method price: ${r.code} = ${e} ${n.data.currency}`)}}t(t=>{const e=u(c({},t),{items:a});return void 0!==r&&(e.shippingMethod=r),e}),Ct.info("Cart item prices and shipping refreshed with new currency"),setTimeout(()=>{e().calculateTotals()},0)}catch(i){Ct.error("Failed to refresh item prices:",i)}}),reset:()=>{t(Pt)},setLastCurrency:e=>{t({lastCurrency:e})}})),{name:it,storage:{getItem:t=>et.get(t),setItem:(t,e)=>{et.set(t,e)},removeItem:t=>{et.remove(t)}},onRehydrateStorage:()=>t=>{t&&(Ct.debug("Cart store rehydrated, recalculating totals..."),t.calculateTotals())},partialize:t=>({items:t.items,appliedCoupons:t.appliedCoupons,subtotal:t.subtotal,shipping:t.shipping,shippingMethod:t.shippingMethod,tax:t.tax,total:t.total,totalQuantity:t.totalQuantity,isEmpty:t.isEmpty,totals:t.totals,enrichedItems:[]})})),It=Object.freeze(Object.defineProperty({__proto__:null,useCartStore:Et},Symbol.toStringTag,{value:"Module"})),Tt={step:1,isProcessing:!1,errors:{},formData:{},paymentMethod:"credit-card",sameAsShipping:!0,testMode:!1,vouchers:[]},At=z()(K(t=>u(c({},Tt),{setStep:e=>{t({step:e})},setProcessing:e=>{t({isProcessing:e})},setError:(e,i)=>{t(t=>({errors:u(c({},t.errors),{[e]:i})}))},clearError:e=>{t(t=>{const i=t.errors,{[e]:n}=i;var s;return{errors:h(i,[(s=e,"symbol"==typeof s?s:s+"")])}})},clearAllErrors:()=>{t({errors:{}})},updateFormData:e=>{t(t=>({formData:c(c({},t.formData),e)}))},setPaymentToken:e=>{t({paymentToken:e})},setPaymentMethod:e=>{t({paymentMethod:e})},setShippingMethod:e=>{t({shippingMethod:e})},setBillingAddress:e=>{t({billingAddress:e})},setSameAsShipping:e=>{t({sameAsShipping:e})},setTestMode:e=>{t({testMode:e})},addVoucher:e=>{t(t=>({vouchers:[...t.vouchers,e]}))},removeVoucher:e=>{t(t=>({vouchers:t.vouchers.filter(t=>t!==e)}))},reset:()=>{t(Tt)}}),{name:"next-checkout-store",storage:{getItem:t=>{const e=sessionStorage.getItem(t);return e?JSON.parse(e):null},setItem:(t,e)=>{sessionStorage.setItem(t,JSON.stringify(e))},removeItem:t=>{sessionStorage.removeItem(t)}},partialize:t=>{const e="apple_pay"===t.paymentMethod||"google_pay"===t.paymentMethod||"paypal"===t.paymentMethod?"credit-card":t.paymentMethod,i=t.formData,{cvv:n,card_cvv:s,month:a,expiration_month:r,year:o,expiration_year:d,"exp-month":l,"exp-year":c,card_number:u}=i,p=h(i,["cvv","card_cvv","month","expiration_month","year","expiration_year","exp-month","exp-year","card_number"]),m=Object.fromEntries(Object.entries(p).filter(([t,e])=>"string"==typeof e?""!==e.trim():"boolean"==typeof e||"number"==typeof e));let f=t.billingAddress;if(f){const t=Object.fromEntries(Object.entries(f).filter(([t,e])=>"string"==typeof e&&""!==e.trim()));f=Object.keys(t).length>0?t:void 0}return{step:t.step,formData:m,shippingMethod:t.shippingMethod,billingAddress:f,sameAsShipping:t.sameAsShipping,paymentMethod:e}}})),Mt=Object.freeze(Object.defineProperty({__proto__:null,useCheckoutStore:At},Symbol.toStringTag,{value:"Module"})),Lt=X("OrderStore"),Ft={order:null,refId:null,orderLoadedAt:null,isLoading:!1,isProcessingUpsell:!1,error:null,upsellError:null,pendingUpsells:[],completedUpsells:[],completedUpsellPages:[],viewedUpsells:[],viewedUpsellPages:[],upsellJourney:[]},Dt=z()(((t,e={})=>(i,n,s)=>{const a=e,{enabled:r,anonymousActionType:o,store:d}=a,l=h(a,["enabled","anonymousActionType","store"]);let p;try{p=(null!=r?r:"production"!==(R?"production":void 0))&&window.__REDUX_DEVTOOLS_EXTENSION__}catch(b){}if(!p)return t(i,n,s);const m=((t,e,i)=>{if(void 0===t)return{type:"untracked",connection:e.connect(i)};const n=q.get(i.name);if(n)return c({type:"tracked",store:t},n);const s={connection:e.connect(i),stores:{}};return q.set(i.name,s),c({type:"tracked",store:t},s)})(d,p,l),{connection:f}=m,g=h(m,["connection"]);let v=!0;s.setState=(t,e,a)=>{const r=i(t,e);if(!v)return r;const h=void 0===a?{type:o||"anonymous"}:"string"==typeof a?{type:a}:a;return void 0===d?(null==f||f.send(h,n()),r):(null==f||f.send(u(c({},h),{type:`${d}/${h.type}`}),u(c({},j(l.name)),{[d]:s.getState()})),r)};const $=(...t)=>{const e=v;v=!1,i(...t),v=e},y=t(s.setState,n,s);if("untracked"===g.type?null==f||f.init(y):(g.stores[g.store]=s,null==f||f.init(Object.fromEntries(Object.entries(g.stores).map(([t,e])=>[t,t===g.store?y:e.getState()])))),s.dispatchFromDevtools&&"function"==typeof s.dispatch){let t=!1;const e=s.dispatch;s.dispatch=(...i)=>{"production"===(R?"production":void 0)||"__setState"!==i[0].type||t||(t=!0),e(...i)}}return f.subscribe(t=>{var e;switch(t.type){case"ACTION":if("string"!=typeof t.payload)return;return H(t.payload,t=>{if("__setState"===t.type){if(void 0===d)return void $(t.state);Object.keys(t.state).length;const e=t.state[d];if(null==e)return;return void(JSON.stringify(s.getState())!==JSON.stringify(e)&&$(e))}s.dispatchFromDevtools&&"function"==typeof s.dispatch&&s.dispatch(t)});case"DISPATCH":switch(t.payload.type){case"RESET":return $(y),void 0===d?null==f?void 0:f.init(s.getState()):null==f?void 0:f.init(j(l.name));case"COMMIT":return void 0===d?void(null==f||f.init(s.getState())):null==f?void 0:f.init(j(l.name));case"ROLLBACK":return H(t.state,t=>{if(void 0===d)return $(t),void(null==f||f.init(s.getState()));$(t[d]),null==f||f.init(j(l.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return H(t.state,t=>{void 0!==d?JSON.stringify(s.getState())!==JSON.stringify(t[d])&&$(t[d]):$(t)});case"IMPORT_STATE":{const{nextLiftedState:i}=t.payload,n=null==(e=i.computedStates.slice(-1)[0])?void 0:e.state;if(!n)return;return $(void 0===d?n:n[d]),void(null==f||f.send(null,i))}case"PAUSE_RECORDING":return v=!v}return}}),y})(K((t,e)=>u(c({},Ft),{setOrder:e=>{Lt.debug("Setting order data:",e),t({order:e,error:null,orderLoadedAt:Date.now()})},setRefId:e=>{Lt.debug("Setting ref ID:",e),t({refId:e})},loadOrder:(i,n)=>m(null,null,function*(){const s=e();if(!s.order||s.refId!==i||e().isOrderExpired())if(s.isLoading)Lt.warn("Order loading already in progress");else{Lt.info("Loading order:",i),t({isLoading:!0,error:null,refId:i});try{const e=yield n.getOrder(i);Lt.info("Order loaded successfully:",e);const s=[];e.lines&&Array.isArray(e.lines)&&e.lines.forEach(t=>{if(t.is_upsell&&t.product_sku){const e=t.product_sku.match(/(\d+)/);e?s.push(e[1]):s.push(t.product_sku),Lt.debug("Detected upsell line:",{sku:t.product_sku,title:t.product_title,extractedId:e?e[1]:t.product_sku})}}),t({order:e,isLoading:!1,isProcessingUpsell:!1,error:null,orderLoadedAt:Date.now(),completedUpsells:s,upsellJourney:[],viewedUpsells:[],viewedUpsellPages:[]}),Lt.debug("Populated completed upsells from order:",s)}catch(a){const e=a instanceof Error?a.message:"Failed to load order";Lt.error("Failed to load order:",a),t({isLoading:!1,error:e,order:null})}}else Lt.info("Using cached order data:",i)}),clearOrder:()=>{Lt.debug("Clearing order data"),t({order:null,refId:null,error:null,orderLoadedAt:null})},isOrderExpired:()=>{const t=e();if(!t.orderLoadedAt)return!0;const i=Date.now()-t.orderLoadedAt>9e5;return i&&Lt.info("Order data has expired (>15 minutes old)"),i},addUpsell:(i,n)=>m(null,null,function*(){const s=e();if(!s.refId){const e="No order reference ID available";return Lt.error(e),t({upsellError:e}),null}if(s.isProcessingUpsell)return Lt.warn("Upsell processing already in progress"),null;Lt.info("Adding upsell to order:",s.refId,i),t({isProcessingUpsell:!0,upsellError:null});try{const e=yield n.addUpsell(s.refId,i);Lt.info("Upsell added successfully:",e);const a=window.location.pathname,r=i.lines.map(t=>t.package_id.toString()),o=r.map(t=>({packageId:t,pagePath:a,action:"accepted",timestamp:Date.now()}));return t({order:e,isProcessingUpsell:!1,upsellError:null,orderLoadedAt:Date.now(),completedUpsells:[...s.completedUpsells,...r],completedUpsellPages:s.completedUpsellPages.includes(a)?s.completedUpsellPages:[...s.completedUpsellPages,a],upsellJourney:[...s.upsellJourney,...o]}),e}catch(a){const e=a instanceof Error?a.message:"Failed to add upsell";return Lt.error("Failed to add upsell:",a),t({isProcessingUpsell:!1,upsellError:e}),null}}),addPendingUpsell:i=>{const n=e();Lt.debug("Adding pending upsell:",i),t({pendingUpsells:[...n.pendingUpsells,i]})},removePendingUpsell:i=>{const n=[...e().pendingUpsells];n.splice(i,1),Lt.debug("Removing pending upsell at index:",i),t({pendingUpsells:n})},clearPendingUpsells:()=>{Lt.debug("Clearing pending upsells"),t({pendingUpsells:[]})},markUpsellCompleted:i=>{const n=e();n.completedUpsells.includes(i)||(Lt.debug("Marking upsell as completed:",i),t({completedUpsells:[...n.completedUpsells,i]}))},markUpsellViewed:i=>{const n=e();if(!n.viewedUpsells.includes(i)){Lt.debug("Marking upsell as viewed:",i);const e={packageId:i,action:"viewed",timestamp:Date.now()};t({viewedUpsells:[...n.viewedUpsells,i],upsellJourney:[...n.upsellJourney,e]})}},markUpsellPageViewed:i=>{const n=e();if(!n.viewedUpsellPages.includes(i)){Lt.debug("Marking upsell page as viewed:",i);const e={pagePath:i,action:"viewed",timestamp:Date.now()};t({viewedUpsellPages:[...n.viewedUpsellPages,i],upsellJourney:[...n.upsellJourney,e],isProcessingUpsell:!1,upsellError:null})}},markUpsellSkipped:(i,n)=>{const s=e();Lt.debug("Marking upsell as skipped:",{packageId:i,pagePath:n});const a={action:"skipped",timestamp:Date.now()};void 0!==i&&(a.packageId=i),void 0!==n&&(a.pagePath=n),t({upsellJourney:[...s.upsellJourney,a],isProcessingUpsell:!1,upsellError:null})},setError:e=>t({error:e}),setUpsellError:e=>t({upsellError:e}),clearErrors:()=>t({error:null,upsellError:null}),setLoading:e=>t({isLoading:e}),setProcessingUpsell:e=>t({isProcessingUpsell:e}),hasUpsellPageBeenCompleted:t=>e().completedUpsellPages.includes(t),hasUpsellBeenViewed:t=>e().viewedUpsells.includes(t),hasUpsellPageBeenViewed:t=>e().viewedUpsellPages.includes(t),getUpsellJourney:()=>e().upsellJourney,getOrderTotal:()=>{const t=e();return t.order?parseFloat(t.order.total_incl_tax||"0"):0},canAddUpsells:()=>{const t=e();return!(!t.order||!t.order.supports_post_purchase_upsells||t.isProcessingUpsell)},reset:()=>{Lt.debug("Resetting order store"),t(Ft)}}),{name:"next-order",storage:{getItem:t=>{const e=sessionStorage.getItem(t);return e?JSON.parse(e):null},setItem:(t,e)=>{sessionStorage.setItem(t,JSON.stringify(e))},removeItem:t=>{sessionStorage.removeItem(t)}}}),{name:"order-store"})),Nt={affiliate:"",funnel:"",gclid:"",utm_source:"",utm_medium:"",utm_campaign:"",utm_content:"",utm_term:"",subaffiliate1:"",subaffiliate2:"",subaffiliate3:"",subaffiliate4:"",subaffiliate5:"",metadata:{landing_page:"",referrer:"",device:"",device_type:"desktop",domain:"",timestamp:Date.now()},first_visit_timestamp:Date.now(),current_visit_timestamp:Date.now()},Ut=z()(K((t,e)=>u(c({},Nt),{initialize:()=>m(null,null,function*(){try{const{AttributionCollector:e}=yield Promise.resolve().then(()=>de),i=new e,n=yield i.collect();t(t=>u(c(c({},t),n),{metadata:c(c({},t.metadata),n.metadata),first_visit_timestamp:t.first_visit_timestamp||n.first_visit_timestamp}))}catch(e){}}),updateAttribution:e=>{t(t=>u(c(c({},t),e),{metadata:e.metadata?c(c({},t.metadata),e.metadata):t.metadata,current_visit_timestamp:Date.now()}))},setFunnelName:i=>{if(!i)return;if(e().funnel)return;const n=localStorage.getItem("next_funnel_name")||sessionStorage.getItem("next_funnel_name");if(n)t({funnel:n});else{t({funnel:i});try{sessionStorage.setItem("next_funnel_name",i),localStorage.setItem("next_funnel_name",i)}catch(s){}}},setEverflowClickId:e=>{e&&(localStorage.setItem("evclid",e),sessionStorage.setItem("evclid",e),t(t=>u(c({},t),{metadata:u(c({},t.metadata),{everflow_transaction_id:e})})))},getAttributionForApi:()=>{const t=e(),i={};return t.affiliate&&""!==t.affiliate&&(i.affiliate=t.affiliate),t.funnel&&""!==t.funnel&&(i.funnel=t.funnel),t.gclid&&""!==t.gclid&&(i.gclid=t.gclid),void 0!==t.metadata&&(i.metadata=t.metadata),t.utm_source&&""!==t.utm_source&&(i.utm_source=t.utm_source),t.utm_medium&&""!==t.utm_medium&&(i.utm_medium=t.utm_medium),t.utm_campaign&&""!==t.utm_campaign&&(i.utm_campaign=t.utm_campaign),t.utm_content&&""!==t.utm_content&&(i.utm_content=t.utm_content),t.utm_term&&""!==t.utm_term&&(i.utm_term=t.utm_term),t.subaffiliate1&&""!==t.subaffiliate1&&(i.subaffiliate1=t.subaffiliate1),t.subaffiliate2&&""!==t.subaffiliate2&&(i.subaffiliate2=t.subaffiliate2),t.subaffiliate3&&""!==t.subaffiliate3&&(i.subaffiliate3=t.subaffiliate3),t.subaffiliate4&&""!==t.subaffiliate4&&(i.subaffiliate4=t.subaffiliate4),t.subaffiliate5&&""!==t.subaffiliate5&&(i.subaffiliate5=t.subaffiliate5),t.metadata.everflow_transaction_id&&(i.everflow_transaction_id=t.metadata.everflow_transaction_id),i},debug:()=>{const t=e();for(let e=1;e<=5;e++);return t.metadata.conversion_timestamp,"Attribution debug info logged to console."},reset:()=>{t(Nt)},clearPersistedFunnel:()=>{try{localStorage.removeItem("next_funnel_name"),sessionStorage.removeItem("next_funnel_name"),t({funnel:""})}catch(e){}}}),{name:"next-attribution",storage:{getItem:t=>{const e=sessionStorage.getItem(t);return e?JSON.parse(e):null},setItem:(t,e)=>{sessionStorage.setItem(t,JSON.stringify(e))},removeItem:t=>{sessionStorage.removeItem(t)}}})),Ot=X("ParameterStore"),zt=z()(K((t,e)=>({params:{},updateParam:(e,i)=>{t(t=>({params:u(c({},t.params),{[e]:i})})),Ot.debug(`Parameter updated: ${e} = ${i}`)},updateParams:e=>{t({params:e}),Ot.debug("Parameters replaced:",e)},mergeParams:e=>{t(t=>({params:c(c({},t.params),e)})),Ot.debug("Parameters merged:",e)},getParam:t=>e().params[t],hasParam:t=>t in e().params,clearParams:()=>{t({params:{}}),Ot.info("All parameters cleared")},removeParam:e=>{t(t=>{const i=c({},t.params);return delete i[e],{params:i}}),Ot.debug(`Parameter removed: ${e}`)},debug:()=>{const t=e();if(Object.keys(t.params).length>0){const e={};Object.entries(t.params).forEach(([t,i])=>{const n=t.includes("_")?t.split("_")[0]:"other";e[n]||(e[n]=[]),e[n].push(`${t}=${i}`)}),Object.entries(e).forEach(([t,e])=>{})}const i=new URLSearchParams(window.location.search),n={};if(i.forEach((t,e)=>{n[e]=t}),Object.keys(n).length>0){const e=new Set(Object.keys(t.params)),i=new Set(Object.keys(n)),s=Array.from(e).filter(t=>!i.has(t)),a=Array.from(i).filter(t=>!e.has(t)),r=Array.from(e).filter(e=>i.has(e)&&t.params[e]!==n[e]);(s.length>0||a.length>0||r.length>0)&&(s.length,a.length,r.length)}return"Parameter debug info logged to console."}}),{name:"next-url-params",storage:{getItem:t=>{try{const e=sessionStorage.getItem(t);return e?JSON.parse(e):null}catch(e){return Ot.error("Error reading from sessionStorage:",e),null}},setItem:(t,e)=>{try{sessionStorage.setItem(t,JSON.stringify(e))}catch(i){Ot.error("Error writing to sessionStorage:",i)}},removeItem:t=>{try{sessionStorage.removeItem(t)}catch(e){Ot.error("Error removing from sessionStorage:",e)}}}})),Rt=Object.freeze(Object.defineProperty({__proto__:null,useParameterStore:zt},Symbol.toStringTag,{value:"Module"}));class qt{constructor(t){this.baseURL="https://campaigns.apps.29next.com",this.apiKey=t,this.logger=X("ApiClient")}getCampaigns(t){return m(this,null,function*(){const e=t?`?currency=${t}`:"";return this.request(`/api/v1/campaigns/${e}`)})}createCart(t){return m(this,null,function*(){return this.request("/api/v1/carts/",{method:"POST",body:JSON.stringify(t)})})}createOrder(t){return m(this,null,function*(){return this.request("/api/v1/orders/",{method:"POST",body:JSON.stringify(t)})})}getOrder(t){return m(this,null,function*(){return this.request(`/api/v1/orders/${t}/`)})}addUpsell(t,e){return m(this,null,function*(){return this.request(`/api/v1/orders/${t}/upsells/`,{method:"POST",body:JSON.stringify(e)})})}createProspectCart(t){return m(this,null,function*(){return this.request("/api/v1/prospect-carts/",{method:"POST",body:JSON.stringify(t)})})}updateProspectCart(t,e){return m(this,null,function*(){return this.request(`/api/v1/prospect-carts/${t}/`,{method:"PATCH",body:JSON.stringify(e)})})}getProspectCart(t){return m(this,null,function*(){return this.request(`/api/v1/prospect-carts/${t}/`)})}abandonProspectCart(t){return m(this,null,function*(){return this.request(`/api/v1/prospect-carts/${t}/abandon/`,{method:"POST"})})}convertProspectCart(t){return m(this,null,function*(){return this.request(`/api/v1/prospect-carts/${t}/convert/`,{method:"POST"})})}getRequestType(t){return t.includes("/campaigns")?"campaign":t.includes("/upsells")?"upsell":t.includes("/orders")?"order":t.includes("/prospect-carts")?"prospect_cart":t.includes("/carts")?"cart":"campaign"}getErrorType(t){return 0===t?"network":429===t?"rate_limit":401===t||403===t?"auth":t>=500?"server_error":t>=400?"client_error":"network"}request(t,e){return m(this,null,function*(){const i=(null==e?void 0:e.method)||"GET",n=`${this.baseURL}${t}`,s=c({Authorization:this.apiKey,"Content-Type":"application/json"},null==e?void 0:e.headers);this.logger.debug(`API Request: ${i} ${n}`);performance.now();let a,r,o,d=0;try{const t=yield fetch(n,u(c({},e),{headers:s}));if(performance.now(),d=t.status,429===t.status)throw o=parseInt(t.headers.get("Retry-After")||"60"),a=`Rate limited. Retry after ${o} seconds`,r="rate_limit",this.logger.warn(a),new Error(a);if(!t.ok){a=`API Error: ${t.status} ${t.statusText}`,r=this.getErrorType(t.status);let e={};try{const i=yield t.text();i&&(e=JSON.parse(i))}catch(l){this.logger.warn("Failed to parse error response body")}this.logger.error(a,e);const i=new Error(a);throw i.status=t.status,i.statusText=t.statusText,i.responseData=e,i}const i=yield t.json();return this.logger.debug(`API Response: ${t.status}`,i),i}catch(h){throw h instanceof Error?this.logger.error("API request failed:",h.message):this.logger.error("API request failed:",String(h)),h}})}setApiKey(t){this.apiKey=t}getApiKey(){return this.apiKey}}const jt=Object.freeze(Object.defineProperty({__proto__:null,ApiClient:qt},Symbol.toStringTag,{value:"Module"}));class Ht{constructor(){this.callbacks=new Map,this.exitIntentEnhancer=null,this.fomoEnhancer=null,this.logger=new Q("NextCommerce"),this.eventBus=st.getInstance()}static getInstance(){return Ht.instance||(Ht.instance=new Ht),Ht.instance}hasItemInCart(t){const e=Et.getState();return!!t.packageId&&e.items.some(e=>e.packageId===t.packageId)}addItem(t){return m(this,null,function*(){var e;const i=Et.getState(),n=null!=(e=t.quantity)?e:1;t.packageId&&(yield i.addItem({packageId:t.packageId,quantity:n,isUpsell:!1}))})}removeItem(t){return m(this,null,function*(){const e=Et.getState();t.packageId&&(yield e.removeItem(t.packageId))})}updateQuantity(t){return m(this,null,function*(){const e=Et.getState();t.packageId&&(yield e.updateQuantity(t.packageId,t.quantity))})}clearCart(){return m(this,null,function*(){const t=Et.getState();yield t.clear()})}swapCart(t){return m(this,null,function*(){const e=Et.getState();if("function"==typeof e.swapCart)yield e.swapCart(t);else{yield e.clear();for(const i of t)yield e.addItem({packageId:i.packageId,quantity:i.quantity,isUpsell:!1})}this.logger.debug(`Cart swapped with ${t.length} items`)})}getCartData(){const t=Et.getState(),e=lt.getState();return{cartLines:t.enrichedItems,cartTotals:t.totals,campaignData:e.data,appliedCoupons:t.getCoupons()}}getCartTotals(){return Et.getState().totals}getCartCount(){return Et.getState().totalQuantity}getCampaignData(){return lt.getState().data}getPackage(t){return lt.getState().getPackage(t)}getVariantsByProductId(t){return lt.getState().getVariantsByProductId(t)}getAvailableVariantAttributes(t,e){return lt.getState().getAvailableVariantAttributes(t,e)}getPackageByVariantSelection(t,e){return lt.getState().getPackageByVariantSelection(t,e)}getProductVariantsWithPricing(t){return lt.getState().getProductVariantsWithPricing(t)}getVariantPricingTiers(t,e){return lt.getState().getVariantPricingTiers(t,e)}getLowestPriceForVariant(t,e){return lt.getState().getLowestPriceForVariant(t,e)}createVariantKey(t){return Object.entries(t).map(([t,e])=>`${t}:${e}`).sort().join("|")}on(t,e){this.eventBus.on(t,e)}off(t,e){this.eventBus.off(t,e)}registerCallback(t,e){this.callbacks.has(t)||this.callbacks.set(t,new Set),this.callbacks.get(t).add(e)}unregisterCallback(t,e){var i;null==(i=this.callbacks.get(t))||i.delete(e)}triggerCallback(t,e){var i;null==(i=this.callbacks.get(t))||i.forEach(i=>{try{i(e)}catch(n){this.logger.error(`Callback error for ${t}:`,n)}})}trackViewItemList(t,e,i){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.trackViewItemList(t,i)}catch(e){this.logger.debug("Analytics tracking failed (non-critical):",e)}}))})}trackViewItem(t){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.trackViewItem(t)}catch(e){this.logger.debug("Analytics tracking failed (non-critical):",e)}}))})}trackAddToCart(t,e){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:i}=yield Promise.resolve().then(()=>ti),n={id:String(t),packageId:t,quantity:e||1};i.trackAddToCart(n)}catch(i){this.logger.debug("Analytics tracking failed (non-critical):",i)}}))})}trackRemoveFromCart(t,e){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:i,EcommerceEvents:n}=yield Promise.resolve().then(()=>ti);i.track(n.createRemoveFromCartEvent({packageId:t,quantity:e||1}))}catch(i){this.logger.debug("Analytics tracking failed (non-critical):",i)}}))})}trackBeginCheckout(){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);t.trackBeginCheckout()}catch(t){this.logger.debug("Analytics tracking failed (non-critical):",t)}}))})}trackPurchase(t){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.trackPurchase(t)}catch(e){this.logger.debug("Analytics tracking failed (non-critical):",e)}}))})}trackCustomEvent(t,e){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:i}=yield Promise.resolve().then(()=>ti);i.track(c({event:t},e))}catch(i){this.logger.debug("Analytics tracking failed (non-critical):",i)}}))})}trackSignUp(t){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.trackSignUp(t)}catch(e){this.logger.debug("Analytics tracking failed (non-critical):",e)}}))})}trackLogin(t){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.trackLogin(t)}catch(e){this.logger.debug("Analytics tracking failed (non-critical):",e)}}))})}setDebugMode(t){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);e.setDebugMode(t)}catch(e){this.logger.debug("Analytics debug mode failed (non-critical):",e)}}))})}invalidateAnalyticsContext(){return m(this,null,function*(){queueMicrotask(()=>m(this,null,function*(){try{const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);t.invalidateContext()}catch(t){this.logger.debug("Analytics context invalidation failed (non-critical):",t)}}))})}addMetadata(t,e){try{const i=Ut.getState(),n=i.metadata||{};i.updateAttribution({metadata:u(c({},n),{[t]:e})}),this.logger.debug(`Attribution metadata added: ${t}`,e)}catch(i){this.logger.error("Failed to add attribution metadata:",i)}}setMetadata(t){try{const e=Ut.getState(),i=e.metadata||{};e.updateAttribution({metadata:c(c({},i),t)}),this.logger.debug("Attribution metadata set:",t)}catch(e){this.logger.error("Failed to set attribution metadata:",e)}}clearMetadata(){var t,e,i,n,s,a;try{const r=Ut.getState();r.updateAttribution({metadata:{landing_page:(null==(t=r.metadata)?void 0:t.landing_page)||"",referrer:(null==(e=r.metadata)?void 0:e.referrer)||"",device:(null==(i=r.metadata)?void 0:i.device)||"",device_type:(null==(n=r.metadata)?void 0:n.device_type)||"desktop",domain:(null==(s=r.metadata)?void 0:s.domain)||"",timestamp:(null==(a=r.metadata)?void 0:a.timestamp)||Date.now()}}),this.logger.debug("Attribution metadata cleared")}catch(r){this.logger.error("Failed to clear attribution metadata:",r)}}getMetadata(){try{return Ut.getState().metadata}catch(t){return void this.logger.error("Failed to get attribution metadata:",t)}}setAttribution(t){try{Ut.getState().updateAttribution(t),this.logger.debug("Attribution set:",t)}catch(e){this.logger.error("Failed to set attribution:",e)}}getAttribution(){try{return Ut.getState().getAttributionForApi()}catch(t){return void this.logger.error("Failed to get attribution:",t)}}debugAttribution(){try{Ut.getState().debug()}catch(t){this.logger.error("Failed to debug attribution:",t)}}getShippingMethods(){var t;return(null==(t=lt.getState().data)?void 0:t.shipping_methods)||[]}getSelectedShippingMethod(){return At.getState().shippingMethod||null}setShippingMethod(t){return m(this,null,function*(){const e=Et.getState();yield e.setShippingMethod(t)})}getVersion(){return"undefined"!=typeof window&&window.__NEXT_SDK_VERSION__?window.__NEXT_SDK_VERSION__:"__VERSION__"}formatPrice(t,e){var i,n;const{formatCurrency:s}=require("@/utils/currencyFormatter"),a=lt.getState();return s(t,null!=(n=null!=e?e:null==(i=a.data)?void 0:i.currency)?n:"USD")}validateCheckout(){const t=[];return 0===Et.getState().items.length&&t.push("Cart is empty"),{valid:0===t.length,errors:t}}applyCoupon(t){return m(this,null,function*(){const e=Et.getState();return yield e.applyCoupon(t)})}removeCoupon(t){Et.getState().removeCoupon(t)}getCoupons(){return Et.getState().getCoupons()}validateCoupon(t){return Et.getState().validateCoupon(t)}calculateDiscountAmount(t){return Et.getState().calculateDiscountAmount(t)}exitIntent(t){return m(this,null,function*(){try{if(!this.exitIntentEnhancer){const{ExitIntentEnhancer:t}=yield Promise.resolve().then(()=>ei);this.exitIntentEnhancer=new t,yield this.exitIntentEnhancer.initialize()}this.exitIntentEnhancer.setup(t),this.logger.debug("Exit intent configured with image:",t.image)}catch(e){throw this.logger.error("Failed to setup exit intent:",e),e}})}disableExitIntent(){this.exitIntentEnhancer&&this.exitIntentEnhancer.disable()}fomo(t){return m(this,null,function*(){try{if(!this.fomoEnhancer){const{FomoPopupEnhancer:t}=yield Promise.resolve().then(()=>ii);this.fomoEnhancer=new t,yield this.fomoEnhancer.initialize()}this.fomoEnhancer.setup(t),this.fomoEnhancer.start(),this.logger.debug("FOMO popup started")}catch(e){throw this.logger.error("Failed to start FOMO popup:",e),e}})}stopFomo(){this.fomoEnhancer&&this.fomoEnhancer.stop()}addUpsell(t){return m(this,null,function*(){var e,i,n;const s=Dt.getState(),a=vt.getState();if(!s.order)throw new Error("No order found. Upsells can only be added after order completion.");if(!s.canAddUpsells())throw new Error("Order does not support post-purchase upsells or is currently processing.");const r=new qt(a.apiKey);let o=[];if(t.items&&t.items.length>0)o=t.items.map(t=>({package_id:t.packageId,quantity:t.quantity||1}));else{if(!t.packageId)throw new Error("Either packageId or items array must be provided");o=[{package_id:t.packageId,quantity:t.quantity||1}]}const d={lines:o};this.logger.info("Adding upsell(s) via SDK:",d);try{const t=(null==(i=null==(e=s.order)?void 0:e.lines)?void 0:i.map(t=>t.id))||[],a=yield s.addUpsell(d,r);if(!a)throw new Error("Failed to add upsell - no updated order returned");const l=(null==(n=a.lines)?void 0:n.filter(e=>e.is_upsell&&!t.includes(e.id)))||[],c=l.reduce((t,e)=>t+(e.price_incl_tax?parseFloat(e.price_incl_tax):0),0);return o.forEach((t,e)=>{const i=l[e],n=(null==i?void 0:i.price_incl_tax)?parseFloat(i.price_incl_tax):0;this.eventBus.emit("upsell:added",{packageId:t.package_id,quantity:t.quantity,order:a,value:n})}),{order:a,addedLines:l,totalValue:c}}catch(l){throw this.logger.error("Failed to add upsell(s) via SDK:",l),l}})}canAddUpsells(){return Dt.getState().canAddUpsells()}getCompletedUpsells(){return Dt.getState().completedUpsells}isUpsellAlreadyAdded(t){const e=Dt.getState();return!!e.completedUpsells.includes(t.toString())||e.upsellJourney.some(e=>e.packageId===t.toString()&&"accepted"===e.action)}setProfile(t,e){return m(this,null,function*(){try{const{ProfileManager:i}=yield Promise.resolve().then(()=>te),n=i.getInstance();yield n.applyProfile(t,e),this.logger.info(`Profile "${t}" applied via API`)}catch(i){throw this.logger.error(`Failed to set profile "${t}":`,i),i}})}revertProfile(){return m(this,null,function*(){try{const{ProfileManager:t}=yield Promise.resolve().then(()=>te),e=t.getInstance();yield e.revertProfile(),this.logger.info("Profile reverted via API")}catch(t){throw this.logger.error("Failed to revert profile:",t),t}})}getActiveProfile(){return mt.getState().activeProfileId}getProfileInfo(t){const e=mt.getState();return t?e.getProfileById(t):e.getActiveProfile()}getMappedPackageId(t){return mt.getState().getMappedPackageId(t)}getOriginalPackageId(t){return mt.getState().getOriginalPackageId(t)}listProfiles(){const t=mt.getState();return Array.from(t.profiles.keys())}hasProfile(t){return mt.getState().hasProfile(t)}registerProfile(t){mt.getState().registerProfile(t),this.logger.info(`Profile "${t.id}" registered via API`)}setParam(t,e){zt.getState().updateParam(t,e),this.logger.debug(`URL parameter set: ${t}=${e}`)}setParams(t){zt.getState().updateParams(t),this.logger.debug("URL parameters set:",t)}getParam(t){const e=zt.getState().getParam(t);return void 0!==e?e:null}getAllParams(){return zt.getState().params}hasParam(t){return zt.getState().hasParam(t)}clearParam(t){const e=zt.getState(),i=c({},e.params);delete i[t],e.updateParams(i),this.logger.debug(`URL parameter cleared: ${t}`)}clearAllParams(){zt.getState().updateParams({}),this.logger.debug("All URL parameters cleared")}mergeParams(t){zt.getState().mergeParams(t),this.logger.debug("URL parameters merged:",t)}}const Bt=class{static parseDataAttribute(t,e){const i=t.getAttribute(e);return{raw:i,parsed:this.parseValue(i),type:this.inferType(i)}}static parseValue(t){if(null===t||""===t)return null;if(t.startsWith("{")||t.startsWith("["))try{return JSON.parse(t)}catch(e){}if("true"===t)return!0;if("false"===t)return!1;if(/^-?\d+(\.\d+)?$/.test(t)){const e=parseFloat(t);return Number.isNaN(e)?t:e}return t}static inferType(t){return null===t||""===t?"string":"true"===t||"false"===t?"boolean":/^-?\d+(\.\d+)?$/.test(t)?"number":t.startsWith("{")&&t.endsWith("}")?"object":t.startsWith("[")&&t.endsWith("]")?"array":"string"}static getEnhancerTypes(t){const e=[];if(t.hasAttribute("data-next-enhancer")){const i=t.getAttribute("data-next-enhancer");i&&e.push(i)}if(t.hasAttribute("data-next-display")&&e.push("display"),t.hasAttribute("data-next-toggle")&&e.push("toggle"),t.hasAttribute("data-next-action")&&e.push("action"),t.hasAttribute("data-next-timer")&&e.push("timer"),(t.hasAttribute("data-next-show")||t.hasAttribute("data-next-hide")||t.hasAttribute("data-next-show-if-profile")||t.hasAttribute("data-next-hide-if-profile"))&&e.push("conditional"),t instanceof HTMLFormElement&&t.hasAttribute("data-next-checkout")&&e.push("checkout"),t.hasAttribute("data-next-express-checkout")){const i=t.getAttribute("data-next-express-checkout");"container"===i?e.push("express-checkout-container"):"paypal"!==i&&"apple_pay"!==i&&"google_pay"!==i||e.push("express-checkout")}if(t.hasAttribute("data-next-cart-items")&&e.push("cart-items"),t.hasAttribute("data-next-profile")&&e.push("profile-switcher"),t.hasAttribute("data-next-profile-selector")&&e.push("profile-selector"),t.hasAttribute("data-next-order-items")&&e.push("order-items"),t.hasAttribute("data-next-quantity")){const i=t.getAttribute("data-next-quantity");i&&["increase","decrease","set"].includes(i)&&e.push("quantity")}if(t.hasAttribute("data-next-remove-item")&&e.push("remove-item"),(t.hasAttribute("data-next-selector")||t.hasAttribute("data-next-cart-selector")||t.hasAttribute("data-next-selector-id")&&!t.hasAttribute("data-next-action")&&!t.hasAttribute("data-next-upsell")&&!t.hasAttribute("data-next-upsell-selector"))&&e.push("selector"),t.hasAttribute("data-next-upsell")&&e.push("upsell"),t.hasAttribute("data-next-coupon")){const i=t.getAttribute("data-next-coupon");"input"!==i&&""!==i||e.push("coupon")}return t.hasAttribute("data-next-accordion")&&e.push("accordion"),t.hasAttribute("data-next-tooltip")&&e.push("tooltip"),t.hasAttribute("data-next-component")&&"scroll-hint"===t.getAttribute("data-next-component")&&e.push("scroll-hint"),t.hasAttribute("data-next-quantity-text")&&e.push("quantity-text"),[...new Set(e)]}static parseDisplayPath(t){var e,i;const n=t.split(".");return 1===n.length?{object:"cart",property:null!=(e=n[0])?e:""}:{object:null!=(i=n[0])?i:"cart",property:n.slice(1).join(".")}}static parseCondition(t){var e,i;try{this.logger.debug("Parsing condition:",t),t=t.trim();const n=this.splitByLogicalOperator(t);if(n){const{operator:t,parts:e}=n;return{type:"logical",operator:t,conditions:e.map(t=>this.parseCondition(t))}}if(t.startsWith("!")){const e=t.slice(1).trim();return{type:"not",condition:this.parseCondition(e)}}if(t.startsWith("(")&&t.endsWith(")")){const e=t.slice(1,-1);if(!e.includes("(")||this.hasMatchingParentheses(e))return this.parseCondition(e)}if(t.includes("(")&&t.includes(")")){const n=t.match(/^(\w+)\.(\w+)\(([^)]*)\)$/);if(n)return{type:"function",object:null!=(e=n[1])?e:"",method:null!=(i=n[2])?i:"",args:n[3]?n[3].split(",").map(t=>this.parseValue(t.trim())):[]}}if(t.includes(" ")||t.includes("==")||t.includes("!=")){const e=[">=","<=",">","<","===","==","!==","!="];for(const i of e)if(t.includes(i)){const e=t.split(i);if(2===e.length){const n=e[0].trim(),s=e[1].trim(),a=this.parseDisplayPath(null!=n?n:"");let r;const o=s.trim(),d=o.startsWith('"')&&o.endsWith('"')||o.startsWith("'")&&o.endsWith("'");d?r=o.slice(1,-1):(r=this.parseValue(null!=s?s:""),"param"!==a.object&&"params"!==a.object||"string"!=typeof r||"true"===s||"false"===s||/^-?\d+(\.\d+)?$/.test(s)||(r=s));const l={type:"comparison",left:a,operator:i,right:r};return this.logger.debug("Parsed comparison:",{original:t,leftPart:n,rightPart:s,hasQuotes:d,result:l,leftObject:a.object,rightValue:r,rightType:typeof r}),l}}}return c({type:"property"},this.parseDisplayPath(t))}catch(n){return this.logger.error("Failed to parse condition:",t,n),{type:"property",object:"cart",property:"isEmpty"}}}static splitByLogicalOperator(t){const e=this.splitByOperator(t,"||");if(e.length>1)return{operator:"||",parts:e};const i=this.splitByOperator(t,"&&");return i.length>1?{operator:"&&",parts:i}:null}static splitByOperator(t,e){const i=[];let n="",s=0,a=0;for(;a<t.length;){const r=t[a];t[a+1],"("!==r?")"!==r?0!==s||t.slice(a,a+e.length)!==e?(n+=r,a++):(i.push(n.trim()),n="",a+=e.length):(s--,n+=r,a++):(s++,n+=r,a++)}return n.trim()&&i.push(n.trim()),i}static hasMatchingParentheses(t){let e=0;for(const i of t)if("("===i&&e++,")"===i&&e--,e<0)return!1;return 0===e}};Bt.logger=X("AttributeParser");let Vt=Bt;class Gt{constructor(t={}){this.handlers=new Set,this.isObserving=!1,this.pendingChanges=new Set,this.logger=X("DOMObserver"),this.config=c({childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-next-display","data-next-toggle","data-next-timer","data-next-show","data-next-hide","data-next-checkout","data-next-validate","data-next-express-checkout"]},t),this.observer=new MutationObserver(this.handleMutations.bind(this))}addHandler(t){this.handlers.add(t),this.logger.debug(`Added handler, total: ${this.handlers.size}`)}removeHandler(t){this.handlers.delete(t),this.logger.debug(`Removed handler, total: ${this.handlers.size}`)}start(t=document.body){if(this.isObserving)this.logger.warn("Already observing, ignoring start request");else try{this.observer.observe(t,this.config),this.isObserving=!0,this.logger.debug("Started observing DOM changes",{target:t.tagName})}catch(e){this.logger.error("Failed to start DOM observation:",e)}}stop(){this.isObserving&&(this.observer.disconnect(),this.isObserving=!1,this.clearThrottle(),this.pendingChanges.clear(),this.logger.debug("Stopped observing DOM changes"))}pause(){this.isObserving&&(this.observer.disconnect(),this.isObserving=!1,this.logger.debug("Paused DOM observation"))}resume(t=document.body){this.isObserving||(this.start(t),this.logger.debug("Resumed DOM observation"))}isActive(){return this.isObserving}handleMutations(t){const e=t.filter(t=>this.isRelevantMutation(t));if(0!==e.length){this.logger.debug(`Processing ${e.length} relevant mutations`);for(const t of e)this.processMutation(t);this.throttleNotifications()}}isRelevantMutation(t){var e;switch(t.type){case"childList":return this.hasRelevantNodes(t.addedNodes)||this.hasRelevantNodes(t.removedNodes);case"attributes":const i=t.attributeName;return null!==i&&!0===(null==(e=this.config.attributeFilter)?void 0:e.includes(i));default:return!1}}hasRelevantNodes(t){for(const e of t)if(e instanceof HTMLElement&&(this.hasRelevantAttributes(e)||this.hasRelevantDescendants(e)))return!0;return!1}hasRelevantAttributes(t){var e;return!0===(null==(e=this.config.attributeFilter)?void 0:e.some(e=>t.hasAttribute(e)))}hasRelevantDescendants(t){if(!this.config.attributeFilter)return!1;const e=this.config.attributeFilter.map(t=>`[${t}]`).join(",");return null!==t.querySelector(e)}processMutation(t){switch(t.type){case"childList":this.processChildListMutation(t);break;case"attributes":this.processAttributeMutation(t)}}processChildListMutation(t){for(const e of t.addedNodes)if(e instanceof HTMLElement&&(this.addElementForProcessing(e,"added"),this.config.attributeFilter)){const t=this.config.attributeFilter.map(t=>`[${t}]`).join(",");e.querySelectorAll(t).forEach(t=>{t instanceof HTMLElement&&this.addElementForProcessing(t,"added")})}for(const e of t.removedNodes)e instanceof HTMLElement&&this.addElementForProcessing(e,"removed")}processAttributeMutation(t){if(t.target instanceof HTMLElement&&t.attributeName){const e=t.target,i=t.attributeName,n=t.oldValue,s=e.getAttribute(i);this.notifyHandlers({type:"attributeChanged",element:e,attributeName:i,oldValue:n||void 0,newValue:s||void 0})}}addElementForProcessing(t,e){this.hasRelevantAttributes(t)&&(this.pendingChanges.add(t),"removed"===e&&this.notifyHandlers({type:"removed",element:t,attributeName:void 0,oldValue:void 0,newValue:void 0}))}throttleNotifications(){this.throttleTimeout||(this.throttleTimeout=window.setTimeout(()=>{this.processePendingChanges(),this.throttleTimeout=void 0},16))}processePendingChanges(){if(0!==this.pendingChanges.size){this.logger.debug(`Processing ${this.pendingChanges.size} pending changes`);for(const t of this.pendingChanges)this.notifyHandlers({type:"added",element:t,attributeName:void 0,oldValue:void 0,newValue:void 0});this.pendingChanges.clear()}}notifyHandlers(t){for(const i of this.handlers)try{i(t)}catch(e){this.logger.error("Handler error:",e)}}clearThrottle(){this.throttleTimeout&&(clearTimeout(this.throttleTimeout),this.throttleTimeout=void 0)}destroy(){this.stop(),this.handlers.clear(),this.logger.debug("DOM observer destroyed")}getConfig(){return c({},this.config)}updateConfig(t){const e=this.isObserving;let i;e&&(i=document.body,this.stop()),this.config=c(c({},this.config),t),e&&i&&this.start(i),this.logger.debug("Updated configuration",this.config)}}class Kt{constructor(){this.enhancers=new WeakMap,this.enhancerCount=0,this.isScanning=!1,this.scanQueue=new Set,this.enhancerStats=new Map,this.isDebugMode=!1,this.processQueueDebounced=this.debounce(()=>{this.processQueue()},50),this.logger=X("AttributeScanner"),this.domObserver=new Gt,this.domObserver.addHandler(this.handleDOMChange.bind(this)),this.isDebugMode="true"===new URLSearchParams(location.search).get("debug"),this.isDebugMode}scanAndEnhance(t){return m(this,null,function*(){if(this.isScanning)this.logger.warn("Already scanning, queuing request");else{this.isScanning=!0,this.logger.info("🔍 Starting DOM scan for data attributes...",{root:t.tagName});try{const e=["[data-next-enhancer]","[data-next-display]","[data-next-toggle]","[data-next-action]","[data-next-timer]","[data-next-show]","[data-next-hide]","[data-next-show-if-profile]","[data-next-hide-if-profile]","form[data-next-checkout]","[data-next-express-checkout]","[data-next-timer-display]","[data-next-timer-expired]","[data-next-cart-items]","[data-next-order-items]",'[data-next-quantity="increase"]','[data-next-quantity="decrease"]','[data-next-quantity="set"]',"[data-next-remove-item]","[data-next-selector]","[data-next-selector-id]","[data-next-cart-selector]","[data-next-upsell]","[data-next-upsell-selector]","[data-next-upsell-select]",'[data-next-coupon="input"]','[data-next-coupon=""]',"[data-next-accordion]","[data-next-tooltip]",'[data-next-express-checkout="container"]','[data-next-component="scroll-hint"]',"[data-next-quantity-text]","[data-next-profile]","select[data-next-profile-selector]"].join(", "),i=t.querySelectorAll(e);this.logger.debug(`Found ${i.length} elements with data attributes`);const n=t.querySelectorAll("[data-next-show], [data-next-hide]");n.length>0&&this.logger.info(`Found ${n.length} conditional display elements:`,Array.from(n).map(t=>({tag:t.tagName,class:t.className,show:t.getAttribute("data-next-show"),hide:t.getAttribute("data-next-hide")})));let s=0;const a=[],r=10;for(let t=0;t<i.length;t+=r){const e=Array.from(i).slice(t,t+r);for(const t of e)t instanceof HTMLElement&&a.push(this.enhanceElement(t).then(()=>{s++}));yield Promise.all(a.splice(0,r)),t+r<i.length&&(yield new Promise(t=>setTimeout(t,0)))}yield Promise.all(a),this.logger.debug(`Enhanced ${s} elements successfully`),this.isDebugMode&&this.enhancerStats.size>0&&this.showPerformanceReport(),document.documentElement.classList.add("next-display-ready"),this.logger.debug("Added next-display-ready class to HTML element"),window.dispatchEvent(new CustomEvent("next:display-ready",{detail:{enhancedCount:s,root:t.tagName}})),this.startObserving(t)}catch(e){this.logger.error("Error during scan and enhance:",e)}finally{this.isScanning=!1}}})}enhanceElement(t){return m(this,null,function*(){if(this.enhancers.has(t))return void this.logger.debug("Element already enhanced, skipping",t);const e=t.closest("[data-next-cart-items]");if(e&&e!==t)return void this.logger.debug("Skipping element inside cart items template",t);const i=t.getAttribute("data-package-id");if(i&&i.includes("{")&&i.includes("}"))this.logger.debug("Skipping element with template variable",t,i);else try{const e=Vt.getEnhancerTypes(t);if(0===e.length)return void this.logger.debug("No enhancer types found for element",t);const i=[];for(const s of e){const e=yield this.createEnhancer(s,t);if(e){i.push(e);try{if(this.isDebugMode){const i=performance.now();yield e.initialize();const n=performance.now()-i;this.updateEnhancerStats(s,n),this.logger.debug(`Initialized ${s} enhancer for element`,t)}else yield e.initialize(),this.logger.debug(`Initialized ${s} enhancer for element`,t)}catch(n){this.logger.error(`Failed to initialize ${s} enhancer:`,n,t),e.destroy()}}}i.length>0&&(this.enhancers.set(t,i),this.enhancerCount+=i.length,this.logger.debug(`Enhanced element with ${i.length} enhancer(s)`,{element:t.tagName,types:e,attributes:Array.from(t.attributes).map(t=>t.name)}))}catch(s){this.logger.error("Failed to enhance element:",s,t)}})}createEnhancer(t,e){return m(this,null,function*(){try{switch(t){case"display":const i=e.getAttribute("data-next-display")||"",n=Vt.parseDisplayPath(i);if(this.logger.debug(`Creating display enhancer for path: "${i}"`,{parsed:n,element:e.tagName,elementHtml:e.outerHTML.substring(0,200)+"..."}),"cart"===n.object){this.logger.debug("Using CartDisplayEnhancer");const{CartDisplayEnhancer:t}=yield Promise.resolve().then(()=>gi);return new t(e)}if("selection"===n.object){this.logger.debug("Using SelectionDisplayEnhancer");const{SelectionDisplayEnhancer:t}=yield Promise.resolve().then(()=>yi);return new t(e)}if("package"===n.object||"campaign"===n.object){this.logger.debug("Using ProductDisplayEnhancer");const{ProductDisplayEnhancer:t}=yield Promise.resolve().then(()=>wi);return new t(e)}if("order"===n.object){this.logger.debug("Using OrderDisplayEnhancer");const{OrderDisplayEnhancer:t}=yield Promise.resolve().then(()=>ki);return new t(e)}if("shipping"===n.object){this.logger.debug("Using ShippingDisplayEnhancer");const{ShippingDisplayEnhancer:t}=yield Promise.resolve().then(()=>Si);return new t(e)}{let t=e.parentElement,i=!1;for(;t&&!i;)(t.hasAttribute("data-next-package-id")||t.hasAttribute("data-next-package")||t.hasAttribute("data-package-id"))&&(i=!0),t=t.parentElement;if(i){this.logger.debug("Using ProductDisplayEnhancer (fallback with package context)");const{ProductDisplayEnhancer:t}=yield Promise.resolve().then(()=>wi);return new t(e)}{this.logger.debug("Using CartDisplayEnhancer (fallback without package context)");const{CartDisplayEnhancer:t}=yield Promise.resolve().then(()=>gi);return new t(e)}}case"toggle":const{CartToggleEnhancer:s}=yield Promise.resolve().then(()=>Pi);return new s(e);case"action":const a=e.getAttribute("data-next-action");switch(a){case"add-to-cart":const{AddToCartEnhancer:t}=yield Promise.resolve().then(()=>Ti);return new t(e);case"accept-upsell":const{AcceptUpsellEnhancer:i}=yield Promise.resolve().then(()=>Li);return new i(e);default:return this.logger.warn(`Unknown action type: ${a}`),null}case"selector":const{PackageSelectorEnhancer:r}=yield Promise.resolve().then(()=>Ui);return new r(e);case"timer":const{TimerEnhancer:o}=yield Promise.resolve().then(()=>Oi);return new o(e);case"conditional":this.logger.info("Creating ConditionalDisplayEnhancer for element:",{element:e.tagName,class:e.className,showAttr:e.getAttribute("data-next-show"),hideAttr:e.getAttribute("data-next-hide")});const{ConditionalDisplayEnhancer:d}=yield Promise.resolve().then(()=>zi);return new d(e);case"checkout":const{CheckoutFormEnhancer:l}=yield Promise.resolve().then(()=>pn);return new l(e);case"checkout-review":this.logger.info("Creating CheckoutReviewEnhancer for element:",{element:e.tagName,class:e.className});const{CheckoutReviewEnhancer:c}=yield Promise.resolve().then(()=>mn);return new c(e);case"express-checkout":return this.logger.debug("Skipping individual express checkout button - managed by container"),null;case"express-checkout-container":const{ExpressCheckoutContainerEnhancer:u}=yield Promise.resolve().then(()=>yn);return new u(e);case"cart-items":const{CartItemListEnhancer:h}=yield Promise.resolve().then(()=>xn);return new h(e);case"order-items":const{OrderItemListEnhancer:p}=yield Promise.resolve().then(()=>wn);return new p(e);case"quantity":const{QuantityControlEnhancer:m}=yield Promise.resolve().then(()=>kn);return new m(e);case"remove-item":const{RemoveItemEnhancer:f}=yield Promise.resolve().then(()=>Sn);return new f(e);case"upsell":const{UpsellEnhancer:g}=yield Promise.resolve().then(()=>En);return new g(e);case"coupon":const{CouponEnhancer:v}=yield Promise.resolve().then(()=>In);return new v(e);case"accordion":const{AccordionEnhancer:$}=yield Promise.resolve().then(()=>Ln);return new $(e);case"tooltip":const{TooltipEnhancer:y}=yield Promise.resolve().then(()=>ta);return new y(e);case"scroll-hint":const{ScrollHintEnhancer:b}=yield Promise.resolve().then(()=>ea);return new b(e);case"quantity-text":const{QuantityTextEnhancer:x}=yield Promise.resolve().then(()=>ia);return new x(e);case"profile-switcher":const{ProfileSwitcherEnhancer:w}=yield Promise.resolve().then(()=>ae);return new w(e);case"profile-selector":const{ProfileSelectorEnhancer:_}=yield Promise.resolve().then(()=>ae);return new _(e);default:return this.logger.warn(`Unknown enhancer type: ${t}`),null}}catch(i){return this.logger.error(`Failed to create enhancer of type ${t}:`,i),null}})}startObserving(t){this.domObserver.isActive()||(this.domObserver.start(t),this.logger.debug("Started DOM observation"))}handleDOMChange(t){var e;switch(t.type){case"added":this.queueElementForEnhancement(t.element);break;case"removed":this.cleanupElement(t.element);break;case"attributeChanged":(null==(e=t.attributeName)?void 0:e.startsWith("data-next-"))&&(this.logger.debug("Data attribute changed, re-enhancing element",{element:t.element.tagName,attribute:t.attributeName,oldValue:t.oldValue,newValue:t.newValue}),this.cleanupElement(t.element),this.queueElementForEnhancement(t.element))}}queueElementForEnhancement(t){this.scanQueue.add(t),this.processQueueDebounced()}processQueue(){return m(this,null,function*(){if(0===this.scanQueue.size)return;const t=Array.from(this.scanQueue);this.scanQueue.clear(),this.logger.debug(`Processing ${t.length} queued elements`);for(const i of t)try{yield this.enhanceElement(i)}catch(e){this.logger.error("Failed to enhance queued element:",e,i)}})}debounce(t,e){let i;return function(...n){clearTimeout(i),i=window.setTimeout(()=>t.apply(this,n),e)}}cleanupElement(t){const e=this.enhancers.get(t);e&&(e.forEach(t=>t.destroy()),this.enhancerCount-=e.length,this.enhancers.delete(t))}destroy(){this.domObserver.destroy(),this.scanQueue.clear(),this.enhancerCount=0,this.logger.debug("AttributeScanner destroyed")}pause(){this.domObserver.pause(),this.logger.debug("AttributeScanner paused")}resume(t=document.body){this.domObserver.resume(t),this.logger.debug("AttributeScanner resumed")}updateEnhancerStats(t,e){const i=this.enhancerStats.get(t)||{totalTime:0,count:0};i.totalTime+=e,i.count+=1,this.enhancerStats.set(t,i)}showPerformanceReport(){const t=Array.from(this.enhancerStats.entries()).map(([t,e])=>({Enhancer:t,"Total Time (ms)":e.totalTime.toFixed(2),"Average Time (ms)":(e.totalTime/e.count).toFixed(2),Count:e.count,Impact:e.totalTime>50?"🔴 High":e.totalTime>20?"🟡 Medium":"🟢 Low"})).sort((t,e)=>parseFloat(e["Total Time (ms)"])-parseFloat(t["Total Time (ms)"])).slice(0,3);t.length>0&&t.forEach((t,e)=>{}),Array.from(this.enhancerStats.values()).reduce((t,e)=>t+e.totalTime,0),Array.from(this.enhancerStats.values()).reduce((t,e)=>t+e.count,0)}getStats(){const t={enhancedElements:this.enhancerCount,queuedElements:this.scanQueue.size,isObserving:this.domObserver.isActive(),isScanning:this.isScanning};if(this.isDebugMode&&this.enhancerStats.size>0){t.performanceStats={};for(const[e,i]of this.enhancerStats.entries())t.performanceStats[e]={totalTime:i.totalTime,averageTime:i.totalTime/i.count,count:i.count}}return t}}class Jt{constructor(){this.isTestMode=!1,this.konamiSequence=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","KeyB","KeyA"],this.keySequence=[],this.testCards=[{number:"4111111111111111",name:"Visa Test Card",cvv:"123",expiry:"12/25",type:"visa"},{number:"5555555555554444",name:"Mastercard Test Card",cvv:"123",expiry:"12/25",type:"mastercard"},{number:"378282246310005",name:"American Express Test Card",cvv:"1234",expiry:"12/25",type:"amex"},{number:"6011111111111117",name:"Discover Test Card",cvv:"123",expiry:"12/25",type:"discover"}],this.initializeKonamiCode(),this.checkUrlTestMode()}static getInstance(){return Jt.instance||(Jt.instance=new Jt),Jt.instance}initializeKonamiCode(){document.addEventListener("keydown",this.handleKeyDown.bind(this))}handleKeyDown(t){this.keySequence.push(t.code),this.keySequence.length>this.konamiSequence.length&&this.keySequence.shift(),this.keySequence.length===this.konamiSequence.length&&this.keySequence.every((t,e)=>t===this.konamiSequence[e])&&(this.activateKonamiCode(),this.keySequence=[])}checkUrlTestMode(){const t=new URLSearchParams(window.location.search),e="true"===t.get("debugger"),i="true"===t.get("test");(e||i)&&(this.isTestMode=!0)}activateKonamiCode(){this.isTestMode=!0,this.showKonamiMessage();const t=new URL(window.location.href);t.searchParams.set("test","true"),window.history.replaceState({},"",t.toString()),this.konamiCallback&&setTimeout(()=>{var t;null==(t=this.konamiCallback)||t.call(this)},2e3),document.dispatchEvent(new CustomEvent("next:test-mode-activated",{detail:{method:"konami"}}))}showKonamiMessage(){const t=document.createElement("div");t.className="konami-activation-message",t.innerHTML='\n      <div class="konami-content">\n        <h3>🎮 Konami Code Activated!</h3>\n        <p>Test mode enabled. You can now use test payment methods.</p>\n        <div class="konami-progress">\n          <div class="konami-progress-bar"></div>\n        </div>\n      </div>\n    ',t.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      color: white;\n      padding: 2rem;\n      border-radius: 12px;\n      box-shadow: 0 20px 40px rgba(0,0,0,0.3);\n      z-index: 10000;\n      font-family: Arial, sans-serif;\n      text-align: center;\n      min-width: 300px;\n    ";const e=t.querySelector(".konami-progress-bar");e&&(e.style.cssText="\n        width: 100%;\n        height: 4px;\n        background: rgba(255,255,255,0.3);\n        border-radius: 2px;\n        overflow: hidden;\n        margin-top: 1rem;\n      ",e.innerHTML='<div style="width: 0; height: 100%; background: white; transition: width 2s ease-in-out;"></div>'),document.body.appendChild(t),setTimeout(()=>{const t=null==e?void 0:e.querySelector("div");t&&(t.style.width="100%")},100),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},2500)}setTestMode(t){if(this.isTestMode=t,t){const t=new URL(window.location.href);t.searchParams.set("test","true"),window.history.replaceState({},"",t.toString())}}isActive(){return this.isTestMode}onKonamiCode(t){this.konamiCallback=t}getTestCards(){return[...this.testCards]}getTestCard(t){if(t){const e=this.testCards.find(e=>e.type===t);if(e)return e}const e=this.testCards[0];if(!e)throw new Error("No test cards available");return e}fillTestCardData(t="visa"){if(!this.isTestMode)return;const e=this.getTestCard(t),i=document.querySelector('input[data-spreedly="number"], input[name*="card_number"], input[name*="cardNumber"]');i&&(i.value=e.number,i.dispatchEvent(new Event("input",{bubbles:!0})));const n=document.querySelector('input[data-spreedly="cvv"], input[name*="cvv"], input[name*="security"]');n&&(n.value=e.cvv,n.dispatchEvent(new Event("input",{bubbles:!0})));const s=document.querySelector('input[name*="expiry"], input[name*="exp"]');if(s)s.value=e.expiry,s.dispatchEvent(new Event("input",{bubbles:!0}));else{const t=document.querySelector('select[name*="month"], input[name*="month"]'),i=document.querySelector('select[name*="year"], input[name*="year"]');if(t&&i){const[n,s]=e.expiry.split("/");n&&s&&(t.value=n,i.value=`20${s}`,t.dispatchEvent(new Event("change",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})))}}const a=document.querySelector('input[name*="cardholder"], input[name*="card_name"]');a&&(a.value="Test Cardholder",a.dispatchEvent(new Event("input",{bubbles:!0})))}showTestCardMenu(){if(!this.isTestMode)return;const t=document.createElement("div");t.className="test-card-menu",t.innerHTML=`\n      <div class="test-card-content">\n        <h4>Test Card Numbers</h4>\n        <div class="test-card-options">\n          ${this.testCards.map(t=>`\n            <button class="test-card-option" data-card-type="${t.type}">\n              <div class="card-name">${t.name}</div>\n              <div class="card-number">${t.number}</div>\n            </button>\n          `).join("")}\n        </div>\n        <button class="test-card-close">Close</button>\n      </div>\n    `,t.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: white;\n      border: 1px solid #ddd;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n      font-family: Arial, sans-serif;\n      min-width: 250px;\n    ",t.addEventListener("click",e=>{const i=e.target;if(i.classList.contains("test-card-option")||i.closest(".test-card-option")){const e=i.closest(".test-card-option").getAttribute("data-card-type");e&&(this.fillTestCardData(e),t.remove())}else i.classList.contains("test-card-close")&&t.remove()}),document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.remove()},3e4)}}const Zt=Jt.getInstance();class Wt{constructor(){this.cachePrefix="next_country_",this.cacheExpiry=36e5,this.baseUrl="https://cdn-countries.muddy-wind-c7ca.workers.dev",this.config={},this.logger=new Q("CountryService")}static getInstance(){return Wt.instance||(Wt.instance=new Wt),Wt.instance}setConfig(t){this.config=c({},t),this.logger.debug("Address configuration updated:",this.config)}getConfig(){return c({},this.config)}getLocationData(){return m(this,null,function*(){var t;const e=this.getFromCache("location_data",!0);if(e)return yield this.applyCountryFiltering(e);try{const e=yield fetch(`${this.baseUrl}/location`);if(!e.ok)throw new Error(`Failed to fetch location data: ${e.statusText}`);const i=yield e.json();return this.setCache("location_data",i,!0),this.logger.debug("Location data fetched",{detectedCountry:i.detectedCountryCode,countriesCount:null==(t=i.countries)?void 0:t.length}),yield this.applyCountryFiltering(i)}catch(i){return this.logger.error("Failed to fetch location data:",i),yield this.applyCountryFiltering(this.getFallbackLocationData())}})}getCountryStates(t){return m(this,null,function*(){var e,i;const n=`states_${t}`,s=this.getFromCache(n,!0);if(s)return u(c({},s),{states:this.applyStateFiltering(s.states||[])});try{const s=yield fetch(`${this.baseUrl}/countries/${t}/states`);if(!s.ok)throw new Error(`Failed to fetch states for ${t}: ${s.statusText}`);const a=yield s.json();return this.setCache(n,a,!0),this.logger.debug(`States data fetched for ${t}`,{statesCount:null==(e=a.states)?void 0:e.length,stateLabel:null==(i=a.countryConfig)?void 0:i.stateLabel}),u(c({},a),{states:this.applyStateFiltering(a.states||[])})}catch(a){return this.logger.error(`Failed to fetch states for ${t}:`,a),{countryConfig:this.getDefaultCountryConfig(t),states:[]}}})}getCountryConfig(t){return m(this,null,function*(){const e=yield this.getLocationData();return e.detectedCountryCode===t?e.detectedCountryConfig:(yield this.getCountryStates(t)).countryConfig})}validatePostalCode(t,e,i){if(!t)return!1;if(t.length<i.postcodeMinLength||t.length>i.postcodeMaxLength)return!1;if(i.postcodeRegex)try{return new RegExp(i.postcodeRegex).test(t)}catch(n){return this.logger.error("Invalid postal code regex:",n),!0}return!0}formatPostalCode(t,e){if(!t)return t;const i=/[a-zA-Z]/.test(t);if(!e.postcodeFormat)return i?t.toUpperCase():t;const n=t.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();if(!n)return t;const s=e.postcodeFormat;let a="",r=0;for(let o=0;o<s.length&&r<n.length;o++){const t=s[o];"N"===t||"X"===t||"#"===t||"9"===t||"A"===t?(a+=n[r],r++):a+=t}return r<n.length&&(a+=n.substring(r)),a}clearCache(){try{const t=[];for(let i=0;i<sessionStorage.length;i++){const e=sessionStorage.key(i);e&&e.startsWith(this.cachePrefix)&&t.push(e)}t.forEach(t=>sessionStorage.removeItem(t));const e=[];for(let i=0;i<localStorage.length;i++){const t=localStorage.key(i);t&&t.startsWith(this.cachePrefix)&&e.push(t)}e.forEach(t=>localStorage.removeItem(t)),this.logger.debug(`Country service cache cleared (${t.length} session + ${e.length} local entries)`)}catch(t){this.logger.warn("Failed to clear cache:",t)}}clearCountryCache(t){try{const e=this.cachePrefix+`states_${t}`;localStorage.removeItem(e),sessionStorage.removeItem(e),this.logger.debug(`Cache cleared for country: ${t}`)}catch(e){this.logger.warn(`Failed to clear cache for country ${t}:`,e)}}getFromCache(t,e=!1){try{const i=this.cachePrefix+t,n=e?localStorage:sessionStorage,s=n.getItem(i);if(!s)return null;const{data:a,timestamp:r}=JSON.parse(s);return Date.now()-r>this.cacheExpiry?(n.removeItem(i),null):a}catch(i){return this.logger.warn("Failed to read from cache:",i),null}}setCache(t,e,i=!1){try{const n=this.cachePrefix+t,s={data:e,timestamp:Date.now()};(i?localStorage:sessionStorage).setItem(n,JSON.stringify(s))}catch(n){this.logger.warn("Failed to write to cache:",n)}}getDefaultCountryConfig(t){return{US:{stateLabel:"State",stateRequired:!0,postcodeLabel:"ZIP Code",postcodeRegex:"^\\d{5}(-\\d{4})?$",postcodeMinLength:5,postcodeMaxLength:10,postcodeExample:"12345 or 12345-6789",postcodeFormat:null,currencyCode:"USD",currencySymbol:"$"},CA:{stateLabel:"Province",stateRequired:!0,postcodeLabel:"Postal Code",postcodeRegex:"^[A-Z]\\d[A-Z] ?\\d[A-Z]\\d$",postcodeMinLength:6,postcodeMaxLength:7,postcodeExample:"K1A 0B1",postcodeFormat:null,currencyCode:"CAD",currencySymbol:"$"},GB:{stateLabel:"County",stateRequired:!1,postcodeLabel:"Postcode",postcodeRegex:"^[A-Z]{1,2}\\d{1,2}[A-Z]?\\s?\\d[A-Z]{2}$",postcodeMinLength:5,postcodeMaxLength:8,postcodeExample:"SW1A 1AA",postcodeFormat:null,currencyCode:"GBP",currencySymbol:"£"}}[t]||{stateLabel:"State/Province",stateRequired:!1,postcodeLabel:"Postal Code",postcodeRegex:null,postcodeMinLength:2,postcodeMaxLength:20,postcodeExample:null,postcodeFormat:null,currencyCode:"USD",currencySymbol:"$"}}getFallbackLocationData(){return{detectedCountryCode:"US",detectedCountryConfig:this.getDefaultCountryConfig("US"),detectedStates:[],countries:[{code:"US",name:"United States",phonecode:"+1",currencyCode:"USD",currencySymbol:"$"},{code:"CA",name:"Canada",phonecode:"+1",currencyCode:"CAD",currencySymbol:"$"},{code:"GB",name:"United Kingdom",phonecode:"+44",currencyCode:"GBP",currencySymbol:"£"},{code:"AU",name:"Australia",phonecode:"+61",currencyCode:"AUD",currencySymbol:"$"},{code:"DE",name:"Germany",phonecode:"+49",currencyCode:"EUR",currencySymbol:"€"}]}}applyCountryFiltering(t){return m(this,null,function*(){let e=[...t.countries];this.config.countries&&this.config.countries.length>0?e=this.config.countries.map(t=>({code:t.code,name:t.name,phonecode:"",currencyCode:"USD",currencySymbol:"$"})):this.config.showCountries&&this.config.showCountries.length>0&&(e=e.filter(t=>this.config.showCountries.includes(t.code)));const i=t.detectedCountryConfig;let n=t.detectedCountryCode,s=t.detectedCountryConfig;const a=e.some(t=>t.code===n);return n&&a||!this.config.defaultCountry?n&&a&&this.logger.info(`Using detected country: ${n}`):e.some(t=>t.code===this.config.defaultCountry)&&(this.logger.info(`Using default country ${this.config.defaultCountry} for shipping (detected: ${n}, allowed: ${a})`),this.logger.info(`Preserving detected currency: ${i.currencyCode} from detected location: ${t.detectedCountryCode}`),n=this.config.defaultCountry,s=i),u(c({},t),{countries:e,detectedCountryCode:n,detectedCountryConfig:s})})}applyStateFiltering(t){const e=["AS","UM-81","GU","UM-84","UM-86","UM-67","UM-89","UM-71","UM-76","MP","UM-95","PR","UM","VI","UM-79"];let i=t.filter(t=>!e.includes(t.code));return this.config.dontShowStates&&this.config.dontShowStates.length>0&&(i=i.filter(t=>!this.config.dontShowStates.includes(t.code))),i}}const Qt=class{static initialize(){return m(this,null,function*(){if(this.initialized)this.logger.warn("SDK already initialized");else try{this.logger.info("Initializing NextCommerce Campaign Cart SDK v2..."),this.initStartTime=Date.now(),yield this.waitForDOM(),yield this.loadConfiguration(),yield this.initializeLocationAndCurrency(),yield this.initializeAttribution(),yield this.loadCampaignData(),yield this.initializeAnalytics(),yield this.waitForStoreRehydration(),this.initializeErrorHandler(),yield this.checkAndLoadOrder(),yield this.scanAndEnhanceDOM(),this.setupReadyCallbacks(),yield this.initializeDebugMode(),this.initialized=!0,Date.now(),this.initStartTime,this.logger.info("SDK initialization complete ✅"),this.retryAttempts=0,this.emitInitializedEvent()}catch(t){if(this.logger.error("SDK initialization failed:",t),this.retryAttempts<this.maxRetries)return this.retryAttempts++,this.logger.warn(`Retrying initialization (attempt ${this.retryAttempts}/${this.maxRetries})...`),yield new Promise(t=>setTimeout(t,1e3*this.retryAttempts)),this.initialize();throw t}})}static captureUrlParameters(t){return m(this,null,function*(){try{const{useParameterStore:e}=yield Promise.resolve().then(()=>Rt),i=e.getState(),n=c({},i.params),s={};t.forEach((t,e)=>{s[e]=t});const a=c(c({},n),s);if(Object.keys(a).length>0){i.updateParams(a),this.logger.debug(`Captured ${Object.keys(s).length} URL parameters, total stored: ${Object.keys(a).length}`);const t=["seen","timer","reviews","loading","banner","exit"],e=Object.keys(a).filter(e=>t.includes(e));e.length>0&&this.logger.info("Visibility control parameters detected:",e.map(t=>`${t}=${a[t]}`).join(", "))}}catch(e){this.logger.warn("Failed to capture URL parameters:",e)}})}static initializeLocationAndCurrency(){return m(this,null,function*(){var t;try{const i=vt.getState();if(!i.currencyBehavior||"auto"!==i.currencyBehavior)return void this.logger.info("Skipping location/currency detection (currencyBehavior is not set to auto)");this.logger.info("Initializing location and currency detection...");const n=Wt.getInstance(),s=new URLSearchParams(window.location.search).get("country"),a=sessionStorage.getItem("next_selected_country"),r=s||a;let o=null;if(r){this.logger.info(`Using forced country: ${r} (source: ${s?"URL":"session"})`);try{const t=yield fetch(`https://cdn-countries.muddy-wind-c7ca.workers.dev/countries/${r.toUpperCase()}/states`);if(t.ok){const e=yield t.json();o={detectedCountryCode:r.toUpperCase(),detectedCountryConfig:e.countryConfig||{currencyCode:"USD",currencySymbol:"$",stateLabel:"State / Province",stateRequired:!0,postcodeLabel:"Postcode / ZIP",postcodeMinLength:2,postcodeMaxLength:20},detectedStates:e.states||[],countries:[]},s&&sessionStorage.setItem("next_selected_country",s.toUpperCase()),this.logger.info("Country config loaded:",{country:null==o?void 0:o.detectedCountryCode,currency:null==o?void 0:o.detectedCountryConfig.currencyCode})}else this.logger.warn(`Failed to fetch country config for ${r}, falling back to detection`)}catch(e){this.logger.error("Error fetching country config:",e)}}if(o){if(o&&!(null==(t=o.countries)?void 0:t.length))try{const t=yield n.getLocationData();o.countries=t.countries||[]}catch(e){this.logger.warn("Failed to fetch countries list:",e)}}else{i.addressConfig&&n.setConfig(i.addressConfig);const t=n.getLocationData(),s=new Promise((t,e)=>setTimeout(()=>e(new Error("Location detection timeout")),3e3));try{o=yield Promise.race([t,s])}catch(e){this.logger.warn("Location detection failed or timed out, using defaults:",e),o={detectedCountryCode:"US",detectedCountryConfig:{stateLabel:"State",stateRequired:!0,postcodeLabel:"ZIP Code",postcodeRegex:"^\\d{5}(-\\d{4})?$",postcodeMinLength:5,postcodeMaxLength:10,postcodeExample:"12345",postcodeFormat:null,currencyCode:"USD",currencySymbol:"$"},detectedStates:[],countries:[]}}}if(o){this.logger.info("User location detected:",{country:o.detectedCountryCode,currency:o.detectedCountryConfig.currencyCode,currencySymbol:o.detectedCountryConfig.currencySymbol}),i.updateConfig({detectedCountry:o.detectedCountryCode,detectedCurrency:o.detectedCountryConfig.currencyCode,locationData:o});const t=new URLSearchParams(window.location.search).get("currency"),e=sessionStorage.getItem("next_selected_currency"),n=o.detectedCountryConfig.currencyCode;let s;t?(s=t.toUpperCase(),this.logger.info("Currency override from URL:",s),sessionStorage.setItem("next_selected_currency",s)):e?(s=e,this.logger.info("Using saved currency preference:",s)):(s=n,this.logger.info("Using detected currency:",s)),i.updateConfig({selectedCurrency:s}),this.logger.debug("Location and currency initialized:",{detectedCountry:i.detectedCountry,detectedCurrency:i.detectedCurrency,selectedCurrency:i.selectedCurrency})}}catch(e){this.logger.warn("Failed to initialize location/currency, using defaults:",e);const t=sessionStorage.getItem("next_selected_currency"),i=new URLSearchParams(window.location.search).get("currency");let n="USD";i?(n=i.toUpperCase(),sessionStorage.setItem("next_selected_currency",n)):t&&(n=t),vt.getState().updateConfig({detectedCountry:"US",detectedCurrency:"USD",selectedCurrency:n})}})}static loadConfiguration(){return m(this,null,function*(){const t=vt.getState(),e=new URLSearchParams(window.location.search);if("true"===e.get("reset")){yield this.clearAllStorage(),e.delete("reset");const t=window.location.pathname+(e.toString()?"?"+e.toString():"");window.history.replaceState({},"",t)}yield this.captureUrlParameters(e);const i="true"===e.get("debugger"),n=e.get("forcePackageId"),s=e.get("forceShippingId");t.loadFromWindow(),t.loadFromMeta(),i&&t.updateConfig({debug:!0}),n&&(this.logger.info("forcePackageId parameter detected:",n),window._nextForcePackageId=n),s&&(this.logger.info("forceShippingId parameter detected:",s),window._nextForceShippingId=s),this.logger.debug("Configuration loaded (metatags have priority):",t)})}static loadCampaignData(){return m(this,null,function*(){const t=vt.getState(),e=lt.getState();if(!t.apiKey)throw new Error("API key not found. Please set next-api-key meta tag or window.nextConfig.apiKey");this.campaignLoadStartTime=Date.now(),yield e.loadCampaign(t.apiKey),this.campaignLoadTime=Date.now()-this.campaignLoadStartTime,this.campaignFromCache=e.isFromCache||!1,this.logger.debug("Campaign data loaded"),yield this.processForcePackageId(),yield this.processForceShippingId(),yield this.processProfileParameter(),st.getInstance().emit("sdk:url-parameters-processed",{}),this.logger.debug("Emitted sdk:url-parameters-processed event")})}static processForcePackageId(){return m(this,null,function*(){const t=window._nextForcePackageId;if(t)try{this.logger.info("Processing forcePackageId parameter:",t);const e=Et.getState(),i=lt.getState();yield e.clear(),this.logger.debug("Cart cleared for forcePackageId");const n=t.split(",").map(t=>{const[e,i]=t.trim().split(":"),n=parseInt(e||"",10),s=i?parseInt(i,10):1;if(isNaN(n)||n<=0)throw new Error(`Invalid package ID: ${e}`);if(isNaN(s)||s<=0)throw new Error(`Invalid quantity: ${i}`);return{packageId:n,quantity:s}});this.logger.debug("Parsed package specifications:",n);for(const t of n)i.getPackage(t.packageId)?(yield e.addItem({packageId:t.packageId,quantity:t.quantity,isUpsell:!1}),this.logger.debug(`Added package ${t.packageId} with quantity ${t.quantity} to cart`)):this.logger.warn(`Package ${t.packageId} not found in campaign data, skipping`);this.logger.info(`Successfully processed forcePackageId: added ${n.length} package(s) to cart`),delete window._nextForcePackageId}catch(e){this.logger.error("Error processing forcePackageId parameter:",e)}})}static processProfileParameter(){return m(this,null,function*(){const t=new URLSearchParams(window.location.search),e=t.get("profile")||t.get("forceProfile")||t.get("packageProfile"),i=vt.getState();if(i.profiles&&Object.keys(i.profiles).length>0){const{useProfileStore:t}=yield Promise.resolve().then(()=>ft),e=t.getState();Object.entries(i.profiles).forEach(([t,i])=>{e.registerProfile({id:t,name:i.name,description:i.description||"",packageMappings:i.packageMappings})}),this.logger.debug(`Registered ${Object.keys(i.profiles).length} profiles from config`)}if(e){this.logger.info("Profile parameter detected:",e);try{const{ProfileManager:i}=yield Promise.resolve().then(()=>te),n=i.getInstance(),s=null!==t.get("forceProfile");yield n.applyProfile(e,{clearCart:s}),this.logger.info(`Profile "${e}" applied successfully from URL`)}catch(a){this.logger.error("Failed to apply profile from URL:",a)}return}const{useProfileStore:n}=yield Promise.resolve().then(()=>ft),s=n.getState();if(s.activeProfileId&&"default"!==s.activeProfileId&&"regular"!==s.activeProfileId)try{this.logger.info("Restoring persisted profile:",s.activeProfileId);const{ProfileManager:t}=yield Promise.resolve().then(()=>te),e=t.getInstance();return yield e.applyProfile(s.activeProfileId,{clearCart:!1,preserveQuantities:!0}),void this.logger.info(`Restored profile "${s.activeProfileId}" from previous session`)}catch(a){this.logger.error("Failed to restore persisted profile:",a)}if(i.defaultProfile&&!s.activeProfileId)try{this.logger.info("Applying default profile:",i.defaultProfile);const{ProfileManager:t}=yield Promise.resolve().then(()=>te),e=t.getInstance();yield e.applyProfile(i.defaultProfile)}catch(a){this.logger.error("Failed to apply default profile:",a)}})}static processForceShippingId(){return m(this,null,function*(){const t=window._nextForceShippingId;if(t)try{this.logger.info("Processing forceShippingId parameter:",t);const e=Et.getState(),i=lt.getState(),n=parseInt(t,10);if(isNaN(n)||n<=0)throw new Error(`Invalid shipping ID: ${t}`);const s=i.data;if(!(null==s?void 0:s.shipping_methods))return void this.logger.warn("No shipping methods available in campaign data");const a=s.shipping_methods.find(t=>t.ref_id===n);if(!a)return this.logger.warn(`Shipping method ${n} not found in campaign data`),void this.logger.debug("Available shipping methods:",s.shipping_methods.map(t=>({id:t.ref_id,code:t.code,price:t.price})));yield e.setShippingMethod(n),this.logger.info(`Successfully set shipping method: ${a.code} (ID: ${n}, Price: $${a.price})`),delete window._nextForceShippingId}catch(e){this.logger.error("Error processing forceShippingId parameter:",e)}})}static initializeAttribution(){return m(this,null,function*(){var t;try{this.logger.info("Initializing attribution...");const e=Ut.getState(),i=vt.getState();yield e.initialize();const n="undefined"!=typeof window&&window.__NEXT_SDK_VERSION__?window.__NEXT_SDK_VERSION__:"unknown";if(e.updateAttribution({metadata:u(c({},e.metadata),{sdk_version:n})}),this.logger.debug(`Added SDK version to attribution metadata: ${n}`),this.setupAttributionListeners(),null==(t=i.utmTransfer)?void 0:t.enabled){const{UtmTransfer:t}=yield Promise.resolve().then(()=>sa);new t(i.utmTransfer).init(),this.logger.debug("UTM transfer initialized")}this.logger.debug("Attribution initialized")}catch(e){this.logger.error("Attribution initialization failed:",e)}})}static setupAttributionListeners(){const t=st.getInstance(),e=Ut.getState();t.on("campaign:loaded",t=>{(null==t?void 0:t.name)&&!e.funnel&&(e.setFunnelName(t.name),this.logger.debug("Set funnel name from campaign:",t.name))}),t.on("cart:updated",()=>{e.updateAttribution({metadata:u(c({},e.metadata),{conversion_timestamp:Date.now()})}),this.logger.debug("Updated attribution with conversion timestamp")}),window.addEventListener("popstate",()=>{e.updateAttribution({metadata:u(c({},e.metadata),{landing_page:window.location.href})})})}static initializeAnalytics(){return m(this,null,function*(){setTimeout(()=>m(this,null,function*(){try{this.logger.info("Initializing analytics v2 (lazy)...");const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);yield t.initialize(),this.logger.debug("Analytics v2 initialized successfully (lazy)")}catch(t){this.logger.warn("Analytics v2 initialization failed (non-critical):",t)}}),0)})}static initializeErrorHandler(){try{Promise.resolve().then(()=>ra).then(({errorHandler:t})=>{t.initialize(),this.logger.debug("Error handler initialized")})}catch(t){this.logger.warn("Error handler initialization failed:",t)}}static checkAndLoadOrder(){return m(this,null,function*(){const t=new URLSearchParams(window.location.search),e=t.get("ref_id")||t.get("order_ref_id");if(e){const n=t.get("ref_id")?"ref_id":"order_ref_id";this.logger.info(`Page loaded with ${n} parameter, auto-loading order:`,e);try{const t=vt.getState(),i=Dt.getState(),n=new qt(t.apiKey);yield i.loadOrder(e,n),this.logger.info("Order loaded successfully:",i.order),i.order&&this.logger.info("Order supports upsells:",i.order.supports_post_purchase_upsells)}catch(i){this.logger.error("Failed to auto-load order:",i)}}})}static scanAndEnhanceDOM(){return m(this,null,function*(){this.attributeScanner&&this.attributeScanner.destroy(),this.attributeScanner=new Kt,yield this.attributeScanner.scanAndEnhance(document.body);const t=this.attributeScanner.getStats();this.logger.info("DOM scanning and enhancement complete",t)})}static setupReadyCallbacks(){const t=Ht.getInstance();"undefined"!=typeof window&&(Array.isArray(window.nextReady)&&window.nextReady.forEach(e=>{try{e(t)}catch(i){this.logger.error("Ready callback error:",i)}}),window.next=t,window.nextReady={push:e=>{try{e(t)}catch(i){this.logger.error("Ready callback error:",i)}}},this.logger.debug("nextReady callback system and window.next API initialized"))}static initializeDebugMode(){return m(this,null,function*(){if(vt.getState().debug){this.logger.info("Debug mode enabled - initializing debug utilities"),Q.setLogLevel(J.DEBUG),this.logger.info("Logger level set to DEBUG");const{debugOverlay:t}=yield Promise.resolve().then(()=>Da);t.initialize(),this.setupGlobalDebugUtils(),this.logger.info("Debug utilities initialized ✅")}})}static setupGlobalDebugUtils(){"undefined"!=typeof window&&(window.nextDebug={overlay:()=>Promise.resolve().then(()=>Da).then(t=>t.debugOverlay),testMode:Zt,stores:{cart:Et,campaign:lt,config:vt,checkout:At,order:Dt,attribution:Ut},sdk:Ht.getInstance(),reinitialize:()=>this.reinitialize(),getStats:()=>this.getInitializationStats(),addToCart:(t,e=1)=>{const i=Et.getState(),n=lt.getState().getPackage(t);n&&i.addItem({packageId:t,quantity:e,price:parseFloat(n.price),title:n.name,isUpsell:!1})},removeFromCart:t=>{Et.getState().removeItem(t)},updateQuantity:(t,e)=>{Et.getState().updateQuantity(t,e)},loadCampaign:()=>{const t=vt.getState();return lt.getState().loadCampaign(t.apiKey)},clearCampaignCache:()=>{lt.getState().clearCache()},getCacheInfo:()=>lt.getState().getCacheInfo(),inspectPackage:t=>{lt.getState().getPackage(t)},testShippingMethod:t=>m(this,null,function*(){try{const e=Et.getState();yield e.setShippingMethod(t),e.shippingMethod,document.dispatchEvent(new CustomEvent("debug:update-content"))}catch(e){}}),sortPackages:t=>{document.dispatchEvent(new CustomEvent("debug:update-content"))},analytics:{getStatus:()=>m(this,null,function*(){const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);return t.getStatus()}),getProviders:()=>m(this,null,function*(){const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);return t.getStatus().providers}),track:(t,e)=>m(this,null,function*(){const{nextAnalytics:i}=yield Promise.resolve().then(()=>ti);return i.track(c({event:t},e))}),setDebugMode:t=>m(this,null,function*(){const{nextAnalytics:e}=yield Promise.resolve().then(()=>ti);return e.setDebugMode(t)}),invalidateContext:()=>m(this,null,function*(){const{nextAnalytics:t}=yield Promise.resolve().then(()=>ti);return t.invalidateContext()})},attribution:{debug:()=>Ut.getState().debug(),get:()=>Ut.getState().getAttributionForApi(),setFunnel:t=>Ut.getState().setFunnelName(t),setEvclid:t=>Ut.getState().setEverflowClickId(t),clearFunnel:()=>Ut.getState().clearPersistedFunnel(),getFunnel:()=>{const t=Ut.getState(),e=localStorage.getItem("next_funnel_name")||sessionStorage.getItem("next_funnel_name");return t.funnel||e||"(not set)"}},highlightElement:t=>{this.logger.debug(`🎯 Highlighting element: ${t}`)},addTestItems:()=>{const t=Et.getState();[2,7,9].forEach(e=>{t.addItem({packageId:e,quantity:1,price:19.99,title:`Test Package ${e}`,isUpsell:!1})})},accordion:{open:t=>{document.dispatchEvent(new CustomEvent("next:accordion-open",{detail:{id:t}}))},close:t=>{document.dispatchEvent(new CustomEvent("next:accordion-close",{detail:{id:t}}))},toggle:t=>{document.dispatchEvent(new CustomEvent("next:accordion-toggle",{detail:{id:t}}))}},order:{getJourney:()=>Dt.getState().getUpsellJourney(),isExpired:()=>Dt.getState().isOrderExpired(),clearCache:()=>{Dt.getState().clearOrder()},getStats:()=>{const t=Dt.getState();return{hasOrder:!!t.order,refId:t.refId,orderAge:t.orderLoadedAt?`${Math.floor((Date.now()-t.orderLoadedAt)/1e3/60)} minutes`:"N/A",viewedUpsells:t.viewedUpsells,viewedUpsellPages:t.viewedUpsellPages,completedUpsells:t.completedUpsells,journeyLength:t.upsellJourney.length}}}})}static isInitialized(){return this.initialized}static reinitialize(){return m(this,null,function*(){this.logger.info("Reinitializing SDK..."),this.attributeScanner&&(this.attributeScanner.destroy(),this.attributeScanner=null),this.initialized=!1,this.retryAttempts=0,yield this.initialize()})}static waitForDOM(){return m(this,null,function*(){if("loading"===document.readyState)return new Promise(t=>{const e=()=>{document.removeEventListener("DOMContentLoaded",e),document.removeEventListener("readystatechange",e),t()};document.addEventListener("DOMContentLoaded",e),document.addEventListener("readystatechange",e)})})}static waitForStoreRehydration(){return m(this,null,function*(){const t=Et.getState();sessionStorage.getItem(it)?(this.logger.debug("Waiting for cart store rehydration..."),yield new Promise(t=>{setTimeout(t,50)}),yield t.calculateTotals(),this.logger.debug("Cart store rehydration complete",{itemCount:t.items.length,total:t.total,isEmpty:t.isEmpty})):this.logger.debug("No cart data to rehydrate")})}static emitInitializedEvent(){var t;if("undefined"!=typeof window){const e=new CustomEvent("next:initialized",{detail:{version:"0.2.0",timestamp:Date.now(),stats:null==(t=this.attributeScanner)?void 0:t.getStats()}});window.dispatchEvent(e)}}static getAttributeScanner(){return this.attributeScanner}static getInitializationStats(){return c({initialized:this.initialized,retryAttempts:this.retryAttempts},this.attributeScanner&&{scannerStats:this.attributeScanner.getStats()})}static clearAllStorage(){return m(this,null,function*(){this.logger.info("Clearing all Next Campaign Cart storage...");const t=[];for(let i=0;i<sessionStorage.length;i++){const e=sessionStorage.key(i);e&&(e.startsWith("next-")||e.startsWith("_next"))&&t.push(e)}t.forEach(t=>sessionStorage.removeItem(t));const e=[];for(let i=0;i<localStorage.length;i++){const t=localStorage.key(i);t&&(t.startsWith("next-")||t.startsWith("_next"))&&e.push(t)}e.forEach(t=>localStorage.removeItem(t)),document.cookie.split(";").forEach(t=>{const e=t.indexOf("="),i=e>-1?t.substr(0,e).trim():t.trim();(i.startsWith("next_")||i.startsWith("_next"))&&(document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=${window.location.hostname};`,document.cookie=`${i}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.${window.location.hostname};`)}),this.logger.info(`Cleared ${t.length} sessionStorage items, ${e.length} localStorage items`)})}};Qt.logger=X("SDKInitializer"),Qt.initialized=!1,Qt.attributeScanner=null,Qt.retryAttempts=0,Qt.maxRetries=3,Qt.initStartTime=0,Qt.campaignLoadStartTime=0,Qt.campaignLoadTime=0,Qt.campaignFromCache=!1;let Yt=Qt;class Xt{constructor(){this.logger=X("ProfileManager"),this.eventBus=st.getInstance(),this.profileOperationInProgress=!1,this.initialCartState=null,this.captureInitialState()}static getInstance(){return Xt.instance||(Xt.instance=new Xt),Xt.instance}captureInitialState(){const t=Et.getState(),e=mt.getState();e.activeProfileId&&"default"!==e.activeProfileId&&"regular"!==e.activeProfileId||(this.initialCartState=[...t.items],this.logger.debug("Captured initial cart state with items:",this.initialCartState.map(t=>t.packageId)))}applyProfile(t){return m(this,arguments,function*(t,e={}){if(this.profileOperationInProgress)this.logger.warn("Profile operation already in progress, skipping");else{this.profileOperationInProgress=!0;try{const{clearCart:i=!1,preserveQuantities:n=!0,skipValidation:s=!1}=e;this.logger.info(`Applying profile: ${t}`,e);const a=mt.getState(),r=Et.getState();if("default"===t||"regular"===t||!t)return a.activeProfileId&&"default"!==a.activeProfileId&&"regular"!==a.activeProfileId?(yield this.revertProfile(),void(this.profileOperationInProgress=!1)):(this.logger.info("Already on default/regular profile, no action needed"),void(this.profileOperationInProgress=!1));const o=a.getProfileById(t);if(!o){const e=`Profile "${t}" not found`;throw this.logger.error(e),new Error(e)}if(a.activeProfileId===t)return void this.logger.info(`Profile "${t}" is already active`);const d=[...r.items];if(i)return yield r.clear(),a.activateProfile(t),a.clearOriginalCartSnapshot(),this.eventBus.emit("profile:applied",{profileId:t,previousProfileId:a.previousProfileId,cleared:!0,itemsSwapped:0,profile:o}),void this.logger.info(`Profile "${t}" applied with cart cleared`);d.length>0&&!a.originalCartSnapshot?(a.setOriginalCartSnapshot(d),this.logger.debug("Saved original cart snapshot before profile application")):a.originalCartSnapshot&&this.logger.debug("Keeping existing cart snapshot, not overwriting");const l=yield this.mapCartItems(d,o,n,s);0===l.length&&d.length>0&&this.logger.warn("No items could be mapped to the new profile"),yield this.applyMappedItems(l,d),a.activateProfile(t);const c={profileId:t,action:"applied",itemsAffected:l.length};a.previousProfileId&&(c.previousProfileId=a.previousProfileId),a.addMappingEvent(c),this.eventBus.emit("profile:applied",{profileId:t,previousProfileId:a.previousProfileId,itemsSwapped:l.length,originalItems:d.length,profile:o}),this.logger.info(`Profile "${t}" applied successfully, swapped ${l.length} items`)}finally{this.profileOperationInProgress=!1}}})}mapCartItems(t,e,i,n){return m(this,null,function*(){const s=lt.getState(),a=[];for(const r of t){const t=e.packageMappings[r.packageId];if(void 0!==t)if(n)a.push({originalItem:r,mappedPackageId:t,quantity:i?r.quantity:1});else{const e=s.getPackage(t);if(!e){this.logger.warn(`Mapped package ${t} not found in campaign data, skipping`);continue}a.push({originalItem:r,mappedPackageId:t,quantity:i?r.quantity:1,mappedPackage:e})}else this.logger.debug(`No mapping found for package ${r.packageId} in profile ${e.id}, preserving as-is`),a.push({originalItem:r,mappedPackageId:r.packageId,quantity:i?r.quantity:1,preserveUnmapped:!0})}return a})}applyMappedItems(t,e){return m(this,null,function*(){const e=Et.getState(),i=[];for(const n of t){const t=!0===n.preserveUnmapped;i.push({packageId:n.mappedPackageId,quantity:n.quantity,isUpsell:n.originalItem.is_upsell||!1,originalPackageId:t?void 0:n.originalItem.packageId}),t?this.logger.debug(`Will preserve unmapped package ${n.mappedPackageId}`):this.logger.debug(`Will add mapped package ${n.mappedPackageId} (was ${n.originalItem.packageId})`)}yield e.swapCart(i),this.logger.info(`Applied ${t.length} items to cart (including preserved items)`)})}revertProfile(){return m(this,null,function*(){const t=mt.getState(),e=Et.getState(),i=t.activeProfileId;let n=this.initialCartState;if(n&&0!==n.length||(n=t.originalCartSnapshot||null),!n||0===n.length){if(this.logger.warn("No cart state to revert to, attempting to reverse profile mappings"),i&&"default"!==i&&"regular"!==i){const n=e.items;if(n.length>0){const s=n.map(t=>({packageId:t.originalPackageId||t.packageId,quantity:t.quantity,isUpsell:t.is_upsell||!1}));this.logger.info("Attempting to reverse profile mappings for cart items");try{return yield e.swapCart(s),t.deactivateProfile(),this.eventBus.emit("profile:reverted",{previousProfileId:i,itemsRestored:s.length}),void this.logger.info(`Reversed profile mappings for ${s.length} items`)}catch(r){this.logger.error("Failed to reverse profile mappings:",r)}}}return t.deactivateProfile(),void this.eventBus.emit("profile:reverted",{previousProfileId:i,itemsRestored:0})}this.logger.info("Reverting to original cart state"),t.deactivateProfile(),t.clearOriginalCartSnapshot();const s=n.map(t=>({packageId:t.originalPackageId||t.packageId,quantity:t.quantity,isUpsell:t.is_upsell||!1}));let a=0;try{yield e.swapCart(s),a=s.length}catch(r){this.logger.error("Failed to restore cart items:",r),yield e.clear();for(const t of n)try{yield e.addItem({packageId:t.packageId,quantity:t.quantity,isUpsell:t.is_upsell||!1}),a++}catch(o){this.logger.error(`Failed to restore item ${t.packageId}:`,o)}}t.addMappingEvent({profileId:i||"unknown",action:"reverted",itemsAffected:a}),this.eventBus.emit("profile:reverted",{previousProfileId:i,itemsRestored:a}),this.logger.info(`Reverted profile, restored ${a} items`)})}switchProfile(t,e){return m(this,arguments,function*(t,e,i={}){if(t){const e=mt.getState();e.activeProfileId!==t&&this.logger.warn(`Expected active profile "${t}" but found "${e.activeProfileId}"`)}yield this.applyProfile(e,i);const n=mt.getState(),s={profileId:e,action:"switched",itemsAffected:Et.getState().items.length};t&&(s.previousProfileId=t),n.addMappingEvent(s)})}canApplyProfile(t){return!!mt.getState().getProfileById(t)}getProfileStats(){const t=mt.getState();return{activeProfile:t.activeProfileId,previousProfile:t.previousProfileId,totalProfiles:t.profiles.size,historyLength:t.mappingHistory.length,hasOriginalSnapshot:!!t.originalCartSnapshot}}clearAllProfiles(){return m(this,null,function*(){yield this.revertProfile(),mt.getState().reset(),this.logger.info("All profile data cleared")})}}const te=Object.freeze(Object.defineProperty({__proto__:null,ProfileManager:Xt},Symbol.toStringTag,{value:"Module"}));class ee{constructor(){this.logger=X("ProfileMapper")}static getInstance(){return ee.instance||(ee.instance=new ee),ee.instance}mapPackageId(t,e){if(!t||t<=0)return t;const i=mt.getState(),n=e?i.getProfileById(e):i.getActiveProfile();if(!n||!n.packageMappings)return t;const s=n.packageMappings[t];return void 0!==s&&s>0?(this.logger.debug(`Mapped package ${t} -> ${s} (profile: ${n.id})`),s):t}mapPackageIds(t,e){return t&&0!==t.length?t.map(t=>this.mapPackageId(t,e)):[]}getOriginalPackageId(t,e){if(!t||t<=0)return null;const i=mt.getState(),n=e?i.getProfileById(e):i.getActiveProfile();if(!n)return null;if(n.reverseMapping&&void 0!==n.reverseMapping[t]){const e=n.reverseMapping[t];return this.logger.debug(`Reverse mapped ${t} -> ${e} (profile: ${n.id})`),e}for(const[s,a]of Object.entries(n.packageMappings))if(a===t){const e=parseInt(s,10);return this.logger.debug(`Reverse mapped ${t} -> ${e} (profile: ${n.id}, linear search)`),e}return null}canMapPackage(t,e){if(!t||t<=0)return!1;const i=mt.getState(),n=e?i.getProfileById(e):i.getActiveProfile();return!(!n||!n.packageMappings)&&t in n.packageMappings}getProfileMappings(t){const e=mt.getState(),i=t?e.getProfileById(t):e.getActiveProfile();return(null==i?void 0:i.packageMappings)||null}hasActiveProfile(){return null!==mt.getState().activeProfileId}getActiveProfileId(){return mt.getState().activeProfileId}mapCartItem(t,e){const i=this.mapPackageId(t.packageId,e);return i!==t.packageId?u(c({},t),{packageId:i,originalPackageId:t.packageId}):t}mapCartItems(t,e){return t.map(t=>this.mapCartItem(t,e))}getMappingStats(t){const e=mt.getState(),i=t?e.getProfileById(t):e.getActiveProfile();return i?{profileId:i.id,totalMappings:Object.keys(i.packageMappings).length,activeMappings:Object.keys(i.packageMappings).filter(t=>void 0!==i.packageMappings[parseInt(t,10)]).length,hasReverseMapping:!!i.reverseMapping}:null}}class ie{constructor(t){this.subscriptions=[],this.element=t,this.logger=X(this.constructor.name),this.eventBus=st.getInstance()}destroy(){this.subscriptions.forEach(t=>t()),this.subscriptions=[],this.cleanupEventListeners()}emit(t,e){this.eventBus.emit(t,e)}on(t,e){this.eventBus.on(t,e)}subscribe(t,e){const i=t.subscribe(e);this.subscriptions.push(i)}getAttribute(t){return this.element.getAttribute(t)}getRequiredAttribute(t){const e=this.getAttribute(t);if(!e)throw new Error(`Required attribute ${t} not found on element`);return e}hasAttribute(t){return this.element.hasAttribute(t)}setAttribute(t,e){this.element.setAttribute(t,e)}removeAttribute(t){this.element.removeAttribute(t)}addClass(t){this.element.classList.add(t)}removeClass(t){this.element.classList.remove(t)}hasClass(t){return this.element.classList.contains(t)}toggleClass(t,e){this.element.classList.toggle(t,e)}updateTextContent(t){this.element.textContent=t}updateInnerHTML(t){this.element.innerHTML=t}cleanupEventListeners(){}validateElement(){if(!this.element)throw new Error("Element is required")}handleError(t,e){const i=t instanceof Error?t.message:String(t);this.logger.error(`Error in ${e}:`,i),this.emit("error:occurred",{message:i,code:"ENHANCER_ERROR",details:{enhancer:this.constructor.name,context:e,element:this.element}})}}class ne extends ie{constructor(){super(...arguments),this.clearCart=!1,this.preserveQuantities=!0,this.profileManager=Xt.getInstance()}initialize(){return m(this,null,function*(){this.validateElement(),this.profileId=this.getAttribute("data-next-profile")||void 0,this.profileId?(this.clearCart="true"===this.getAttribute("data-next-clear-cart"),this.preserveQuantities="false"!==this.getAttribute("data-next-preserve-quantities"),this.clickHandler=this.handleClick.bind(this),this.element.addEventListener("click",this.clickHandler),this.updateActiveState(),this.eventBus.on("profile:applied",this.updateActiveState.bind(this)),this.eventBus.on("profile:reverted",this.updateActiveState.bind(this)),this.element.classList.add("next-profile-switcher"),this.logger.debug("ProfileSwitcherEnhancer initialized",{profileId:this.profileId,clearCart:this.clearCart,preserveQuantities:this.preserveQuantities})):this.logger.error("Profile ID is required for profile switcher",this.element)})}handleClick(t){return m(this,null,function*(){if(t.preventDefault(),this.profileId)try{if(this.element.classList.add("next-loading"),this.element.setAttribute("aria-busy","true"),mt.getState().activeProfileId===this.profileId)return void this.logger.info(`Profile "${this.profileId}" is already active`);yield this.profileManager.applyProfile(this.profileId,{clearCart:this.clearCart,preserveQuantities:this.preserveQuantities}),this.logger.info(`Profile "${this.profileId}" applied via switcher`),this.eventBus.emit("action:success",{action:"profile-switch",data:{profileId:this.profileId}})}catch(e){this.logger.error(`Failed to apply profile "${this.profileId}":`,e),this.eventBus.emit("action:failed",{action:"profile-switch",error:e})}finally{this.element.classList.remove("next-loading"),this.element.setAttribute("aria-busy","false")}})}updateActiveState(){const t=mt.getState().activeProfileId===this.profileId;this.element.classList.toggle("next-profile-active",t),this.element.setAttribute("aria-pressed",String(t));const e=this.element.getAttribute("data-next-active-text"),i=this.element.getAttribute("data-next-inactive-text");if(e&&i){const n=this.element.querySelector(".next-profile-text")||this.element;n.textContent&&(n.textContent=t?e:i)}}update(t){this.updateActiveState()}destroy(){this.clickHandler&&this.element.removeEventListener("click",this.clickHandler),this.element.classList.remove("next-profile-switcher","next-profile-active","next-loading"),this.element.removeAttribute("aria-pressed"),this.element.removeAttribute("aria-busy"),super.destroy()}}class se extends ie{constructor(){super(...arguments),this.profileManager=Xt.getInstance(),this.clearCart=!1,this.preserveQuantities=!0}initialize(){return m(this,null,function*(){this.validateElement(),this.element instanceof HTMLSelectElement?(this.selectElement=this.element,this.clearCart="true"===this.getAttribute("data-next-clear-cart"),this.preserveQuantities="false"!==this.getAttribute("data-next-preserve-quantities"),this.changeHandler=this.handleChange.bind(this),this.selectElement.addEventListener("change",this.changeHandler),"true"===this.getAttribute("data-next-auto-populate")&&this.populateOptions(),this.updateSelectedValue(),this.eventBus.on("profile:applied",this.updateSelectedValue.bind(this)),this.eventBus.on("profile:reverted",this.updateSelectedValue.bind(this)),this.element.classList.add("next-profile-selector"),this.logger.debug("ProfileSelectorEnhancer initialized")):this.logger.error("ProfileSelectorEnhancer requires a <select> element",this.element)})}populateOptions(){if(!this.selectElement)return;const t=mt.getState().getAllProfiles();this.selectElement.innerHTML="";const e=document.createElement("option");e.value="",e.textContent="Regular Pricing",this.selectElement.appendChild(e),t.forEach(t=>{const e=document.createElement("option");e.value=t.id,e.textContent=t.name,this.selectElement&&this.selectElement.appendChild(e)})}handleChange(t){return m(this,null,function*(){if(!this.selectElement)return;const t=this.selectElement.value;try{t?(yield this.profileManager.applyProfile(t,{clearCart:this.clearCart,preserveQuantities:this.preserveQuantities}),this.logger.info(`Profile "${t}" applied via selector`)):(yield this.profileManager.revertProfile(),this.logger.info("Profile reverted via selector")),this.eventBus.emit("action:success",{action:"profile-select",data:{profileId:t||"none"}})}catch(e){this.logger.error(`Failed to apply profile "${t}":`,e),this.updateSelectedValue(),this.eventBus.emit("action:failed",{action:"profile-select",error:e})}})}updateSelectedValue(){if(!this.selectElement)return;const t=mt.getState();this.selectElement.value=t.activeProfileId||""}update(t){this.updateSelectedValue()}destroy(){this.changeHandler&&this.selectElement&&this.selectElement.removeEventListener("change",this.changeHandler),this.element.classList.remove("next-profile-selector"),super.destroy()}}const ae=Object.freeze(Object.defineProperty({__proto__:null,ProfileSelectorEnhancer:se,ProfileSwitcherEnhancer:ne},Symbol.toStringTag,{value:"Module"})),re="undefined"!=typeof window&&window.__NEXT_SDK_VERSION__?window.__NEXT_SDK_VERSION__:"__VERSION__";"undefined"!=typeof window&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{Yt.initialize()}):Yt.initialize(),window.addEventListener("next:ready",()=>{"requestIdleCallback"in window?(requestIdleCallback(()=>{Promise.resolve().then(()=>gi),Promise.resolve().then(()=>Pi),Promise.resolve().then(()=>Ui),Promise.resolve().then(()=>wi),Promise.resolve().then(()=>yi),Promise.resolve().then(()=>Oi)},{timeout:5e3}),requestIdleCallback(()=>{Promise.resolve().then(()=>pn),Promise.resolve().then(()=>yn),Promise.resolve().then(()=>ki),Promise.resolve().then(()=>En),Promise.resolve().then(()=>de),Promise.resolve().then(()=>xn),Promise.resolve().then(()=>kn)},{timeout:5e3}),requestIdleCallback(()=>{Promise.resolve().then(()=>Ln),Promise.resolve().then(()=>In),Promise.resolve().then(()=>ei),Promise.resolve().then(()=>te),Promise.resolve().then(()=>ae)},{timeout:5e3})):setTimeout(()=>{Promise.resolve().then(()=>gi),Promise.resolve().then(()=>wi),Promise.resolve().then(()=>Na)},1e3)}));const oe=X("AttributionCollector"),de=Object.freeze(Object.defineProperty({__proto__:null,AttributionCollector:class{collect(){return m(this,null,function*(){const t=this.collectMetadata();return{affiliate:this.getStoredValue("affid")||this.getStoredValue("aff")||"",funnel:this.getFunnelName(),gclid:this.getStoredValue("gclid")||"",utm_source:this.getStoredValue("utm_source")||"",utm_medium:this.getStoredValue("utm_medium")||"",utm_campaign:this.getStoredValue("utm_campaign")||"",utm_content:this.getStoredValue("utm_content")||"",utm_term:this.getStoredValue("utm_term")||"",subaffiliate1:this.limitSubaffiliateLength(this.getStoredValue("subaffiliate1")||this.getStoredValue("sub1")),subaffiliate2:this.limitSubaffiliateLength(this.getStoredValue("subaffiliate2")||this.getStoredValue("sub2")),subaffiliate3:this.limitSubaffiliateLength(this.getStoredValue("subaffiliate3")||this.getStoredValue("sub3")),subaffiliate4:this.limitSubaffiliateLength(this.getStoredValue("subaffiliate4")||this.getStoredValue("sub4")),subaffiliate5:this.limitSubaffiliateLength(this.getStoredValue("subaffiliate5")||this.getStoredValue("sub5")),metadata:t,first_visit_timestamp:this.getFirstVisitTimestamp(),current_visit_timestamp:Date.now()}})}collectMetadata(){const t={landing_page:window.location.href,referrer:document.referrer||"",device:navigator.userAgent||"",device_type:this.getDeviceType(),domain:window.location.hostname,timestamp:Date.now(),fb_fbp:this.getCookie("_fbp")||"",fb_fbc:this.getCookie("_fbc")||"",fb_pixel_id:this.getFacebookPixelId()},e=this.getStoredValue("fbclid");e&&(t.fbclid=e);const i=this.getStoredValue("clickid");return i&&(t.clickid=i),this.handleEverflowClickId(t),this.collectTrackingTags(t),t}limitSubaffiliateLength(t){return t?t.length>225?(oe.warn(`Subaffiliate value truncated from ${t.length} to 225 characters`),t.substring(0,225)):t:""}getStoredValue(t){const e=new URLSearchParams(window.location.search);if(e.has(t)){const n=e.get(t)||"";try{sessionStorage.setItem(t,n)}catch(i){}return n}try{const e=sessionStorage.getItem(t);if(e)return e}catch(i){}try{const e=localStorage.getItem(t);if(e)return e}catch(i){}try{const e=localStorage.getItem("next-attribution");if(e){const i=JSON.parse(e);if(i.state&&i.state[t])return i.state[t]}}catch(i){}return""}getCookie(t){var e;const i=`; ${document.cookie}`.split(`; ${t}=`);return 2===i.length&&(null==(e=i.pop())?void 0:e.split(";").shift())||""}getDeviceType(){const t=navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)?"mobile":"desktop"}getFunnelName(){const t=new URLSearchParams(window.location.search);if(t.has("funnel")){const e=t.get("funnel")||"";if(e){const t=sessionStorage.getItem("next_funnel_name")||localStorage.getItem("next_funnel_name");t&&t!==e?oe.info(`🔄 Funnel override: "${t}" -> "${e}" (from URL parameter)`):oe.debug(`Funnel found in URL parameter: ${e}`);try{sessionStorage.setItem("next_funnel_name",e),localStorage.setItem("next_funnel_name",e),oe.info(`Persisted funnel name from URL: ${e}`)}catch(i){}return e}}try{const t=sessionStorage.getItem("next_funnel_name");if(t)return oe.debug(`Using persisted funnel from session: ${t}`),t;const e=localStorage.getItem("next_funnel_name");if(e)return oe.debug(`Using persisted funnel from localStorage: ${e}`),sessionStorage.setItem("next_funnel_name",e),e;const i=localStorage.getItem("next-attribution");if(i){const t=JSON.parse(i);if(t.state&&t.state.funnel)return oe.debug(`Using persisted funnel from attribution: ${t.state.funnel}`),sessionStorage.setItem("next_funnel_name",t.state.funnel),localStorage.setItem("next_funnel_name",t.state.funnel),t.state.funnel}}catch(i){}const e=document.querySelector('meta[name="os-tracking-tag"][data-tag-name="funnel_name"], meta[name="data-next-tracking-tag"][data-tag-name="funnel_name"], meta[name="next-funnel"]');if(e){const t=e.getAttribute("data-tag-value")||e.getAttribute("content");if(t){oe.debug(`New funnel found from meta tag: ${t}`);try{sessionStorage.setItem("next_funnel_name",t),localStorage.setItem("next_funnel_name",t),oe.info(`Persisted funnel name: ${t}`)}catch(i){}return t}}return""}handleEverflowClickId(t){const e=new URLSearchParams(window.location.search);let i=localStorage.getItem("evclid");if(e.has("evclid")?(i=e.get("evclid")||"",localStorage.setItem("evclid",i),sessionStorage.setItem("evclid",i),oe.debug(`Everflow click ID found in URL: ${i}`)):!i&&sessionStorage.getItem("evclid")&&(i=sessionStorage.getItem("evclid"),i&&(localStorage.setItem("evclid",i),oe.debug(`Everflow click ID found in sessionStorage: ${i}`))),e.has("sg_evclid")){const i=e.get("sg_evclid")||"";sessionStorage.setItem("sg_evclid",i),localStorage.setItem("sg_evclid",i),t.sg_evclid=i,oe.debug(`SG Everflow click ID found: ${i}`)}else{const e=localStorage.getItem("sg_evclid");e&&(t.sg_evclid=e)}i&&(t.everflow_transaction_id=i,oe.debug(`Added Everflow transaction ID to metadata: ${i}`))}collectTrackingTags(t){const e=document.querySelectorAll('meta[name="os-tracking-tag"], meta[name="data-next-tracking-tag"]');oe.debug(`Found ${e.length} tracking tags`),e.forEach(e=>{const i=e.getAttribute("data-tag-name"),n=e.getAttribute("data-tag-value"),s="true"===e.getAttribute("data-persist");if(i&&n&&(t[i]=n,oe.debug(`Added tracking tag: ${i} = ${n}`),s))try{sessionStorage.setItem(`tn_tag_${i}`,n),oe.debug(`Persisted tracking tag: ${i}`)}catch(a){}})}getFacebookPixelId(){const t=document.querySelector('meta[name="os-facebook-pixel"], meta[name="facebook-pixel-id"]');if(t){const e=t.getAttribute("content");if(e)return oe.debug(`Facebook Pixel ID found from meta tag: ${e}`),e}const e=document.querySelectorAll("script");for(const i of e){const t=i.textContent||"";if(t.includes("fbq(")&&t.includes("init")){const e=t.match(/fbq\s*\(\s*['"]init['"],\s*['"](\d+)['"]/);if(e&&e[1])return oe.debug(`Facebook Pixel ID found from script: ${e[1]}`),e[1]}}return""}getFirstVisitTimestamp(){try{const t=localStorage.getItem("next-attribution");if(t){const e=JSON.parse(t);if(e.state&&e.state.first_visit_timestamp)return e.state.first_visit_timestamp}}catch(t){}return Date.now()}}},Symbol.toStringTag,{value:"Module"})),le={debug:{enabled:!1,verbose:!1,logEvents:!0,logErrors:!0,persistInLocalStorage:!0},providers:[],enrichContext:!0,sessionTimeout:18e5,eventValidation:!0},ce={required:["event"],eventSpecific:{dl_purchase:["ecommerce.transaction_id","ecommerce.value","ecommerce.items"],dl_add_to_cart:["ecommerce.items","ecommerce.currency"],dl_remove_from_cart:["ecommerce.items","ecommerce.currency"],dl_view_item:["ecommerce.items","ecommerce.currency"],dl_view_item_list:["ecommerce.items","ecommerce.currency"],dl_view_search_results:["ecommerce.items","ecommerce.currency"],dl_select_item:["ecommerce.items","ecommerce.currency"],dl_begin_checkout:["ecommerce.items","ecommerce.currency"],dl_view_cart:["ecommerce.items","ecommerce.currency"],dl_add_payment_info:["ecommerce.currency"],dl_add_shipping_info:["ecommerce.currency"],dl_user_data:["user_properties"],dl_sign_up:["user_properties"],dl_login:["user_properties"],dl_subscribe:["user_properties","lead_type"],dl_package_swapped:["ecommerce.items_removed","ecommerce.items_added"],dl_upsell_purchase:["ecommerce.transaction_id","ecommerce.value","ecommerce.items"],purchase:["ecommerce.value","ecommerce.items"],add_to_cart:["ecommerce.items"],remove_from_cart:["ecommerce.items"],view_item:["ecommerce.items"],view_item_list:["ecommerce.items"],begin_checkout:["ecommerce.items"],add_payment_info:["ecommerce.value"],add_shipping_info:["ecommerce.value"]},fieldTypes:{event:"string",event_id:"string",event_category:"string",event_label:"string",cart_total:"string",lead_type:"string",pageType:"string","ecommerce.currencyCode":"string","ecommerce.currency":"string","ecommerce.value":"number","ecommerce.purchase.actionField.revenue":"string","ecommerce.purchase.actionField.tax":"string","ecommerce.purchase.actionField.shipping":"string","ecommerce.purchase.actionField.sub_total":"string","ecommerce.purchase.actionField.id":"string","ecommerce.purchase.actionField.order_name":"string","user_properties.visitor_type":"string","user_properties.customer_id":"string","user_properties.customer_order_count":"string","user_properties.customer_total_spent":"string"}},ue="nextDataLayer_debugMode",he="nextDataLayer_sessionId",pe="nextDataLayer_sessionStart",me="nextDataLayer_userProperties",fe=X("PendingEventsHandler"),ge="next_v2_pending_events";class ve{constructor(){}static getInstance(){return ve.instance||(ve.instance=new ve),ve.instance}queueEvent(t){try{const e=this.getPendingEvents(),i={event:t,timestamp:Date.now(),id:`${t.event}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};e.push(i),sessionStorage.setItem(ge,JSON.stringify(e)),fe.info(`Event queued for after redirect: ${t.event} (${e.length} total queued)`)}catch(e){fe.error("Failed to queue event:",e)}}getPendingEvents(){try{const t=sessionStorage.getItem(ge);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return fe.error("Failed to get pending events:",t),[]}}processPendingEvents(){const t=this.getPendingEvents();if(0===t.length)return void fe.debug("No pending analytics events to process");fe.info(`Processing ${t.length} pending analytics events`);const e=[...t.filter(t=>"dl_user_data"!==t.event.event||(fe.warn("Skipping queued dl_user_data - current page should fire its own"),!1))].sort((t,e)=>t.timestamp-e.timestamp),i=[];for(const a of e)try{if(Date.now()-a.timestamp>3e5){fe.warn("Skipping stale event:",a.event.event),i.push(a.id);continue}be.push(a.event),i.push(a.id),fe.debug("Processed pending event:",a.event.event)}catch(s){fe.error("Failed to process pending event:",a.event.event,s)}const n=t.filter(t=>"dl_user_data"===t.event.event);if(i.push(...n.map(t=>t.id)),i.length>0){const e=t.filter(t=>!i.includes(t.id));0===e.length?sessionStorage.removeItem(ge):sessionStorage.setItem(ge,JSON.stringify(e)),fe.debug("Removed processed events:",i.length)}}clearPendingEvents(){try{sessionStorage.removeItem(ge),fe.debug("Cleared all pending events")}catch(t){fe.error("Failed to clear pending events:",t)}}reset(){this.clearPendingEvents(),fe.debug("PendingEventsHandler reset")}initialize(){fe.debug("PendingEventsHandler initialized")}}const $e=ve.getInstance();class ye{constructor(t){this.sequenceNumber=0,this.debugMode=!1,this.context={},this.config=c(c({},le),t),this.initializeDataLayer(),this.sessionId=this.getOrCreateSessionId(),this.loadDebugMode(),this.enrichContext()}getContext(){return this.context}static getInstance(t){return ye.instance||(ye.instance=new ye(t)),ye.instance}initializeDataLayer(){"undefined"!=typeof window&&(window.NextDataLayer||(window.NextDataLayer=[]),this.config.transformFn&&(window.NextDataLayerTransformFn=this.config.transformFn))}push(t){try{if(this.config.eventValidation&&!this.validateEvent(t))return;const e=this.enrichEvent(t);let i=e;if(window.NextDataLayerTransformFn){const n=window.NextDataLayerTransformFn(e);if(!n)return void this.debug("Event filtered out by transform function",t);i=n}const n=i.ft;if(this.debug(`Event ${i.event} has _willRedirect flag:`,n),delete i.ft,n)return $e.queueEvent(i),void this.debug(`Event queued for after redirect: ${i.event}`,i);window.NextDataLayer.push(i),this.debug("Event pushed to data layer",i),this.notifyProviders(i)}catch(e){this.error("Error pushing event to data layer",e,t)}}setDebugMode(t,e){var i;if(this.debugMode=t,this.config.debug&&(this.config.debug=c(u(c({},this.config.debug),{enabled:t}),e)),null==(i=this.config.debug)?void 0:i.persistInLocalStorage)try{localStorage.setItem(ue,JSON.stringify({enabled:t,options:e}))}catch(n){}this.debug("Debug mode "+(t?"enabled":"disabled"))}isDebugMode(){return this.debugMode}invalidateContext(){this.context={},this.enrichContext(),this.debug("Context invalidated and re-enriched")}setUserProperties(t){try{localStorage.setItem(me,JSON.stringify(t)),this.debug("User properties updated",t)}catch(e){this.error("Failed to save user properties",e)}}getUserProperties(){try{const t=localStorage.getItem(me);return t?JSON.parse(t):null}catch(t){return this.error("Failed to load user properties",t),null}}clear(){window.NextDataLayer=[],this.sequenceNumber=0,this.context={},this.enrichContext(),this.debug("Data layer cleared")}validateEvent(t){for(const i of ce.required)if(!this.getNestedValue(t,i))return this.error(`Missing required field: ${i}`,null,t),!1;const e=ce.eventSpecific[t.event];if(e)for(const i of e)if(!this.getNestedValue(t,i))return this.error(`Missing required field for ${t.event}: ${i}`,null,t),!1;for(const[i,n]of Object.entries(ce.fieldTypes)){const e=this.getNestedValue(t,i);if(void 0!==e&&typeof e!==n)return this.error(`Invalid type for field ${i}: expected ${n}, got ${typeof e}`,null,t),!1}return!0}enrichEvent(t){const e={pushed_at:Date.now(),session_id:this.sessionId,sequence_number:++this.sequenceNumber,debug_mode:this.debugMode,source:"NextDataLayer",version:"0.2.0"};let i={};try{const t=Ut.getState().getAttributionForApi();t&&Object.keys(t).length>0?(i=t,this.debug("Attribution data added to event:",i)):this.debug("Attribution store exists but has no data yet")}catch(s){this.debug("Could not get attribution data:",s)}const n=u(c({},t),{vt:e});if(i&&Object.keys(i).length>0&&(n.attribution=i),this.config.enrichContext){n.event_time=n.event_time||(new Date).toISOString(),n.event_id=n.event_id||this.generateEventId();const t=this.getUserProperties();t&&(n.user_properties=c(c({},t),n.user_properties))}return n}enrichContext(){"undefined"!=typeof window&&(this.context={page_location:window.location.href,page_title:document.title,page_referrer:document.referrer,user_agent:navigator.userAgent,screen_resolution:`${screen.width}x${screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`,session_id:this.sessionId,timestamp:Date.now()})}getOrCreateSessionId(){try{const t=localStorage.getItem(he),e=localStorage.getItem(pe),i=Date.now(),n=this.config.sessionTimeout||18e5;if(t&&e&&i-parseInt(e)<n)return localStorage.setItem(pe,i.toString()),t;const s=this.generateSessionId();return localStorage.setItem(he,s),localStorage.setItem(pe,i.toString()),s}catch(t){return this.generateSessionId()}}loadDebugMode(){var t;if(null==(t=this.config.debug)?void 0:t.persistInLocalStorage)try{const t=localStorage.getItem(ue);if(t){const{enabled:e,options:i}=JSON.parse(t);this.debugMode=e,i&&this.config.debug&&(this.config.debug=c(c({},this.config.debug),i))}}catch(e){}}notifyProviders(t){if(this.config.providers)for(const i of this.config.providers)try{"function"==typeof i.isEnabled?i.isEnabled()&&i.trackEvent&&i.trackEvent(t):!1!==i.enabled&&i.trackEvent&&i.trackEvent(t)}catch(e){this.error(`Error in provider ${i.name||"unknown"}`,e,t)}}generateEventId(){return`${this.sessionId}_${this.sequenceNumber}_${Date.now()}`}generateSessionId(){return`${Date.now()}_${Math.random().toString(36).substring(2,11)}`}getNestedValue(t,e){return e.split(".").reduce((t,e)=>null==t?void 0:t[e],t)}debug(t,e){var i,n;this.debugMode&&(null==(i=this.config.debug)?void 0:i.logEvents)&&(null==(n=this.config.debug)||n.verbose)}error(t,e,i){var n;null==(n=this.config.debug)||n.logErrors}initialize(){this.initializeDataLayer(),this.debug("Data layer initialized")}addProvider(t){this.config.providers||(this.config.providers=[]),this.config.providers.push(t),this.debug(`Provider ${t.name||"unknown"} added`)}setTransformFunction(t){window.NextDataLayerTransformFn=t,this.debug("Transform function set")}getEventCount(){var t;return(null==(t=window.NextDataLayer)?void 0:t.length)||0}formatEcommerceEvent(t,e){return{event:t,event_time:(new Date).toISOString(),data:e.data||e,ecommerce:e.ecommerce||e}}formatUserDataEvent(t){return{event:"dl_user_data",event_time:(new Date).toISOString(),user_properties:t.user_properties||t,cart_total:t.cart_total,ecommerce:t.ecommerce}}}const be=ye.getInstance();class xe{constructor(t){this.enabled=!0,this.name=t}setEnabled(t){this.enabled=t}isEnabled(){return this.enabled}trackEvent(t){this.sendEvent(t)}transformEvent(t){return c({event:t.event},t.data)}debug(t,e){var i;"undefined"!=typeof window&&(null==(i=window.localStorage)||i.getItem("analytics_debug"))}isBrowser(){return"undefined"!=typeof window}getNestedProperty(t,e){return e.split(".").reduce((t,e)=>null==t?void 0:t[e],t)}formatCurrency(t){return t.toFixed(2)}extractEcommerceData(t){const e=t.ecommerce||t.data||{};return{currency:e.currency||"USD",value:e.value||e.total||0,items:e.items||e.products||[],transaction_id:e.transaction_id||e.order_id,coupon:e.coupon||e.discount_code,shipping:e.shipping||0,tax:e.tax||0}}}class we extends xe{constructor(){super("GTM")}trackEvent(t){this.sendEvent(t)}sendEvent(t){if(!this.enabled||!this.isBrowser())return;if(window.dataLayer=window.dataLayer||[],window.ElevarDataLayer=window.ElevarDataLayer||[],t.event.startsWith("dl_"))return window.ElevarDataLayer.push(t),window.dataLayer.push({ecommerce:null}),window.dataLayer.push(t),void this.debug("Elevar event sent to both ElevarDataLayer and dataLayer",t);const e=this.transformToGTMFormat(t);this.isEcommerceEvent(t.event)&&window.dataLayer.push({ecommerce:null}),window.dataLayer.push(e),this.debug("Event sent to GTM",e)}transformToGTMFormat(t){const e={event:t.event,event_timestamp:t.timestamp,event_id:t.id},i=t.attribution;if(this.isEcommerceEvent(t.event)){const n=u(c({},e),{ecommerce:this.buildEcommerceObject(t)});return i&&Object.keys(i).length>0&&(n.attribution=i,i.utm_source&&(n.utm_source=i.utm_source),i.utm_medium&&(n.utm_medium=i.utm_medium),i.utm_campaign&&(n.utm_campaign=i.utm_campaign),i.funnel&&(n.funnel=i.funnel),i.affiliate&&(n.affiliate=i.affiliate),i.gclid&&(n.gclid=i.gclid)),n}const n=c(c({},e),t.data);return i&&Object.keys(i).length>0&&(n.attribution=i,i.utm_source&&(n.utm_source=i.utm_source),i.utm_medium&&(n.utm_medium=i.utm_medium),i.utm_campaign&&(n.utm_campaign=i.utm_campaign),i.funnel&&(n.funnel=i.funnel),i.affiliate&&(n.affiliate=i.affiliate),i.gclid&&(n.gclid=i.gclid)),n}buildEcommerceObject(t){var e,i,n,s,a,r,o;const d=this.extractEcommerceData(t),l=this.getEcommerceEventType(t.event),c={currency:d.currency,value:parseFloat(this.formatCurrency(d.value))};return d.items.length>0&&(c.items=this.formatItems(d.items)),"purchase"===l&&(c.transaction_id=d.transaction_id,c.affiliation=(null==(e=t.data)?void 0:e.affiliation)||"Online Store",c.tax=d.tax,c.shipping=d.shipping,d.coupon&&(c.coupon=d.coupon)),"add_to_cart"===l&&(null==(i=t.data)?void 0:i.cart_id)&&(c.cart_id=t.data.cart_id),"view_item_list"===l&&(null==(n=t.data)?void 0:n.item_list_name)&&(c.item_list_name=t.data.item_list_name,c.item_list_id=t.data.item_list_id),"add_shipping_info"===l&&((null==(s=t.data)?void 0:s.shipping_tier)||d.shipping_tier)&&(c.shipping_tier=(null==(a=t.data)?void 0:a.shipping_tier)||d.shipping_tier),"add_payment_info"===l&&((null==(r=t.data)?void 0:r.payment_type)||d.payment_type)&&(c.payment_type=(null==(o=t.data)?void 0:o.payment_type)||d.payment_type),c}formatItems(t){return t.map((t,e)=>({item_id:t.item_id||t.id||t.product_id||t.sku,item_name:t.item_name||t.name||t.title,affiliation:t.affiliation||"Online Store",coupon:t.coupon||void 0,discount:t.discount||0,index:t.index||e,item_brand:t.item_brand||t.brand,item_category:t.item_category||t.category,item_category2:t.item_category2||t.category2,item_category3:t.item_category3||t.category3,item_category4:t.item_category4||t.category4,item_category5:t.item_category5||t.category5,item_list_id:t.item_list_id||t.list_id,item_list_name:t.item_list_name||t.list_name,item_variant:t.item_variant||t.variant,item_image:t.item_image||t.image||t.image_url||t.imageUrl,item_sku:t.item_sku||t.sku,location_id:t.location_id,price:parseFloat(this.formatCurrency(t.price||0)),quantity:t.quantity||1}))}isEcommerceEvent(t){return["dl_add_to_cart","dl_remove_from_cart","dl_view_cart","dl_begin_checkout","dl_add_payment_info","dl_add_shipping_info","dl_purchase","dl_view_item","dl_view_item_list","dl_select_item","dl_select_promotion","dl_view_promotion","add_to_cart","remove_from_cart","view_cart","begin_checkout","add_payment_info","add_shipping_info","purchase","view_item","view_item_list","select_item","select_promotion","view_promotion"].includes(t)}getEcommerceEventType(t){return t.replace(/^dl_/,"")}}class _e extends xe{constructor(t){super("Facebook"),this.blockedEvents=[],this.eventMapping={dl_page_view:"PageView",dl_view_item:"ViewContent",dl_add_to_cart:"AddToCart",dl_remove_from_cart:"RemoveFromCart",dl_begin_checkout:"InitiateCheckout",dl_add_shipping_info:"AddShippingInfo",dl_add_payment_info:"AddPaymentInfo",dl_purchase:"Purchase",dl_search:"Search",dl_add_to_wishlist:"AddToWishlist",dl_sign_up:"CompleteRegistration",dl_login:"Login",dl_subscribe:"Subscribe",dl_start_trial:"StartTrial",dl_view_cart:"ViewCart",dl_viewed_upsell:"ViewedUpsell",dl_accepted_upsell:"AcceptedUpsell",dl_skipped_upsell:"SkippedUpsell",page_view:"PageView",view_item:"ViewContent",add_to_cart:"AddToCart",remove_from_cart:"RemoveFromCart",begin_checkout:"InitiateCheckout",add_shipping_info:"AddShippingInfo",add_payment_info:"AddPaymentInfo",purchase:"Purchase",search:"Search",add_to_wishlist:"AddToWishlist",sign_up:"CompleteRegistration",login:"Login",subscribe:"Subscribe",start_trial:"StartTrial",view_cart:"ViewCart"},(null==t?void 0:t.blockedEvents)&&(this.blockedEvents=t.blockedEvents),(null==t?void 0:t.storeName)&&(this.storeName=t.storeName)}trackEvent(t){this.sendEvent(t)}isFbqLoaded(){return this.isBrowser()&&"function"==typeof window.fbq}sendEvent(t){this.enabled?this.blockedEvents.includes(t.event)?this.debug(`Event ${t.event} is blocked for Facebook`):this.isFbqLoaded()?this.sendEventInternal(t):this.waitForFbq().then(()=>{this.sendEventInternal(t)}).catch(e=>{this.debug("Facebook Pixel failed to load, skipping event:",t.event)}):this.debug("Facebook adapter disabled")}waitForFbq(t=5e3){return m(this,null,function*(){const e=Date.now();return new Promise((i,n)=>{const s=setInterval(()=>{this.isFbqLoaded()?(clearInterval(s),i()):Date.now()-e>t&&(clearInterval(s),n(new Error("Facebook Pixel load timeout")))},100)})})}sendEventInternal(t){const e=this.mapEventName(t.event);if(!e)return void this.debug(`No Facebook mapping for event: ${t.event}`);const i=this.transformParameters(t,e);try{if(window.fbq)if("AddShippingInfo"===e)window.fbq("trackCustom",e,i),this.debug(`Custom event sent to Facebook: ${e}`,i);else if("Purchase"===e&&this.storeName){const t=i.order_number||i.order_id;if(t){const n=`${this.storeName}-${t}`;window.fbq("track",e,i,{eventID:n}),this.debug(`Event sent to Facebook: ${e} with eventID: ${n}`,i)}else window.fbq("track",e,i),this.debug(`Event sent to Facebook: ${e} (no order identifier for eventID)`,i)}else window.fbq("track",e,i),this.debug(`Event sent to Facebook: ${e}`,i)}catch(n){this.debug("Error sending event to Facebook:",n)}}mapEventName(t){return this.eventMapping[t]||null}transformParameters(t,e){var i,n;switch((null==(i=t.data)?void 0:i.value)&&parseFloat(this.formatCurrency(t.data.value)),(null==(n=t.data)?void 0:n.currency)&&t.data.currency,e){case"ViewContent":return this.buildViewContentParams(t);case"AddToCart":case"RemoveFromCart":return this.buildAddToCartParams(t);case"InitiateCheckout":return this.buildCheckoutParams(t);case"AddShippingInfo":return this.buildShippingInfoParams(t);case"AddPaymentInfo":return this.buildPaymentInfoParams(t);case"Purchase":return this.buildPurchaseParams(t);case"Search":return this.buildSearchParams(t);case"CompleteRegistration":return this.buildRegistrationParams(t);case"ViewedUpsell":case"AcceptedUpsell":case"SkippedUpsell":return this.buildUpsellParams(t,e);default:return this.buildGenericParams(t)}}buildViewContentParams(t){const e=this.extractEcommerceData(t),i=e.items||[],n={content_type:"product",currency:e.currency||"USD",value:e.value||0};return i.length>0&&(n.content_ids=i.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id),n.contents=i.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0})),n.content_name=i[0].item_name||i[0].name||i[0].title,n.content_category=i[0].item_category||i[0].category||"uncategorized"),n}buildAddToCartParams(t){const e=this.extractEcommerceData(t),i=e.items||[],n={content_type:"product",currency:e.currency||"USD",value:e.value||0};if(i.length>0){n.content_ids=i.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id);const t=i.map(t=>t.item_name||t.name||t.title).filter(Boolean);t.length>0&&(n.content_name=t.join(", "));const e=i[0].item_category||i[0].category;e&&(n.content_category=e);const s=i.reduce((t,e)=>t+(e.quantity||1),0);n.num_items=s,n.contents=i.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0,name:t.item_name||t.name,category:t.item_category||t.category||"uncategorized"}))}return n}buildShippingInfoParams(t){var e,i;const n=this.extractEcommerceData(t),s=n.items||[],a={content_type:"product",currency:n.currency||"USD",value:n.value||0,num_items:s.length};return s.length>0&&(a.content_ids=s.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id),a.contents=s.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0}))),(n.shipping_tier||(null==(e=t.data)?void 0:e.shipping_tier))&&(a.shipping_tier=n.shipping_tier||(null==(i=t.data)?void 0:i.shipping_tier)),a}buildPaymentInfoParams(t){var e,i;const n=this.extractEcommerceData(t),s=n.items||[],a={content_type:"product",currency:n.currency||"USD",value:n.value||0,num_items:s.length};return s.length>0&&(a.content_ids=s.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id),a.contents=s.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0}))),(n.payment_type||(null==(e=t.data)?void 0:e.payment_type))&&(a.payment_type=n.payment_type||(null==(i=t.data)?void 0:i.payment_type)),a}buildCheckoutParams(t){var e,i;const n=t.ecommerce||t.data||{},s=n.items||n.products||[],a={content_type:"product",currency:n.currency||"USD",value:n.value||n.total||0,num_items:s.length};return s.length>0&&(a.content_ids=s.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id),a.contents=s.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0}))),(n.coupon||n.discount_code||(null==(e=t.data)?void 0:e.coupon))&&(a.coupon=n.coupon||n.discount_code||(null==(i=t.data)?void 0:i.coupon)),a}buildPurchaseParams(t){var e,i;const n=this.extractEcommerceData(t),s=n.items||[],a={content_type:"product",currency:n.currency||"USD",value:n.value||0,num_items:s.length,order_id:n.transaction_id||(null==(e=t.data)?void 0:e.order_id),order_number:null==(i=t.data)?void 0:i.order_number};return s.length>0&&(a.content_ids=s.map(t=>t.item_id||t.id||t.product_id||t.sku||t.external_id),a.contents=s.map(t=>({id:t.item_id||t.id||t.product_id||t.sku||t.external_id,quantity:t.quantity||1,item_price:t.price||t.item_price||0}))),a}buildSearchParams(t){const e=t.data||{};return{search_string:e.search_term||e.query||"",content_category:e.category,content_ids:e.product_ids||[]}}buildRegistrationParams(t){const e=t.data||{};return{content_name:e.registration_method||"email",status:e.status||"completed",value:e.value||0,currency:e.currency||"USD"}}buildUpsellParams(t,e){var i;const n={content_type:"product",order_id:t.order_id||(null==(i=t.data)?void 0:i.order_id),event_name:e};return t.upsell&&(n.content_ids=[t.upsell.package_id],n.content_name=t.upsell.package_name||`Package ${t.upsell.package_id}`,void 0!==t.upsell.value&&(n.value=parseFloat(this.formatCurrency(t.upsell.value))),void 0!==t.upsell.price&&(n.value=parseFloat(this.formatCurrency(t.upsell.price))),t.upsell.currency&&(n.currency=t.upsell.currency),void 0!==t.upsell.quantity&&(n.num_items=t.upsell.quantity)),n}buildGenericParams(t){const e=t.data||{},i={};return void 0!==e.value&&(i.value=e.value),e.currency&&(i.currency=e.currency),e.content_name&&(i.content_name=e.content_name),e.content_type&&(i.content_type=e.content_type),e.content_category&&(i.content_category=e.content_category),i}}const ke=X("RudderStack");class Se extends xe{constructor(){super("RudderStack"),this.pageViewSent=!1}trackEvent(t){this.sendEvent(t)}isRudderStackLoaded(){return this.isBrowser()&&"object"==typeof window.rudderanalytics&&"function"==typeof window.rudderanalytics.track}sendEvent(t){this.enabled?(ke.info(`Processing event "${t.event}"`,{eventName:t.event,eventData:t}),this.isRudderStackLoaded()?this.sendEventInternal(t):this.waitForRudderStack().then(()=>{this.sendEventInternal(t)}).catch(()=>{this.debug("RudderStack failed to load, skipping event:",t.event)})):this.debug("RudderStack adapter disabled")}waitForRudderStack(t=5e3){return m(this,null,function*(){const e=Date.now();return new Promise((i,n)=>{var s;if(null==(s=window.rudderanalytics)?void 0:s.ready)window.rudderanalytics.ready(()=>i()),setTimeout(()=>{this.isRudderStackLoaded()?i():n(new Error("RudderStack ready timeout"))},t);else{const s=setInterval(()=>{this.isRudderStackLoaded()?(clearInterval(s),i()):Date.now()-e>t&&(clearInterval(s),n(new Error("RudderStack load timeout")))},100)}})})}sendEventInternal(t){try{switch(t.event){case"dl_page_view":case"page_view":this.handlePageView(t);break;case"dl_user_data":case"user_data":this.handleUserData(t);break;default:const e=this.mapEventName(t.event);if(e){const i=this.buildEventProperties(t,e);window.rudderanalytics.track(e,i),this.debug(`Event sent to RudderStack: ${e}`,i)}}}catch(e){}}handlePageView(t){if(this.pageViewSent)return void this.debug("Page view already sent, skipping duplicate");const e=t.data||{},i=e.page_type||"unknown",n=e.page_name||"unknown",s=this.getCampaignData(e),a={path:e.page_location||window.location.pathname,url:e.page_location||window.location.href,title:e.page_title||document.title,referrer:e.page_referrer||document.referrer,campaignName:s.campaignName,campaignApiKey:s.campaignApiKey,campaignCurrency:s.campaignCurrency,campaignLanguage:s.campaignLanguage};window.rudderanalytics.page(i,n,a);const r=`${i.charAt(0).toUpperCase()+i.slice(1)} Page View`;window.rudderanalytics.track(r,c({pageName:n},a)),this.pageViewSent=!0,this.debug("Page View tracked",{pageType:i,pageName:n,eventName:r})}handleUserData(t){const e=t.user_properties||t.data||{};if(e.customer_email||e.email||e.user_id){const t=e.user_id||e.customer_email||e.email,i={email:e.customer_email||e.email,firstName:e.customer_first_name||e.firstName||e.first_name,lastName:e.customer_last_name||e.lastName||e.last_name,phone:e.customer_phone||e.phone,city:e.customer_city||e.city,state:e.customer_state||e.state,country:e.customer_country||e.country,postalCode:e.customer_zip||e.postalCode||e.postal_code,acceptsMarketing:e.customer_accepts_marketing||e.acceptsMarketing||e.accepts_marketing};Object.keys(i).forEach(t=>void 0===i[t]&&delete i[t]),window.rudderanalytics.identify(t,i),this.debug("User Identified",{userId:t,traits:i})}}mapEventName(t){return{dl_view_item:"Product Viewed",dl_view_item_list:"Product List Viewed",dl_add_to_cart:"Product Added",dl_remove_from_cart:"Product Removed",dl_view_cart:"Cart Viewed",dl_cart_updated:"Cart Viewed",dl_begin_checkout:"Checkout Started",dl_add_shipping_info:"Shipping Info Added",dl_add_payment_info:"Payment Info Added",dl_purchase:"Order Completed",view_item:"Product Viewed",view_item_list:"Product List Viewed",add_to_cart:"Product Added",remove_from_cart:"Product Removed",view_cart:"Cart Viewed",begin_checkout:"Checkout Started",add_shipping_info:"Shipping Info Added",add_payment_info:"Payment Info Added",purchase:"Order Completed",dl_viewed_upsell:"Upsell Viewed",dl_accepted_upsell:"Upsell Accepted",dl_skipped_upsell:"Upsell Skipped",dl_sign_up:"Signed Up",dl_login:"Logged In",sign_up:"Signed Up",login:"Logged In"}[t]||null}buildEventProperties(t,e){const i=t.data||t.ecommerce||{},n=this.getPageMetadata(),s=this.getCampaignData(i),a={pageType:n.pageType,pageName:n.pageName,campaignName:s.campaignName,campaignApiKey:s.campaignApiKey};switch(e){case"Product Viewed":return this.buildProductViewedProps(i,a);case"Product List Viewed":return this.buildProductListViewedProps(i,a);case"Product Added":case"Product Removed":return this.buildProductAddedRemovedProps(i,a);case"Cart Viewed":return this.buildCartViewedProps(i,a);case"Checkout Started":return this.buildCheckoutStartedProps(i,a);case"Shipping Info Added":return this.buildShippingInfoProps(i,a);case"Payment Info Added":return this.buildPaymentInfoProps(i,a);case"Order Completed":return this.buildOrderCompletedProps(i,a);case"Upsell Viewed":case"Upsell Accepted":case"Upsell Skipped":return this.buildUpsellProps(t,e,a);default:return c(c({},i),a)}}buildProductViewedProps(t,e){const i=(t.items||[])[0]||{};return c({product_id:i.item_id||"",sku:i.item_id||"",name:i.item_name||"",price:parseFloat(i.price)||0,currency:t.currency||"USD",quantity:parseInt(i.quantity)||1,position:i.position||0,url:window.location.href},e)}buildProductListViewedProps(t,e){const i=this.formatProducts(t.items||[]);return c({list_id:t.list_id||"main-product-list",category:e.pageType,products:i,currency:t.currency||"USD"},e)}buildProductAddedRemovedProps(t,e){const i=(t.items||[])[0]||{},n=this.getCampaignData(t);return c({cart_id:`cart-${Date.now()}`,product_id:i.item_id||"",sku:i.item_id||"",name:i.item_name||"",price:parseFloat(i.price)||0,currency:t.currency||n.campaignCurrency||"USD",quantity:parseInt(i.quantity)||1,category:i.item_category||"",position:i.position||0,url:window.location.href},e)}buildCartViewedProps(t,e){const i=this.formatProducts(t.items||[]),n=this.getCampaignData(t);return c({cart_id:`cart-${Date.now()}`,products:i,currency:t.currency||n.campaignCurrency||"USD",value:parseFloat(t.value)||0},e)}buildShippingInfoProps(t,e){const i=this.formatProducts(t.items||[]),n=this.getCampaignData(t);return c({checkout_id:`checkout-${Date.now()}`,value:parseFloat(t.value)||0,currency:t.currency||n.campaignCurrency||"USD",shipping_tier:t.shipping_tier||"standard",products:i},e)}buildPaymentInfoProps(t,e){const i=this.formatProducts(t.items||[]),n=this.getCampaignData(t);return c({checkout_id:`checkout-${Date.now()}`,value:parseFloat(t.value)||0,currency:t.currency||n.campaignCurrency||"USD",payment_type:t.payment_type||"credit_card",products:i},e)}buildCheckoutStartedProps(t,e){const i=this.formatProducts(t.items||[]),n=this.getCampaignData(t);return c({order_id:`pending-${Date.now()}`,value:parseFloat(t.value)||0,revenue:parseFloat(t.value)||0,currency:t.currency||n.campaignCurrency||"USD",products:i},e)}buildOrderCompletedProps(t,e){const i=this.formatProducts(t.items||[]),n=this.getCampaignData(t),s=c({checkout_id:`checkout-${Date.now()}`,order_id:t.transaction_id||"",affiliation:t.affiliation||n.campaignName||"Funnels",total:parseFloat(t.value)||0,revenue:parseFloat(t.value)||0,shipping:parseFloat(t.shipping)||0,tax:parseFloat(t.tax)||0,discount:parseFloat(t.discount)||0,coupon:t.coupon||"",currency:t.currency||n.campaignCurrency||"USD",products:i},e);if(t.email_hash||t.firstname){const e=t.email_hash||`user-${t.transaction_id}`,i={firstName:t.firstname||"",lastName:t.lastname||"",city:t.city||"",state:t.state||"",postalCode:t.zipcode||"",country:t.country||""};Object.keys(i).forEach(t=>""===i[t]&&delete i[t]),Object.keys(i).length>0&&(window.rudderanalytics.identify(e,i),this.debug("User Identified on Purchase",{userId:e}))}return s}buildUpsellProps(t,e,i){const n=t.data||t,s=this.getCampaignData(n);if("Upsell Accepted"===e){const t=c({cart_id:`cart-upsell-${Date.now()}`,product_id:n.upsell_id||"",sku:n.upsell_id||"",name:n.upsell_name||"",price:parseFloat(n.upsell_price)||0,currency:n.currency||s.campaignCurrency||"USD",quantity:1,url:window.location.href,isUpsell:!0,upsellRef:n.upsell_id||"",originalOrderId:n.order_id||n.transaction_id||""},i);window.rudderanalytics.track("Product Added",t)}return c({order_id:n.order_id||n.transaction_id||"",product_id:n.upsell_id||"",product_name:n.upsell_name||"",price:parseFloat(n.upsell_price)||0,quantity:1,total:parseFloat(n.value||n.upsell_price)||0,currency:n.currency||s.campaignCurrency||"USD",ref_id:n.upsell_id||""},i)}formatProducts(t){return t&&Array.isArray(t)?t.map(t=>({product_id:t.item_id||t.id||"",sku:t.item_id||t.id||"",name:t.item_name||t.name||"",price:parseFloat(t.price)||0,quantity:parseInt(t.quantity)||1,category:t.item_category||t.category||"",brand:t.item_brand||t.brand||"",variant:t.item_variant||"",position:t.position||0,url:window.location.href,image_url:t.image_url||""})):[]}getPageMetadata(){var t,e;return{pageType:(null==(t=document.querySelector('meta[name="next-page-type"]'))?void 0:t.getAttribute("content"))||"unknown",pageName:(null==(e=document.querySelector('meta[name="next-page-name"]'))?void 0:e.getAttribute("content"))||"unknown"}}getCampaignData(t){var e,i,n,s,a;if(t.campaignName)return{campaignName:t.campaignName,campaignApiKey:t.campaignApiKey||"",campaignCurrency:t.campaignCurrency||"USD",campaignLanguage:t.campaignLanguage||""};if(this.isBrowser()&&window.next){const t=window.next,r=null==(e=t.getCampaignData)?void 0:e.call(t);if(r)return{campaignName:r.name||"",campaignApiKey:(null==(a=null==(s=null==(n=null==(i=window.nextDebug)?void 0:i.stores)?void 0:n.config)?void 0:s.getState())?void 0:a.apiKey)||"",campaignCurrency:r.currency||"USD",campaignLanguage:r.language||""}}return{campaignName:"",campaignApiKey:"",campaignCurrency:"USD",campaignLanguage:""}}}class Ce extends xe{constructor(){super("NextCampaign"),this.logger=X("NextCampaignAdapter"),this.scriptLoaded=!1,this.scriptLoading=!1,this.loadPromise=null,this.apiKey=""}initialize(t){return m(this,null,function*(){if(this.logger.info("NextCampaign adapter initializing..."),null==t?void 0:t.apiKey)this.apiKey=t.apiKey,this.logger.info("API key provided via config parameter");else{const t=vt.getState();this.apiKey=t.apiKey||"",this.logger.info("API key from config store: "+(this.apiKey?"found":"not found"))}this.apiKey?(this.logger.info(`NextCampaign API key found: ${this.apiKey.substring(0,8)}...${this.apiKey.substring(this.apiKey.length-4)}`),yield this.loadScript()):this.logger.warn("No API key available for NextCampaign initialization")})}trackEvent(t){this.sendEvent(t)}sendEvent(t){return m(this,null,function*(){if(!this.enabled)return void this.debug("NextCampaign adapter disabled");this.scriptLoaded||(yield this.loadScript());const e=this.mapEvent(t);if(e)try{window.nextCampaign&&(window.nextCampaign.event(e.name,e.data),this.debug(`Event sent to NextCampaign: ${e.name}`,e.data))}catch(i){this.logger.error("Error sending event to NextCampaign:",i)}})}loadScript(){return m(this,null,function*(){if(!this.scriptLoaded){if(this.scriptLoading)return this.loadPromise;this.scriptLoading=!0,this.loadPromise=this.performLoad();try{yield this.loadPromise,this.scriptLoaded=!0,this.logger.info("NextCampaign SDK loaded and initialized successfully ✅")}catch(t){throw this.logger.error("Failed to load NextCampaign SDK:",t),t}finally{this.scriptLoading=!1}}})}performLoad(){return m(this,null,function*(){const t="https://campaigns.apps.29next.com/js/v1/campaign/";document.querySelector(`script[src="${t}"]`)?yield this.waitForNextCampaign():(yield new Promise((e,i)=>{const n=document.createElement("script");n.async=!0,n.src=t,n.onload=()=>{this.logger.debug("NextCampaign script loaded"),e()},n.onerror=()=>{i(new Error(`Failed to load NextCampaign script: ${t}`))},document.head.appendChild(n)}),yield this.waitForNextCampaign(),window.nextCampaign&&this.apiKey&&(window.nextCampaign.config({apiKey:this.apiKey}),this.logger.debug("NextCampaign configured with API key"),this.fireInitialPageView()))})}fireInitialPageView(){"complete"===document.readyState?this.sendPageView():window.addEventListener("load",()=>{this.sendPageView()})}sendPageView(){try{window.nextCampaign&&(window.nextCampaign.event("page_view",{title:document.title,url:window.location.href}),this.logger.info("Initial page_view event sent to NextCampaign"))}catch(t){this.logger.error("Error sending initial page view to NextCampaign:",t)}}waitForNextCampaign(t=5e3){return m(this,null,function*(){const e=Date.now();return new Promise((i,n)=>{const s=setInterval(()=>{window.nextCampaign?(clearInterval(s),i()):Date.now()-e>t&&(clearInterval(s),n(new Error("NextCampaign load timeout")))},100)})})}mapEvent(t){switch(t.event){case"dl_page_view":case"page_view":return{name:"page_view",data:{title:document.title,url:window.location.href}};default:return null}}}class Pe extends xe{constructor(t={}){super("Custom"),this.eventQueue=[],this.batchTimer=null,this.retryQueue=new Map,this.config={endpoint:t.endpoint||"",headers:c({"Content-Type":"application/json"},t.headers),batchSize:t.batchSize||10,batchIntervalMs:t.batchIntervalMs||5e3,maxRetries:t.maxRetries||3,retryDelayMs:t.retryDelayMs||1e3,transformFunction:t.transformFunction||(t=>t)}}updateConfig(t){this.config=c(c({},this.config),t),t.headers&&(this.config.headers=c(c({},this.config.headers),t.headers))}sendEvent(t){this.enabled&&this.config.endpoint?(this.eventQueue.push(t),this.debug(`Event queued. Queue size: ${this.eventQueue.length}`),this.eventQueue.length>=this.config.batchSize?this.sendBatch():this.scheduleBatch()):this.debug("Custom adapter disabled or no endpoint configured")}scheduleBatch(){this.batchTimer||(this.batchTimer=setTimeout(()=>{this.sendBatch()},this.config.batchIntervalMs))}sendBatch(){return m(this,null,function*(){this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null);const t=this.eventQueue.splice(0,this.config.batchSize);if(0!==t.length){this.debug(`Sending batch of ${t.length} events`);try{const e=t.map(t=>this.config.transformFunction(t)),i={events:e,batch_info:{size:e.length,timestamp:(new Date).toISOString(),source:"next-campaign-cart"}},n=yield this.sendRequest(i);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);this.debug("Batch sent successfully")}catch(e){t.forEach(t=>{this.addToRetryQueue(t)})}this.eventQueue.length>0&&this.scheduleBatch()}})}sendRequest(t,e=1){return m(this,null,function*(){try{return yield fetch(this.config.endpoint,{method:"POST",headers:this.config.headers,body:JSON.stringify(t)})}catch(i){if(e<this.config.maxRetries)return yield this.delay(this.config.retryDelayMs*e),this.sendRequest(t,e+1);throw i}})}addToRetryQueue(t){const e=t.id?this.retryQueue.get(t.id):void 0;e?e.attempts<this.config.maxRetries?(e.attempts++,t.id&&this.scheduleRetry(t.id)):t.id&&this.retryQueue.delete(t.id):t.id&&(this.retryQueue.set(t.id,{event:t,attempts:1}),this.scheduleRetry(t.id))}scheduleRetry(t){const e=this.retryQueue.get(t);if(!e)return;const i=this.config.retryDelayMs*e.attempts;setTimeout(()=>{const e=this.retryQueue.get(t);e&&(this.retryQueue.delete(t),this.sendEvent(e.event))},i)}delay(t){return new Promise(e=>setTimeout(e,t))}flush(){return m(this,null,function*(){for(this.debug("Flushing all queued events"),this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null);this.eventQueue.length>0;)yield this.sendBatch()})}getQueueSize(){return this.eventQueue.length}getRetryQueueSize(){return this.retryQueue.size}clearQueue(){this.eventQueue=[],this.retryQueue.clear(),this.batchTimer&&(clearTimeout(this.batchTimer),this.batchTimer=null)}}const Ee=X("ListAttributionTracker"),Ie="analytics_current_list",Te=18e5;class Ae{constructor(){this.currentList=null,this.loadFromStorage(),this.setupUrlTracking()}static getInstance(){return Ae.instance||(Ae.instance=new Ae),Ae.instance}initialize(){Ee.debug("ListAttributionTracker initialized")}setCurrentList(t,e){const i=u(c(c({},void 0!==t&&{listId:t}),void 0!==e&&{listName:e}),{timestamp:Date.now(),url:window.location.href});this.currentList=i,this.saveToStorage(),Ee.debug("Set current list:",{listId:t,listName:e})}getCurrentList(){return this.currentList?Date.now()-this.currentList.timestamp>Te?(Ee.debug("List context expired"),this.clearCurrentList(),null):c(c({},void 0!==this.currentList.listId&&{listId:this.currentList.listId}),void 0!==this.currentList.listName&&{listName:this.currentList.listName}):null}clearCurrentList(){this.currentList=null,this.removeFromStorage(),Ee.debug("Cleared current list")}reset(){this.clearCurrentList(),Ee.debug("ListAttributionTracker reset")}detectListFromUrl(t){const e=t||window.location.href,i=new URL(e,window.location.origin),n=i.pathname.toLowerCase(),s=[{regex:/\/collections?\/([^\/]+)/,type:"collection"},{regex:/\/category\/([^\/]+)/,type:"category"},{regex:/\/categories\/([^\/]+)/,type:"category"},{regex:/\/products\/?$/,type:"all_products"},{regex:/\/shop\/?$/,type:"shop"},{regex:/\/store\/?$/,type:"store"},{regex:/\/search/,type:"search"},{regex:/\/tag\/([^\/]+)/,type:"tag"},{regex:/\/tags\/([^\/]+)/,type:"tag"},{regex:/\/brand\/([^\/]+)/,type:"brand"},{regex:/\/brands\/([^\/]+)/,type:"brand"}];for(const r of s){const t=n.match(r.regex);if(t){const e=t[1]||r.type,i=this.formatListName(e,r.type);return Ee.debug("Detected list from URL:",{listId:e,listName:i,type:r.type}),{listId:e,listName:i}}}const a=i.searchParams;if(a.has("category")){const t=a.get("category");return{listId:t,listName:this.formatListName(t,"category")}}if(a.has("collection")){const t=a.get("collection");return{listId:t,listName:this.formatListName(t,"collection")}}return a.has("q")||a.has("query")||a.has("search")?{listId:"search_results",listName:`Search Results: ${a.get("q")||a.get("query")||a.get("search")||""}`}:null}setupUrlTracking(){if("undefined"==typeof window)return;this.trackCurrentUrl(),window.addEventListener("popstate",()=>{this.trackCurrentUrl()});const t=history.pushState,e=history.replaceState;history.pushState=function(...e){t.apply(history,e),setTimeout(()=>Ae.getInstance().trackCurrentUrl(),0)},history.replaceState=function(...t){e.apply(history,t),setTimeout(()=>Ae.getInstance().trackCurrentUrl(),0)}}trackCurrentUrl(){const t=this.detectListFromUrl();if(t)this.setCurrentList(t.listId,t.listName);else{const t=window.location.pathname.toLowerCase();this.isProductPage(t)||this.clearCurrentList()}}isProductPage(t){return[/\/product\/[^\/]+/,/\/products\/[^\/]+/,/\/item\/[^\/]+/,/\/p\/[^\/]+/].some(e=>e.test(t))}formatListName(t,e){const i=t.replace(/[-_]/g," ").replace(/\b\w/g,t=>t.toUpperCase());switch(e){case"collection":return`${i} Collection`;case"category":return`${i} Category`;case"all_products":return"All Products";case"shop":return"Shop";case"store":return"Store";case"search":return"Search Results";case"tag":return`Tag: ${i}`;case"brand":return`${i} Brand`;default:return i}}loadFromStorage(){if("undefined"!=typeof window&&window.sessionStorage)try{const t=sessionStorage.getItem(Ie);if(t){const e=JSON.parse(t);Date.now()-e.timestamp<Te?(this.currentList=e,Ee.debug("Loaded list context from storage:",e)):this.removeFromStorage()}}catch(t){Ee.error("Error loading list context from storage:",t)}}saveToStorage(){if("undefined"!=typeof window&&window.sessionStorage&&this.currentList)try{sessionStorage.setItem(Ie,JSON.stringify(this.currentList))}catch(t){Ee.error("Error saving list context to storage:",t)}}removeFromStorage(){if("undefined"!=typeof window&&window.sessionStorage)try{sessionStorage.removeItem(Ie)}catch(t){Ee.error("Error removing list context from storage:",t)}}}const Me=Ae.getInstance();class Le{static createEvent(t,e={}){return u(c(c({event:t,event_id:this.generateEventId(),event_time:(new Date).toISOString(),user_properties:this.getUserProperties()},this.getEventContext()),e),{vt:this.getEventMetadata()})}static generateEventId(){return`${Date.now()}_${Math.random().toString(36).substring(2,9)}`}static getUserProperties(){var t,e,i,n,s;const a={visitor_type:"guest"};try{if("undefined"!=typeof window){const r=window.checkoutStore;if(r){const o=r.getState();if(o.billingAddress){const t=o.billingAddress;a.customer_first_name=t.first_name,a.customer_last_name=t.last_name,a.customer_city=t.city,a.customer_province=t.province,a.customer_province_code=t.province_code||t.province,a.customer_zip=t.postal,a.customer_country=t.country,a.customer_phone=t.phone,a.customer_address_1=t.address_1||t.address||"",a.customer_address_2=t.address_2||""}(null==(t=o.formData)?void 0:t.email)&&(a.customer_email=o.formData.email),(null==(e=o.formData)?void 0:e.customerId)&&(a.customer_id=String(o.formData.customerId),a.visitor_type="logged_in"),void 0!==(null==(i=o.formData)?void 0:i.orderCount)&&(a.customer_order_count=String(o.formData.orderCount)),void 0!==(null==(n=o.formData)?void 0:n.totalSpent)&&(a.customer_total_spent=String(o.formData.totalSpent)),(null==(s=o.formData)?void 0:s.tags)&&(a.customer_tags=String(o.formData.tags))}}}catch(r){}return a}static getEventContext(){const t={};return"undefined"!=typeof window&&(t.page_location=window.location.href,t.page_title=document.title,t.page_referrer=document.referrer,t.user_agent=navigator.userAgent,t.screen_resolution=`${window.screen.width}x${window.screen.height}`,t.viewport_size=`${window.innerWidth}x${window.innerHeight}`,t.session_id=this.getSessionId(),t.timestamp=Date.now()),t}static getEventMetadata(){return{pushed_at:Date.now(),debug_mode:!1,session_id:this.getSessionId(),sequence_number:this.getNextSequenceNumber(),source:"next-campaign-cart",version:"0.2.0"}}static getSessionId(){if("undefined"!=typeof window){let t=sessionStorage.getItem("analytics_session_id");return t||(t=`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,sessionStorage.setItem("analytics_session_id",t)),t}return`session_${Date.now()}`}static getNextSequenceNumber(){if("undefined"!=typeof window){const t=parseInt(sessionStorage.getItem("analytics_sequence")||"0",10)+1;return sessionStorage.setItem("analytics_sequence",String(t)),t}return 0}static getCurrency(){var t;try{if("undefined"!=typeof window)return(null==(t=lt.getState().data)?void 0:t.currency)||"USD"}catch(e){}return"USD"}static formatEcommerceItem(t,e,i){var n,s,a,r,o,d,l;const c=this.getCurrency();let u,h="Campaign";try{if("undefined"!=typeof window){const e=lt.getState().data;if(e){h=e.name||"Campaign";const i=t.packageId||t.package_id||t.id;if(i&&e.packages){const t=e.packages.find(t=>t.ref_id===i||t.external_id===i);(null==t?void 0:t.image)&&(u=t.image)}}}}catch(_){}let p,m,f="",g="";try{if("undefined"!=typeof window){const e=lt.getState().data,i=t.packageId||t.package_id||t.id;if(i&&(null==e?void 0:e.packages)){const t=e.packages.find(t=>String(t.ref_id)===String(i)||String(t.external_id)===String(i));t&&(f=t.product_sku||String(t.external_id),g=t.product_name||t.name,p=String(t.product_id||""),m=String(t.product_variant_id||""))}}}catch(_){}f||(f=String(t.packageId||t.package_id||t.id)),g||(g=(null==(n=t.product)?void 0:n.title)||t.title||t.product_title||t.name||`Package ${f}`),u||(u=t.image||(null==(s=t.product)?void 0:s.image)||t.imageUrl||t.image_url);let v=1;try{if("undefined"!=typeof window){const e=lt.getState().data,i=t.packageId||t.package_id||t.id;if(i&&(null==e?void 0:e.packages)){const t=e.packages.find(t=>String(t.ref_id)===String(i)||String(t.external_id)===String(i));(null==t?void 0:t.qty)&&(v=t.qty)}}}catch(_){}1===v&&(t.quantity||t.qty)&&(v=t.quantity||t.qty||1);let $=0;try{if("undefined"!=typeof window){const e=lt.getState().data,i=t.packageId||t.package_id||t.id;if(i&&(null==e?void 0:e.packages)){const t=e.packages.find(t=>String(t.ref_id)===String(i)||String(t.external_id)===String(i));t&&($="string"==typeof t.price?parseFloat(t.price):t.price)}}}catch(_){}0===$&&(t.price_incl_tax?$="string"==typeof t.price_incl_tax?parseFloat(t.price_incl_tax):t.price_incl_tax:t.price&&($="object"==typeof t.price&&"incl_tax"in t.price?t.price.incl_tax.value:"string"==typeof t.price?parseFloat(t.price):t.price));const y={item_id:f,item_name:g,item_category:h,price:"string"==typeof $?parseFloat($):$,quantity:v,currency:c};p&&(y.item_product_id=p),m&&(y.item_variant_id=m);const b=t.product_variant_name||(null==(r=null==(a=t.product)?void 0:a.variant)?void 0:r.name)||t.package_profile||t.variant;void 0!==b&&(y.item_variant=b);const x=t.product_name||(null==(o=t.product)?void 0:o.name);x&&(y.item_brand=x);const w=t.product_sku||(null==(l=null==(d=t.product)?void 0:d.variant)?void 0:l.sku)||t.sku;return w&&(y.item_sku=w),void 0!==e&&(y.index=e),(null==i?void 0:i.id)&&(y.item_list_id=i.id),(null==i?void 0:i.name)&&(y.item_list_name=i.name),u&&(y.item_image=u),y}static getListAttribution(){if("undefined"!=typeof window){const t=sessionStorage.getItem("analytics_list_id"),e=sessionStorage.getItem("analytics_list_name");if(t||e){const i={};return t&&(i.id=t),e&&(i.name=e),i}}}static setListAttribution(t,e){"undefined"!=typeof window&&(t&&sessionStorage.setItem("analytics_list_id",t),e&&sessionStorage.setItem("analytics_list_name",e))}static clearListAttribution(){"undefined"!=typeof window&&(sessionStorage.removeItem("analytics_list_id"),sessionStorage.removeItem("analytics_list_name"))}static formatElevarProduct(t,e){var i,n,s,a,r,o,d;this.getCurrency();let l="Campaign",c=null;try{if("undefined"!=typeof window){const e=window.campaignStore;if(e){const i=e.getState().data;l=(null==i?void 0:i.name)||"Campaign";const n=t.packageId||t.package_id||t.id;n&&(null==i?void 0:i.packages)&&(c=i.packages.find(t=>String(t.ref_id)===String(n)))}}}catch(g){}let u=0;(null==c?void 0:c.price)?u="string"==typeof c.price?parseFloat(c.price):c.price:t.price_incl_tax?u="string"==typeof t.price_incl_tax?parseFloat(t.price_incl_tax):t.price_incl_tax:t.price&&("object"==typeof t.price?"incl_tax"in t.price&&(null==(i=t.price.incl_tax)?void 0:i.value)?u=t.price.incl_tax.value:"excl_tax"in t.price&&(null==(n=t.price.excl_tax)?void 0:n.value)?u=t.price.excl_tax.value:"value"in t.price&&"number"==typeof t.price.value&&(u=t.price.value):u="string"==typeof t.price?parseFloat(t.price):t.price);const h={id:t.variantSku||t.sku||(null==(s=t.product)?void 0:s.sku)||(null==c?void 0:c.product_sku)||`SKU-${t.packageId||t.id}`,name:t.productName||(null==(a=t.product)?void 0:a.title)||(null==c?void 0:c.product_name)||t.title||"",product_id:String(t.productId||(null==c?void 0:c.product_id)||t.packageId||""),variant_id:String(t.variantId||(null==c?void 0:c.product_variant_id)||""),brand:t.productName||(null==c?void 0:c.product_name)||l,category:l,variant:t.variantName||(null==c?void 0:c.product_variant_name)||t.package_profile||"",price:u.toFixed(2),quantity:String(t.quantity||t.qty||1)};let p="0.0";t.price_retail?p=String(t.price_retail):(null==c?void 0:c.price_retail)?p=String(c.price_retail):"object"==typeof t.price&&t.price&&"original"in t.price&&(null==(r=t.price.original)?void 0:r.value)&&(p=String(t.price.original.value)),h.compare_at_price=p,(t.image||(null==c?void 0:c.image)||(null==(o=t.product)?void 0:o.image))&&(h.image=t.image||(null==c?void 0:c.image)||(null==(d=t.product)?void 0:d.image)||""),void 0!==e&&(h.position=e+1);const m="undefined"!=typeof window?window.location.href:"";h.url=m;const f=this.getListAttribution();return((null==f?void 0:f.name)||(null==f?void 0:f.id))&&(h.list=f.name||f.id),h}static formatElevarImpression(t,e,i){const n=this.formatElevarProduct(t,e),s={id:n.id,name:n.name,price:n.price,brand:n.brand,category:n.category,variant:n.variant};return n.product_id&&(s.product_id=n.product_id),n.variant_id&&(s.variant_id=n.variant_id),n.image&&(s.image=n.image),i?s.list=i:n.list&&(s.list=n.list),n.position?s.position=n.position:void 0!==e&&(s.position=e+1),s}}class Fe{static createViewItemListEvent(t,e,i){const n=Le.getCurrency(),s=t.map((t,n)=>Le.formatEcommerceItem(t,n,{id:e,name:i}));Le.setListAttribution(e,i);const a={currency:n,items:s,item_list_id:e,item_list_name:i||e};return Le.createEvent("dl_view_item_list",{user_properties:Le.getUserProperties(),ecommerce:a})}static createViewItemEvent(t){const e=Le.getCurrency(),i=Le.getListAttribution(),n={currency:e,items:[Le.formatEcommerceItem(t,0,i)]};return Le.createEvent("dl_view_item",{user_properties:Le.getUserProperties(),ecommerce:n})}static createAddToCartEvent(t,e,i){const n=Le.getCurrency(),s=Le.getListAttribution(),a=e||(null==s?void 0:s.id),r=i||(null==s?void 0:s.name)||a,o=Le.formatEcommerceItem(t,0,{id:a,name:r}),d={currency:n,value:o.price&&o.quantity?o.price*o.quantity:0,items:[o]};return Le.createEvent("dl_add_to_cart",{user_properties:Le.getUserProperties(),ecommerce:d})}static createRemoveFromCartEvent(t){const e=Le.getCurrency(),i=Le.getListAttribution(),n=Le.formatEcommerceItem(t,0,i),s={currency:e,value:n.price&&n.quantity?n.price*n.quantity:0,items:[n]};return Le.createEvent("dl_remove_from_cart",{user_properties:Le.getUserProperties(),ecommerce:s})}static createPackageSwappedEvent(t,e,i){const n=Le.getCurrency(),s=Le.formatEcommerceItem(t),a=Le.formatEcommerceItem(e),r={currency:n,value_change:i,items_removed:[s],items_added:[a]};return Le.createEvent("dl_package_swapped",{ecommerce:r,event_category:"ecommerce",event_action:"swap",event_label:`${s.item_name} → ${a.item_name}`,swap_details:{previous_package_id:t.packageId,new_package_id:e.packageId,price_difference:i}})}static createSelectItemEvent(t,e,i){const n={currency:Le.getCurrency(),items:[Le.formatEcommerceItem(t,0,{id:e,name:i||e})],item_list_id:e,item_list_name:i||e};return Le.createEvent("dl_select_item",{user_properties:Le.getUserProperties(),ecommerce:n})}static createBeginCheckoutEvent(){var t,e;const i=Et.getState(),n=Le.getCurrency(),s=i.items.map((t,e)=>Le.formatEcommerceItem(t,e)),a={currency:n,value:i.totals.total.value||0,items:s};return(null==(e=null==(t=i.appliedCoupons)?void 0:t[0])?void 0:e.code)&&(a.coupon=i.appliedCoupons[0].code),Le.createEvent("dl_begin_checkout",{user_properties:Le.getUserProperties(),cart_total:String(i.totals.total.value||"0.00"),ecommerce:a})}static createPurchaseEvent(t){var e,i,n,s,a,r,o,d,l,h,p;const m=Et.getState(),f=Le.getCurrency(),g=lt.getState(),v=t.order||t,$=v.ref_id||v.number||t.orderId||t.transactionId||`order_${Date.now()}`,y=parseFloat(v.total_incl_tax||v.total||t.total||m.totals.total.value||0),b=parseFloat(v.total_tax||t.tax||m.totals.tax.value||0),x=parseFloat(v.shipping_incl_tax||t.shipping||m.totals.shipping.value||0);let w=[];v.lines&&v.lines.length>0?w=v.lines.map((t,e)=>{var i,n,s,a;const r=null==(n=null==(i=g.data)?void 0:i.packages)?void 0:n.find(e=>String(e.ref_id)===String(t.package)),o=parseFloat(t.price_incl_tax||t.price||0),d=parseInt(t.quantity||1),l=d>0?o/d:o;return{item_id:t.product_sku||(null==r?void 0:r.product_sku)||t.sku||`SKU-${t.product_id||t.id}`,item_name:t.product_title||t.name||"Unknown Product",item_brand:(null==r?void 0:r.product_name)||(null==(s=g.data)?void 0:s.name)||"",item_category:t.campaign_name||(null==(a=g.data)?void 0:a.name)||"Campaign",item_variant:t.package_profile||t.variant||"",price:l,quantity:d,currency:v.currency||f,index:e}}):(t.items||m.enrichedItems.length>0)&&(w=(t.items||m.enrichedItems).map((t,e)=>Le.formatEcommerceItem(t,e)));const _={currency:v.currency||f,transaction_id:$,value:y,tax:b,shipping:x,affiliation:"Online Store",items:w},k=(null==(i=null==(e=v.vouchers)?void 0:e[0])?void 0:i.code)||t.coupon||(null==(s=null==(n=m.appliedCoupons)?void 0:n[0])?void 0:s.code);k&&(_.coupon=k);const S=v.discount||t.discountAmount||0;S&&(_.discount=S),Le.clearListAttribution();let C=Le.getUserProperties();return(v.user||v.billing_address)&&(C=c(c(c(c(c(u(c({},C),{visitor_type:v.user?"logged_in":"guest"}),(null==(a=v.user)?void 0:a.email)&&{customer_email:v.user.email}),(null==(r=v.user)?void 0:r.first_name)&&{customer_first_name:v.user.first_name}),(null==(o=v.user)?void 0:o.last_name)&&{customer_last_name:v.user.last_name}),(null==(d=v.user)?void 0:d.phone_number)&&{customer_phone:v.user.phone_number}),v.billing_address&&{customer_first_name:v.billing_address.first_name||(null==(l=v.user)?void 0:l.first_name),customer_last_name:v.billing_address.last_name||(null==(h=v.user)?void 0:h.last_name),customer_address_1:v.billing_address.line1||"",customer_address_2:v.billing_address.line2||"",customer_city:v.billing_address.line4||"",customer_province:v.billing_address.state||"",customer_province_code:v.billing_address.state||"",customer_zip:v.billing_address.postcode||"",customer_country:v.billing_address.country||"",customer_phone:v.billing_address.phone_number||(null==(p=v.user)?void 0:p.phone_number)})),Le.createEvent("dl_purchase",{pageType:"purchase",event_id:$,user_properties:C,ecommerce:_})}static createViewSearchResultsEvent(t,e){const i={currency:Le.getCurrency(),items:t.map((t,e)=>Le.formatEcommerceItem(t,e,{name:"search results"})),item_list_name:"search results"};return Le.createEvent("dl_view_search_results",{user_properties:Le.getUserProperties(),ecommerce:i,search_term:e})}static createViewCartEvent(){const t=Et.getState(),e=Le.getCurrency(),i=t.enrichedItems.map((t,e)=>Le.formatEcommerceItem(t,e)),n={currency:e,value:t.totals.total.value||0,items:i};return Le.createEvent("dl_view_cart",{user_properties:Le.getUserProperties(),cart_total:String(t.totals.total.value||"0.00"),ecommerce:n})}static createAddShippingInfoEvent(t){var e,i;const n=Et.getState(),s=Le.getCurrency(),a=n.enrichedItems.map((t,e)=>Le.formatEcommerceItem(t,e)),r=c({currency:s,currencyCode:s,value:n.totals.total.value,items:a},t&&{shipping_tier:t});return(null==(i=null==(e=n.appliedCoupons)?void 0:e[0])?void 0:i.code)&&(r.coupon=n.appliedCoupons[0].code),Le.createEvent("dl_add_shipping_info",{ecommerce:r,event_category:"ecommerce",event_value:n.totals.total.value,shipping_tier:t})}static createAddPaymentInfoEvent(t){var e,i;const n=Et.getState(),s=Le.getCurrency(),a=n.enrichedItems.map((t,e)=>Le.formatEcommerceItem(t,e)),r=c({currency:s,value:n.totals.total.value,items:a},t&&{payment_type:t});return(null==(i=null==(e=n.appliedCoupons)?void 0:e[0])?void 0:i.code)&&(r.coupon=n.appliedCoupons[0].code),Le.createEvent("dl_add_payment_info",{ecommerce:r,event_category:"ecommerce",event_value:n.totals.total.value,payment_type:t})}static createAcceptedUpsellEvent(t){var e,i;const{orderId:n,packageId:s,packageName:a,quantity:r=1,value:o=0,currency:d="USD",upsellNumber:l=1,item:c}=t,u=`${n}-US${l}`;let h,p;try{if("undefined"!=typeof window&&(h=window.campaignStore,h)){const t=h.getState().data;(null==t?void 0:t.packages)&&(p=t.packages.find(t=>String(t.ref_id)===String(s)))}}catch(g){}const m={currency:d,transaction_id:u,value:o*r,tax:0,shipping:0,affiliation:"Upsell",items:[c?Le.formatEcommerceItem(c):{item_id:(null==p?void 0:p.product_sku)||`SKU-${s}`,item_name:a||(null==p?void 0:p.product_name)||`Package ${s}`,item_brand:(null==p?void 0:p.product_name)||(null==(e=null==h?void 0:h.getState().data)?void 0:e.name)||"",item_category:(null==(i=null==h?void 0:h.getState().data)?void 0:i.name)||"Campaign",item_variant:(null==p?void 0:p.product_variant_name)||"",price:o,quantity:r,currency:d}]},f=Le.getUserProperties();return Le.createEvent("dl_upsell_purchase",{pageType:"upsell",event_id:u,user_properties:f,ecommerce:m,ft:!0,upsell_metadata:{original_order_id:n,upsell_number:l,package_id:s.toString(),package_name:a||`Package ${s}`}})}}const De=X("ViewItemListTracker");class Ne{constructor(){this.observer=null,this.trackedProducts=new Set,this.lastScanTime=0,this.scanDebounceMs=500,this.isInitialized=!1}static getInstance(){return Ne.instance||(Ne.instance=new Ne),Ne.instance}initialize(){this.isInitialized||"undefined"==typeof window||(this.isInitialized=!0,be.initialize(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>this.scan()):setTimeout(()=>this.scan(),100),this.setupObserver(),De.info("ViewItemListTracker initialized"))}scan(){const t=Date.now();if(t-this.lastScanTime<this.scanDebounceMs)return void De.debug("Scan debounced (too soon after last scan)");this.lastScanTime=t;const e=this.findProductElements();if(0!==e.length)if(De.debug(`Found ${e.length} products on page`),1===e.length){const t=e[0];t&&this.trackViewItem(t)}else this.trackViewItemList(e),this.trackSelectedItemInSelectors();else De.debug("No products found on page")}rescan(){De.debug("Manual rescan triggered"),this.trackedProducts.clear(),this.scan()}findProductElements(){const t=document.querySelectorAll('[data-next-selection-mode="swap"]'),e=document.querySelectorAll('[data-next-selection-mode="select"]'),i=[],n=new Set;return t.length>0&&t.forEach(t=>{const e=t.querySelector('[data-next-selector-card][data-next-selected="true"]');if(e){const t=e.getAttribute("data-next-package-id");t&&!n.has(t)&&(n.add(t),i.push({packageId:t,element:e,index:i.length}))}}),e.length>0&&e.forEach(t=>{t.querySelectorAll("[data-next-selector-card]").forEach((t,e)=>{const s=t.getAttribute("data-next-package-id");s&&!n.has(s)&&(n.add(s),i.push({packageId:s,element:t,index:i.length}))})}),i.length>0?(De.debug(`Found ${i.length} products in selectors`),i):(document.querySelectorAll("[data-next-package-id]").forEach((t,e)=>{if(t.hasAttribute("data-next-selector-card")&&(t.closest('[data-next-selection-mode="swap"]')||t.closest('[data-next-selection-mode="select"]')))return;const s=t.getAttribute("data-next-package-id");s&&!n.has(s)&&(n.add(s),i.push({packageId:s,element:t,index:e}))}),i)}trackSelectedItemInSelectors(){document.querySelectorAll('[data-next-selection-mode="select"]').forEach(t=>{const e=t.querySelector('[data-next-selector-card][data-next-selected="true"]');if(e){const t=e.getAttribute("data-next-package-id");if(t){const i={packageId:t,element:e,index:0};this.trackViewItemForSelected(i)}}})}trackViewItemForSelected(t){const e=lt.getState();if(!e.data||!e.packages||0===e.packages.length)return void De.debug("Campaign data not yet loaded, deferring tracking");const i=parseInt(t.packageId,10);if(isNaN(i)||!e.getPackage(i))return void De.warn("Package not found in store:",t.packageId);const n={packageId:i,package_id:i,id:i},s=Fe.createViewItemEvent(n);be.push(s),De.debug("Tracked view_item for selected package:",t.packageId)}trackViewItem(t){if(this.trackedProducts.has(t.packageId))return void De.debug("Product already tracked:",t.packageId);const e=lt.getState();if(!e.data||!e.packages||0===e.packages.length)return De.debug("Campaign data not yet loaded, deferring tracking"),void setTimeout(()=>this.scan(),1e3);const i=parseInt(t.packageId,10);if(isNaN(i)||!e.getPackage(i))return void De.warn("Package not found in store:",t.packageId);const n={packageId:i,package_id:i,id:i},s=Fe.createViewItemEvent(n);be.push(s),this.trackedProducts.add(t.packageId),De.debug("Tracked view_item:",t.packageId)}trackViewItemList(t){const e=lt.getState(),i=[];if(!e.data||!e.packages||0===e.packages.length)return De.debug("Campaign data not yet loaded, deferring tracking"),void setTimeout(()=>this.scan(),1e3);const n=Me.getCurrentList()||Me.detectListFromUrl()||{listId:"product_list",listName:"Product List"};if(t.forEach((t,n)=>{if(this.trackedProducts.has(t.packageId))return;const s=parseInt(t.packageId,10),a=isNaN(s)?null:e.getPackage(s);a?(parseFloat(a.price_total||"0"),i.push({packageId:s,package_id:s,id:s}),this.trackedProducts.add(t.packageId)):De.warn("Package not found in store:",t.packageId)}),0===i.length)return void De.debug("No new products to track");const s=Fe.createViewItemListEvent(i,n.listId,n.listName);be.push(s),De.debug(`Tracked view_item_list with ${i.length} items`)}setupObserver(){"undefined"!=typeof window&&window.MutationObserver&&(this.observer=new MutationObserver(t=>{let e=!1;for(const i of t){if("childList"===i.type)for(let t=0;t<i.addedNodes.length;t++){const n=i.addedNodes[t];if(n&&n.nodeType===Node.ELEMENT_NODE){const t=n;if(t.hasAttribute("data-next-package-id")||t.querySelector("[data-next-package-id]")){e=!0;break}}}else if("attributes"===i.type)if("data-next-package-id"===i.attributeName)e=!0;else if("data-next-selected"===i.attributeName&&i.target instanceof Element&&i.target.closest('[data-next-selection-mode="swap"]')){const t=i.target.closest('[data-next-selection-mode="swap"]');t&&t.querySelectorAll("[data-next-selector-card]").forEach(t=>{const e=t.getAttribute("data-next-package-id");e&&this.trackedProducts.delete(e)}),e=!0}if(e)break}e&&(De.debug("Detected DOM changes with products"),this.scan())}),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-next-package-id","data-next-selected"]}),De.debug("Mutation observer set up"))}reset(){this.trackedProducts.clear(),De.debug("ViewItemListTracker reset"),this.isInitialized&&this.scan()}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.trackedProducts.clear(),this.isInitialized=!1,De.debug("ViewItemListTracker destroyed")}getStatus(){return{initialized:this.isInitialized,trackedCount:this.trackedProducts.size,observing:null!==this.observer}}}Ne.getInstance();const Ue=X("UserDataStorage");class Oe{constructor(){this.userData={},this.cookieExpiryDays=365,this.loadUserData()}static getInstance(){return Oe.instance||(Oe.instance=new Oe),Oe.instance}setCookie(t,e,i){if("undefined"==typeof document)return;const n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);const s=`expires=${n.toUTCString()}`;document.cookie=`${t}=${encodeURIComponent(e)};${s};path=/;SameSite=Lax`}getCookie(t){if("undefined"==typeof document)return null;const e=`${t}=`,i=document.cookie.split(";");for(let n of i)if(n=n.trim(),0===n.indexOf(e))return decodeURIComponent(n.substring(e.length));return null}deleteCookie(t){"undefined"!=typeof document&&(document.cookie=`${t}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`)}loadUserData(){if("undefined"!=typeof window)try{const e=this.getCookie("next_user_data");if(e)try{this.userData=JSON.parse(e),Ue.debug("Loaded user data from cookie:",{hasEmail:!!this.userData.email,hasUserId:!!this.userData.userId})}catch(t){Ue.warn("Failed to parse user data cookie:",t)}const i=sessionStorage.getItem("user_data");if(i)try{const t=JSON.parse(i);this.userData=c(c({},this.userData),t),Ue.debug("Merged user data from sessionStorage")}catch(t){Ue.warn("Failed to parse sessionStorage user data:",t)}if(!this.userData.visitorId){let t=localStorage.getItem("visitor_id");t||(t=this.generateId("visitor"),localStorage.setItem("visitor_id",t)),this.userData.visitorId=t}if(!this.userData.sessionId){let t=sessionStorage.getItem("session_id");t||(t=this.generateId("session"),sessionStorage.setItem("session_id",t)),this.userData.sessionId=t}}catch(t){Ue.error("Failed to load user data:",t)}}saveUserData(){if("undefined"!=typeof window)try{const t=JSON.stringify(this.userData);this.setCookie("next_user_data",t,this.cookieExpiryDays),sessionStorage.setItem("user_data",t),Ue.debug("Saved user data to storage:",{hasEmail:!!this.userData.email,hasUserId:!!this.userData.userId})}catch(t){Ue.error("Failed to save user data:",t)}}generateId(t){return`${t}_${Date.now().toString(36)}_${Math.random().toString(36).substr(2,9)}`}updateUserData(t){const e=this.userData.email;this.userData=c(c({},this.userData),t),Object.keys(this.userData).forEach(t=>{void 0!==this.userData[t]&&null!==this.userData[t]&&""!==this.userData[t]||delete this.userData[t]}),this.saveUserData(),t.email&&t.email!==e&&Ue.info("User email updated:",t.email)}getUserData(){return c({},this.userData)}getUserField(t){return this.userData[t]}clearUserData(){const{visitorId:t,sessionId:e}=this.userData;this.userData={},void 0!==t&&(this.userData.visitorId=t),void 0!==e&&(this.userData.sessionId=e),this.deleteCookie("next_user_data"),sessionStorage.removeItem("user_data"),Ue.info("User data cleared")}isIdentified(){return!(!this.userData.email&&!this.userData.userId)}updateFromFormFields(){if("undefined"==typeof document)return;const t={};let e=!1;[{selector:'[name="email"], [data-next-checkout-field="email"], #email, [type="email"]',key:"email"},{selector:'[name="phone"], [data-next-checkout-field="phone"], #phone, [type="tel"]',key:"phone"},{selector:'[name="first_name"], [data-next-checkout-field="fname"], [name="firstName"], #first-name',key:"firstName"},{selector:'[name="last_name"], [data-next-checkout-field="lname"], [name="lastName"], #last-name',key:"lastName"}].forEach(({selector:i,key:n})=>{const s=document.querySelector(i);s&&s.value&&s.value!==this.userData[n]&&(t[n]=s.value,e=!0)}),e&&(this.updateUserData(t),Ue.debug("Updated user data from form fields:",t))}}const ze=Oe.getInstance();class Re{static createUserDataEvent(t,e,i){var n,s,a;const r=c(c({},Le.getUserProperties()),e);if("dl_user_data"===t)try{if("undefined"!=typeof window){const e=Et.getState(),o=lt.getState(),d=(null==(n=null==o?void 0:o.data)?void 0:n.currency)||"USD",l=(null==e?void 0:e.items)||[],u=l.length>0?l.map((t,e)=>Le.formatEcommerceItem(t,e)):[],h=(null==(a=null==(s=null==e?void 0:e.totals)?void 0:s.total)?void 0:a.value)||(null==e?void 0:e.total)||0,p={currency:d,value:h,items:u};return Le.createEvent(t,c({user_properties:r,cart_total:String(h),ecommerce:p},i))}}catch(o){}return Le.createEvent(t,c({user_properties:r,event_category:"user"},i))}static createSignUpEvent(t="email",e){return this.createUserDataEvent("dl_sign_up",e,{event_label:t,custom_properties:{method:t,timestamp:(new Date).toISOString()}})}static createLoginEvent(t="email",e){const i=u(c({},e),{visitor_type:(null==e?void 0:e.customer_id)?"logged_in":"guest"});return this.createUserDataEvent("dl_login",i,{event_label:t,custom_properties:{method:t,timestamp:(new Date).toISOString()}})}static createSubscribeEvent(t="email",e,i){const n="sms"===t||"push"===t?"phone":"email";return this.createUserDataEvent("dl_subscribe",i,{lead_type:n,event_label:t,custom_properties:{channel:t,subscription_details:e,timestamp:(new Date).toISOString()}})}static createProfileUpdateEvent(t,e){return this.createUserDataEvent("profile_update",e,{event_label:`Updated: ${t.join(", ")}`,custom_properties:{updated_fields:t,timestamp:(new Date).toISOString()}})}static createEmailVerificationEvent(t,e){return this.createUserDataEvent("email_verification",e,{event_label:t,custom_properties:{verification_status:t,timestamp:(new Date).toISOString()}})}static createAccountDeletionEvent(t,e){return this.createUserDataEvent("account_deletion",e,{event_label:t||"user_initiated",custom_properties:{deletion_reason:t,timestamp:(new Date).toISOString()}})}static createPasswordResetEvent(t,e){return this.createUserDataEvent("password_reset",e,{event_label:t,custom_properties:{reset_step:t,timestamp:(new Date).toISOString()}})}static createConsentEvent(t,e,i){return this.createUserDataEvent("user_consent",i,{event_label:`${t}_${e?"granted":"denied"}`,custom_properties:{consent_type:t,consent_granted:e,timestamp:(new Date).toISOString()}})}}const qe=X("UserDataTracker");class je{constructor(){this.eventBus=st.getInstance(),this.lastTrackTime=0,this.trackDebounceMs=1e3,this.isInitialized=!1,this.unsubscribers=[],this.hasTrackedInitial=!1}static getInstance(){return je.instance||(je.instance=new je),je.instance}initialize(){this.isInitialized||"undefined"==typeof window||(this.isInitialized=!0,be.initialize(),this.lastTrackTime=0,this.trackUserData(),this.hasTrackedInitial=!0,setTimeout(()=>{this.setupListeners(),qe.debug("User data tracking listeners set up after initial tracking")},200),qe.info("UserDataTracker initialized - dl_user_data fired first"))}trackUserData(){const t=Date.now();if(this.hasTrackedInitial){const e=(new Error).stack;qe.debug("trackUserData called after initial:",{timeSinceLastTrack:t-this.lastTrackTime,willDebounce:t-this.lastTrackTime<this.trackDebounceMs,stack:null==e?void 0:e.split("\n").slice(1,4).join("\n")})}if(t-this.lastTrackTime<this.trackDebounceMs)return void qe.debug("User data tracking debounced");this.lastTrackTime=t;const e=this.collectUserData();if(!e||0===Object.keys(e).length)return void qe.debug("No user data to track");const i={customer_email:e.email,customer_phone:e.phone,customer_first_name:e.firstName,customer_last_name:e.lastName,visitor_type:e.userId?"logged_in":"guest"};Object.keys(i).forEach(t=>{void 0===i[t]&&delete i[t]});const n=Re.createUserDataEvent("dl_user_data",i);be.push(n),qe.debug("Tracked user data:",{hasUserId:!!e.userId,hasEmail:!!e.email,cartValue:e.cartValue,cartItems:e.cartItems})}collectUserData(){const t=ze.getUserData();ze.updateFromFormFields();try{const e=Et.getState();e.items&&e.items.length>0?(t.cartValue=e.total||e.subtotal||0,t.cartItems=e.totalQuantity||0,t.cartProducts=e.items.map(t=>{var e;return(null==(e=t.packageId)?void 0:e.toString())||"unknown"})):(t.cartValue=0,t.cartItems=0,t.cartProducts=[])}catch(e){qe.debug("Cart store not available or error accessing:",e)}try{const e=this.getCheckoutData();e&&Object.assign(t,e)}catch(e){qe.debug("Error getting checkout data:",e)}return t}getCheckoutData(){if("undefined"==typeof document)return null;const t={};return[{selector:'[name="email"], #email, [type="email"]',key:"email"},{selector:'[name="phone"], #phone, [type="tel"]',key:"phone"},{selector:'[name="first_name"], [name="firstName"], #first-name',key:"firstName"},{selector:'[name="last_name"], [name="lastName"], #last-name',key:"lastName"},{selector:'[name="address"], [name="address1"], #address',key:"address"},{selector:'[name="city"], #city',key:"city"},{selector:'[name="state"], [name="province"], #state',key:"state"},{selector:'[name="zip"], [name="postal_code"], #zip',key:"postalCode"},{selector:'[name="country"], #country',key:"country"}].forEach(({selector:e,key:i})=>{const n=document.querySelector(e);n&&n.value&&(t[i]=n.value)}),Object.keys(t).length>0?t:null}setupListeners(){if(this.eventBus.on("route:changed",()=>{qe.debug("Route changed, tracking user data"),this.trackUserData()}),this.eventBus.on("sdk:route-invalidated",()=>{qe.debug("SDK route invalidated, tracking user data"),this.trackUserData()}),this.eventBus.on("user:logged-in",()=>{qe.debug("User logged in, tracking user data"),setTimeout(()=>this.trackUserData(),100)}),this.eventBus.on("user:logged-out",()=>{qe.debug("User logged out, tracking user data"),setTimeout(()=>this.trackUserData(),100)}),"undefined"!=typeof window){window.addEventListener("popstate",()=>{qe.debug("Browser navigation, tracking user data"),this.trackUserData()});const t=history.pushState,e=history.replaceState;let i=window.location.href;history.pushState=function(...e){t.apply(history,e);const n=window.location.href;n!==i&&new URL(i).pathname!==new URL(n).pathname&&(i=n,qe.debug("pushState changed path, tracking user data"),setTimeout(()=>je.getInstance().trackUserData(),0))},history.replaceState=function(...t){e.apply(history,t),qe.debug("replaceState called, not tracking user data (query param update)")}}qe.debug("User data tracking listeners set up")}forceTrack(){this.lastTrackTime=0,this.trackUserData()}reset(){this.lastTrackTime=0,this.trackUserData(),qe.debug("UserDataTracker reset")}destroy(){this.unsubscribers.forEach(t=>t()),this.unsubscribers=[],this.eventBus.removeAllListeners("route:changed"),this.eventBus.removeAllListeners("sdk:route-invalidated"),this.eventBus.removeAllListeners("user:logged-in"),this.eventBus.removeAllListeners("user:logged-out"),this.isInitialized=!1,qe.debug("UserDataTracker destroyed")}getStatus(){return{initialized:this.isInitialized,lastTrackTime:this.lastTrackTime,listenersCount:this.unsubscribers.length}}}je.getInstance();const He=X("AutoEventListener");class Be{constructor(){this.eventBus=st.getInstance(),this.isInitialized=!1,this.eventHandlers=new Map,this.lastEventTimes=new Map,this.debounceConfig={"cart:item-added":1e3,"cart:item-removed":500,"cart:quantity-changed":500,"cart:updated":1e3,"cart:package-swapped":100}}static getInstance(){return Be.instance||(Be.instance=new Be),Be.instance}initialize(){this.isInitialized||(this.isInitialized=!0,be.initialize(),this.setupCartEventListeners(),this.setupUpsellEventListeners(),this.setupCheckoutEventListeners(),this.setupPageEventListeners(),this.setupExitIntentEventListeners(),He.info("AutoEventListener initialized"))}shouldProcessEvent(t){const e=Date.now();return e-(this.lastEventTimes.get(t)||0)<(this.debounceConfig[t]||0)?(He.debug(`Event ${t} debounced`),!1):(this.lastEventTimes.set(t,e),!0)}setupCartEventListeners(){const t=t=>m(this,null,function*(){var e,i,n,s,a,r,o;if(!this.shouldProcessEvent("cart:item-added"))return;const d=t.packageId,l=t.quantity||1,u=lt.getState(),h=u.getPackage(d);if(!h)return void He.warn("Package not found for add to cart:",d);const p=Me.getCurrentList();c(c({item_id:h.external_id.toString(),item_name:h.name||`Package ${d}`,currency:(null==(e=u.data)?void 0:e.currency)||"USD",price:parseFloat(h.price_total||"0"),item_category:(null==(i=u.data)?void 0:i.name)||"Campaign",item_variant:h.product_variant_name||(null==(s=null==(n=h.product)?void 0:n.variant)?void 0:s.name),item_brand:h.product_name||(null==(a=h.product)?void 0:a.name),item_sku:h.product_sku||(null==(o=null==(r=h.product)?void 0:r.variant)?void 0:o.sku)},h.image&&{item_image:h.image}),p&&{item_list_id:p.listId,item_list_name:p.listName});const m=Et.getState().getItem(d),f=Fe.createAddToCartEvent(m||{packageId:d,quantity:l,title:h.name,price:parseFloat(h.price_total),productId:h.product_id,productName:h.product_name,variantId:h.product_variant_id,variantName:h.product_variant_name,variantSku:h.product_sku},null==p?void 0:p.listId,null==p?void 0:p.listName);t.willRedirect&&(f.ft=!0),be.push(f),He.debug("Tracked add to cart:",d)});this.eventBus.on("cart:item-added",t),this.eventHandlers.set("cart:item-added",t);const e=t=>m(this,null,function*(){var e,i,n,s,a,r,o;if(!this.shouldProcessEvent("cart:item-removed"))return;const d=t.packageId,l=t.quantity||1,u=lt.getState(),h=u.getPackage(d);if(!h)return void He.warn("Package not found for remove from cart:",d);c({item_id:h.external_id.toString(),item_name:h.name||`Package ${d}`,currency:(null==(e=u.data)?void 0:e.currency)||"USD",price:parseFloat(h.price_total||"0"),item_category:(null==(i=u.data)?void 0:i.name)||"Campaign",item_variant:h.product_variant_name||(null==(s=null==(n=h.product)?void 0:n.variant)?void 0:s.name),item_brand:h.product_name||(null==(a=h.product)?void 0:a.name),item_sku:h.product_sku||(null==(o=null==(r=h.product)?void 0:r.variant)?void 0:o.sku)},h.image&&{item_image:h.image});const p=Fe.createRemoveFromCartEvent({packageId:d,quantity:l,title:h.name,price:parseFloat(h.price_total),productId:h.product_id,productName:h.product_name,variantId:h.product_variant_id,variantName:h.product_variant_name,variantSku:h.product_sku});be.push(p),He.debug("Tracked remove from cart:",d)});this.eventBus.on("cart:item-removed",e),this.eventHandlers.set("cart:item-removed",e);const i=t=>m(this,null,function*(){var e,i,n,s,a,r,o,d,l,u,h,p,m,f,g;const{previousPackageId:v,newPackageId:$,priceDifference:y}=t,b=lt.getState(),x=b.getPackage(v),w=b.getPackage($);if(!x||!w)return void He.warn("Package data not found for swap:",{previousPackageId:v,newPackageId:$});const _=c({item_id:x.external_id.toString(),item_name:x.name||`Package ${v}`,currency:(null==(e=b.data)?void 0:e.currency)||"USD",price:parseFloat(x.price_total||"0"),quantity:1,item_category:(null==(i=b.data)?void 0:i.name)||"Campaign",item_variant:x.product_variant_name||(null==(s=null==(n=x.product)?void 0:n.variant)?void 0:s.name),item_brand:x.product_name||(null==(a=x.product)?void 0:a.name),item_sku:x.product_sku||(null==(o=null==(r=x.product)?void 0:r.variant)?void 0:o.sku)||void 0},x.image&&{item_image:x.image}),k=c({item_id:w.external_id.toString(),item_name:w.name||`Package ${$}`,currency:(null==(d=b.data)?void 0:d.currency)||"USD",price:parseFloat(w.price_total||"0"),quantity:1,item_category:(null==(l=b.data)?void 0:l.name)||"Campaign",item_variant:w.product_variant_name||(null==(h=null==(u=w.product)?void 0:u.variant)?void 0:h.name),item_brand:w.product_name||(null==(p=w.product)?void 0:p.name),item_sku:w.product_sku||(null==(f=null==(m=w.product)?void 0:m.variant)?void 0:f.sku)||void 0},w.image&&{item_image:w.image}),S={event:"dl_package_swapped",event_category:"ecommerce",event_action:"swap",event_label:`${_.item_name} → ${k.item_name}`,ecommerce:{currency:(null==(g=b.data)?void 0:g.currency)||"USD",value_change:y,items_removed:[_],items_added:[k]},swap_details:{previous_package_id:v,new_package_id:$,price_difference:y}};be.push(S),He.debug("Tracked package swap:",{previousPackageId:v,newPackageId:$,priceDifference:y})});this.eventBus.on("cart:package-swapped",i),this.eventHandlers.set("cart:package-swapped",i);const n=()=>m(this,null,function*(){this.shouldProcessEvent("cart:updated")&&be.push({event:"dl_cart_updated",cart:this.getCartData()})});this.eventBus.on("cart:updated",n),this.eventHandlers.set("cart:updated",n)}setupUpsellEventListeners(){const t=t=>m(null,null,function*(){var e,i;const n=t.orderId,s=t.pagePath;if(!t.packageId)return be.push({event:"dl_viewed_upsell",order_id:n,page_path:s,upsell:{package_id:"page_view",package_name:"Upsell Page View",currency:(null==(e=lt.getState().data)?void 0:e.currency)||"USD"}}),void He.info("Tracked upsell page view:",s);const a=t.packageId,r=lt.getState(),o=r.getPackage(a);o?(be.push({event:"dl_viewed_upsell",order_id:n,upsell:{package_id:a.toString(),package_name:o.name||`Package ${a}`,price:parseFloat(o.price||"0"),currency:(null==(i=r.data)?void 0:i.currency)||"USD"}}),He.info("Tracked upsell view:",a)):He.warn("Package not found for upsell view:",a)});this.eventBus.on("upsell:viewed",t),this.eventHandlers.set("upsell:viewed",t);const e=t=>m(this,null,function*(){var e,i;const n=t.packageId,s=t.quantity||1,a=t.orderId||(null==(e=t.order)?void 0:e.ref_id),r=lt.getState(),o=r.getPackage(n);let d=t.value;void 0===d&&(null==o?void 0:o.price)&&(d=parseFloat(o.price)*s);const l=t.upsellNumber||(sessionStorage.getItem(`upsells_${a}`)?parseInt(sessionStorage.getItem(`upsells_${a}`)||"0")+1:1);a&&sessionStorage.setItem(`upsells_${a}`,String(l));const c={packageId:n,productId:null==o?void 0:o.product_id,productName:null==o?void 0:o.product_name,variantId:null==o?void 0:o.product_variant_id,variantName:null==o?void 0:o.product_variant_name,variantSku:null==o?void 0:o.product_sku,quantity:s,price:d,image:null==o?void 0:o.image},u=Fe.createAcceptedUpsellEvent({orderId:a,packageId:n,packageName:t.packageName||(null==o?void 0:o.name)||`Package ${n}`,quantity:s,value:d||0,currency:t.currency||(null==(i=r.data)?void 0:i.currency)||"USD",upsellNumber:l,item:c});t.willRedirect&&He.debug("Upsell event already marked for queueing due to redirect"),be.push(u),He.info("Tracked upsell accepted:",{packageId:n,orderId:a,upsellOrderId:`${a}-US${l}`,value:d})});this.eventBus.on("upsell:accepted",e),this.eventBus.on("upsell:added",e),this.eventHandlers.set("upsell:accepted",e),this.eventHandlers.set("upsell:added",e);const i=t=>m(this,null,function*(){var e;be.push({event:"dl_skipped_upsell",order_id:t.orderId,upsell:{package_id:(null==(e=t.packageId)?void 0:e.toString())||"unknown",package_name:t.packageName||"Unknown Package"}}),He.info("Tracked upsell skipped:",t.packageId)});this.eventBus.on("upsell:skipped",i),this.eventHandlers.set("upsell:skipped",i)}setupCheckoutEventListeners(){const t=t=>m(null,null,function*(){var e,i,n,s;const a=t.ref_id||t.number||t.order_id||t.transaction_id,r=parseFloat(t.total_incl_tax||t.total||"0"),o=Et.getState(),d=lt.getState();t.lines&&Array.isArray(t.lines)?t.lines.map((e,i)=>{var n,s,a;return{item_id:e.product_sku||(null==(n=e.id)?void 0:n.toString())||`line_${i}`,item_name:e.product_title||e.product_description||`Item ${e.id}`,currency:t.currency||"USD",price:parseFloat(e.price_incl_tax||e.price||"0"),quantity:parseInt((null==(s=e.quantity)?void 0:s.toString())||"1"),item_category:(null==(a=d.data)?void 0:a.name)||"uncategorized",item_variant:e.variant_title,discount:parseFloat(e.price_incl_tax_excl_discounts||"0")-parseFloat(e.price_incl_tax||"0"),index:i}}):o.items.map((t,e)=>{var i,n,s;const a=d.getPackage(t.packageId);return u(c({item_id:(null==(i=null==a?void 0:a.external_id)?void 0:i.toString())||t.packageId.toString(),item_name:(null==a?void 0:a.name)||`Package ${t.packageId}`,currency:(null==(n=d.data)?void 0:n.currency)||"USD",price:parseFloat((null==a?void 0:a.price_total)||"0"),quantity:t.quantity,item_category:(null==(s=d.data)?void 0:s.name)||"uncategorized"},(null==a?void 0:a.image)&&{item_image:a.image}),{index:e})}),t.number,t.currency,(null==(i=null==(e=t.discounts)?void 0:e[0])?void 0:i.code)||t.coupon_code||t.coupon,parseFloat(t.shipping_incl_tax||t.shipping||"0"),parseFloat(t.total_tax||t.tax||"0");const l=Fe.createPurchaseEvent({order:t,orderId:a,transactionId:a,total:r,tax:parseFloat(t.total_tax||t.tax||"0"),shipping:parseFloat(t.shipping_incl_tax||t.shipping||"0"),coupon:(null==(s=null==(n=t.discounts)?void 0:n[0])?void 0:s.code)||t.coupon_code||t.coupon,items:o.items,currency:t.currency||"USD"});l.ft=!0,He.debug("Marked purchase event for queueing with _willRedirect = true"),be.push(l),He.info("Tracked purchase:",a)});this.eventBus.on("order:completed",t),this.eventHandlers.set("order:completed",t)}setupPageEventListeners(){const t=t=>m(null,null,function*(){be.push({event:"dl_page_view",page:{title:t.title||document.title,url:t.url||window.location.href,path:t.path||window.location.pathname,referrer:document.referrer}})});this.eventBus.on("page:viewed",t),this.eventHandlers.set("page:viewed",t);const e=t=>m(this,null,function*(){be.push({event:"dl_route_changed",route:{from:t.from,to:t.to,path:t.path||window.location.pathname}})});this.eventBus.on("route:changed",e),this.eventHandlers.set("route:changed",e)}setupExitIntentEventListeners(){const t=t=>{be.push({event:"dl_exit_intent_shown",event_category:"engagement",event_action:"exit_intent_shown",event_label:t.imageUrl||t.template||"exit-intent",exit_intent:{image_url:t.imageUrl||"",template:t.template||""}}),He.debug("Tracked exit intent shown:",t)};this.eventBus.on("exit-intent:shown",t),this.eventHandlers.set("exit-intent:shown",t);const e=t=>{be.push({event:"dl_exit_intent_accepted",event_category:"engagement",event_action:"exit_intent_accepted",event_label:t.imageUrl||t.template||"exit-intent",exit_intent:{image_url:t.imageUrl||"",template:t.template||""}}),He.debug("Tracked exit intent accepted:",t)};this.eventBus.on("exit-intent:clicked",e),this.eventHandlers.set("exit-intent:clicked",e);const i=t=>{be.push({event:"dl_exit_intent_dismissed",event_category:"engagement",event_action:"exit_intent_dismissed",event_label:t.imageUrl||t.template||"exit-intent",exit_intent:{image_url:t.imageUrl||"",template:t.template||""}}),He.debug("Tracked exit intent dismissed:",t)};this.eventBus.on("exit-intent:dismissed",i),this.eventHandlers.set("exit-intent:dismissed",i);const n=t=>{be.push({event:"dl_exit_intent_closed",event_category:"engagement",event_action:"exit_intent_closed",event_label:t.imageUrl||t.template||"exit-intent",exit_intent:{image_url:t.imageUrl||"",template:t.template||""}}),He.debug("Tracked exit intent closed:",t)};this.eventBus.on("exit-intent:closed",n),this.eventHandlers.set("exit-intent:closed",n);const s=t=>{be.push({event:"dl_exit_intent_action",event_category:"engagement",event_action:`exit_intent_${t.action}`,event_label:t.couponCode||t.action,exit_intent:{action:t.action,coupon_code:t.couponCode||""}}),He.debug("Tracked exit intent action:",t)};this.eventBus.on("exit-intent:action",s),this.eventHandlers.set("exit-intent:action",s)}getCartData(){var t;try{const e=Et.getState(),i=lt.getState();return{total_value:e.total||e.subtotal||0,total_items:e.totalQuantity||0,currency:(null==(t=i.data)?void 0:t.currency)||"USD",items:e.items.map(t=>{var e;return{package_id:t.packageId,quantity:t.quantity,price:(null==(e=i.getPackage(t.packageId))?void 0:e.price)||0}})}}catch(e){return He.error("Error getting cart data:",e),null}}reset(){this.lastEventTimes.clear(),He.debug("AutoEventListener reset")}destroy(){this.eventHandlers.forEach((t,e)=>{this.eventBus.off(e,t)}),this.eventHandlers.clear(),this.lastEventTimes.clear(),this.isInitialized=!1,He.debug("AutoEventListener destroyed")}getStatus(){return{initialized:this.isInitialized,listenersCount:this.eventHandlers.size,debounceConfig:c({},this.debounceConfig)}}setDebounceConfig(t){Object.assign(this.debounceConfig,t),He.debug("Updated debounce config:",this.debounceConfig)}}Be.getInstance();const Ve={visitor_type:{type:"string"},customer_id:{type:"string"},customer_email:{type:"string"},customer_phone:{type:"string"},customer_first_name:{type:"string"},customer_last_name:{type:"string"},customer_address_city:{type:"string"},customer_address_province:{type:"string"},customer_address_province_code:{type:"string"},customer_address_country:{type:"string"},customer_address_country_code:{type:"string"},customer_address_zip:{type:"string"},customer_order_count:{type:"number"},customer_total_spent:{type:"number"},customer_tags:{type:"string"}},Ge={item_id:{type:"string",required:!0},item_name:{type:"string",required:!0},affiliation:{type:"string"},coupon:{type:"string"},currency:{type:"string"},discount:{type:"number"},index:{type:"number"},item_brand:{type:"string"},item_category:{type:"string"},item_category2:{type:"string"},item_category3:{type:"string"},item_category4:{type:"string"},item_category5:{type:"string"},item_list_id:{type:"string"},item_list_name:{type:"string"},item_variant:{type:"string"},item_image:{type:"string"},location_id:{type:"string"},price:{type:"number"},quantity:{type:"number"}},Ke={currency:{type:"string"},value:{type:"number"},coupon:{type:"string"},items:{type:"array",items:{type:"object",properties:Ge}}},Je={dl_user_data:{name:"dl_user_data",fields:{event:{type:"string",required:!0},user_properties:{type:"object",required:!0,properties:Ve},ecommerce:{type:"object",properties:u(c({},Ke),{cart_contents:{type:"array",items:{type:"object",properties:Ge}}})}}},dl_sign_up:{name:"dl_sign_up",fields:{event:{type:"string",required:!0},user_properties:{type:"object",properties:Ve},method:{type:"string"}}},dl_login:{name:"dl_login",fields:{event:{type:"string",required:!0},user_properties:{type:"object",properties:Ve},method:{type:"string"}}},dl_view_item_list:{name:"dl_view_item_list",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{item_list_id:{type:"string"},item_list_name:{type:"string"},impressions:{type:"array",items:{type:"object",properties:Ge}}})},user_properties:{type:"object",properties:Ve}}},dl_view_search_results:{name:"dl_view_search_results",fields:{event:{type:"string",required:!0},search_term:{type:"string",required:!0},ecommerce:{type:"object",properties:u(c({},Ke),{item_list_name:{type:"string"},impressions:{type:"array",items:{type:"object",properties:Ge}}})},user_properties:{type:"object",properties:Ve}}},dl_select_item:{name:"dl_select_item",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{item_list_id:{type:"string"},item_list_name:{type:"string"}})},user_properties:{type:"object",properties:Ve}}},dl_view_item:{name:"dl_view_item",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:Ke},user_properties:{type:"object",properties:Ve}}},dl_add_to_cart:{name:"dl_add_to_cart",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:Ke},user_properties:{type:"object",properties:Ve}}},dl_remove_from_cart:{name:"dl_remove_from_cart",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:Ke},user_properties:{type:"object",properties:Ve}}},dl_view_cart:{name:"dl_view_cart",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:Ke},user_properties:{type:"object",properties:Ve}}},dl_begin_checkout:{name:"dl_begin_checkout",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{checkout_id:{type:"string"},checkout_step:{type:"number"}})},user_properties:{type:"object",properties:Ve}}},dl_add_shipping_info:{name:"dl_add_shipping_info",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{shipping_tier:{type:"string"}})},shipping_tier:{type:"string"},user_properties:{type:"object",properties:Ve}}},dl_add_payment_info:{name:"dl_add_payment_info",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{payment_type:{type:"string"}})},payment_type:{type:"string"},user_properties:{type:"object",properties:Ve}}},dl_purchase:{name:"dl_purchase",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",required:!0,properties:u(c({},Ke),{transaction_id:{type:"string",required:!0},affiliation:{type:"string"},tax:{type:"number"},shipping:{type:"number"},discount:{type:"number"}})},user_properties:{type:"object",properties:Ve}}},dl_subscribe:{name:"dl_subscribe",fields:{event:{type:"string",required:!0},ecommerce:{type:"object",properties:u(c({},Ke),{subscription_id:{type:"string"},subscription_status:{type:"string"}})},user_properties:{type:"object",properties:Ve}}},dl_viewed_upsell:{name:"dl_viewed_upsell",fields:{event:{type:"string",required:!0},order_id:{type:"string",required:!0},upsell:{type:"object",required:!0,properties:{package_id:{type:"string",required:!0},package_name:{type:"string",required:!0},price:{type:"number"},currency:{type:"string"}}}}},dl_accepted_upsell:{name:"dl_accepted_upsell",fields:{event:{type:"string",required:!0},order_id:{type:"string",required:!0},upsell:{type:"object",required:!0,properties:{package_id:{type:"string",required:!0},package_name:{type:"string"},quantity:{type:"number"},value:{type:"number",required:!0},currency:{type:"string"}}}}},dl_skipped_upsell:{name:"dl_skipped_upsell",fields:{event:{type:"string",required:!0},order_id:{type:"string",required:!0},upsell:{type:"object",required:!0,properties:{package_id:{type:"string"},package_name:{type:"string"}}}}}};function Ze(t){return Je[t]}class We{constructor(t=!1){this.debug=t}validateEvent(t){const e={valid:!0,errors:[],warnings:[]};if(!t||"object"!=typeof t)return e.valid=!1,e.errors.push("Event data must be an object"),e;if(!t.event)return e.valid=!1,e.errors.push('Event must have an "event" field'),e;const i=Ze(t.event);if(!i)return e.warnings.push(`No schema defined for event: ${t.event}`),e;const n=function(t,e){const i=[];function n(t,e,s){if(e.required&&null==t)return void i.push(`Missing required field: ${s}`);if(null==t)return;const a=Array.isArray(t)?"array":typeof t;if(a===e.type){if(e.enum&&!e.enum.includes(t)&&i.push(`Invalid value for ${s}: must be one of ${e.enum.join(", ")}`),"object"===e.type&&e.properties)for(const[i,a]of Object.entries(e.properties))n(t[i],a,`${s}.${i}`);"array"===e.type&&e.items&&t.forEach((t,i)=>{n(t,e.items,`${s}[${i}]`)})}else i.push(`Invalid type for ${s}: expected ${e.type}, got ${a}`)}for(const[s,a]of Object.entries(e.fields))n(t[s],a,s);return{valid:0===i.length,errors:i}}(t,i);return e.valid=n.valid,e.errors.push(...n.errors),this.performAdditionalValidation(t,e),this.debug&&e.valid,e}performAdditionalValidation(t,e){var i;switch(t.ecommerce&&(t.ecommerce.currency&&!this.isValidCurrency(t.ecommerce.currency)&&e.warnings.push(`Invalid currency format: ${t.ecommerce.currency}`),void 0!==t.ecommerce.value&&t.ecommerce.value<0&&e.warnings.push("Ecommerce value should not be negative"),t.ecommerce.items&&Array.isArray(t.ecommerce.items)&&t.ecommerce.items.forEach((t,i)=>{this.validateProduct(t,`ecommerce.items[${i}]`,e)}),t.ecommerce.impressions&&Array.isArray(t.ecommerce.impressions)&&t.ecommerce.impressions.forEach((t,i)=>{this.validateProduct(t,`ecommerce.impressions[${i}]`,e)})),t.user_properties&&this.validateUserProperties(t.user_properties,e),t.event){case"dl_purchase":(null==(i=t.ecommerce)?void 0:i.transaction_id)||(e.errors.push("dl_purchase event must have ecommerce.transaction_id"),e.valid=!1);break;case"dl_view_search_results":t.search_term||(e.errors.push("dl_view_search_results event must have search_term"),e.valid=!1);break;case"dl_viewed_upsell":case"dl_accepted_upsell":case"dl_skipped_upsell":this.validateUpsellEvent(t,e)}}validateProduct(t,e,i){if(!t||"object"!=typeof t)return i.errors.push(`${e} must be an object`),void(i.valid=!1);t.item_id||(i.errors.push(`${e}.item_id is required`),i.valid=!1),t.item_name||(i.errors.push(`${e}.item_name is required`),i.valid=!1);const n=["price","quantity","discount","index"];for(const s of n)void 0!==t[s]&&("number"!=typeof t[s]?(i.errors.push(`${e}.${s} must be a number`),i.valid=!1):"discount"!==s&&t[s]<0&&i.warnings.push(`${e}.${s} should not be negative`));void 0===t.quantity||Number.isInteger(t.quantity)||i.warnings.push(`${e}.quantity should be an integer`)}validateUserProperties(t,e){if("object"!=typeof t)return e.errors.push("user_properties must be an object"),void(e.valid=!1);t.customer_email&&!this.isValidEmail(t.customer_email)&&e.warnings.push("customer_email is not a valid email address"),void 0!==t.customer_order_count&&("number"==typeof t.customer_order_count&&Number.isInteger(t.customer_order_count)||e.warnings.push("customer_order_count should be an integer")),void 0!==t.customer_total_spent&&"number"!=typeof t.customer_total_spent&&e.warnings.push("customer_total_spent should be a number"),t.customer_address_country_code&&2!==t.customer_address_country_code.length&&e.warnings.push("customer_address_country_code should be a 2-letter ISO code"),t.customer_address_province_code&&t.customer_address_province_code.length>3&&e.warnings.push("customer_address_province_code seems too long")}isValidCurrency(t){return/^[A-Z]{3}$/.test(t)}isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}validateUpsellEvent(t,e){if(t.order_id||(e.errors.push(`${t.event} must have order_id`),e.valid=!1),!t.upsell||"object"!=typeof t.upsell)return e.errors.push(`${t.event} must have upsell object`),void(e.valid=!1);t.upsell.package_id||(e.errors.push(`${t.event}.upsell.package_id is required`),e.valid=!1),"dl_accepted_upsell"===t.event&&void 0===t.upsell.value&&(e.errors.push("dl_accepted_upsell.upsell.value is required"),e.valid=!1),void 0!==t.upsell.price&&"number"!=typeof t.upsell.price&&(e.errors.push(`${t.event}.upsell.price must be a number`),e.valid=!1),void 0!==t.upsell.quantity&&"number"!=typeof t.upsell.quantity&&(e.errors.push(`${t.event}.upsell.quantity must be a number`),e.valid=!1),void 0!==t.upsell.value&&"number"!=typeof t.upsell.value&&(e.errors.push(`${t.event}.upsell.value must be a number`),e.valid=!1)}getAvailableSchemas(){return Object.keys(Je)}getSchemaDetails(t){return Ze(t)}generateSampleEvent(t){const e=Ze(t);if(!e)return null;const i={event:t,event_id:"sample_"+Date.now(),timestamp:Date.now()};return this.generateSampleFromSchema(e.fields,i),i}generateSampleFromSchema(t,e){for(const[i,n]of Object.entries(t))if("event"!==i&&(n.required||Math.random()>.5))switch(n.type){case"string":e[i]=n.enum?n.enum[0]:`sample_${i}`;break;case"number":e[i]=i.includes("price")||i.includes("value")?99.99:1;break;case"boolean":e[i]=!0;break;case"object":e[i]={},n.properties&&this.generateSampleFromSchema(n.properties,e[i]);break;case"array":if(e[i]=[],n.items&&"object"===n.items.type&&n.items.properties){const t={};this.generateSampleFromSchema(n.items.properties,t),e[i].push(t)}}}}const Qe=X("NextAnalytics");class Ye{constructor(){this.initialized=!1,this.providers=new Map,this.validator=new We,this.listTracker=Ae.getInstance(),this.viewTracker=Ne.getInstance(),this.userTracker=je.getInstance(),this.autoListener=Be.getInstance(),"undefined"!=typeof window&&(window.NextDataLayerTransformFn=null,this.checkAndSetIgnoreFlag())}static getInstance(){return Ye.instance||(Ye.instance=new Ye),Ye.instance}checkAndSetIgnoreFlag(){if("undefined"!=typeof window)try{"true"===new URLSearchParams(window.location.search).get("ignore")&&(sessionStorage.setItem("analytics_ignore","true"),Qe.info("Analytics ignore flag set from URL parameter"))}catch(t){Qe.error("Error checking ignore parameter:",t)}}shouldIgnoreAnalytics(){if("undefined"==typeof window)return!1;try{if("true"===sessionStorage.getItem("analytics_ignore"))return!0;return"true"===new URLSearchParams(window.location.search).get("ignore")}catch(t){return Qe.error("Error checking ignore status:",t),!1}}isInitialized(){return this.initialized}initialize(){return m(this,null,function*(){var t;if(this.initialized)Qe.debug("Analytics already initialized");else if(this.shouldIgnoreAnalytics())Qe.info("Analytics ignored due to ignore parameter");else try{const e=vt.getState();if(!(null==(t=e.analytics)?void 0:t.enabled))return void Qe.info("Analytics disabled in configuration");be.initialize(),e.analytics.debug&&be.setDebugMode(!0),yield this.initializeProviders(e.analytics,e.storeName),"auto"===e.analytics.mode&&(this.userTracker.initialize(),yield new Promise(t=>setTimeout(t,100)),this.listTracker.initialize(),this.viewTracker.initialize(),this.autoListener.initialize(),Qe.info("Auto-tracking initialized (user data fired first)")),setTimeout(()=>{ve.getInstance().processPendingEvents()},200),this.initialized=!0,Qe.info("NextAnalytics initialized successfully",{providers:Array.from(this.providers.keys()),mode:e.analytics.mode})}catch(e){throw Qe.error("Failed to initialize analytics:",e),e}})}initializeProviders(t,e){return m(this,null,function*(){var i,n,s,a,r,o,d,l,h,p,m,f;if(null==(n=null==(i=t.providers)?void 0:i.nextCampaign)?void 0:n.enabled){const t=new Ce;yield t.initialize(),this.providers.set("nextCampaign",t),be.addProvider(t),Qe.info("NextCampaign adapter initialized")}if(null==(a=null==(s=t.providers)?void 0:s.gtm)?void 0:a.enabled){const t=new we;this.providers.set("gtm",t),be.addProvider(t),Qe.info("GTM adapter initialized")}if((null==(o=null==(r=t.providers)?void 0:r.facebook)?void 0:o.enabled)&&(null==(d=t.providers.facebook.settings)?void 0:d.pixelId)){const i=u(c({},t.providers.facebook),{storeName:e}),n=new _e(i);this.providers.set("facebook",n),be.addProvider(n),Qe.info("Facebook Pixel adapter initialized",{blockedEvents:t.providers.facebook.blockedEvents||[],storeName:e})}if(null==(h=null==(l=t.providers)?void 0:l.rudderstack)?void 0:h.enabled){const t=new Se;this.providers.set("rudderstack",t),be.addProvider(t),Qe.info("RudderStack adapter initialized")}if((null==(m=null==(p=t.providers)?void 0:p.custom)?void 0:m.enabled)&&(null==(f=t.providers.custom.settings)?void 0:f.endpoint)){const e=new Pe(t.providers.custom.settings);this.providers.set("custom",e),be.addProvider(e),Qe.info("Custom adapter initialized")}})}initializeAutoTracking(){Qe.warn("initializeAutoTracking called but is deprecated")}track(t){if(this.shouldIgnoreAnalytics())Qe.debug("Event tracking skipped due to ignore flag:",t.event);else{if(this.initialized||Qe.warn("Analytics not initialized, queuing event:",t.event),be.isDebugMode()){const e=this.validator.validateEvent(t);e.valid||(Qe.error("Event validation failed:",e.errors),e.warnings.length>0&&Qe.warn("Event validation warnings:",e.warnings))}be.push(t)}}setDebugMode(t){be.setDebugMode(t),Qe.info("Debug mode "+(t?"enabled":"disabled"))}setTransformFunction(t){be.setTransformFunction(t)}invalidateContext(){be.invalidateContext(),"undefined"!=typeof window&&window.ElevarInvalidateContext&&(window.ElevarInvalidateContext(),Qe.debug("Called ElevarInvalidateContext")),this.viewTracker.reset(),this.track(Re.createUserDataEvent("dl_user_data"))}getStatus(){return{initialized:this.initialized,debugMode:be.isDebugMode(),providers:Array.from(this.providers.keys()),eventsTracked:be.getEventCount(),ignored:this.shouldIgnoreAnalytics()}}clearIgnoreFlag(){if("undefined"!=typeof window)try{sessionStorage.removeItem("analytics_ignore"),Qe.info("Analytics ignore flag cleared")}catch(t){Qe.error("Error clearing ignore flag:",t)}}trackViewItemList(t,e,i){this.track(Fe.createViewItemListEvent(t,e,i))}trackViewItem(t){this.track(Fe.createViewItemEvent(t))}trackAddToCart(t,e,i){this.track(Fe.createAddToCartEvent(t,e,i))}trackBeginCheckout(){this.track(Fe.createBeginCheckoutEvent())}trackPurchase(t){this.track(Fe.createPurchaseEvent(t))}trackSignUp(t){const e=t?{customer_email:t}:void 0;this.track(Re.createSignUpEvent("email",e))}trackLogin(t){const e=t?{customer_email:t}:void 0;this.track(Re.createLoginEvent("email",e))}}const Xe=Ye.getInstance();"undefined"!=typeof window&&(window.NextAnalytics=Xe,window.NextDataLayerManager=be,window.NextInvalidateContext=()=>{Xe.invalidateContext()},window.NextAnalyticsClearIgnore=()=>{Xe.clearIgnoreFlag()});const ti=Object.freeze(Object.defineProperty({__proto__:null,EcommerceEvents:Fe,EventValidator:We,NextAnalytics:Ye,UserEvents:Re,dataLayer:be,nextAnalytics:Xe},Symbol.toStringTag,{value:"Module"})),ei=Object.freeze(Object.defineProperty({__proto__:null,ExitIntentEnhancer:class extends ie{constructor(){super(document.body),this.isEnabled=!1,this.triggerCount=0,this.lastTriggerTime=0,this.maxTriggers=1,this.cooldownPeriod=3e4,this.imageUrl="",this.templateName="",this.templateElement=null,this.action=null,this.popupElement=null,this.overlayElement=null,this.mouseLeaveHandler=null,this.scrollHandler=null,this.disableOnMobile=!0,this.mobileScrollTrigger=!1,this.sessionStorageKey="exit-intent-dismissed",this.useSessionStorage=!0,this.overlayClosable=!0,this.showCloseButton=!1,this.imageClickable=!0,this.actionButtonText=""}initialize(){return m(this,null,function*(){if("loading"===document.readyState&&(yield new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t())})),this.useSessionStorage&&"undefined"!=typeof window&&window.sessionStorage)try{const t=sessionStorage.getItem(this.sessionStorageKey);if(t){const e=JSON.parse(t);this.triggerCount=e.triggerCount||0,this.lastTriggerTime=e.lastTriggerTime||0}}catch(t){this.logger.debug("Failed to load session storage data:",t)}})}update(t){return m(this,null,function*(){t&&"object"==typeof t&&t.image&&this.setup(t)})}setup(t){t.image||t.template?(this.imageUrl=t.image||"",this.templateName=t.template||"",this.action=t.action||null,this.disableOnMobile=void 0===t.disableOnMobile||t.disableOnMobile,this.mobileScrollTrigger=t.mobileScrollTrigger||!1,this.maxTriggers=void 0!==t.maxTriggers?t.maxTriggers:1,this.useSessionStorage=void 0===t.useSessionStorage||t.useSessionStorage,this.overlayClosable=void 0===t.overlayClosable||t.overlayClosable,this.showCloseButton=t.showCloseButton||!1,this.imageClickable=void 0===t.imageClickable||t.imageClickable,this.actionButtonText=t.actionButtonText||"",t.sessionStorageKey&&(this.sessionStorageKey=t.sessionStorageKey),!this.templateName||(this.templateElement=document.querySelector(`template[data-template="${this.templateName}"]`),this.templateElement)?this.disableOnMobile&&this.isMobileDevice()?this.logger.debug("Exit intent disabled on mobile device"):(this.isEnabled=!0,this.setupEventListeners(),this.logger.debug("Simple exit intent setup complete")):this.logger.error(`Exit intent template not found: <template data-template="${this.templateName}">`)):this.logger.error("Exit intent requires either an image URL or a template name")}disable(){this.isEnabled=!1,this.cleanupEventListeners(),this.hidePopup()}reset(){if(this.triggerCount=0,this.lastTriggerTime=0,this.useSessionStorage&&"undefined"!=typeof window&&window.sessionStorage)try{sessionStorage.removeItem(this.sessionStorageKey)}catch(t){this.logger.debug("Failed to clear session storage:",t)}}setupEventListeners(){this.isMobileDevice()||(this.mouseLeaveHandler=t=>{const e=t.relatedTarget;this.shouldTrigger()&&(!e||"HTML"===e.nodeName)&&t.clientY<=10&&this.triggerExitIntent()},document.documentElement.addEventListener("mouseout",this.mouseLeaveHandler)),this.isMobileDevice()&&this.mobileScrollTrigger&&(this.scrollHandler=()=>{this.shouldTrigger()&&window.scrollY/(document.body.scrollHeight-window.innerHeight)*100>=50&&this.triggerExitIntent()},window.addEventListener("scroll",this.scrollHandler,{passive:!0}))}isMobileDevice(){const t="ontouchstart"in window||navigator.maxTouchPoints>0,e=window.innerWidth<768,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return t&&(e||i)}shouldTrigger(){return!(!this.isEnabled||this.popupElement||this.triggerCount>=this.maxTriggers||Date.now()-this.lastTriggerTime<this.cooldownPeriod||this.disableOnMobile&&this.isMobileDevice())}triggerExitIntent(){this.triggerCount++,this.lastTriggerTime=Date.now(),this.saveToSessionStorage(),this.showPopup()}saveToSessionStorage(){if(this.useSessionStorage&&"undefined"!=typeof window&&window.sessionStorage)try{const t={triggerCount:this.triggerCount,lastTriggerTime:this.lastTriggerTime,timestamp:Date.now()};sessionStorage.setItem(this.sessionStorageKey,JSON.stringify(t))}catch(t){this.logger.debug("Failed to save to session storage:",t)}}showPopup(){this.templateElement?this.createTemplatePopup():this.createImagePopup(),this.emit("exit-intent:shown",{imageUrl:this.imageUrl,template:this.templateName})}createTemplatePopup(){if(this.overlayElement=document.createElement("div"),this.overlayElement.className="exit-intent-overlay",this.overlayElement.setAttribute("data-exit-intent","overlay"),this.overlayElement.style.cssText=`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 999999;\n      cursor: ${this.overlayClosable?"pointer":"default"};\n    `,this.popupElement=document.createElement("div"),this.popupElement.className="exit-intent-popup exit-intent-template-popup",this.popupElement.setAttribute("data-exit-intent","popup"),this.popupElement.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      z-index: 1000000;\n      max-width: 90vw;\n      max-height: 90vh;\n      overflow: auto;\n    ",this.templateElement){const t=this.templateElement.content.cloneNode(!0);this.popupElement.appendChild(t),this.processTemplateActions(this.popupElement)}if(this.showCloseButton){const t=document.createElement("button");t.className="exit-intent-close",t.setAttribute("data-exit-intent","close"),t.innerHTML="&times;",t.style.cssText="\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: transparent;\n        border: none;\n        font-size: 30px;\n        cursor: pointer;\n        z-index: 1000001;\n        color: #666;\n        padding: 0;\n        width: 30px;\n        height: 30px;\n        line-height: 1;\n      ",t.addEventListener("click",t=>{t.stopPropagation(),this.hidePopup(),this.emit("exit-intent:closed",{imageUrl:this.imageUrl,template:this.templateName})}),this.popupElement.appendChild(t)}this.overlayClosable&&this.overlayElement.addEventListener("click",()=>{this.hidePopup(),this.emit("exit-intent:dismissed",{imageUrl:this.imageUrl,template:this.templateName}),this.saveToSessionStorage()}),this.popupElement.addEventListener("click",t=>{t.stopPropagation()});const t=e=>{"Escape"===e.key&&(this.hidePopup(),this.emit("exit-intent:dismissed",{imageUrl:this.imageUrl,template:this.templateName}),this.saveToSessionStorage(),document.removeEventListener("keydown",t))};document.addEventListener("keydown",t),document.body.appendChild(this.overlayElement),document.body.appendChild(this.popupElement),requestAnimationFrame(()=>{this.overlayElement&&(this.overlayElement.style.opacity="1"),this.popupElement&&(this.popupElement.style.opacity="0",this.popupElement.style.transform="translate(-50%, -50%) scale(0.8)",this.popupElement.style.transition="all 0.3s ease",requestAnimationFrame(()=>{this.popupElement&&(this.popupElement.style.opacity="1",this.popupElement.style.transform="translate(-50%, -50%) scale(1)")}))})}processTemplateActions(t){t.querySelectorAll("[data-exit-intent-action]").forEach(t=>{switch(t.getAttribute("data-exit-intent-action")){case"close":t.addEventListener("click",()=>{this.hidePopup(),this.emit("exit-intent:action",{action:"close"})});break;case"apply-coupon":const e=t.getAttribute("data-coupon-code");e&&t.addEventListener("click",()=>m(this,null,function*(){this.emit("exit-intent:action",{action:"apply-coupon",couponCode:e});const{useCartStore:t}=yield Promise.resolve().then(()=>It),i=t.getState();yield i.applyCoupon(e),this.hidePopup()}));break;case"custom":t.addEventListener("click",()=>m(this,null,function*(){this.action&&(yield this.action()),this.emit("exit-intent:action",{action:"custom"}),this.hidePopup()}))}})}createImagePopup(){this.overlayElement=document.createElement("div"),this.overlayElement.className="exit-intent-overlay",this.overlayElement.setAttribute("data-exit-intent","overlay"),this.overlayElement.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 999999;\n      cursor: pointer;\n    ",this.popupElement=document.createElement("div"),this.popupElement.className="exit-intent-popup",this.popupElement.setAttribute("data-exit-intent","popup"),this.popupElement.style.cssText=`\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      z-index: 1000000;\n      cursor: ${this.imageClickable&&!this.actionButtonText?"pointer":"default"};\n      max-width: 90vw;\n      max-height: ${this.actionButtonText?"60vh":"50vh"};\n    `;const t=document.createElement("img");if(t.className="exit-intent-image",t.setAttribute("data-exit-intent","image"),t.src=this.imageUrl,t.style.cssText="\n      max-width: 100%;\n      max-height: 50vh;\n      width: auto;\n      height: auto;\n      object-fit: contain;\n      border-radius: 8px;\n      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n    ",t.onerror=()=>{this.logger.error("Failed to load exit intent image:",this.imageUrl),this.hidePopup()},this.popupElement.appendChild(t),this.actionButtonText){const t=document.createElement("div");t.style.cssText="\n        text-align: center;\n        margin-top: 20px;\n      ";const e=document.createElement("button");e.className="exit-intent-action-button",e.setAttribute("data-exit-intent","action"),e.textContent=this.actionButtonText,e.style.cssText="\n        background-color: #4CAF50;\n        color: white;\n        border: none;\n        padding: 12px 30px;\n        font-size: 16px;\n        border-radius: 5px;\n        cursor: pointer;\n        font-weight: bold;\n      ",e.addEventListener("click",t=>m(this,null,function*(){if(t.stopPropagation(),this.emit("exit-intent:clicked",{imageUrl:this.imageUrl}),this.action)try{yield this.action()}catch(e){this.logger.error("Exit intent action failed:",e)}this.saveToSessionStorage(),this.hidePopup()})),t.appendChild(e),this.popupElement.appendChild(t)}if(this.showCloseButton){const t=document.createElement("button");t.className="exit-intent-close",t.setAttribute("data-exit-intent","close"),t.innerHTML="&times;",t.style.cssText="\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        background: transparent;\n        border: none;\n        font-size: 30px;\n        cursor: pointer;\n        z-index: 1000001;\n        color: #fff;\n        text-shadow: 0 0 3px rgba(0,0,0,0.5);\n        padding: 0;\n        width: 30px;\n        height: 30px;\n        line-height: 1;\n      ",t.addEventListener("click",t=>{t.stopPropagation(),this.hidePopup(),this.emit("exit-intent:closed",{imageUrl:this.imageUrl})}),this.popupElement.appendChild(t)}this.overlayElement.addEventListener("click",()=>{this.hidePopup(),this.emit("exit-intent:dismissed",{imageUrl:this.imageUrl}),this.saveToSessionStorage()}),this.imageClickable&&!this.actionButtonText?this.popupElement.addEventListener("click",t=>m(this,null,function*(){if(t.stopPropagation(),this.emit("exit-intent:clicked",{imageUrl:this.imageUrl}),this.action)try{yield this.action()}catch(e){this.logger.error("Exit intent action failed:",e)}this.saveToSessionStorage(),this.hidePopup()})):this.popupElement.addEventListener("click",t=>{t.stopPropagation()});const e=t=>{"Escape"===t.key&&(this.hidePopup(),this.emit("exit-intent:dismissed",{imageUrl:this.imageUrl}),this.saveToSessionStorage(),document.removeEventListener("keydown",e))};document.addEventListener("keydown",e),document.body.appendChild(this.overlayElement),document.body.appendChild(this.popupElement),requestAnimationFrame(()=>{this.overlayElement&&(this.overlayElement.style.opacity="1"),this.popupElement&&(this.popupElement.style.opacity="0",this.popupElement.style.transform="translate(-50%, -50%) scale(0.8)",this.popupElement.style.transition="all 0.3s ease",requestAnimationFrame(()=>{this.popupElement&&(this.popupElement.style.opacity="1",this.popupElement.style.transform="translate(-50%, -50%) scale(1)")}))})}hidePopup(){this.popupElement&&(this.popupElement.style.transition="all 0.2s ease",this.popupElement.style.opacity="0",this.popupElement.style.transform="translate(-50%, -50%) scale(0.8)",setTimeout(()=>{this.popupElement&&(this.popupElement.remove(),this.popupElement=null)},200)),this.overlayElement&&(this.overlayElement.style.transition="opacity 0.2s ease",this.overlayElement.style.opacity="0",setTimeout(()=>{this.overlayElement&&(this.overlayElement.remove(),this.overlayElement=null)},200))}cleanupEventListeners(){this.mouseLeaveHandler&&(document.documentElement.removeEventListener("mouseout",this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null),this.hidePopup()}destroy(){this.cleanupEventListeners(),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),ii=Object.freeze(Object.defineProperty({__proto__:null,FomoPopupEnhancer:class extends ie{constructor(){super(document.body),this.isActive=!1,this.showCount=0,this.popupElement=null,this.timeoutIds=[],this.defaultItems=[],this.defaultCustomers={AU:["Jessica from Sydney","Emma from Melbourne","Olivia from Brisbane","Sophia from Perth"],GB:["Jane from London","Olivia from Manchester","Amelia from Birmingham","Isabella from Leeds"],CA:["Lily from Toronto","Emma from Vancouver","Ava from Montreal","Sophia from Calgary"],US:["Grace from New York","Hailey from Sacramento","Phoebe from Las Vegas","Jenny from Scottsdale"]},this.loadItemsFromCampaign(),this.config={items:this.defaultItems,customers:this.defaultCustomers,maxMobileShows:2,displayDuration:5e3,delayBetween:12e3,initialDelay:0,country:"US"}}update(t){return m(this,null,function*(){t&&this.setup(t)})}loadItemsFromCampaign(){var t;const e=lt.getState();(null==(t=e.data)?void 0:t.packages)&&(this.defaultItems=e.data.packages.slice(0,5).map(t=>({text:t.name,image:t.image||""})).filter(t=>t.image)),0===this.defaultItems.length&&(this.defaultItems=[{text:"Popular Package",image:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23ddd'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.3em' fill='%23999'%3EProduct%3C/text%3E%3C/svg%3E"}])}initialize(){return m(this,null,function*(){"loading"===document.readyState&&(yield new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t())})),this.injectStyles()})}setup(t={}){t.items||this.loadItemsFromCampaign(),this.config=u(c(c({},this.config),t),{items:t.items||this.defaultItems,customers:void 0!==t.customers?t.customers:this.config.customers}),t.country||(this.config.country=this.detectCountry()),this.logger.debug("FOMO popup configured:",this.config)}start(){if(this.isActive)return;this.isActive=!0,this.createPopupElement();const t=window.setTimeout(()=>{this.showNextPopup()},this.config.initialDelay||0);this.timeoutIds.push(t)}stop(){this.isActive=!1,this.timeoutIds.forEach(t=>clearTimeout(t)),this.timeoutIds=[],this.hidePopup(),this.showCount=0}showNextPopup(){if(!this.isActive)return;if(window.innerWidth<=768&&this.showCount>=(this.config.maxMobileShows||2))return void this.stop();const t=this.getRandomItem(),e=this.getRandomCustomer();this.updatePopupContent(t,e),this.showPopup();const i=window.setTimeout(()=>{this.hidePopup();const t=window.setTimeout(()=>{this.showNextPopup()},this.config.delayBetween||12e3);this.timeoutIds.push(t)},this.config.displayDuration||5e3);this.timeoutIds.push(i),this.showCount++}getRandomItem(){const t=this.config.items||[];return 0===t.length?{text:"Popular Package",image:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23ddd'/%3E%3Ctext x='50' y='50' text-anchor='middle' dy='.3em' fill='%23999'%3EProduct%3C/text%3E%3C/svg%3E"}:t[Math.floor(Math.random()*t.length)]}getRandomCustomer(){var t,e;const i=this.config.country||"US",n=(null==(t=this.config.customers)?void 0:t[i])||(null==(e=this.config.customers)?void 0:e.US)||[];return n[Math.floor(Math.random()*n.length)]||"Someone"}detectCountry(){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return t.includes("Australia")?"AU":t.includes("London")||t.includes("Dublin")?"GB":t.includes("Toronto")||t.includes("Vancouver")?"CA":"US"}createPopupElement(){this.popupElement||(this.popupElement=document.createElement("div"),this.popupElement.className="next-fomo-wrapper",this.popupElement.innerHTML='\n      <div class="next-fomo-inner">\n        <div class="next-fomo-item">\n          <div class="next-fomo-thumb">\n            <img class="next-fomo-image" alt="Product">\n          </div>\n          <div class="next-fomo-desc">\n            <p>\n              <span class="next-fomo-customer"></span><br>\n              Just purchased:<br>\n              <span class="next-fomo-product"></span><br>\n              <span class="next-fomo-time">JUST NOW</span>\n            </p>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(this.popupElement))}updatePopupContent(t,e){if(!this.popupElement)return;const i=this.popupElement.querySelector(".next-fomo-image"),n=this.popupElement.querySelector(".next-fomo-customer"),s=this.popupElement.querySelector(".next-fomo-product");i&&(i.src=t.image),n&&(n.textContent=e),s&&(s.textContent=t.text),this.emit("fomo:shown",{customer:e,product:t.text,image:t.image})}showPopup(){this.popupElement&&(this.popupElement.style.display="none",this.popupElement.offsetHeight,this.popupElement.style.display="",requestAnimationFrame(()=>{this.popupElement&&this.popupElement.classList.add("next-fomo-show")}))}hidePopup(){this.popupElement&&this.popupElement.classList.remove("next-fomo-show")}injectStyles(){if(document.getElementById("next-fomo-styles"))return;const t=document.createElement("style");t.id="next-fomo-styles",t.textContent="\n      .next-fomo-wrapper {\n        position: fixed;\n        bottom: 20px;\n        left: 20px;\n        width: 320px;\n        background: white;\n        border-radius: 10px;\n        box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n        transform: translateY(120%);\n        transition: transform 0.8s ease;\n        z-index: 999998;\n      }\n      \n      .next-fomo-wrapper.next-fomo-show {\n        transform: translateY(0);\n      }\n      \n      @media (max-width: 768px) {\n        .next-fomo-wrapper {\n          width: calc(100% - 40px);\n          max-width: 320px;\n        }\n      }\n      \n      .next-fomo-item {\n        display: flex;\n        padding: 15px;\n        align-items: center;\n      }\n      \n      .next-fomo-thumb {\n        flex-shrink: 0;\n        margin-right: 15px;\n      }\n      \n      .next-fomo-thumb img {\n        width: 60px;\n        height: 60px;\n        object-fit: cover;\n        border-radius: 8px;\n      }\n      \n      .next-fomo-desc {\n        flex: 1;\n      }\n      \n      .next-fomo-desc p {\n        margin: 0;\n        font-size: 13px;\n        line-height: 1.4;\n        color: #333;\n      }\n      \n      .next-fomo-customer {\n        font-weight: 600;\n        color: #000;\n      }\n      \n      .next-fomo-product {\n        font-weight: 600;\n        color: #000;\n      }\n      \n      .next-fomo-time {\n        font-size: 11px;\n        color: #999;\n        text-transform: uppercase;\n      }\n    ",document.head.appendChild(t)}cleanupEventListeners(){this.stop(),this.popupElement&&(this.popupElement.remove(),this.popupElement=null)}destroy(){this.cleanupEventListeners(),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),ni={cart:{isEmpty:"isEmpty",hasItems:"!isEmpty",hasSavings:"totals.hasSavings",hasTotalSavings:"totals.hasTotalSavings",quantity:"totalQuantity",itemCount:"items.length",count:"totals.count",subtotal:{path:"totals.subtotal.formatted",preformatted:!0},total:{path:"totals.total.formatted",preformatted:!0},totalExclShipping:{path:"totals.totalExclShipping.formatted",preformatted:!0},shipping:{path:"totals.shipping.formatted",preformatted:!0},tax:{path:"totals.tax.formatted",preformatted:!0},discounts:{path:"totals.discounts.formatted",preformatted:!0},savingsAmount:{path:"totals.savings.formatted",preformatted:!0,fallback:"$0.00"},savingsPercentage:{path:"totals.savingsPercentage.formatted",preformatted:!0,fallback:"0%"},compareTotal:{path:"totals.compareTotal.formatted",preformatted:!0},totalSavingsAmount:{path:"totals.totalSavings.formatted",preformatted:!0,fallback:"$0.00"},totalSavingsPercentage:{path:"totals.totalSavingsPercentage.formatted",preformatted:!0,fallback:"0%"},"subtotal.raw":{path:"totals.subtotal.value",format:"currency"},"total.raw":{path:"totals.total.value",format:"currency"},"totalExclShipping.raw":{path:"totals.totalExclShipping.value",format:"currency"},"shipping.raw":{path:"totals.shipping.value",format:"currency"},"tax.raw":{path:"totals.tax.value",format:"currency"},"discounts.raw":{path:"totals.discounts.value",format:"currency"},"savingsAmount.raw":{path:"totals.savings.value",format:"currency"},"savingsPercentage.raw":{path:"totals.savingsPercentage.value",format:"percentage"},"compareTotal.raw":{path:"totals.compareTotal.value",format:"currency"},"totalSavingsAmount.raw":{path:"totals.totalSavings.value",format:"currency"},"totalSavingsPercentage.raw":{path:"totals.totalSavingsPercentage.value",format:"percentage"},hasCoupons:{path:"appliedCoupons.length",format:"boolean",validator:t=>t>0},hasCoupon:{path:"appliedCoupons.length",format:"boolean",validator:t=>t>0},couponCount:{path:"appliedCoupons.length",format:"number"},"coupons[0].code":{path:"appliedCoupons.0.code",format:"text"},"coupons[0].discount":{path:"appliedCoupons.0.discount",format:"currency"},"coupons[1].code":{path:"appliedCoupons.1.code",format:"text"},"coupons[1].discount":{path:"appliedCoupons.1.discount",format:"currency"},discountCode:{path:"appliedCoupons.0.code",format:"text",fallback:""},discountCodes:{path:"appliedCoupons",format:"text",validator:t=>Array.isArray(t)&&0!==t.length?t.map(t=>t.code).join(", "):""}},package:{ref_id:{path:"ref_id",format:"number"},external_id:"external_id",qty:{path:"qty",format:"number"},price:{path:"price",format:"currency"},price_total:{path:"price_total",format:"currency"},price_retail:{path:"price_retail",format:"currency"},price_retail_total:{path:"price_retail_total",format:"currency"},price_recurring:{path:"price_recurring",format:"currency"},is_recurring:"is_recurring",interval:"interval",interval_count:{path:"interval_count",format:"number"},unitPrice:{path:"_calculated.unitPrice",format:"currency"},unitRetailPrice:{path:"_calculated.unitRetailPrice",format:"currency"},packageTotal:{path:"price_total",format:"currency"},comparePrice:{path:"price_retail_total",format:"currency"},compareTotal:{path:"price_retail_total",format:"currency"},savingsAmount:{path:"_calculated.savingsAmount",format:"currency",validator:t=>Math.max(0,Number(t)||0),fallback:0,debugInfo:!0},savingsPercentage:{path:"_calculated.savingsPercentage",format:"percentage",validator:t=>Math.min(100,Math.max(0,Number(t)||0)),fallback:0},unitSavings:{path:"_calculated.unitSavings",format:"currency"},unitSavingsPercentage:{path:"_calculated.unitSavingsPercentage",format:"percentage"},hasSavings:"_calculated.hasSavings",isRecurring:"is_recurring",isBundle:"_calculated.isBundle",unitsInPackage:{path:"qty",format:"number"},discountedPrice:{path:"_calculated.discountedPrice",format:"currency"},discountedPriceTotal:{path:"_calculated.discountedPriceTotal",format:"currency"},discountAmount:{path:"_calculated.discountAmount",format:"currency"},hasDiscount:"_calculated.hasDiscount",finalPrice:{path:"_calculated.finalPrice",format:"currency"},finalPriceTotal:{path:"_calculated.finalPriceTotal",format:"currency"},totalSavingsAmount:{path:"_calculated.totalSavingsAmount",format:"currency"},totalSavingsPercentage:{path:"_calculated.totalSavingsPercentage",format:"percentage"},totalSavingsWithDiscounts:{path:"_calculated.totalSavingsWithDiscounts",format:"currency"},totalSavingsPercentageWithDiscounts:{path:"_calculated.totalSavingsPercentageWithDiscounts",format:"percentage"},hasTotalSavings:"_calculated.hasTotalSavings"},selection:{hasSelection:{path:"hasSelection",format:"boolean"},packageId:{path:"packageId",format:"number"},quantity:{path:"quantity",format:"number"},name:"name",price:{path:"price",format:"currency"},total:{path:"total",format:"currency"},compareTotal:{path:"compareTotal",format:"currency"},unitPrice:{path:"unitPrice",format:"currency"},savingsAmount:{path:"savingsAmount",format:"currency"},savingsPercentage:{path:"savingsPercentage",format:"percentage"},hasSavings:{path:"hasSavings",format:"boolean"},isBundle:{path:"isBundle",format:"boolean"},totalUnits:{path:"totalUnits",format:"number"},monthlyPrice:{path:"monthlyPrice",format:"currency"},yearlyPrice:{path:"yearlyPrice",format:"currency"},pricePerDay:{path:"pricePerDay",format:"currency"},savingsPerUnit:{path:"savingsPerUnit",format:"currency"},discountAmount:{path:"discountAmount",format:"currency"},price_total:{path:"total",format:"currency"},price_retail_total:{path:"compareTotal",format:"currency"},savings:{path:"savingsAmount",format:"currency"},pricePerUnit:{path:"unitPrice",format:"currency"},totalQuantity:{path:"totalUnits",format:"number"},isMultiPack:{path:"isBundle",format:"boolean"},isSingleUnit:{path:"isSingleUnit",format:"boolean"},$t:!0},shipping:{isFree:"_calculated.isFree",cost:"_calculated.cost",price:"_calculated.price",name:"_calculated.name",code:"_calculated.code",method:"_calculated.method",id:"_calculated.id",refId:"_calculated.refId"},order:{isLoading:"isLoading",hasError:"error",errorMessage:"error",id:"order.id",number:"order.number",ref_id:"order.ref_id",created_at:{path:"created_at",format:"date"},total_incl_tax:{path:"total_incl_tax",format:"currency"},order_status_url:"order_status_url",is_test:"is_test",supports_upsells:"supports_upsells",payment_method:{path:"payment_method",format:"text"},shipping_method:{path:"shipping_method",format:"text"},refId:"order.ref_id",createdAt:{path:"order.created_at",format:"date"},total:{path:"order.total_incl_tax",format:"currency",fallback:0},statusUrl:"order.order_status_url",isTest:"order.is_test",supportsUpsells:"order.supports_post_purchase_upsells",paymentMethod:{path:"order.payment_method",format:"text",fallback:"Credit Card"},shippingMethod:{path:"order.shipping_method",format:"text"},status:{path:"order.status",fallback:"Completed"},currency:"order.currency",testBadge:{path:"order.is_test",format:"text"},subtotal:{path:"_calculated.subtotal",format:"currency"},subtotalExclShipping:{path:"_calculated.subtotalExclShipping",format:"currency"},total_excl_tax:{path:"order.total_excl_tax",format:"currency"},tax:{path:"order.total_tax",format:"currency"},shipping:{path:"order.shipping_incl_tax",format:"currency"},shippingExclTax:{path:"order.shipping_excl_tax",format:"currency"},shippingTax:{path:"order.shipping_tax",format:"currency"},discounts:{path:"order.total_discounts",format:"currency"},savings:{path:"_calculated.savings",format:"currency"},savingsAmount:{path:"_calculated.savingsAmount",format:"currency"},savingsPercentage:{path:"_calculated.savingsPercentage",format:"percentage"},hasSavings:"_calculated.hasSavings","customer.name":"customer.name","customer.firstName":"customer.firstName","customer.lastName":"customer.lastName","customer.email":"customer.email","customer.phone":"customer.phone","shippingAddress.full":{path:"shippingAddress.full",format:"text"},"shippingAddress.line1":{path:"shippingAddress.line1",format:"text"},"shippingAddress.line2":{path:"shippingAddress.line2",format:"text"},"shippingAddress.city":{path:"shippingAddress.city",format:"text"},"shippingAddress.state":{path:"shippingAddress.state",format:"text"},"shippingAddress.country":{path:"shippingAddress.country",format:"text"},"shippingAddress.zip":{path:"shippingAddress.zip",format:"text"},"shippingAddress.postcode":{path:"shippingAddress.postcode",format:"text"},"billingAddress.full":{path:"billingAddress.full",format:"text"},"billingAddress.line1":{path:"billingAddress.line1",format:"text"},"billingAddress.line2":{path:"billingAddress.line2",format:"text"},"billingAddress.city":{path:"billingAddress.city",format:"text"},"billingAddress.state":{path:"billingAddress.state",format:"text"},"billingAddress.country":{path:"billingAddress.country",format:"text"},"billingAddress.zip":{path:"billingAddress.zip",format:"text"},"billingAddress.postcode":{path:"billingAddress.postcode",format:"text"},hasItems:"_calculated.hasItems",isEmpty:"_calculated.isEmpty",hasShipping:"_calculated.hasShipping",hasTax:"_calculated.hasTax",hasDiscounts:"_calculated.hasDiscounts",hasUpsells:"_calculated.hasUpsells","lines.count":"_calculated.lines.count","lines.totalQuantity":"_calculated.lines.totalQuantity","lines.upsellCount":"_calculated.lines.upsellCount","lines.mainProduct":"_calculated.lines.mainProduct","lines.mainProductSku":"_calculated.lines.mainProductSku","total.formatted":"_formatted.total","createdAt.formatted":"_formatted.createdAt"}};function si(t,e){const i=ni[t];if(!i)return null;const n=i[e];return n&&"boolean"!=typeof n?"string"==typeof n?{path:n}:n:null}function ai(t,e){const i=si(t,e);return null==i?void 0:i.path}class ri{static validatePercentage(t){const e=Number(t);return isNaN(e)?0:e>1&&e<=100?e:e>=0&&e<=1?100*e:e>100?100:Math.max(0,e)}static validateCurrency(t){if("string"==typeof t){const e=t.replace(/[$,]/g,"").trim(),i=Number(e);if(!isNaN(i))return Math.round(100*i)/100}const e=Number(t);return isNaN(e)?0:Math.round(100*e)/100}static validateNumber(t){const e=Number(t);return isNaN(e)?0:e}static validateBoolean(t){if("boolean"==typeof t)return t;if("string"==typeof t){const e=t.toLowerCase();return"true"===e||"1"===e||"yes"===e}return!!t}static validateDate(t){if(!t)return null;try{const e=new Date(t);return isNaN(e.getTime())?null:e}catch(e){return null}}static validateString(t){return null==t?"":String(t)}}const oi=class{static wrap(t,e,i){try{return t()}catch(n){return this.handleError(n,i||{operation:"unknown"}),e}}static wrapAsync(t,e,i){return m(this,null,function*(){try{return yield t()}catch(n){return this.handleError(n,i||{operation:"unknown"}),e}})}static tryStrategies(t,e,i){for(let s=0;s<t.length;s++)try{const e=t[s];if(e)return e()}catch(n){s===t.length-1&&this.handleError(n,u(c({},i),{operation:(null==i?void 0:i.operation)||"tryStrategies",strategy:s}))}return e}static addErrorHandler(t){this.errorHandlers.push(t)}static removeErrorHandler(t){const e=this.errorHandlers.indexOf(t);e>-1&&this.errorHandlers.splice(e,1)}static handleError(t,e){const i=`${e.operation}:${t.message}`,n=Date.now(),s=this.errorCache.get(i);if(s)if(n-s.lastError.getTime()<this.ERROR_WINDOW_MS){if(s.count++,s.count>this.ERROR_THRESHOLD)return}else s.count=1,s.lastError=new Date(n);else this.errorCache.set(i,{count:1,lastError:new Date(n)});this.logger.error(`[Display Error] ${e.operation}:`,{error:t.message,stack:t.stack,context:e}),this.errorHandlers.forEach(i=>{try{i(t,e)}catch(n){this.logger.error("Error in error handler:",n)}})}static clearErrorCache(){this.errorCache.clear()}static getErrorStats(){return new Map(this.errorCache)}};oi.logger=new Q("DisplayErrorBoundary"),oi.errorHandlers=[],oi.errorCache=new Map,oi.ERROR_THRESHOLD=5,oi.ERROR_WINDOW_MS=6e4;let di=oi;const li=class{static formatValue(t,e="auto",i){return di.wrap(()=>{if(null==t)return"";switch(e){case"currency":return this.formatCurrency(t,null==i?void 0:i.hideZeroCents);case"number":return this.formatNumber(t);case"boolean":return this.formatBoolean(t);case"date":return this.formatDate(t);case"percentage":return this.formatPercentage(t);case"text":return String(t);default:return this.formatAuto(t,i)}},"",{operation:"formatValue",value:String(t),format:String(e)})}static formatCurrency(t,e){const i=ri.validateCurrency(t);return xt(i,void 0,void 0!==e?{hideZeroCents:e}:{})}static formatNumber(t){const e=ri.validateNumber(t);return wt(e)}static formatBoolean(t){if("boolean"==typeof t)return t?"Yes":"No";if("string"==typeof t){const e=t.toLowerCase();if("true"===e||"1"===e||"yes"===e)return"Yes";if("false"===e||"0"===e||"no"===e)return"No"}return t?"Yes":"No"}static formatDate(t){if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?String(t):this.dateFormatter.format(e)}catch(e){return String(t)}}static formatPercentage(t){const e=ri.validatePercentage(t);return`${Math.round(e)}%`}static formatAuto(t,e){var i,n;if("boolean"==typeof t)return this.formatBoolean(t);if("number"==typeof t){if(Number.isInteger(t)&&t>=0&&t<=10)return t.toString();const n=t.toString();return n.includes(".")&&2===(null==(i=n.split(".")[1])?void 0:i.length)?this.formatCurrency(t,null==e?void 0:e.hideZeroCents):(Number.isInteger(t),this.formatNumber(t))}if("string"==typeof t){const i=new Date(t);if(!isNaN(i.getTime())&&t.match(/\d{4}-\d{2}-\d{2}/))return this.formatDate(t);const s=Number(t);if(!isNaN(s)&&t.includes(".")){const t=s.toString();return t.includes(".")&&2===(null==(n=t.split(".")[1])?void 0:n.length)?this.formatCurrency(s,null==e?void 0:e.hideZeroCents):this.formatNumber(s)}}return String(t)}};li.dateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});let ci=li;class ui{static getNestedProperty(t,e){if(!t||!e)return;const i=e.split(".");let n=t;for(const s of i){if(null==n)return;if(s.includes("[")&&s.includes("]")){const[t,e]=s.split("["),i=parseInt((null==e?void 0:e.replace("]",""))||"");if(!t||isNaN(i))return;if(n=n[t],!(Array.isArray(n)&&i>=0&&i<n.length))return;n=n[i]}else n=n[s]}return n}static hasProperty(t,e){return void 0!==this.getNestedProperty(t,e)}static getPropertyWithFallbacks(t,e){for(const i of e){const e=this.getNestedProperty(t,i);if(void 0!==e)return e}}}class hi extends ie{constructor(){super(...arguments),this.formatType="auto",this.hideIfZero=!1,this.hideIfFalse=!1,this.hideZeroCents=!1,this.debugMode=!1}initialize(){return m(this,null,function*(){this.validateElement(),this.parseDisplayAttributes(),this.setupStoreSubscriptions(),this.setupCurrencyChangeListener(),yield this.performInitialUpdate(),this.logger.debug(`${this.constructor.name} initialized with path: ${this.displayPath}`)})}setupCurrencyChangeListener(){document.addEventListener("next:currency-changed",()=>{this.logger.debug(`Currency changed, updating display for ${this.displayPath}`),bt.clearCache(),this.lastValue=void 0,this.updateDisplay()})}parseDisplayAttributes(){const t=this.getAttribute("data-next-display");if(!t)throw new Error(`${this.constructor.name}: data-next-display attribute is required`);this.displayPath=t;const e=Vt.parseDisplayPath(this.displayPath);this.property=e.property;const i=this.getAttribute("data-next-format")||this.getAttribute("data-format"),n=this.getDefaultFormatType(this.property||"");this.formatType=i||n,this.hideIfZero="true"===this.getAttribute("data-hide-if-zero"),this.hideIfFalse="true"===this.getAttribute("data-hide-if-false"),this.hideZeroCents="true"===this.getAttribute("data-hide-zero-cents");const s=this.getAttribute("data-divide-by");s&&(this.divideBy=parseFloat(s));const a=this.getAttribute("data-multiply-by");a&&(this.multiplyBy=parseFloat(a))}getDefaultFormatType(t){if(this.displayPath){const t=this.displayPath.split(".");if(t.length>=2){const[e,...i]=t;let n=i.join(".");"selection"===e&&i.length>=2&&(n=i.slice(1).join("."));const s=si(e,n);if(null==s?void 0:s.format)return s.format}}const e=t.toLowerCase();return e.endsWith(".raw")?"auto":e.includes("percentage")||e.includes("percent")||e.endsWith("pct")||e.endsWith("rate")?"percentage":["price","cost","amount","total","subtotal","retail","compare","savings","shipping","tax","discount","fee","charge","payment","balance","credit","debit","refund","revenue","msrp","value"].some(t=>e.includes(t))?"currency":e.startsWith("is")||e.startsWith("has")||e.startsWith("can")||e.startsWith("should")||e.startsWith("enabled")||e.startsWith("disabled")||e.includes("visible")||e.includes("active")?"boolean":e.includes("date")||e.includes("time")||e.endsWith("at")||e.endsWith("on")?"date":e.includes("quantity")||e.includes("count")||e.includes("qty")||e.includes("units")||e.includes("items")?"number":"auto"}getPropertyValueWithValidation(){return di.wrap(()=>{const t=this.getPropertyValue();if(this.displayPath){const i=Vt.parseDisplayPath(this.displayPath),n=si(i.object,this.property||i.property);if(n){let i=t;if(n.validator&&null!=i)try{i=n.validator(i)}catch(e){this.logger.warn(`Validator failed for ${this.displayPath}:`,e),i=n.fallback}return null==i&&void 0!==n.fallback&&(i=n.fallback),i}}return t},void 0,{operation:"getPropertyValueWithValidation",property:this.property||"unknown",path:this.displayPath||"unknown"})}performInitialUpdate(){return m(this,null,function*(){yield this.updateDisplay()})}updateDisplay(){return m(this,null,function*(){if("none"!==this.element.style.display&&!this.element.classList.contains("next-hidden"))try{let t,e,i=this.getPropertyValueWithValidation();if(i&&"object"==typeof i&&"xt"in i){const t=i.value||"";return this.updateElementContent(t),this.showElement(),void(this.debugMode&&this.element.setAttribute("data-format-debug",JSON.stringify({path:this.displayPath,property:this.property,format:"preformatted",rawValue:i,formattedValue:t})))}if(i&&"object"==typeof i&&"value"in i&&"format"in i){const n=i;t=n.value,e=n.format,n.metadata}else t=i;if("number"==typeof t||"string"==typeof t&&!isNaN(Number(t))){const e=Number(t);this.divideBy&&(t=e/this.divideBy),this.multiplyBy&&(t=e*this.multiplyBy)}if(t===this.lastValue)return;if(this.lastValue=t,this.shouldHideElement(t))return void this.hideElement();let n=e||this.formatType;!e&&this.property&&this.property.toLowerCase().includes("percentage")&&"auto"===this.formatType&&(n="percentage");const s=ci.formatValue(t,n,{hideZeroCents:this.hideZeroCents});this.debugMode&&this.element.setAttribute("data-format-debug",JSON.stringify({path:this.displayPath,property:this.property,format:n,rawValue:i,formattedValue:s})),this.updateElementContent(s),this.showElement()}catch(t){this.handleError(t,"updateDisplay"),this.updateElementContent("N/A")}})}shouldHideElement(t){return!(!this.hideIfZero||0!==t&&"0"!==t&&0!==t)||!(!this.hideIfFalse||t)}updateElementContent(t){this.element instanceof HTMLInputElement||this.element instanceof HTMLTextAreaElement?this.element.value=t:this.element.textContent=t}hideElement(){this.element.style.display="none",this.addClass("display-hidden"),this.removeClass("display-visible")}showElement(){this.element.style.display="",this.addClass("display-visible"),this.removeClass("display-hidden")}update(){this.updateDisplay()}}const pi=class{static findPackageId(t){let e=t.parentElement;for(;e;){for(const t of this.PACKAGE_ID_ATTRS){const i=e.getAttribute(t);if(i){const t=parseInt(i,10);if(!isNaN(t))return this.logger.debug(`Found context package ID: ${t} from element:`,e),t}}e=e.parentElement}this.logger.debug("No context package ID found in parent elements")}static getPackageId(t){for(const e of this.PACKAGE_ID_ATTRS){const i=t.getAttribute(e);if(i){const e=parseInt(i,10);if(!isNaN(e))return this.logger.debug(`Found direct package ID: ${e} from element:`,t),e}}return this.findPackageId(t)}};pi.logger=X("PackageContextResolver"),pi.PACKAGE_ID_ATTRS=["data-next-package-id","data-next-package","data-package-id"];let mi=pi;class fi extends hi{constructor(){super(...arguments),this.includeDiscounts=!1}initialize(){return m(this,null,function*(){this.includeDiscounts=this.element.hasAttribute("data-include-discounts"),yield p(fi.prototype,this,"initialize").call(this)})}setupStoreSubscriptions(){this.subscribe(Et,this.handleCartUpdate.bind(this)),this.cartState=Et.getState(),this.cartState.items.length>0&&this.cartState.totals.isEmpty&&(this.logger.debug("Cart has items but totals are empty, triggering recalculation"),Et.getState().calculateTotals())}handleCartUpdate(t){var e,i,n,s;const a=this.cartState;this.cartState=t,!("total"===this.property||"itemCount"===this.property)||(null==a?void 0:a.total)===t.total&&(null==(e=null==a?void 0:a.items)?void 0:e.length)===(null==(i=t.items)?void 0:i.length)||this.logger.debug("Cart updated",{isEmpty:t.isEmpty,itemCount:t.items.length,total:t.total,totalsFormatted:null==(s=null==(n=t.totals)?void 0:n.total)?void 0:s.formatted}),this.toggleClass("next-cart-empty",t.isEmpty),this.toggleClass("next-cart-has-items",!t.isEmpty),this.updateDisplay()}getPropertyValue(){var t,e,i,n,s,a,r,o,d,l,c,u,h,p,m;if(!this.cartState||!this.property)return void this.logger.debug("Missing cartState or property",{hasCartState:!!this.cartState,property:this.property});if("currency"===this.property||"currencyCode"===this.property){const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;{const t=vt.getState();return(null==t?void 0:t.selectedCurrency)||(null==t?void 0:t.detectedCurrency)||"USD"}}if("currencySymbol"===this.property){const t=vt.getState();if(null==(i=null==(e=null==t?void 0:t.locationData)?void 0:e.detectedCountryConfig)?void 0:i.currencySymbol)return t.locationData.detectedCountryConfig.currencySymbol;let s="USD";const a=lt.getState();return s=(null==(n=null==a?void 0:a.data)?void 0:n.currency)?a.data.currency:(null==t?void 0:t.selectedCurrency)||(null==t?void 0:t.detectedCurrency)||"USD",kt(s)||s}if(this.includeDiscounts&&"subtotal"===this.property){this.logger.debug("Handling subtotal with discounts",{subtotal:null==(s=this.cartState.totals)?void 0:s.subtotal,discounts:null==(a=this.cartState.totals)?void 0:a.discounts});const t=((null==(o=null==(r=this.cartState.totals)?void 0:r.subtotal)?void 0:o.value)||0)-((null==(l=null==(d=this.cartState.totals)?void 0:d.discounts)?void 0:l.value)||0);let e="USD";const i=lt.getState();if(null==(c=null==i?void 0:i.data)?void 0:c.currency)e=i.data.currency;else{const t=vt.getState();e=(null==t?void 0:t.selectedCurrency)||(null==t?void 0:t.detectedCurrency)||"USD"}const n=xt(t,e);return this.logger.debug("Returning discounted subtotal",{discountedSubtotal:t,formatted:n,currency:e}),{xt:!0,value:n}}if(this.includeDiscounts&&"subtotal.raw"===this.property)return((null==(h=null==(u=this.cartState.totals)?void 0:u.subtotal)?void 0:h.value)||0)-((null==(m=null==(p=this.cartState.totals)?void 0:p.discounts)?void 0:m.value)||0);const f=si("cart",this.property);if(f){const{path:t,preformatted:e}=f;if(t.startsWith("!")){const e=t.substring(1);return!ui.getNestedProperty(this.cartState,e)}const i=ui.getNestedProperty(this.cartState,t);return e?{xt:!0,value:i}:i}return ui.getNestedProperty(this.cartState,this.property)}performInitialUpdate(){return m(this,null,function*(){this.displayPath&&"package"===Vt.parseDisplayPath(this.displayPath).object&&this.logger.warn(`CartDisplayEnhancer is handling package property "${this.displayPath}" - this may be incorrect!`,{element:this.element.outerHTML.substring(0,200)+"...",hasPackageContext:void 0!==mi.findPackageId(this.element)}),yield p(fi.prototype,this,"performInitialUpdate").call(this)})}getCartProperty(t,e){const i=this.cartState,n=this.property;this.cartState=t,this.property=e;const s=this.getPropertyValue();return void 0!==i&&(this.cartState=i),void 0!==n&&(this.property=n),s}refreshDisplay(){this.updateDisplay()}}const gi=Object.freeze(Object.defineProperty({__proto__:null,CartDisplayEnhancer:fi},Symbol.toStringTag,{value:"Module"}));class vi{static calculateSavings(t,e){return Math.max(0,t-e)}static calculateSavingsPercentage(t,e){const i=this.calculateSavings(t,e);if(t<=0||i<=0)return 0;const n=i/t*100;return Math.round(n)}static calculateUnitPrice(t,e){return e>0?t/e:0}static calculateLineTotal(t,e){return t*e}static calculatePackageMetrics(t){const e=t.priceTotal||t.price*t.quantity,i=t.retailPriceTotal||t.retailPrice*t.quantity,n=this.calculateUnitPrice(e,t.quantity),s=this.calculateUnitPrice(i,t.quantity);return{totalPrice:e,totalRetailPrice:i,totalSavings:this.calculateSavings(i,e),totalSavingsPercentage:this.calculateSavingsPercentage(i,e),unitPrice:n,unitRetailPrice:s,unitSavings:this.calculateSavings(s,n),unitSavingsPercentage:this.calculateSavingsPercentage(s,n),hasSavings:i>e}}}class $i extends hi{constructor(){super(...arguments),this.selectedItem=null,this.selectionChangeHandler=null}initialize(){return m(this,null,function*(){this.validateElement(),this.parseDisplayAttributes(),this.findAssociatedSelector(),this.setupStoreSubscriptions(),this.selectedItem&&this.loadPackageData(),yield this.performInitialUpdate(),this.logger.debug("SelectionDisplayEnhancer initialized:",{displayPath:this.displayPath,selectorId:this.selectorId})})}parseDisplayAttributes(){super.parseDisplayAttributes();const t=this.displayPath.split(".");if(t.length>=3&&"selection"===t[0]){const e=t[1];e&&(this.selectorId=e),this.property=t.slice(2).join("."),this.logger.debug("Extracted selector ID from display path:",{displayPath:this.displayPath,selectorId:this.selectorId,property:this.property})}else{const t=this.getAttribute("data-next-selector-id")||this.getAttribute("data-selector-id")||this.findSelectorIdFromContext();t&&(this.selectorId=t)}this.selectorId||this.logger.warn("No selector ID found for SelectionDisplayEnhancer")}findSelectorIdFromContext(){var t,e,i;let n=this.element.parentElement;for(;n;){const s=null!=(t=n.getAttribute("data-next-selector-id"))?t:void 0;if(s)return s;if(n.hasAttribute("data-next-cart-selector"))return null!=(i=null!=(e=n.getAttribute("data-next-selector-id"))?e:n.getAttribute("data-next-id"))?i:void 0;n=n.parentElement}}findAssociatedSelector(){if(!this.selectorId)return;const t=document.querySelector(`[data-next-selector-id="${this.selectorId}"]`);if(t){const e=t.wt;if("function"==typeof e)this.selectedItem=e(),this.logger.debug("Got initial selected item from selector:",this.selectedItem);else{const e=t.querySelector('[data-next-selected="true"]');if(e){const t=parseInt(e.getAttribute("data-next-package-id")||"0",10),i=parseInt(e.getAttribute("data-next-quantity")||"1",10);t>0&&(this.selectedItem={packageId:t,quantity:i,element:e,name:void 0,price:void 0,shippingId:e.getAttribute("data-next-shipping-id")||void 0,isPreSelected:!0},this.logger.debug("Found selected item from DOM:",this.selectedItem))}}}else this.logger.debug(`Selector element not found for ID: ${this.selectorId}`)}setupStoreSubscriptions(){this.subscribe(lt,this.handleCampaignUpdate.bind(this)),this.campaignState=lt.getState(),this.needsCartData()&&(this.subscribe(Et,this.handleCartUpdate.bind(this)),this.cartState=Et.getState()),this.selectionChangeHandler=this.handleSelectionChange.bind(this),this.eventBus.on("selector:selection-changed",this.selectionChangeHandler),this.eventBus.on("selector:item-selected",this.selectionChangeHandler)}needsCartData(){return!!this.property&&["discountedPrice","finalPrice","discountAmount","appliedDiscountAmount","hasDiscount","appliedDiscounts","discountPercentage"].includes(this.property)}handleCampaignUpdate(t){this.campaignState=t,this.loadPackageData(),this.updateDisplay()}handleCartUpdate(t){this.cartState=t,this.updateDisplay()}handleSelectionChange(t){if(t.selectorId===this.selectorId){if(this.logger.debug("Selection changed:",t),t.item)this.selectedItem=t.item;else if(t.packageId){const t=document.querySelector(`[data-next-selector-id="${this.selectorId}"]`);if(t){const e=t.wt;"function"==typeof e&&(this.selectedItem=e())}}this.loadPackageData(),this.updateDisplay()}}loadPackageData(){var t;this.selectedItem&&this.campaignState&&(this.packageData=null==(t=this.campaignState.packages)?void 0:t.find(t=>t.ref_id===this.selectedItem.packageId),this.packageData||this.logger.warn(`Package ${this.selectedItem.packageId} not found in campaign data`))}getPropertyValue(){var t;if(this.selectedItem&&this.property)switch(this.property){case"hasSelection":return null!==this.selectedItem;case"packageId":return this.selectedItem.packageId;case"quantity":return this.selectedItem.quantity;case"name":return(null==(t=this.packageData)?void 0:t.name)||this.selectedItem.name||"";case"price":return this.getSelectionPrice();case"total":case"price_total":return this.getSelectionTotal();case"compareTotal":case"price_retail_total":return this.getSelectionCompareTotal();case"savings":case"savingsAmount":return this.getSelectionSavingsAmount();case"savingsPercentage":return this.getSelectionSavingsPercentageFormatted();case"hasSavings":return this.getSelectionHasSavings();case"unitPrice":case"pricePerUnit":return this.getSelectionUnitPrice();case"totalUnits":case"totalQuantity":return this.getSelectionTotalUnits();case"discountAmount":return this.getSelectionDiscountAmount();case"discountedPrice":case"finalPrice":return this.calculateSelectionDiscountedPrice();case"appliedDiscountAmount":return this.calculateSelectionDiscountAmount();case"hasDiscount":return this.getSelectionHasDiscount();case"discountPercentage":return this.getSelectionDiscountPercentage();case"appliedDiscounts":return this.getSelectionAppliedDiscounts();case"isMultiPack":case"isBundle":return this.getSelectionIsBundle();case"isSingleUnit":return!this.getSelectionIsBundle();default:const e=this.parseCalculatedField(this.property);return void 0!==e?e:this.packageData?ui.getNestedProperty(this.packageData,this.property):void 0}}getSelectionPrice(){return this.selectedItem?this.packageData?parseFloat(this.packageData.price||"0"):this.selectedItem.price||0:0}getSelectionTotal(){return this.selectedItem?this.packageData?parseFloat(this.packageData.price_total||"0")||parseFloat(this.packageData.price||"0")*this.selectedItem.quantity:(this.selectedItem.price||0)*this.selectedItem.quantity:0}getSelectionCompareTotal(){if(!this.selectedItem||!this.packageData)return 0;const t=parseFloat(this.packageData.price_retail_total||"0");if(t>0)return t;const e=parseFloat(this.packageData.price_retail||"0");return e>0?e*this.selectedItem.quantity:this.getSelectionTotal()}getSelectionMetrics(){const t=this.getSelectionTotal(),e=this.getSelectionCompareTotal();return{total:t,compareTotal:e,savings:vi.calculateSavings(e,t),savingsPercentage:vi.calculateSavingsPercentage(e,t)}}getSelectionSavingsAmount(){return this.getSelectionMetrics().savings}getSelectionSavingsPercentageFormatted(){return this.getSelectionMetrics().savingsPercentage}getSelectionHasSavings(){return this.getSelectionMetrics().savings>0}getSelectionUnitPrice(){const t=this.getSelectionTotal(),e=this.getSelectionTotalUnits();return e>0?t/e:0}getSelectionTotalUnits(){var t;return this.selectedItem?(null==(t=this.packageData)?void 0:t.qty)||1:0}getSelectionDiscountAmount(){return this.getSelectionSavingsAmount()}getSelectionIsBundle(){return this.getSelectionTotalUnits()>1}calculateSelectionDiscountAmount(){var t,e;if(!this.selectedItem||!this.packageData||!(null==(e=null==(t=this.cartState)?void 0:t.appliedCoupons)?void 0:e.length))return 0;let i=0;const n=this.getSelectionPrice(),s=this.selectedItem.quantity;for(const a of this.cartState.appliedCoupons)if(a.definition.packageIds&&a.definition.packageIds.includes(this.selectedItem.packageId))"percentage"===a.definition.type?i+=n*s*a.definition.value/100:"fixed"===a.definition.type&&(i+=a.definition.value*s);else if(!a.definition.packageIds||0===a.definition.packageIds.length)if("percentage"===a.definition.type)i+=n*s*a.definition.value/100;else if("fixed"===a.definition.type){const t=n*s,e=this.cartState.totals.subtotal.value;if(e>0){const n=t/e;i+=a.definition.value*n}}return i}calculateSelectionDiscountedPrice(){var t;const e=this.getSelectionPrice(),i=this.calculateSelectionDiscountAmount(),n=(null==(t=this.selectedItem)?void 0:t.quantity)||1,s=n>0?i/n:0;return Math.max(0,e-s)}getSelectionHasDiscount(){return this.calculateSelectionDiscountAmount()>0}getSelectionDiscountPercentage(){const t=this.getSelectionTotal(),e=this.calculateSelectionDiscountAmount();return t<=0?0:e/t*100}getSelectionAppliedDiscounts(){var t,e;if(!this.selectedItem||!this.packageData||!(null==(e=null==(t=this.cartState)?void 0:t.appliedCoupons)?void 0:e.length))return[];const i=[];for(const n of this.cartState.appliedCoupons){let t=0;if(n.definition.packageIds&&n.definition.packageIds.includes(this.selectedItem.packageId))"percentage"===n.definition.type?t=this.getSelectionTotal()*n.definition.value/100:"fixed"===n.definition.type&&(t=n.definition.value*this.selectedItem.quantity);else if(!n.definition.packageIds||0===n.definition.packageIds.length)if("percentage"===n.definition.type)t=this.getSelectionTotal()*n.definition.value/100;else if("fixed"===n.definition.type){const e=this.getSelectionTotal(),i=this.cartState.totals.subtotal.value;if(i>0){const s=e/i;t=n.definition.value*s}}t>0&&i.push({code:n.code,amount:t})}return i}parseCalculatedField(t){var e,i;if(!this.selectedItem||!t)return;const n=["+","-","*","/"];for(const s of n)if(t.includes(s)){const n=t.split(s);if(2===n.length){const t=(null==(e=n[0])?void 0:e.trim())||"",a=parseFloat((null==(i=n[1])?void 0:i.trim())||"0");let r=0;switch(t){case"total":case"price_total":r=this.getSelectionTotal();break;case"price":r=this.getSelectionPrice();break;case"savings":case"savingsAmount":r=this.getSelectionSavingsAmount();break;case"compareTotal":r=this.getSelectionCompareTotal();break;default:const e=this.property;this.property=t;const i=this.getPropertyValue();this.property=e,r="number"==typeof i?i:0}if(!isNaN(a))switch(s){case"+":return r+a;case"-":return r-a;case"*":return r*a;case"/":return 0!==a?r/a:0}}}}performInitialUpdate(){return m(this,null,function*(){!this.selectedItem&&this.selectorId&&(yield new Promise(t=>setTimeout(t,50)),this.findAssociatedSelector(),this.selectedItem&&this.loadPackageData()),yield this.updateDisplay()})}updateDisplay(){return m(this,null,function*(){null!==this.selectedItem||"hasSelection"===this.property?yield p($i.prototype,this,"updateDisplay").call(this):this.hideElement()})}destroy(){this.selectionChangeHandler&&(this.eventBus.off("selector:selection-changed",this.selectionChangeHandler),this.eventBus.off("selector:item-selected",this.selectionChangeHandler)),super.destroy()}}const yi=Object.freeze(Object.defineProperty({__proto__:null,SelectionDisplayEnhancer:$i},Symbol.toStringTag,{value:"Module"})),bi=class{static provide(t,e){this.contexts.set(t,e),this.contextElements.add(t)}static resolve(t){let e=t;for(;e;){if(this.contexts.has(e))return this.contexts.get(e);const t=e.getAttribute("data-next-package-id"),i=e.getAttribute("data-next-cart-item-id"),n=e.getAttribute("data-next-shipping-id"),s=e.getAttribute("data-next-selector-id");if(t||i||n||s){const a={};return t&&(a.packageId=parseInt(t,10)),i&&(a.cartItemId=i),n&&(a.shippingMethodId=n),s&&(a.selectionId=s),this.provide(e,a),a}e=e.parentElement}return null}static merge(t,e){return t?e?c(c({},t),e):t:e}static clear(t){this.contexts.delete(t),this.contextElements.delete(t)}static clearAll(){this.contextElements.forEach(t=>{}),this.contexts=new WeakMap,this.contextElements.clear()}static getContextElements(){return Array.from(this.contextElements)}static validate(t,e){return e.every(e=>void 0!==t[e])}};bi.contexts=new WeakMap,bi.contextElements=new Set;let xi=bi;const wi=Object.freeze(Object.defineProperty({__proto__:null,ProductDisplayEnhancer:class extends hi{constructor(){super(...arguments),this.multiplyByQuantity=!1,this.currentQuantity=1}initialize(){return m(this,null,function*(){this.validateElement(),this.parseDisplayAttributes(),this.multiplyByQuantity=this.element.hasAttribute("data-next-multiply-quantity"),this.quantitySelectorId=this.getAttribute("data-next-quantity-selector-id")||"",this.detectPackageContext(),this.setupStoreSubscriptions(),this.setupQuantityListeners(),this.setupCurrencyChangeListener(),this.setupProfileEventListeners(),yield this.performInitialUpdate(),this.logger.debug(`ProductDisplayEnhancer initialized with package ${this.packageId}, path: ${this.displayPath}, format: ${this.formatType}, multiplyByQuantity: ${this.multiplyByQuantity}`)})}setupStoreSubscriptions(){var t;this.subscribe(lt,this.handleCampaignUpdate.bind(this)),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.subscribe(mt,t=>{this.logger.debug(`Profile store changed, active profile: ${t.activeProfileId}`),this.handleProfileUpdate()}),this.campaignState=lt.getState(),!this.campaignState.packages&&(null==(t=this.campaignState.data)?void 0:t.packages)&&(this.campaignState.packages=this.campaignState.data.packages),this.loadPackageData()}handleCampaignUpdate(t){var e;this.campaignState=t,!this.campaignState.packages&&(null==(e=t.data)?void 0:e.packages)&&(this.campaignState.packages=t.data.packages),this.loadPackageData(),this.updateDisplay()}handleCartUpdate(){this.updateDisplay()}setupCurrencyChangeListener(){super.setupCurrencyChangeListener(),document.addEventListener("next:currency-changed",()=>m(this,null,function*(){this.logger.debug("Currency changed, reloading package data"),this.campaignState=lt.getState(),this.loadPackageData(),yield this.updateDisplay()}))}handleProfileUpdate(){this.logger.debug(`Profile update detected for package ${this.packageId}`),this.loadPackageData(),this.updateDisplay(),this.logger.debug(`Display updated after profile change for package ${this.packageId}`)}setupProfileEventListeners(){this.eventBus.on("profile:applied",t=>{this.logger.debug(`Profile applied event received: ${t.profileId} for package ${this.packageId}`),this.handleProfileUpdate()}),this.eventBus.on("profile:reverted",t=>{this.logger.debug(`Profile reverted event received for package ${this.packageId}`),this.handleProfileUpdate()})}setupQuantityListeners(){if(this.multiplyByQuantity)if(this.eventBus.on("upsell:quantity-changed",t=>{if(this.quantitySelectorId&&t.selectorId===this.quantitySelectorId)this.currentQuantity=t.quantity,this.updateDisplay();else if(this.quantitySelectorId||t.selectorId){if(!this.quantitySelectorId){const e=this.element.closest("[data-next-selector-id]");e?e.getAttribute("data-next-selector-id")===t.selectorId&&(this.currentQuantity=t.quantity,this.updateDisplay()):t.packageId===this.packageId&&(this.currentQuantity=t.quantity,this.updateDisplay())}}else t.packageId===this.packageId&&(this.currentQuantity=t.quantity,this.updateDisplay())}),this.quantitySelectorId){const t=document.querySelector(`[data-next-upsell-quantity="display"][data-next-quantity-selector-id="${this.quantitySelectorId}"]`);if(t&&t.textContent){const e=parseInt(t.textContent,10);isNaN(e)||(this.currentQuantity=e)}}else{const t=this.element.closest('[data-next-upsell="offer"]');if(t){const e=t.querySelector('[data-next-upsell-quantity="display"]');if(e&&e.textContent){const t=parseInt(e.textContent,10);isNaN(t)||(this.currentQuantity=t)}}}}detectPackageContext(){const t=xi.resolve(this.element);(null==t?void 0:t.packageId)?this.contextPackageId=t.packageId:this.contextPackageId=mi.findPackageId(this.element);const e=Vt.parseDisplayPath(this.displayPath);if("package"===e.object&&e.property.includes(".")){const t=e.property.split(".");t[0]&&!isNaN(Number(t[0]))&&(this.packageId=Number(t[0]),this.property=t.slice(1).join("."))}else this.contextPackageId&&(this.packageId=this.contextPackageId);this.packageId||this.logger.warn("No package context found - package ID required")}loadPackageData(){var t,e,i,n,s;if(!this.packageId||!this.campaignState)return;const a=(null==(t=this.campaignState.data)?void 0:t.packages)||this.campaignState.packages;this.originalPackageData=null==a?void 0:a.find(t=>t.ref_id===this.packageId);const r=mt.getState().getMappedPackageId(this.packageId),o=r!==this.packageId?r:this.packageId;if(r!==this.packageId&&this.logger.debug(`Profile mapping applied: ${this.packageId} -> ${r}`),this.packageData=null==a?void 0:a.find(t=>t.ref_id===o),!this.packageData&&r!==this.packageId){const t=lt.getState();(null==(e=t.data)?void 0:e.packages)&&(this.packageData=t.data.packages.find(t=>t.ref_id===o),this.packageData&&this.logger.debug(`Found package ${o} in full campaign data`))}if(this.packageData)r!==this.packageId?this.logger.debug(`Package prices - Original #${this.packageId}: retail=${null==(i=this.originalPackageData)?void 0:i.price_retail}, sale=${null==(n=this.originalPackageData)?void 0:n.price} | Mapped #${o}: retail=${this.packageData.price_retail}, sale=${this.packageData.price}`):this.logger.debug(`Package ${this.packageId} loaded with price: ${this.packageData.price} ${(null==(s=this.campaignState.data)?void 0:s.currency)||""}`);else{this.logger.warn(`Package ${o} not found in campaign data (original: ${this.packageId})`);const t=null==a?void 0:a.map(t=>t.ref_id).join(", ");this.logger.debug(`Available package IDs in campaign state: ${t}`),this.packageData=this.originalPackageData,this.originalPackageData&&this.logger.warn(`Falling back to original package ${this.packageId}`)}}getPropertyValue(){var t;if(!this.packageData||!this.property)return;if(null==(t=this.displayPath)?void 0:t.startsWith("campaign."))return this.getCampaignProperty(this.campaignState,this.property);const e=this.getCalculatedProperty(this.property);if(void 0!==e)return this.multiplyByQuantity&&"number"==typeof e?e*this.currentQuantity:e;const i=this.getPackageValue(this.packageData,this.property);if(this.multiplyByQuantity&&this.isPriceProperty(this.property)){const t=this.parseNumericValue(i);if(null!==t)return t*this.currentQuantity}return i}isPriceProperty(t){return["price","price_total","price_retail","price_retail_total","discountedPrice","discountedPriceTotal","finalPrice","finalPriceTotal","savingsAmount","discountAmount"].includes(t)}parseNumericValue(t){if("number"==typeof t)return t;if("string"==typeof t){const e=t.replace(/[^0-9.-]/g,""),i=parseFloat(e);return isNaN(i)?null:i}return null}updateElementContent(t){this.element instanceof HTMLInputElement||this.element instanceof HTMLTextAreaElement?this.element.value=t:this.element instanceof HTMLImageElement?(this.element.src=t,this.element.alt="Product image"):this.element.textContent=t}hideElement(){this.element.style.display="none",this.addClass("display-hidden"),this.removeClass("display-visible");const t=this.element.closest('[data-container="true"]');t&&(t.style.display="none")}showElement(){this.element.style.display="",this.addClass("display-visible"),this.removeClass("display-hidden");const t=this.element.closest('[data-container="true"]');t&&(t.style.display="")}update(t){t?this.handleCampaignUpdate(t):this.updateDisplay()}getCalculatedProperty(t){if(!this.packageData)return;const e={price:parseFloat(this.packageData.price||"0"),retailPrice:parseFloat(this.packageData.price_retail||"0"),quantity:this.packageData.qty||1,priceTotal:parseFloat(this.packageData.price_total||"0"),retailPriceTotal:parseFloat(this.packageData.price_retail_total||"0")},i=vi.calculatePackageMetrics(e),n=ai("package",t);if(n&&n.startsWith("_calculated."))switch(n.replace("_calculated.","")){case"savingsAmount":return i.totalSavings;case"savingsPercentage":return i.totalSavingsPercentage;case"hasSavings":return i.hasSavings;case"isBundle":return(this.packageData.qty||1)>1;case"discountedPrice":return this.calculateDiscountedPrice();case"discountedPriceTotal":return this.calculateDiscountedPriceTotal();case"discountAmount":return this.calculatePackageDiscountAmount();case"hasDiscount":return this.calculatePackageDiscountAmount()>0;case"finalPrice":return this.calculateFinalPrice();case"finalPriceTotal":return this.calculateFinalPriceTotal();case"totalSavingsAmount":case"totalSavingsWithDiscounts":return this.calculateTotalSavingsAmount();case"totalSavingsPercentage":case"totalSavingsPercentageWithDiscounts":return this.calculateTotalSavingsPercentage();case"hasTotalSavings":return this.calculateHasTotalSavings()}switch(t){case"savingsAmount":case"savingsAmount.raw":return i.totalSavings;case"savingsPercentage":if(this.originalPackageData&&this.packageData&&this.originalPackageData.ref_id!==this.packageData.ref_id){const t=this.calculateProfileAwareSavingsPercentage();return this.logger.debug(`Profile-aware savings percentage: ${t}% (was ${i.totalSavingsPercentage}%)`),t}return this.logger.debug(`Standard savings percentage: ${i.totalSavingsPercentage}%`),i.totalSavingsPercentage;case"unitPrice":return ci.formatCurrency(i.unitPrice);case"unitRetailPrice":return ci.formatCurrency(i.unitRetailPrice);case"unitSavings":return ci.formatCurrency(i.unitSavings);case"unitSavingsPercentage":return this.logger.warn("[PERCENTAGE DEBUG] ProductDisplayEnhancer returning unitSavingsPercentage:",{unitSavingsPercentage:i.unitSavingsPercentage,unitSavingsPercentageType:typeof i.unitSavingsPercentage}),i.unitSavingsPercentage;case"hasSavings":return i.hasSavings;case"hasRetailPrice":return i.unitRetailPrice>0&&i.unitRetailPrice!==i.unitPrice;case"isBundle":return(this.packageData.qty||1)>1;case"isRecurring":return!0===this.packageData.is_recurring;case"savingsPercentage.raw":return i.totalSavingsPercentage;case"unitPrice.raw":return i.unitPrice;case"unitRetailPrice.raw":return i.unitRetailPrice;case"discountedPrice":return this.calculateDiscountedPrice();case"discountedPriceTotal":return this.calculateDiscountedPriceTotal();case"discountAmount":return this.calculatePackageDiscountAmount();case"hasDiscount":return this.calculatePackageDiscountAmount()>0;case"finalPrice":return this.calculateFinalPrice();case"finalPriceTotal":return this.calculateFinalPriceTotal();case"totalSavingsAmount":case"totalSavingsWithDiscounts":return this.calculateTotalSavingsAmount();case"totalSavingsPercentage":case"totalSavingsPercentageWithDiscounts":return this.calculateTotalSavingsPercentage();case"hasTotalSavings":return this.calculateHasTotalSavings();case"totalSavingsAmount.raw":case"totalSavingsWithDiscounts.raw":return this.calculateTotalSavingsAmountRaw();case"totalSavingsPercentage.raw":case"totalSavingsPercentageWithDiscounts.raw":return this.calculateTotalSavingsPercentageRaw();default:return}}calculatePackageDiscountAmount(){if(!this.packageData)return 0;const t=Et.getState(),e=t.appliedCoupons||[];let i=0;for(const n of e){const e=n.definition;if("package"===e.scope&&e.packageIds){if(!e.packageIds.includes(this.packageData.ref_id))continue}else if("package"===e.scope)continue;const s=parseFloat(this.packageData.price_total||"0")||parseFloat(this.packageData.price||"0")*(this.packageData.qty||1);if("percentage"===e.type){const t=s*(e.value/100);i+=e.maxDiscount?Math.min(t,e.maxDiscount):t}else if("fixed"===e.type&&"order"===e.scope){const n=t.subtotal;if(n>0){const t=s/n;i+=e.value*t}}}return Math.min(i,parseFloat(this.packageData.price_total||"0"))}calculateDiscountedPrice(){if(!this.packageData)return 0;const t=parseFloat(this.packageData.price||"0"),e=this.packageData.qty||1,i=this.calculatePackageDiscountAmount(),n=e>0?i/e:0;return Math.max(0,t-n)}calculateDiscountedPriceTotal(){if(!this.packageData)return 0;const t=parseFloat(this.packageData.price_total||"0")||parseFloat(this.packageData.price||"0")*(this.packageData.qty||1),e=this.calculatePackageDiscountAmount();return Math.max(0,t-e)}calculateFinalPrice(){return this.calculateDiscountedPrice()}calculateFinalPriceTotal(){return this.calculateDiscountedPriceTotal()}calculateTotalSavingsAmount(){if(!this.packageData)return 0;const t={price:parseFloat(this.packageData.price||"0"),retailPrice:parseFloat(this.packageData.price_retail||"0"),quantity:this.packageData.qty||1,priceTotal:parseFloat(this.packageData.price_total||"0"),retailPriceTotal:parseFloat(this.packageData.price_retail_total||"0")};return(vi.calculatePackageMetrics(t).totalSavings||0)+this.calculatePackageDiscountAmount()}calculateTotalSavingsAmountRaw(){return this.calculateTotalSavingsAmount()}calculateTotalSavingsPercentage(){if(!this.packageData)return 0;const t=parseFloat(this.packageData.price_retail_total||"0")||parseFloat(this.packageData.price_total||"0");if(t<=0)return 0;const e=(t-this.calculateFinalPriceTotal())/t*100;return Math.min(100,Math.max(0,e))}calculateTotalSavingsPercentageRaw(){return this.calculateTotalSavingsPercentage()}calculateHasTotalSavings(){return!!this.packageData&&this.calculateTotalSavingsAmount()>0}calculateProfileAwareSavingsPercentage(){if(!this.originalPackageData||!this.packageData)return 0;const t=parseFloat(this.originalPackageData.price_retail_total||"0")||parseFloat(this.originalPackageData.price_retail||"0"),e=parseFloat(this.packageData.price_total||"0")||parseFloat(this.packageData.price||"0");if(t<=0)return this.logger.warn(`No retail price for original package ${this.originalPackageData.ref_id}`),0;const i=(t-e)/t*100;return this.logger.debug(`Profile-aware calculation for package ${this.originalPackageData.ref_id}→${this.packageData.ref_id}: Original retail: $${t}, Current sale: $${e}, Savings: ${i.toFixed(1)}% (rounded: ${Math.round(i)}%)`),Math.min(100,Math.max(0,Math.round(i)))}getPackageValue(t,e){const i=ai("package",e);return i&&!i.startsWith("_calculated.")?ui.getNestedProperty(t,i):ui.getNestedProperty(t,e)}getCampaignProperty(t,e){const i=t.data;if(!i)return"";switch(e){case"name":return i.name;case"currency":return i.currency;case"language":return i.language;default:return this.logger.warn(`Unknown campaign property: ${e}`),""}}getPackageProperty(t){const e=this.property;this.property=t;const i=this.getPropertyValue();return this.property=e,i}setPackageContext(t){this.packageId=t,this.loadPackageData(),this.updateDisplay()}}},Symbol.toStringTag,{value:"Module"}));class _i extends hi{constructor(){super(...arguments),this.orderState={}}initialize(){return m(this,null,function*(){yield this.checkAndLoadOrderFromUrl(),yield p(_i.prototype,this,"initialize").call(this)})}setupStoreSubscriptions(){this.subscribe(Dt,this.handleOrderUpdate.bind(this)),this.orderState=Dt.getState()}getPropertyValue(){return this.getDisplayValue(this.orderState,this.displayPath)}update(t){t?this.handleOrderUpdate(t):super.update()}checkAndLoadOrderFromUrl(){return m(this,null,function*(){const t=new URLSearchParams(window.location.search),e=t.get("ref_id")||t.get("order_ref_id");if(e){const t=Dt.getState();if(!t.order&&!t.isLoading&&t.refId!==e)try{const i=vt.getState();this.apiClient=new qt(i.apiKey),yield t.loadOrder(e,this.apiClient)}catch(i){this.logger.error("Failed to auto-load order:",i)}}})}handleOrderUpdate(t){try{this.orderState=t,t.isLoading?(this.addClass("next-loading"),this.removeClass("next-loaded"),this.removeClass("next-error")):t.error?(this.removeClass("next-loading"),this.removeClass("next-loaded"),this.addClass("next-error")):t.order&&(this.removeClass("next-loading"),this.addClass("next-loaded"),this.removeClass("next-error")),this.updateDisplay()}catch(e){this.handleError(e,"handleOrderUpdate"),this.updateElementContent("N/A"),this.addClass("next-error")}}updateElementContent(t){var e;"A"===this.element.tagName&&(null==(e=this.displayPath)?void 0:e.includes("statusUrl"))?(this.element.href=t,this.element.textContent||(this.element.textContent="View Order Status")):super.updateElementContent(t)}getDisplayValue(t,e){var i,n;const s=Vt.parseDisplayPath(e).property;if(!s)return"";const a=s,r=t.order;if(!r)return t.isLoading?"Loading...":t.error?"Error":"";const o=ai("order",a);if(o){if(o.startsWith("_calculated."))return this.getCalculatedProperty(r,o.substring(12));if(o.startsWith("order.")){const t=ui.getNestedProperty(r,o.substring(6));if(void 0!==t)return t}else{const e=ui.getNestedProperty(t,o);if(void 0!==e)return e}}const d=a.split(".");if(d.length>1&&d[0]&&!this.isComplexOrderProperty(d[0])){const t=ui.getNestedProperty(r,a);if(void 0!==t)return t}switch(d[0]){case"created_at":case"createdAt":const t=null==(n=null==(i=r.attribution)?void 0:i.metadata)?void 0:n.timestamp;return t?"raw"===d[1]?t:ci.formatDate(new Date(t)):"";case"testBadge":return r.is_test?"🧪 TEST ORDER":"";case"user":case"customer":return this.getOrderUserProperty(r,d.slice(1).join(".")||"");case"shippingAddress":return this.getOrderAddressProperty(r.shipping_address,d.slice(1).join(".")||"");case"billingAddress":return this.getOrderAddressProperty(r.billing_address,d.slice(1).join(".")||"");case"items":case"lines":return this.getOrderLinesProperty(r,d.slice(1).join(".")||"");case"attribution":return this.getOrderAttributionProperty(r.attribution,d.slice(1).join(".")||"");default:return this.logger.warn(`Unknown order property: ${a}`),""}}getOrderUserProperty(t,e){const i=t.user;if(!i)return"";switch(e){case"":case"name":return`${i.first_name||""} ${i.last_name||""}`.trim();case"email":return String(i.email||"");case"firstName":return String(i.first_name||"");case"lastName":return String(i.last_name||"");case"phone":return String(i.phone_number||"");case"acceptsMarketing":return i.accepts_marketing;case"language":return String(i.language||"");case"ip":return String(i.ip||"");default:return""}}getOrderAddressProperty(t,e){if(!t)return"";switch(e){case"":case"full":return this.formatAddress(t);case"name":return`${t.first_name||""} ${t.last_name||""}`.trim();case"line1":return String(t.line1||"");case"line2":return String(t.line2||"");case"city":return String(t.line4||"");case"state":return String(t.state||"");case"zip":case"postcode":return String(t.postcode||"");case"country":return String(t.country||"");case"phone":return String(t.phone_number||"");default:return""}}getOrderLinesProperty(t,e){var i,n;const s=t.lines||[];switch(e){case"count":return s.length;case"totalQuantity":return s.reduce((t,e)=>t+(e.quantity||0),0);case"upsellCount":return s.filter(t=>t.is_upsell).length;case"mainProduct":return(null==(i=s[0])?void 0:i.product_title)||"";case"mainProductSku":return(null==(n=s[0])?void 0:n.product_sku)||"";default:const t=e.match(/^\[(\d+)\]\.(.+)$/);if(t&&t[1]&&t[2]){const e=parseInt(t[1],10),i=t[2],n=s[e];if(n&&i)return this.getOrderLineProperty(n,i)}return""}}getOrderLineProperty(t,e){switch(e){case"title":case"product_title":return t.product_title||"";case"sku":case"product_sku":return t.product_sku||"";case"quantity":return t.quantity||0;case"price":return ci.formatCurrency(parseFloat(t.price_incl_tax||"0"));case"price.raw":return parseFloat(t.price_incl_tax||"0");case"priceExclTax":return ci.formatCurrency(parseFloat(t.price_excl_tax||"0"));case"priceExclTax.raw":return parseFloat(t.price_excl_tax||"0");case"priceExclTaxExclDiscounts":return ci.formatCurrency(parseFloat(t.price_excl_tax_excl_discounts||"0"));case"priceExclTaxExclDiscounts.raw":return parseFloat(t.price_excl_tax_excl_discounts||"0");case"priceInclTaxExclDiscounts":return ci.formatCurrency(parseFloat(t.price_incl_tax_excl_discounts||"0"));case"priceInclTaxExclDiscounts.raw":return parseFloat(t.price_incl_tax_excl_discounts||"0");case"total":return ci.formatCurrency(parseFloat(t.price_incl_tax||"0")*(t.quantity||1));case"total.raw":return parseFloat(t.price_incl_tax||"0")*(t.quantity||1);case"totalExclTax":return ci.formatCurrency(parseFloat(t.price_excl_tax||"0")*(t.quantity||1));case"totalExclTax.raw":return parseFloat(t.price_excl_tax||"0")*(t.quantity||1);case"isUpsell":return t.is_upsell||!1;case"image":return t.image||"";default:return""}}getOrderAttributionProperty(t,e){if(!t)return"";switch(e){case"source":case"utm_source":return t.utm_source||"";case"medium":case"utm_medium":return t.utm_medium||"";case"campaign":case"utm_campaign":return t.utm_campaign||"";case"term":case"utm_term":return t.utm_term||"";case"content":case"utm_content":return t.utm_content||"";case"gclid":return t.gclid||"";case"funnel":return t.funnel||"";case"affiliate":return t.affiliate||"";case"hasTracking":return!!(t.utm_source||t.utm_medium||t.gclid);default:return""}}formatAddress(t){return t?[t.line1,t.line2,t.line4,t.state,t.postcode,t.country].filter(Boolean).map(t=>String(t)).join(", "):""}isComplexOrderProperty(t){return["user","customer","total","subtotal","tax","shipping","discounts","shippingAddress","billingAddress","items","lines","attribution","created_at"].includes(t)}getCalculatedProperty(t,e){var i,n,s,a,r,o,d,l;switch(e){case"subtotal":case"subtotalExclShipping":return t.lines&&t.lines.length>0?t.lines.reduce((t,e)=>t+parseFloat(e.price_excl_tax||"0"),0):parseFloat(t.total_excl_tax||"0")-parseFloat(t.shipping_excl_tax||"0");case"savings":case"savingsAmount":if(t.lines&&t.lines.length>0){const e=t.lines.reduce((t,e)=>t+parseFloat(e.price_incl_tax_excl_discounts||e.price_incl_tax||"0")*e.quantity,0),i=parseFloat(t.total_incl_tax||"0");return Math.max(0,e-i)}return parseFloat(t.total_discounts||"0");case"savingsPercentage":if(t.lines&&t.lines.length>0){const e=t.lines.reduce((t,e)=>t+parseFloat(e.price_incl_tax_excl_discounts||e.price_incl_tax||"0")*e.quantity,0),i=parseFloat(t.total_incl_tax||"0");if(e>0&&e>i)return(e-i)/e*100}return 0;case"hasSavings":return parseFloat(t.total_discounts||"0")>0||!!(t.lines&&t.lines.length>0)&&t.lines.some(t=>parseFloat(t.price_incl_tax_excl_discounts||"0")>parseFloat(t.price_incl_tax||"0"));case"hasItems":return t.lines&&t.lines.length>0;case"isEmpty":return!t.lines||0===t.lines.length;case"hasShipping":return parseFloat(t.shipping_incl_tax||"0")>0;case"hasTax":return parseFloat(t.total_tax||"0")>0;case"hasDiscounts":return parseFloat(t.total_discounts||"0")>0;case"hasUpsells":return(null==(i=t.lines)?void 0:i.some(t=>t.is_upsell))||!1;case"lines.count":return(null==(n=t.lines)?void 0:n.length)||0;case"lines.totalQuantity":return(null==(s=t.lines)?void 0:s.reduce((t,e)=>t+(e.quantity||0),0))||0;case"lines.upsellCount":return(null==(a=t.lines)?void 0:a.filter(t=>t.is_upsell).length)||0;case"lines.mainProduct":return(null==(o=null==(r=t.lines)?void 0:r[0])?void 0:o.product_title)||"";case"lines.mainProductSku":return(null==(l=null==(d=t.lines)?void 0:d[0])?void 0:l.product_sku)||"";default:return}}}const ki=Object.freeze(Object.defineProperty({__proto__:null,OrderDisplayEnhancer:_i},Symbol.toStringTag,{value:"Module"})),Si=Object.freeze(Object.defineProperty({__proto__:null,ShippingDisplayEnhancer:class extends hi{initialize(){return m(this,null,function*(){this.validateElement(),this.parseDisplayAttributes(),this.detectShippingContext(),this.shippingId?(this.setupStoreSubscriptions(),yield this.performInitialUpdate(),this.logger.debug(`ShippingDisplayEnhancer initialized with shipping ID ${this.shippingId}`)):this.logger.warn("ShippingDisplayEnhancer requires data-next-shipping-id context")})}setupStoreSubscriptions(){this.subscribe(lt,this.handleCampaignUpdate.bind(this)),this.loadShippingMethod()}handleCampaignUpdate(){this.loadShippingMethod(),this.updateDisplay()}detectShippingContext(){const t=this.element.closest("[data-next-shipping-id]");if(!t)return;const e=t.getAttribute("data-next-shipping-id");e&&(this.shippingId=parseInt(e,10))}loadShippingMethod(){var t;if(!this.shippingId)return;const e=((null==(t=lt.getState().data)?void 0:t.shipping_methods)||[]).find(t=>t.ref_id===this.shippingId);e&&(this.shippingMethod=e),this.shippingMethod||this.logger.warn(`Shipping method ${this.shippingId} not found in campaign data`)}getPropertyValue(){if(!this.shippingMethod||!this.property)return;const t=ai("shipping",this.property);if(t&&t.startsWith("_calculated.")){const e=t.replace("_calculated.","");return this.getCalculatedProperty(e)}switch(this.property){case"isFree":return 0===parseFloat(this.shippingMethod.price||"0");case"cost":case"price":return ci.formatValue(parseFloat(this.shippingMethod.price||"0"),"currency");case"cost.raw":case"price.raw":return parseFloat(this.shippingMethod.price||"0");case"name":case"code":return this.shippingMethod.code;case"id":case"refId":return this.shippingMethod.ref_id;case"method":return this.shippingMethod;default:return}}getCalculatedProperty(t){if(this.shippingMethod)switch(t){case"isFree":return 0===parseFloat(this.shippingMethod.price||"0");case"cost":case"price":return ci.formatValue(parseFloat(this.shippingMethod.price||"0"),"currency");case"name":case"code":return this.shippingMethod.code;case"id":case"refId":return this.shippingMethod.ref_id;case"method":return this.shippingMethod;default:return}}update(){this.updateDisplay()}}},Symbol.toStringTag,{value:"Module"})),Ci=new Set;"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{Ci.clear()});const Pi=Object.freeze(Object.defineProperty({__proto__:null,CartToggleEnhancer:class extends ie{constructor(){super(...arguments),this.quantity=1,this.syncPackageIds=[],this.isSyncMode=!1,this.isUpsell=!1,this.isInitialized=!1,this.isAutoAdding=!1}initialize(){return m(this,null,function*(){if(this.validateElement(),this.isInitialized)this.logger.warn("CartToggleEnhancer already initialized, skipping");else if(this.element.hasAttribute("data-toggle-initializing"))this.logger.warn("CartToggleEnhancer initialization already in progress, skipping");else{if(this.element.setAttribute("data-toggle-initializing","true"),!this.hasAttribute("data-next-toggle"))throw this.element.removeAttribute("data-toggle-initializing"),new Error("data-next-toggle attribute is required");this.findStateContainer(),this.resolvePackageIdentifier(),this.checkSyncMode(),this.isSyncMode||this.setQuantity(),this.detectUpsellContext(),this.setupEventListeners(),this.updateState(Et.getState()),yield this.checkAutoAdd(),this.isInitialized=!0,this.element.removeAttribute("data-toggle-initializing"),this.element.setAttribute("data-toggle-initialized","true"),this.logger.debug("Toggle initialized:",{packageId:this.packageId,quantity:this.quantity,isSyncMode:this.isSyncMode,syncPackageIds:this.syncPackageIds,isUpsell:this.isUpsell})}})}findStateContainer(){let t=this.element;for(;t&&t!==document.body;){if(t.hasAttribute("data-next-toggle-container")||t.hasAttribute("data-next-bump")||t.hasAttribute("data-next-upsell-item")||t.classList.contains("upsell")||t.classList.contains("bump")){this.stateContainer=t;break}if(t.hasAttribute("data-next-package-id")||t.hasAttribute("data-package-id")){this.stateContainer=t;break}t=t.parentElement}this.stateContainer||(this.stateContainer=this.element)}resolvePackageIdentifier(){const t=this.getAttribute("data-next-package-id")||this.getAttribute("data-package-id");if(!t){if(this.stateContainer&&this.stateContainer!==this.element){const t=this.stateContainer.getAttribute("data-next-package-id")||this.stateContainer.getAttribute("data-package-id");if(t)return void(this.packageId=parseInt(t,10))}throw new Error("Package identifier required: data-next-package-id")}this.packageId=parseInt(t,10)}checkSyncMode(){var t,e;const i=this.getAttribute("data-next-package-sync")||(null==(t=this.stateContainer)?void 0:t.getAttribute("data-next-package-sync")),n=this.getAttribute("data-next-qty-sync")||(null==(e=this.stateContainer)?void 0:e.getAttribute("data-next-qty-sync"));if(i)this.syncPackageIds=i.split(",").map(t=>parseInt(t.trim(),10)).filter(t=>!isNaN(t)),this.syncPackageIds.length>0&&(this.isSyncMode=!0,this.quantity=0);else if(n){const t=parseInt(n,10);isNaN(t)||(this.syncPackageIds=[t],this.isSyncMode=!0,this.quantity=0)}}setQuantity(){var t;const e=this.getAttribute("data-next-quantity")||this.getAttribute("data-quantity")||(null==(t=this.stateContainer)?void 0:t.getAttribute("data-next-quantity"));this.quantity=e?parseInt(e,10):1}detectUpsellContext(){var t,e;this.isUpsell="true"===this.getAttribute("data-next-is-upsell")||(null==(t=this.stateContainer)?void 0:t.hasAttribute("data-next-upsell"))||(null==(e=this.stateContainer)?void 0:e.hasAttribute("data-next-bump"))||null!==this.element.closest("[data-next-upsell-section]")||null!==this.element.closest("[data-next-bump-section]")}checkAutoAdd(){return m(this,null,function*(){var t;if(("true"===this.getAttribute("data-next-selected")||"true"===(null==(t=this.stateContainer)?void 0:t.getAttribute("data-next-selected")))&&this.packageId){if(Ci.has(this.packageId))return void this.logger.debug("Package already auto-added by another element, skipping:",{packageId:this.packageId});if(this.isAutoAdding)return void this.logger.debug("Auto-add already in progress, skipping");const t=Et.getState();if(!this.isInCart(t)){Ci.add(this.packageId),this.logger.debug("Auto-adding item on page load:",{packageId:this.packageId,quantity:this.quantity}),this.isAutoAdding=!0;try{this.isSyncMode&&this.updateSyncedQuantity(t),yield this.addToCart()}catch(e){this.logger.error("Failed to auto-add item:",e),Ci.delete(this.packageId)}finally{this.isAutoAdding=!1}}}})}setupEventListeners(){this.clickHandler=this.handleClick.bind(this),this.element.addEventListener("click",this.clickHandler),this.subscribe(Et,t=>this.updateState(t))}handleClick(t){return m(this,null,function*(){t.preventDefault();try{this.setLoadingState(!0);const t=Et.getState();this.isSyncMode&&this.updateSyncedQuantity(t);const e=this.isInCart(t);this.logger.debug("Toggle click:",{packageId:this.packageId,isInCart:e,quantity:this.quantity,isSyncMode:this.isSyncMode}),e?yield this.removeFromCart():yield this.addToCart()}catch(e){this.handleError(e,"handleClick")}finally{this.setLoadingState(!1)}})}addToCart(){return m(this,null,function*(){const t=Et.getState();if(this.logger.debug("Adding to cart:",{packageId:this.packageId,quantity:this.quantity}),this.packageId){let i=`Package ${this.packageId}`,n=0;try{const t=lt.getState().getPackage(this.packageId);t?(i=t.name,n=parseFloat(t.price),this.logger.debug("Found package data:",{title:i,price:n})):this.logger.debug("Package not found in campaign store")}catch(e){this.logger.debug("Error getting package data:",e)}yield t.addItem({packageId:this.packageId,quantity:this.quantity,title:i,price:n,isUpsell:this.isUpsell}),this.logger.debug("Added to cart successfully")}})}removeFromCart(){return m(this,null,function*(){const t=Et.getState();this.packageId&&(yield t.removeItem(this.packageId))})}updateState(t){const e=this.isInCart(t);this.stateContainer&&(this.stateContainer.setAttribute("data-in-cart",String(e)),this.stateContainer.setAttribute("data-next-active",String(e)),this.stateContainer.classList.toggle("next-in-cart",e),this.stateContainer.classList.toggle("next-not-in-cart",!e),this.stateContainer.classList.toggle("next-active",e),this.stateContainer.classList.toggle("os--active",e)),this.setAttribute("data-in-cart",String(e)),this.setAttribute("data-next-active",String(e)),this.toggleClass("next-in-cart",e),this.toggleClass("next-not-in-cart",!e),this.toggleClass("next-active",e);const i=this.getAttribute("data-add-text"),n=this.getAttribute("data-remove-text");i&&n&&this.updateTextContent(e?n:i),this.isSyncMode&&this.syncPackageIds.length>0&&this.handleSyncUpdate(t)}updateSyncedQuantity(t){if(0===this.syncPackageIds.length)return;let e=0;this.syncPackageIds.forEach(i=>{const n=t.items.find(t=>t.packageId===i||t.originalPackageId===i);if(n){const t=n.qty||1,s=n.quantity*t;e+=s,this.logger.debug(`Sync package ${i}: ${n.quantity} packages × ${t} items/package = ${s} total`)}}),this.quantity=e,this.logger.debug(`Total sync quantity: ${this.quantity} (from packages: ${this.syncPackageIds.join(", ")})`)}handleSyncUpdate(t){return m(this,null,function*(){if(!this.packageId||0===this.syncPackageIds.length)return;let e=0,i=!1;this.syncPackageIds.forEach(n=>{const s=t.items.find(t=>t.packageId===n||t.originalPackageId===n);if(s){i=!0;const t=s.qty||1;e+=s.quantity*t}});const n=t.items.find(t=>t.packageId===this.packageId);i&&e>0?n&&n.quantity!==e&&(this.logger.debug(`Auto-sync: Updating quantity to ${e}`),yield Et.getState().updateQuantity(this.packageId,e)):n&&!t.swapInProgress?n.is_upsell?(this.logger.debug("Auto-sync: Upsell item detected, delaying removal check"),setTimeout(()=>m(this,null,function*(){const t=Et.getState();let e=!0;this.syncPackageIds.forEach(i=>{t.items.find(t=>t.packageId===i||t.originalPackageId===i)&&(e=!1)});const i=t.items.find(t=>t.packageId===this.packageId);e&&i&&!t.swapInProgress?(this.logger.debug("Auto-sync: After delay, still no synced packages - removing upsell"),yield this.removeFromCart()):this.logger.debug("Auto-sync: After delay, conditions changed - keeping upsell")}),500)):(this.logger.debug("Auto-sync: No synced packages found and not swapping - removing item"),yield this.removeFromCart()):n&&t.swapInProgress&&this.logger.debug("Auto-sync: Swap in progress - keeping item for now")})}isInCart(t){return!!this.packageId&&t.items.some(t=>t.packageId===this.packageId)}setLoadingState(t){t?(this.addClass("next-loading"),this.setAttribute("disabled","true")):(this.removeClass("next-loading"),this.removeAttribute("disabled"))}update(){this.updateState(Et.getState())}cleanupEventListeners(){this.clickHandler&&this.element.removeEventListener("click",this.clickHandler)}}},Symbol.toStringTag,{value:"Module"}));class Ei extends ie{constructor(){super(...arguments),this.isProcessing=!1}executeAction(t,e){return m(this,null,function*(){if(this.isProcessing)return Promise.reject(new Error("Already processing"));this.isProcessing=!0,(null==e?void 0:e.showLoading)&&this.setLoadingState(!0),(null==e?void 0:e.disableOnProcess)&&this.element.setAttribute("disabled","true");try{const e=yield t();return this.emit("action:success",{action:this.constructor.name,data:{element:this.element}}),e}catch(i){throw this.handleError(i,"executeAction"),this.emit("action:failed",{action:this.constructor.name,error:i instanceof Error?i:new Error(String(i))}),i}finally{this.isProcessing=!1,(null==e?void 0:e.showLoading)&&this.setLoadingState(!1),(null==e?void 0:e.disableOnProcess)&&this.element.removeAttribute("disabled")}})}setLoadingState(t){this.toggleClass("loading",t),this.toggleClass("next-loading",t),this.setAttribute("aria-busy",t.toString()),(this.element instanceof HTMLButtonElement||this.element instanceof HTMLInputElement||this.element instanceof HTMLSelectElement)&&(this.element.disabled=t)}isActionProcessing(){return this.isProcessing}setLoadingContent(t){null!==t?this.setAttribute("data-loading-text",t):this.removeAttribute("data-loading-text")}debounceAction(t,e){let i;return(...n)=>(clearTimeout(i),new Promise((s,a)=>{i=setTimeout(()=>{try{const e=t(...n);e instanceof Promise?e.then(s).catch(a):s(e)}catch(e){a(e)}},e)}))}throttleAction(t,e){let i,n;return(...s)=>(i||(i=!0,setTimeout(()=>{i=!1},e),n=t(...s)),n)}}function Ii(t,e=["debug","debugger"]){try{const i=new URL(t,window.location.origin),n=new URLSearchParams(window.location.search);return e.forEach(t=>{const e=n.get(t);e&&!i.searchParams.has(t)&&i.searchParams.append(t,e)}),"true"!==n.get("debug")||i.searchParams.has("debug")||i.searchParams.append("debug","true"),"true"!==n.get("debugger")||i.searchParams.has("debugger")||i.searchParams.append("debugger","true"),i.href}catch(i){return t}}const Ti=Object.freeze(Object.defineProperty({__proto__:null,AddToCartEnhancer:class extends Ei{constructor(){super(...arguments),this.quantity=1,this.clearCart=!1}initialize(){return m(this,null,function*(){this.validateElement();const t=this.getAttribute("data-next-package-id");t&&(this.packageId=parseInt(t,10));const e=this.getAttribute("data-next-quantity");this.quantity=e?parseInt(e,10):1;const i=this.getAttribute("data-next-selector-id");i&&(this.selectorId=i);const n=this.getAttribute("data-next-url");n&&(this.redirectUrl=n);const s=this.getAttribute("data-next-clear-cart");this.clearCart="true"===s,this.clickHandler=this.handleClick.bind(this),this.element.addEventListener("click",this.clickHandler),this.selectorId&&this.setupSelectorListener(),this.updateButtonState(),this.logger.debug("AddToCartEnhancer initialized",{packageId:this.packageId,selectorId:this.selectorId,quantity:this.quantity,redirectUrl:this.redirectUrl,clearCart:this.clearCart})})}setupSelectorListener(){const t=(e=0)=>{const i=this.findSelectorElement();if(!i&&e<5)setTimeout(()=>t(e+1),50);else if(i){if(this.selectedItem=this.getSelectedItemFromElement(i),!this.selectedItem){const t=i.getAttribute("data-selected-package");if(t){const e=parseInt(t,10);if(!isNaN(e)){const t=i.querySelector(`[data-next-selector-card][data-next-package-id="${e}"]`);this.selectedItem={packageId:e,quantity:this.quantity||1,element:t||null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}}}}if("select"===i.getAttribute("data-next-selection-mode")&&!this.selectedItem){const t=i.querySelector('[data-next-selector-card][data-next-selected="true"]');if(t){const e=t.getAttribute("data-next-package-id");if(e){const n=parseInt(e,10);isNaN(n)||(this.selectedItem={packageId:n,quantity:this.quantity||1,element:t,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0},i.setAttribute("data-selected-package",n.toString()))}}}this.updateButtonState()}else this.logger.warn(`Selector with id "${this.selectorId}" not found after retries. Button may not work properly.`)};t(),this.eventBus.on("selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.on("selector:selection-changed",this.handleSelectorChange.bind(this))}findSelectorElement(){return document.querySelector(`[data-next-cart-selector][data-next-selector-id="${this.selectorId}"], [data-next-package-selector][data-next-selector-id="${this.selectorId}"]`)}getSelectedItemFromElement(t){const e=t.wt;if("function"==typeof e)return e();const i=t._t;if(i)return i;const n=t.getAttribute("data-selected-package");if(n){const t=parseInt(n,10);if(!isNaN(t))return{packageId:t,quantity:1,element:null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}}return null}handleSelectorChange(t){if(t.selectorId!==this.selectorId)return;const e=this.findSelectorElement();e?this.selectedItem=this.getSelectedItemFromElement(e):t.item?this.selectedItem=t.item:t.packageId?this.selectedItem={packageId:t.packageId,quantity:t.quantity||1,element:null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}:this.selectedItem=null,this.updateButtonState()}updateButtonState(){if(this.selectorId){const t=this.findSelectorElement();if("select"===(null==t?void 0:t.getAttribute("data-next-selection-mode"))){const e=null!==this.selectedItem||!!(null==t?void 0:t.getAttribute("data-selected-package"));this.setEnabled(e)}else{const t=null!==this.selectedItem;this.setEnabled(t)}}else this.packageId&&this.setEnabled(!0)}setEnabled(t){t?(this.element.removeAttribute("disabled"),this.removeClass("next-disabled")):(this.element.setAttribute("disabled","true"),this.addClass("next-disabled"))}handleClick(t){return m(this,null,function*(){t.preventDefault();const e=this.getAttribute("data-next-profile");if(e){const{ProfileManager:t}=yield Promise.resolve().then(()=>te),i=t.getInstance();yield i.applyProfile(e)}yield this.executeAction(()=>m(this,null,function*(){yield this.addToCart()}),{showLoading:!0,disableOnProcess:!0})})}addToCart(){return m(this,null,function*(){const t=Et.getState();let e,i=this.quantity;if(this.selectorId&&this.selectedItem?(e=this.selectedItem.packageId,i=this.selectedItem.quantity||this.quantity):this.packageId&&(e=this.packageId),e)try{if(this.clearCart&&(this.logger.debug("Clearing cart before adding item"),yield t.clear()),yield t.addItem({packageId:e,quantity:i,isUpsell:void 0}),this.updateButtonState(),this.eventBus.emit("cart:item-added",{packageId:e,quantity:i,source:this.selectorId?"selector":"direct"}),this.redirectUrl){const t=Ii(this.redirectUrl);this.logger.debug("Redirecting to:",t),window.location.href=t}}catch(n){throw this.logger.error("Failed to add item to cart:",n),n}else this.logger.warn("No package ID available for add-to-cart action")})}update(t){}destroy(){this.clickHandler&&this.element.removeEventListener("click",this.clickHandler),this.selectorId&&(this.eventBus.off("selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.off("selector:selection-changed",this.handleSelectorChange.bind(this))),super.destroy()}}},Symbol.toStringTag,{value:"Module"}));class Ai{constructor(t){this.options=c({backdropDismiss:!0},t)}show(){return m(this,null,function*(){return new Promise(t=>{this.resolve=t,this.createModal()})})}createModal(){this.backdrop=document.createElement("div"),this.backdrop.className="next-modal-backdrop "+(this.options.className?this.options.className+"-backdrop":""),this.backdrop.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.5);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      animation: fadeIn 0.2s ease-out;\n    ",this.modal=document.createElement("div"),this.modal.className=`next-modal ${this.options.className||""}`,this.modal.style.cssText="\n      background: white;\n      border-radius: 8px;\n      padding: 0;\n      max-width: 500px;\n      width: 90%;\n      max-height: 90vh;\n      overflow: hidden;\n      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);\n      animation: slideIn 0.3s ease-out;\n    ";const t=this.options.buttons.map((t,e)=>{const i=this.getDefaultButtonStyles(t.action),n=t.style||i,s=t.className||`next-modal-${t.action}`;return t.href?`<a \n          href="${t.href}" \n          target="${t.target||"_self"}"\n          class="${s}" \n          data-action="${t.action}"\n          data-index="${e}"\n          style="${n}"\n        >${t.text}</a>`:`<button \n        class="${s}" \n        data-action="${t.action}"\n        data-index="${e}"\n        style="${n}"\n      >${t.text}</button>`}).join("");this.modal.innerHTML=`\n      <div class="next-modal-header" style="padding: 20px 24px; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; justify-content: space-between;">\n        <h3 style="margin: 0; font-size: 20px; font-weight: 600; color: #1a202c;">\n          ${this.options.title}\n        </h3>\n        <button class="next-modal-close" data-action="cancel" style="\n          background: none;\n          border: none;\n          font-size: 24px;\n          color: #718096;\n          cursor: pointer;\n          padding: 0;\n          width: 32px;\n          height: 32px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 4px;\n          transition: all 0.2s;\n        ">&times;</button>\n      </div>\n      <div class="next-modal-body" style="padding: 24px; max-height: 60vh; overflow-y: auto;">\n        <div style="color: #4a5568; line-height: 1.6;">\n          ${this.options.content}\n        </div>\n      </div>\n      <div class="next-modal-footer" style="padding: 16px 24px; border-top: 1px solid #e2e8f0; display: flex; gap: 12px; justify-content: flex-end;">\n        ${t}\n      </div>\n    `,this.style=document.createElement("style"),this.style.textContent="\n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      @keyframes slideIn {\n        from { \n          opacity: 0;\n          transform: translateY(-20px);\n        }\n        to { \n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      .next-modal-close:hover {\n        background: #f7fafc !important;\n      }\n      .next-modal-cancel:hover {\n        border-color: #cbd5e0 !important;\n        background: #f7fafc !important;\n      }\n      .next-modal-confirm:hover {\n        background: var(--brand--color--primary, #3182ce) !important;\n        filter: brightness(0.9);\n      }\n      .next-modal a {\n        text-decoration: none;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n      }\n    ",document.head.appendChild(this.style),this.backdrop.appendChild(this.modal),document.body.appendChild(this.backdrop),this.modal.querySelectorAll("[data-action]").forEach(t=>{"A"!==t.tagName?t.addEventListener("click",t=>this.handleAction(t)):t.addEventListener("click",t=>{const e=t.currentTarget.getAttribute("data-action")||"custom",i=this.resolve;this.cleanup(),i&&i(e)})}),this.options.backdropDismiss&&this.backdrop.addEventListener("click",t=>{t.target===this.backdrop&&this.handleDismiss()}),this.handleEscapeKey=this.handleEscapeKey.bind(this),document.addEventListener("keydown",this.handleEscapeKey)}getDefaultButtonStyles(t){return"confirm"===t?"\n          padding: 10px 20px;\n          border: none;\n          background: var(--brand--color--primary, #3182ce);\n          color: white;\n          border-radius: 6px;\n          font-size: 16px;\n          cursor: pointer;\n          font-weight: 500;\n          transition: all 0.2s;\n        ":"\n          padding: 10px 20px;\n          border: 1px solid #e2e8f0;\n          background: white;\n          border-radius: 6px;\n          font-size: 16px;\n          cursor: pointer;\n          color: #4a5568;\n          transition: all 0.2s;\n        "}handleEscapeKey(t){"Escape"===t.key&&this.options.backdropDismiss&&this.handleDismiss()}handleAction(t){const e=t.currentTarget.getAttribute("data-action")||"custom",i=this.resolve;this.cleanup(),i&&i(e)}handleDismiss(){const t=this.resolve;this.cleanup(),t&&t("backdrop")}cleanup(){this.backdrop&&this.backdrop.remove(),this.style&&this.style.remove(),document.removeEventListener("keydown",this.handleEscapeKey),this.backdrop=void 0,this.modal=void 0,this.style=void 0,this.resolve=void 0}static show(t){return m(this,null,function*(){return new Ai(t).show()})}static showDuplicateUpsell(){return m(this,null,function*(){return"cancel"===(yield Ai.show({title:"Already Added!",content:"You've already added this item to your order. Would you like to add it again?",buttons:[{text:"Yes, Add Again",action:"cancel"},{text:"Skip to Next",action:"confirm"}]}))})}static showRecentPurchaseWarning(){return m(this,null,function*(){return yield Ai.show({title:"Attention",content:"Your initial order has been successfully processed. Please check your email for the order confirmation. Entering your payment details again will result in a secondary purchase.",buttons:[{text:"Close",action:"cancel"},{text:"Back",action:"confirm"}]})})}}class Mi{constructor(){this.overlay=null,this.showTime=0}show(){this.overlay||(this.showTime=Date.now(),this.overlay=document.createElement("div"),this.overlay.className="next-loading-overlay",this.overlay.innerHTML='\n      <style>\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n        .next-loading-spinner .spinner {\n          width: 30px;\n          height: 30px;\n          border: 3px solid rgba(0, 0, 0, 0.1);\n          border-top-color: var(--brand--color--primary, #000);\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        }\n      </style>\n      <div class="next-loading-spinner">\n        <div class="spinner"></div>\n      </div>\n    ',Object.assign(this.overlay.style,{position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"9999"}),document.body.appendChild(this.overlay))}hide(t=!1){if(this.overlay)if(t)document.body.removeChild(this.overlay),this.overlay=null;else{const t=Date.now()-this.showTime,e=Math.max(0,3e3-t);setTimeout(()=>{this.overlay&&(document.body.removeChild(this.overlay),this.overlay=null)},e)}}}const Li=Object.freeze(Object.defineProperty({__proto__:null,AcceptUpsellEnhancer:class extends Ei{constructor(t){super(t),this.quantity=1,this.loadingOverlay=new Mi}initialize(){return m(this,null,function*(){this.validateElement(),this.pageShowHandler=t=>{t.persisted&&(this.loadingOverlay.hide(!0),this.setEnabled(!0))},window.addEventListener("pageshow",this.pageShowHandler);const t=this.getAttribute("data-next-package-id");t&&(this.packageId=parseInt(t,10));const e=this.getAttribute("data-next-quantity");this.quantity=e?parseInt(e,10):1;const i=this.getAttribute("data-next-selector-id");i&&(this.selectorId=i);const n=this.getAttribute("data-next-url");n&&(this.nextUrl=n);const s=vt.getState();this.apiClient=new qt(s.apiKey),this.clickHandler=this.handleClick.bind(this),this.element.addEventListener("click",this.clickHandler),this.selectorId&&this.setupSelectorListener(),this.subscribe(Dt,()=>this.updateButtonState()),this.updateButtonState(),this.logger.debug("AcceptUpsellEnhancer initialized",{packageId:this.packageId,selectorId:this.selectorId,quantity:this.quantity,nextUrl:this.nextUrl})})}setupSelectorListener(){setTimeout(()=>{const t=this.findSelectorElement();t?(this.selectedItem=this.getSelectedItemFromElement(t),this.updateButtonState()):this.logger.warn(`Selector with id "${this.selectorId}" not found. Button may not work properly.`)},100),this.eventBus.on("upsell-selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.on("selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.on("selector:selection-changed",this.handleSelectorChange.bind(this))}findSelectorElement(){return document.querySelector(`[data-next-upsell-selector][data-next-selector-id="${this.selectorId}"], [data-next-upsell-select="${this.selectorId}"], [data-next-upsell][data-next-selector-id="${this.selectorId}"]`)}getSelectedItemFromElement(t){const e=t.kt;if("function"==typeof e){const t=e();if(t)return{packageId:t,quantity:1,element:null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}}const i=t.St;return i?{packageId:i,quantity:1,element:null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}:null}handleSelectorChange(t){if(t.selectorId!==this.selectorId)return;const e=this.findSelectorElement();e?this.selectedItem=this.getSelectedItemFromElement(e):t.packageId?this.selectedItem={packageId:t.packageId,quantity:t.quantity||1,element:null,price:void 0,name:void 0,isPreSelected:!1,shippingId:void 0}:this.selectedItem=null,this.updateButtonState()}updateButtonState(){const t=Dt.getState().canAddUpsells(),e=!(!this.packageId&&!this.selectedItem);this.setEnabled(t&&e)}setEnabled(t){t?(this.element.removeAttribute("disabled"),this.removeClass("next-disabled")):(this.element.setAttribute("disabled","true"),this.addClass("next-disabled"))}handleClick(t){return m(this,null,function*(){t.preventDefault(),yield this.executeAction(()=>m(this,null,function*(){yield this.acceptUpsell()}),{showLoading:!1,disableOnProcess:!0})})}triggerAcceptUpsell(){return m(this,null,function*(){yield this.executeAction(()=>m(this,null,function*(){yield this.acceptUpsell()}),{showLoading:!1,disableOnProcess:!0})})}getCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}acceptUpsell(){return m(this,null,function*(){var t,e;const i=Dt.getState();let n,s=this.quantity;if(this.selectorId&&this.selectedItem?(n=this.selectedItem.packageId,s=this.selectedItem.quantity||this.quantity):this.packageId&&(n=this.packageId),n)if(i.order&&this.apiClient){if(this.checkIfUpsellAlreadyAccepted(n)&&!(yield this.showDuplicateUpsellDialog())){let t=this.nextUrl;if(!t){const e=document.querySelector('meta[name="next-upsell-decline-url"]');t=(null==e?void 0:e.getAttribute("content"))||void 0,t&&this.logger.debug("Using fallback decline URL from meta tag:",t)}if(t){const e=Ii(t);window.location.href=e}return}try{this.loadingOverlay.show();const a={lines:[{package_id:n,quantity:s}],currency:this.getCurrency()},r=(null==(t=i.order.lines)?void 0:t.map(t=>t.id))||[],o=yield i.addUpsell(a,this.apiClient);if(!o)throw new Error("Failed to add upsell");const d=null==(e=o.lines)?void 0:e.find(t=>t.is_upsell&&!r.includes(t.id)),l=(null==d?void 0:d.price_incl_tax)?parseFloat(d.price_incl_tax):0;this.eventBus.emit("upsell:accepted",{packageId:n,quantity:s,orderId:i.order.ref_id,value:l});let c=this.nextUrl;if(!c){const t=document.querySelector('meta[name="next-upsell-accept-url"]');c=(null==t?void 0:t.getAttribute("content"))||void 0,c&&this.logger.debug("Using fallback accept URL from meta tag:",c)}if(c){const t=Ii(c);window.location.href=t}else this.loadingOverlay.hide()}catch(a){throw this.logger.error("Failed to accept upsell:",a),this.loadingOverlay.hide(!0),a}}else this.logger.error("No order loaded or API client not initialized");else this.logger.warn("No package ID available for accept-upsell action")})}checkIfUpsellAlreadyAccepted(t){const e=Dt.getState();return!!e.completedUpsells.includes(t.toString())||e.upsellJourney.some(e=>e.packageId===t.toString()&&"accepted"===e.action)}showDuplicateUpsellDialog(){return m(this,null,function*(){const t=yield Ai.showDuplicateUpsell();return this.logger.info(t?"User confirmed to add duplicate upsell":"User declined to add duplicate upsell"),t})}update(t){}destroy(){this.clickHandler&&this.element.removeEventListener("click",this.clickHandler),this.pageShowHandler&&window.removeEventListener("pageshow",this.pageShowHandler),this.selectorId&&(this.eventBus.off("upsell-selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.off("selector:item-selected",this.handleSelectorChange.bind(this)),this.eventBus.off("selector:selection-changed",this.handleSelectorChange.bind(this))),super.destroy()}}},Symbol.toStringTag,{value:"Module"}));function Fi(t){if(!("string"==typeof(e=t)&&e.length>0))return;var e;const i=t.match(/\$?(\d+\.?\d*)/);if(!i||!i[1])return;const n=parseFloat(i[1]);return function(t){return function(t){return function(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}(t)&&t>=0}(t)}(n)?n:void 0}const Di=class{static extractPrice(t){for(const e of this.PRICE_SELECTORS){const i=t.querySelector(e);if(null==i?void 0:i.textContent){const t=Fi(i.textContent.trim());if(void 0!==t)return t}}}static extractName(t){var e;for(const i of this.NAME_SELECTORS){const n=t.querySelector(i),s=null==(e=null==n?void 0:n.textContent)?void 0:e.trim();if(s)return s}}static extractQuantity(t){const e=t.getAttribute("data-next-quantity")||t.getAttribute("data-quantity")||t.getAttribute("data-qty");return e&&parseInt(e,10)||1}};Di.PRICE_SELECTORS=[".pb-quantity__price.pb--current",".price",'[data-next-display*="price"]',".next-price",".product-price",".item-price"],Di.NAME_SELECTORS=[".card-title","h1, h2, h3, h4, h5, h6",".title",".name",'[data-next-display*="name"]',".product-name",".item-name"];let Ni=Di;const Ui=Object.freeze(Object.defineProperty({__proto__:null,PackageSelectorEnhancer:class extends ie{constructor(){super(...arguments),this.items=[],this.selectedItem=null,this.clickHandlers=new Map,this.quantityHandlers=new Map,this.mutationObserver=null}initialize(){return m(this,null,function*(){var t;this.validateElement(),this.selectorId=this.getRequiredAttribute("data-next-selector-id")||this.getRequiredAttribute("data-next-id")||`selector-${Date.now()}`,this.mode=this.getAttribute("data-next-selection-mode")||"swap",this.initializeSelectorCards(),this.setupMutationObserver(),this.subscribe(Et,this.syncWithCart.bind(this)),this.syncWithCart(Et.getState()),this.element.wt=()=>this.selectedItem,this.element.kt=()=>{var t;return null==(t=this.selectedItem)?void 0:t.packageId},this.logger.debug("Initialized package selector:",{selectorId:this.selectorId,mode:this.mode,itemCount:this.items.length,element:this.element,initialSelectedPackage:null==(t=this.selectedItem)?void 0:t.packageId}),this.logger.info(`Selector "${this.selectorId}" initialized with ${this.items.length} items in ${this.mode} mode`)})}initializeSelectorCards(){this.element.querySelectorAll("[data-next-selector-card]").forEach(t=>{t instanceof HTMLElement&&this.registerCard(t)}),0===this.items.length&&this.logger.warn("No selector cards found in selector",this.element)}registerCard(t){const e=t.getAttribute("data-next-package-id");if(!e)return void this.logger.warn("Card missing package ID attribute",t);let i=parseInt(e,10);if("true"===t.getAttribute("data-next-apply-profile")){const{useProfileStore:t}=require("@/stores/profileStore"),e=t.getState().getMappedPackageId(i);e!==i&&(this.logger.debug(`Selector card pre-mapped package ${i} -> ${e}`),i=e)}const n=parseInt(t.getAttribute("data-next-quantity")||"1",10),s="true"===t.getAttribute("data-next-selected"),a=t.getAttribute("data-next-shipping-id"),r=this.items.findIndex(e=>e.element===t);if(-1!==r){const t=this.items[r];return t&&(t.packageId=i,t.quantity=n,t.isPreSelected=s,t.shippingId=a||void 0,this.updateItemPackageData(t)),void this.logger.debug("Updated existing selector card:",{packageId:i,quantity:n,isPreSelected:s,shippingId:a})}let o;try{o=lt.getState().getPackage(i)||void 0}catch(h){this.logger.debug("Package data not yet available for:",i)}const d=(null==o?void 0:o.price)?parseFloat(o.price):Ni.extractPrice(t),l=(null==o?void 0:o.name)||Ni.extractName(t)||`Package ${i}`,c={element:t,packageId:i,quantity:n,price:d,name:l,isPreSelected:s,shippingId:a||void 0};this.items.push(c);const u=t=>this.handleCardClick(t,c);this.clickHandlers.set(t,u),t.addEventListener("click",u),t.classList.add("next-selector-card"),this.setupQuantityControls(c),this.logger.debug("Registered selector card:",{packageId:i,quantity:n,isPreSelected:s,shippingId:a})}setupQuantityControls(t){const e=t.element,i=e.querySelector("[data-next-quantity-increase]"),n=e.querySelector("[data-next-quantity-decrease]"),s=e.querySelector("[data-next-quantity-display]");if(!i&&!n)return;const a=parseInt(e.getAttribute("data-next-min-quantity")||"1",10),r=parseInt(e.getAttribute("data-next-max-quantity")||"999",10),o=()=>{s&&(s.textContent=t.quantity.toString()),e.setAttribute("data-next-quantity",t.quantity.toString()),n&&(n.toggleAttribute("disabled",t.quantity<=a),n.classList.toggle("next-disabled",t.quantity<=a)),i&&(i.toggleAttribute("disabled",t.quantity>=r),i.classList.toggle("next-disabled",t.quantity>=r))};if(i){const e=e=>{e.stopPropagation(),e.preventDefault(),t.quantity<r&&(t.quantity++,o(),this.handleQuantityChange(t))};this.quantityHandlers.set(i,e),i.addEventListener("click",e)}if(n){const e=e=>{e.stopPropagation(),e.preventDefault(),t.quantity>a&&(t.quantity--,o(),this.handleQuantityChange(t))};this.quantityHandlers.set(n,e),n.addEventListener("click",e)}o(),this.logger.debug(`Set up quantity controls for package ${t.packageId}:`,{minQuantity:a,maxQuantity:r,currentQuantity:t.quantity})}handleQuantityChange(t){return m(this,null,function*(){try{if(this.logger.debug(`Quantity changed for package ${t.packageId}:`,t.quantity),this.emit("selector:quantity-changed",{selectorId:this.selectorId,packageId:t.packageId,quantity:t.quantity}),this.selectedItem===t&&"swap"===this.mode){const e=Et.getState();e.hasItem(t.packageId)?(yield e.updateQuantity(t.packageId,t.quantity),this.logger.debug(`Updated cart quantity for package ${t.packageId} to ${t.quantity}`)):(yield e.addItem({packageId:t.packageId,quantity:t.quantity,isUpsell:!1}),this.logger.debug(`Added package ${t.packageId} to cart with quantity ${t.quantity}`))}}catch(e){this.handleError(e,"handleQuantityChange")}})}setupMutationObserver(){this.mutationObserver=new MutationObserver(t=>{t.forEach(t=>{if("attributes"===t.type&&t.target instanceof HTMLElement){const e=t.target;e.hasAttribute("data-next-selector-card")&&"data-next-package-id"===t.attributeName&&this.handlePackageIdChange(e)}"childList"===t.type&&(t.addedNodes.forEach(t=>{t instanceof HTMLElement&&(t.hasAttribute("data-next-selector-card")&&this.registerCard(t),t.querySelectorAll("[data-next-selector-card]").forEach(t=>{t instanceof HTMLElement&&this.registerCard(t)}))}),t.removedNodes.forEach(t=>{t instanceof HTMLElement&&this.handleCardRemoval(t)}))})}),this.mutationObserver.observe(this.element,{attributes:!0,attributeFilter:["data-next-package-id","data-next-quantity","data-next-selected","data-next-shipping-id"],childList:!0,subtree:!0})}handlePackageIdChange(t){const e=this.items.find(e=>e.element===t);if(!e)return void this.registerCard(t);const i=t.getAttribute("data-next-package-id");if(!i)return void this.logger.warn("Card package ID removed",t);const n=parseInt(i,10),s=e.packageId;n!==s&&(e.packageId=n,e.quantity=parseInt(t.getAttribute("data-next-quantity")||"1",10),e.shippingId=t.getAttribute("data-next-shipping-id")||void 0,this.updateItemPackageData(e),this.selectedItem===e&&"swap"===this.mode&&this.updateCart(u(c({},e),{packageId:s}),e).catch(t=>{this.logger.error("Failed to update cart after package ID change:",t)}),this.syncWithCart(Et.getState()),this.logger.debug("Package ID changed on selector card:",{oldPackageId:s,newPackageId:n,isSelected:this.selectedItem===e}))}updateItemPackageData(t){try{const e=lt.getState().getPackage(t.packageId);e?(t.price=e.price?parseFloat(e.price):t.price,t.name=e.name||t.name):(t.price=Ni.extractPrice(t.element),t.name=Ni.extractName(t.element)||`Package ${t.packageId}`)}catch(e){this.logger.debug("Failed to update package data:",e)}}handleCardRemoval(t){const e=[];t.hasAttribute("data-next-selector-card")&&e.push(t),t.querySelectorAll("[data-next-selector-card]").forEach(t=>{t instanceof HTMLElement&&e.push(t)}),e.forEach(t=>{const e=this.items.findIndex(e=>e.element===t);if(-1!==e){const i=this.items[e],n=this.clickHandlers.get(t);n&&(t.removeEventListener("click",n),this.clickHandlers.delete(t)),[t.querySelector("[data-next-quantity-increase]"),t.querySelector("[data-next-quantity-decrease]")].forEach(t=>{if(t){const e=this.quantityHandlers.get(t);e&&(t.removeEventListener("click",e),this.quantityHandlers.delete(t))}}),this.items.splice(e,1),this.selectedItem===i&&(this.selectedItem=null,this.element.removeAttribute("data-selected-package")),this.logger.debug("Removed selector card:",{packageId:null==i?void 0:i.packageId})}})}handleCardClick(t,e){return m(this,null,function*(){t.preventDefault();try{if(this.selectedItem===e)return;const t=this.selectedItem;this.selectItem(e),this.eventBus.emit("selector:item-selected",{selectorId:this.selectorId,packageId:e.packageId,previousPackageId:(null==t?void 0:t.packageId)||void 0,mode:this.mode,pendingAction:"select"===this.mode||void 0}),this.element.setAttribute("data-selected-package",e.packageId.toString()),this.element._t=e,"swap"===this.mode&&(yield this.updateCart(t,e),e.shippingId&&(yield this.setShippingMethod(e.shippingId)))}catch(i){this.handleError(i,"handleCardClick")}})}selectItem(t){this.items.forEach(t=>{t.element.classList.remove("next-selected"),t.element.setAttribute("data-next-selected","false")}),t.element.classList.add("next-selected"),t.element.setAttribute("data-next-selected","true"),this.selectedItem=t,this.element.setAttribute("data-selected-package",t.packageId.toString()),this.logger.debug(`Selected item in selector ${this.selectorId}:`,{packageId:t.packageId,name:t.name,quantity:t.quantity}),this.emit("selector:selection-changed",{selectorId:this.selectorId,packageId:t.packageId,item:t})}updateCart(t,e){return m(this,null,function*(){const i=Et.getState();if("swap"===this.mode){const t=i.items.find(t=>this.items.some(e=>t.packageId===e.packageId||t.originalPackageId===e.packageId));t?t.packageId!==e.packageId&&(this.logger.debug(`Swapping cart item from selector: ${t.packageId} -> ${e.packageId}`),yield i.swapPackage(t.packageId,{packageId:e.packageId,quantity:e.quantity,isUpsell:!1})):i.hasItem(e.packageId)||(this.logger.debug(`Adding new item from selector: ${e.packageId}`),yield i.addItem({packageId:e.packageId,quantity:e.quantity,isUpsell:!1}))}else t&&t.packageId!==e.packageId?yield i.swapPackage(t.packageId,{packageId:e.packageId,quantity:e.quantity,isUpsell:!1}):i.hasItem(e.packageId)||(yield i.addItem({packageId:e.packageId,quantity:e.quantity,isUpsell:!1}))})}setShippingMethod(t){return m(this,null,function*(){try{const e=parseInt(t,10);if(isNaN(e))return void this.logger.error("Invalid shipping ID:",t);const i=Et.getState();yield i.setShippingMethod(e),this.logger.debug(`Shipping method ${e} set via selector`)}catch(e){this.logger.error("Failed to set shipping method:",e)}})}syncWithCart(t){try{this.items.forEach(e=>{const i=t.items.find(t=>t.originalPackageId===e.packageId||t.packageId===e.packageId),n=!!i;if(e.element.classList.toggle("next-in-cart",n),e.element.setAttribute("data-next-in-cart",n.toString()),i&&e.quantity!==i.quantity){e.quantity=i.quantity;const t=e.element.querySelector("[data-next-quantity-display]");t&&(t.textContent=e.quantity.toString()),e.element.setAttribute("data-next-quantity",e.quantity.toString());const n=parseInt(e.element.getAttribute("data-next-min-quantity")||"1",10),s=parseInt(e.element.getAttribute("data-next-max-quantity")||"999",10),a=e.element.querySelector("[data-next-quantity-decrease]"),r=e.element.querySelector("[data-next-quantity-increase]");a&&(a.toggleAttribute("disabled",e.quantity<=n),a.classList.toggle("next-disabled",e.quantity<=n)),r&&(r.toggleAttribute("disabled",e.quantity>=s),r.classList.toggle("next-disabled",e.quantity>=s)),this.logger.debug(`Synced quantity from cart for package ${e.packageId}: ${e.quantity}`)}});const e=this.items.filter(e=>t.items.some(t=>t.originalPackageId===e.packageId||t.packageId===e.packageId));if(e.length>0&&"swap"===this.mode){const t=e[0];t&&this.selectedItem!==t&&this.selectItem(t)}else if(!this.selectedItem){const e=this.items.filter(t=>t.isPreSelected);e.length>1&&(this.logger.warn(`Multiple pre-selected items found in selector ${this.selectorId}. Only one should be pre-selected.`),e.slice(1).forEach(t=>{t.element.classList.remove("next-selected"),t.element.setAttribute("data-next-selected","false"),t.isPreSelected=!1}));const i=e[0];if(i)this.selectItem(i),"select"!==this.mode&&t.isEmpty&&this.updateCart(null,i).then(()=>{i.shippingId&&this.setShippingMethod(i.shippingId)}).catch(t=>{this.logger.error("Failed to add pre-selected item:",t)});else if("select"===this.mode&&this.items.length>0){const t=this.items[0];t&&(this.selectItem(t),this.logger.debug("Select mode: Auto-selected first item since no pre-selected item found"))}}}catch(e){this.handleError(e,"syncWithCart")}}update(){this.syncWithCart(Et.getState())}getSelectedItem(){return this.selectedItem}getSelectorConfig(){return{id:this.selectorId,mode:this.mode,itemCount:this.items.length}}cleanupEventListeners(){this.clickHandlers.forEach((t,e)=>{e.removeEventListener("click",t)}),this.clickHandlers.clear(),this.quantityHandlers.forEach((t,e)=>{e.removeEventListener("click",t)}),this.quantityHandlers.clear(),this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}destroy(){this.cleanupEventListeners(),this.items.forEach(t=>{t.element.classList.remove("next-selector-card","next-selected","next-in-cart")}),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),Oi=Object.freeze(Object.defineProperty({__proto__:null,TimerEnhancer:class extends ie{constructor(){super(...arguments),this.duration=0,this.persistenceId="",this.format="mm:ss",this.startTime=0}initialize(){return m(this,null,function*(){this.validateElement();const t=this.getRequiredAttribute("data-duration");this.duration=parseInt(t,10),this.persistenceId=this.getAttribute("data-persistence-id")||"default-timer",this.format=this.getAttribute("data-format")||"mm:ss",this.loadStartTime(),this.startTimer(),this.logger.debug(`Initialized timer: ${this.duration}s, persistence: ${this.persistenceId}`)})}update(){}loadStartTime(){const t=localStorage.getItem(`next-timer-${this.persistenceId}`);t?this.startTime=parseInt(t,10):(this.startTime=Date.now(),localStorage.setItem(`next-timer-${this.persistenceId}`,this.startTime.toString()))}startTimer(){this.updateDisplay(),this.interval=window.setInterval(()=>{this.updateDisplay()},1e3)}updateDisplay(){const t=Math.floor((Date.now()-this.startTime)/1e3),e=Math.max(0,this.duration-t);if(0===e)return void this.handleTimerExpired();const i=this.formatTime(e);(this.element.querySelector("[data-next-timer-display]")||this.element).textContent=i}formatTime(t){const e=Math.floor(t/3600),i=Math.floor(t%3600/60),n=t%60,s=t=>t.toString().padStart(2,"0");switch(this.format){case"hh:mm:ss":return`${s(e)}:${s(i)}:${s(n)}`;case"mm:ss":default:return`${s(i)}:${s(n)}`;case"ss":return s(n)}}handleTimerExpired(){this.interval&&(clearInterval(this.interval),this.interval=void 0),localStorage.removeItem(`next-timer-${this.persistenceId}`),this.element.style.display="none",document.querySelectorAll(`[data-next-timer-expired][data-persistence-id="${this.persistenceId}"]`).forEach(t=>{t.style.display=""}),this.emit("timer:expired",{persistenceId:this.persistenceId}),this.logger.debug(`Timer expired: ${this.persistenceId}`)}destroy(){this.interval&&clearInterval(this.interval),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),zi=Object.freeze(Object.defineProperty({__proto__:null,ConditionalDisplayEnhancer:class extends ie{constructor(){super(...arguments),this.packageContext=null,this.selectorId=null,this.dependsOnCart=!1,this.dependsOnPackage=!1,this.dependsOnSelection=!1,this.dependsOnOrder=!1,this.dependsOnShipping=!1,this.dependsOnProfile=!1,this.dependsOnParams=!1,this.profileId=null,this.selectionChangeHandler=null}initialize(){return m(this,null,function*(){const t=this.element.getAttribute("data-next-show"),e=this.element.getAttribute("data-next-hide");this.logger.info("ConditionalDisplayEnhancer initializing:",{element:this.element.tagName,class:this.element.className,showAttr:t,hideAttr:e,hasParams:window.location.search}),this.validateElement();const i=mi.findPackageId(this.element);this.packageContext=void 0!==i?i:null,this.selectorId=this.detectSelectorContext();const n=this.getAttribute("data-next-show-if-profile"),s=this.getAttribute("data-next-hide-if-profile");if(n)this.profileId=n,this.showCondition=!0,this.dependsOnProfile=!0;else if(s)this.profileId=s,this.showCondition=!1,this.dependsOnProfile=!0;else{const t=this.getAttribute("data-next-show"),e=this.getAttribute("data-next-hide");if(t)this.condition=Vt.parseCondition(t),this.showCondition=!0;else{if(!e)throw new Error("Either data-next-show, data-next-hide, data-next-show-if-profile, or data-next-hide-if-profile is required");this.condition=Vt.parseCondition(e),this.showCondition=!1}}!this.dependsOnProfile&&this.condition&&(this.analyzeDependencies(),this.logger.debug("Condition analysis:",{condition:this.condition,dependsOnParams:this.dependsOnParams,dependsOnCart:this.dependsOnCart,dependsOnProfile:this.dependsOnProfile})),this.dependsOnCart&&this.subscribe(Et,this.handleStateUpdate.bind(this)),this.dependsOnPackage&&this.subscribe(lt,this.handleCampaignUpdate.bind(this)),this.dependsOnSelection&&(this.selectionChangeHandler=this.handleSelectionChange.bind(this),this.eventBus.on("selector:selection-changed",this.selectionChangeHandler),this.eventBus.on("selector:item-selected",this.selectionChangeHandler)),this.dependsOnOrder&&this.subscribe(Dt,this.handleOrderUpdate.bind(this)),this.dependsOnShipping&&this.subscribe(lt,this.handleShippingUpdate.bind(this)),this.dependsOnProfile&&(this.subscribe(mt,this.handleProfileUpdate.bind(this)),this.eventBus.on("profile:applied",()=>{this.handleProfileUpdate(mt.getState())}),this.eventBus.on("profile:reverted",()=>{this.handleProfileUpdate(mt.getState())}),this.eventBus.on("profile:switched",()=>{this.handleProfileUpdate(mt.getState())}),this.eventBus.on("sdk:url-parameters-processed",()=>{this.handleProfileUpdate(mt.getState())})),this.dependsOnParams&&(this.subscribe(zt,this.handleParamsUpdate.bind(this)),this.eventBus.on("sdk:url-parameters-processed",()=>{this.handleParamsUpdate(zt.getState())})),yield new Promise(t=>setTimeout(t,0)),this.dependsOnProfile?this.handleProfileUpdate(mt.getState()):this.dependsOnParams?this.handleParamsUpdate(zt.getState()):this.dependsOnCart?this.handleStateUpdate(Et.getState()):this.dependsOnPackage?this.handlePackageUpdate():this.dependsOnSelection?this.handleSelectionUpdate():this.dependsOnOrder?this.handleOrderUpdate(Dt.getState()):this.dependsOnShipping&&this.handleShippingUpdate()})}update(){this.dependsOnCart?this.handleStateUpdate(Et.getState()):this.dependsOnPackage?this.handlePackageUpdate():this.dependsOnSelection?this.handleSelectionUpdate():this.dependsOnOrder?this.handleOrderUpdate(Dt.getState()):this.dependsOnProfile?this.handleProfileUpdate(mt.getState()):this.dependsOnParams&&this.handleParamsUpdate(zt.getState())}analyzeDependencies(){this.dependsOnCart=this.conditionDependsOnCart(this.condition),this.dependsOnPackage=this.conditionDependsOnPackage(this.condition),this.dependsOnSelection=this.conditionDependsOnSelection(this.condition),this.dependsOnOrder=this.conditionDependsOnOrder(this.condition),this.dependsOnShipping=this.conditionDependsOnShipping(this.condition),this.dependsOnProfile=this.conditionDependsOnProfile(this.condition),this.dependsOnParams=this.conditionDependsOnParams(this.condition),this.dependsOnCart||this.dependsOnPackage||this.dependsOnSelection||this.dependsOnOrder||this.dependsOnShipping||this.dependsOnProfile||this.dependsOnParams||(this.dependsOnCart=!0)}conditionDependsOnCart(t){switch(t.type){case"not":return this.conditionDependsOnCart(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnCart(t));case"property":case"function":return"cart"===t.object;case"comparison":return"cart"===t.left.object||t.right&&"object"==typeof t.right&&"cart"===t.right.object;default:return!1}}conditionDependsOnPackage(t){switch(t.type){case"not":return this.conditionDependsOnPackage(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnPackage(t));case"property":case"function":return"package"===t.object;case"comparison":return"package"===t.left.object||t.right&&"object"==typeof t.right&&"package"===t.right.object;default:return!1}}conditionDependsOnSelection(t){switch(t.type){case"not":return this.conditionDependsOnSelection(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnSelection(t));case"property":case"function":return"selection"===t.object||t.object&&t.object.startsWith("selection.");case"comparison":const e="selection"===t.left.object||t.left.object&&t.left.object.startsWith("selection."),i=t.right&&"object"==typeof t.right&&("selection"===t.right.object||t.right.object&&t.right.object.startsWith("selection."));return e||i;default:return!1}}conditionDependsOnOrder(t){switch(t.type){case"not":return this.conditionDependsOnOrder(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnOrder(t));case"property":case"function":return"order"===t.object;case"comparison":return"order"===t.left.object||t.right&&"object"==typeof t.right&&"order"===t.right.object;default:return!1}}conditionDependsOnShipping(t){switch(t.type){case"not":return this.conditionDependsOnShipping(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnShipping(t));case"property":case"function":return"shipping"===t.object;case"comparison":return"shipping"===t.left.object||t.right&&"object"==typeof t.right&&"shipping"===t.right.object;default:return!1}}conditionDependsOnProfile(t){if(!t)return!1;switch(t.type){case"not":return this.conditionDependsOnProfile(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnProfile(t));case"property":case"function":return"profile"===t.object;case"comparison":return t.left&&"profile"===t.left.object||t.right&&"object"==typeof t.right&&"profile"===t.right.object;default:return!1}}conditionDependsOnParams(t){var e,i;if(!t)return!1;switch(this.logger.debug("Checking if condition depends on params:",{condition:t,type:t.type,leftObject:null==(e=t.left)?void 0:e.object,rightObject:null==(i=t.right)?void 0:i.object}),t.type){case"not":return this.conditionDependsOnParams(t.condition);case"logical":return t.conditions.some(t=>this.conditionDependsOnParams(t));case"property":case"function":return"param"===t.object||"params"===t.object;case"comparison":const e=t.left&&("param"===t.left.object||"params"===t.left.object)||t.right&&"object"==typeof t.right&&("param"===t.right.object||"params"===t.right.object);return this.logger.debug("Comparison depends on params:",e),e;default:return!1}}handleCampaignUpdate(){this.dependsOnPackage&&this.handlePackageUpdate()}handleOrderUpdate(t){try{const e=this.evaluateOrderCondition(t),i=this.showCondition?e:!e;this.element.style.display=i?"":"none",this.toggleClass("next-condition-met",e),this.toggleClass("next-condition-not-met",!e),this.toggleClass("next-visible",i),this.toggleClass("next-hidden",!i)}catch(e){this.handleError(e,"handleOrderUpdate")}}handlePackageUpdate(){try{const t=this.evaluatePackageCondition(),e=this.showCondition?t:!t;this.element.style.display=e?"":"none",this.toggleClass("next-condition-met",t),this.toggleClass("next-condition-not-met",!t),this.toggleClass("next-visible",e),this.toggleClass("next-hidden",!e)}catch(t){this.handleError(t,"handlePackageUpdate")}}handleShippingUpdate(){try{const t=this.evaluateShippingCondition(),e=this.showCondition?t:!t;this.element.style.display=e?"":"none",this.toggleClass("next-condition-met",t),this.toggleClass("next-condition-not-met",!t),this.toggleClass("next-visible",e),this.toggleClass("next-hidden",!e)}catch(t){this.handleError(t,"handleShippingUpdate")}}handleProfileUpdate(t){try{let e=!1;this.profileId?e=t.activeProfileId===this.profileId:this.condition&&(e=this.evaluateProfileCondition(t));const i=this.showCondition?e:!e;this.element.style.display=i?"":"none",this.toggleClass("next-condition-met",e),this.toggleClass("next-condition-not-met",!e),this.toggleClass("next-visible",i),this.toggleClass("next-hidden",!i),this.toggleClass("next-profile-active",e&&null!==this.profileId)}catch(e){this.handleError(e,"handleProfileUpdate")}}handleParamsUpdate(t){try{const e=this.evaluateParamsCondition(t),i=this.showCondition?e:!e;this.logger.debug("handleParamsUpdate:",{condition:this.condition,showCondition:this.showCondition,conditionMet:e,shouldShow:i,params:t.params,element:this.element.outerHTML.substring(0,100)}),this.element.style.display=i?"":"none",this.toggleClass("next-condition-met",e),this.toggleClass("next-condition-not-met",!e),this.toggleClass("next-visible",i),this.toggleClass("next-hidden",!i)}catch(e){this.handleError(e,"handleParamsUpdate")}}evaluatePackageCondition(){try{switch(this.condition.type){case"not":return!this.evaluatePackageConditionRecursive(this.condition.condition);case"logical":return this.evaluatePackageLogicalCondition(this.condition);case"property":return this.evaluatePackageProperty(this.condition);case"comparison":return this.evaluatePackageComparison(this.condition);default:return this.logger.warn(`Unsupported condition type for package: ${this.condition.type}`),!1}}catch(t){return this.logger.error("Error evaluating package condition:",t),!1}}evaluatePackageLogicalCondition(t){const{operator:e,conditions:i}=t;return"||"===e?i.some(t=>this.evaluatePackageConditionRecursive(t)):"&&"===e&&i.every(t=>this.evaluatePackageConditionRecursive(t))}evaluatePackageConditionRecursive(t){switch(t.type){case"not":return!this.evaluatePackageConditionRecursive(t.condition);case"logical":return this.evaluatePackageLogicalCondition(t);case"property":return this.evaluatePackageProperty(t);case"comparison":return this.evaluatePackageComparison(t);default:return!1}}evaluateOrderCondition(t){try{switch(this.condition.type){case"not":return!this.evaluateOrderConditionRecursive(t,this.condition.condition);case"logical":return this.evaluateOrderLogicalCondition(t,this.condition);case"property":return this.evaluateOrderProperty(t,this.condition);case"comparison":return this.evaluateOrderComparison(t,this.condition);default:return this.logger.warn(`Unsupported condition type for order: ${this.condition.type}`),!1}}catch(e){return this.logger.error("Error evaluating order condition:",e),!1}}evaluateOrderLogicalCondition(t,e){const{operator:i,conditions:n}=e;return"||"===i?n.some(e=>this.evaluateOrderConditionRecursive(t,e)):"&&"===i&&n.every(e=>this.evaluateOrderConditionRecursive(t,e))}evaluateOrderConditionRecursive(t,e){switch(e.type){case"not":return!this.evaluateOrderConditionRecursive(t,e.condition);case"logical":return this.evaluateOrderLogicalCondition(t,e);case"property":return this.evaluateOrderProperty(t,e);case"comparison":return this.evaluateOrderComparison(t,e);default:return!1}}evaluatePackageProperty(t){const e=this.getPackagePropertyValue(t.property);return Boolean(e)}evaluatePackageComparison(t){const e=this.getPackagePropertyValue(t.left.property),i=t.right;switch(t.operator){case">":return Number(e)>Number(i);case">=":return Number(e)>=Number(i);case"<":return Number(e)<Number(i);case"<=":return Number(e)<=Number(i);case"==":case"===":return e===i;case"!=":case"!==":return e!==i;default:return!1}}evaluateOrderProperty(t,e){const i=this.getOrderPropertyValue(t,e.property);return Boolean(i)}evaluateOrderComparison(t,e){const i=this.getOrderPropertyValue(t,e.left.property),n=e.right;switch(e.operator){case">":return Number(i)>Number(n);case">=":return Number(i)>=Number(n);case"<":return Number(i)<Number(n);case"<=":return Number(i)<=Number(n);case"==":case"===":return i===n;case"!=":case"!==":return i!==n;default:return!1}}handleStateUpdate(t){try{const e=this.evaluateCondition(t),i=this.showCondition?e:!e;this.element.style.display=i?"":"none",this.toggleClass("next-condition-met",e),this.toggleClass("next-condition-not-met",!e),this.toggleClass("next-visible",i),this.toggleClass("next-hidden",!i)}catch(e){this.handleError(e,"handleStateUpdate")}}evaluateCondition(t){try{switch(this.condition.type){case"not":return!this.evaluateConditionRecursive(t,this.condition.condition);case"logical":return this.evaluateLogicalCondition(t,this.condition);case"property":return this.evaluateProperty(t,this.condition);case"function":return this.evaluateFunction(t,this.condition);case"comparison":return this.evaluateComparison(t,this.condition);default:return this.logger.warn(`Unknown condition type: ${this.condition.type}`),!1}}catch(e){return this.logger.error("Error evaluating condition:",e),!1}}evaluateLogicalCondition(t,e){const{operator:i,conditions:n}=e;return"||"===i?n.some(e=>this.evaluateConditionRecursive(t,e)):"&&"===i&&n.every(e=>this.evaluateConditionRecursive(t,e))}evaluateConditionRecursive(t,e){switch(e.type){case"not":return!this.evaluateConditionRecursive(t,e.condition);case"logical":return this.evaluateLogicalCondition(t,e);case"property":return this.evaluateProperty(t,e);case"function":return this.evaluateFunction(t,e);case"comparison":return this.evaluateComparison(t,e);default:return!1}}detectSelectorContext(){if(this.condition){if(this.condition.property&&this.condition.property.includes(".")){const t=this.condition.property.split(".");if(t.length>=2)return this.logger.debug("Found selector ID in property:",t[0]),t[0]}if(this.condition.left&&this.condition.left.property&&this.condition.left.property.includes(".")){const t=this.condition.left.property.split(".");if(t.length>=2)return this.logger.debug("Found selector ID in comparison:",t[0]),t[0]}}const t=this.getAttribute("data-next-selector-id")||this.getAttribute("data-selector-id");if(t)return t;let e=this.element;for(;e;){const t=e.getAttribute("data-next-selector-id");if(t)return t;if(e.hasAttribute("data-next-cart-selector"))return e.getAttribute("data-next-selector-id")||e.getAttribute("data-next-id")||null;e=e.parentElement}return null}handleSelectionChange(t){this.selectorId&&t.selectorId!==this.selectorId||this.handleSelectionUpdate()}handleSelectionUpdate(){try{const t=this.evaluateSelectionCondition(),e=this.showCondition?t:!t;this.element.style.display=e?"":"none",this.toggleClass("next-condition-met",t),this.toggleClass("next-condition-not-met",!t),this.toggleClass("next-visible",e),this.toggleClass("next-hidden",!e)}catch(t){this.handleError(t,"handleSelectionUpdate")}}evaluateSelectionCondition(){try{switch(this.condition.type){case"not":return!this.evaluateSelectionConditionRecursive(this.condition.condition);case"logical":return this.evaluateSelectionLogicalCondition(this.condition);case"property":return this.evaluateSelectionProperty(this.condition);case"comparison":return this.evaluateSelectionComparison(this.condition);default:return this.logger.warn(`Unsupported condition type for selection: ${this.condition.type}`),!1}}catch(t){return this.logger.error("Error evaluating selection condition:",t),!1}}evaluateSelectionLogicalCondition(t){const{operator:e,conditions:i}=t;return"||"===e?i.some(t=>this.evaluateSelectionConditionRecursive(t)):"&&"===e&&i.every(t=>this.evaluateSelectionConditionRecursive(t))}evaluateSelectionConditionRecursive(t){switch(t.type){case"not":return!this.evaluateSelectionConditionRecursive(t.condition);case"logical":return this.evaluateSelectionLogicalCondition(t);case"property":return this.evaluateSelectionProperty(t);case"comparison":return this.evaluateSelectionComparison(t);default:return!1}}evaluateShippingCondition(){try{switch(this.condition.type){case"not":return!this.evaluateShippingConditionRecursive(this.condition.condition);case"logical":return this.evaluateShippingLogicalCondition(this.condition);case"property":return this.evaluateShippingProperty(this.condition);case"comparison":return this.evaluateShippingComparison(this.condition);default:return this.logger.warn(`Unsupported condition type for shipping: ${this.condition.type}`),!1}}catch(t){return this.logger.error("Error evaluating shipping condition:",t),!1}}evaluateShippingLogicalCondition(t){const{operator:e,conditions:i}=t;return"||"===e?i.some(t=>this.evaluateShippingConditionRecursive(t)):"&&"===e&&i.every(t=>this.evaluateShippingConditionRecursive(t))}evaluateShippingConditionRecursive(t){switch(t.type){case"not":return!this.evaluateShippingConditionRecursive(t.condition);case"logical":return this.evaluateShippingLogicalCondition(t);case"property":return this.evaluateShippingProperty(t);case"comparison":return this.evaluateShippingComparison(t);default:return!1}}evaluateProfileCondition(t){try{switch(this.condition.type){case"not":return!this.evaluateProfileConditionRecursive(t,this.condition.condition);case"logical":return this.evaluateProfileLogicalCondition(t,this.condition);case"property":return"active"===this.condition.property||"isActive"===this.condition.property?Boolean(t.activeProfileId):"id"===this.condition.property&&(t.activeProfileId||"");case"comparison":if("profile"===this.condition.left.object&&("active"===this.condition.left.property||"id"===this.condition.left.property)){const e=t.activeProfileId||"",i=this.condition.right;switch(this.condition.operator){case"===":case"==":return e===i;case"!==":case"!=":return e!==i;default:return!1}}return!1;case"function":if("is"===this.condition.method){const e=this.condition.args[0];return t.activeProfileId===e}if("has"===this.condition.method){const e=this.condition.args[0];return t.profiles.has(e)}return!1;default:return this.logger.warn(`Unsupported condition type for profile: ${this.condition.type}`),!1}}catch(e){return this.logger.error("Error evaluating profile condition:",e),!1}}evaluateProfileLogicalCondition(t,e){const{operator:i,conditions:n}=e;return"||"===i?n.some(e=>this.evaluateProfileConditionRecursive(t,e)):"&&"===i&&n.every(e=>this.evaluateProfileConditionRecursive(t,e))}evaluateProfileConditionRecursive(t,e){switch(e.type){case"not":return!this.evaluateProfileConditionRecursive(t,e.condition);case"logical":return this.evaluateProfileLogicalCondition(t,e);case"property":return"active"===e.property||"isActive"===e.property?Boolean(t.activeProfileId):"id"===e.property&&(t.activeProfileId||"");case"comparison":if("profile"===e.left.object&&("active"===e.left.property||"id"===e.left.property)){const i=t.activeProfileId||"",n=e.right;switch(e.operator){case"===":case"==":return i===n;case"!==":case"!=":return i!==n;default:return!1}}return!1;case"function":if("is"===e.method){const i=e.args[0];return t.activeProfileId===i}if("has"===e.method){const i=e.args[0];return t.profiles.has(i)}return!1;default:return!1}}evaluateParamsCondition(t){try{switch(this.condition.type){case"not":return!this.evaluateParamsConditionRecursive(t,this.condition.condition);case"logical":return this.evaluateParamsLogicalCondition(t,this.condition);case"property":return t.hasParam(this.condition.property);case"comparison":const e=String(t.getParam(this.condition.left.property)||""),i=String(this.condition.right);switch(this.logger.info("evaluateParamsCondition comparison:",{condition:this.condition,property:this.condition.left.property,paramValue:e,compareValue:i,operator:this.condition.operator,willMatch:e===i,paramValueType:typeof e,compareValueType:typeof i,allParams:t.params}),this.condition.operator){case"===":case"==":return e===i;case"!==":case"!=":return e!==i;case">":return Number(e)>Number(i);case">=":return Number(e)>=Number(i);case"<":return Number(e)<Number(i);case"<=":return Number(e)<=Number(i);default:return!1}case"function":if("has"===this.condition.method||"exists"===this.condition.method){const e=this.condition.args[0];return t.hasParam(e)}if("is"===this.condition.method||"equals"===this.condition.method){const e=this.condition.args[0],i=String(this.condition.args[1]);return(t.getParam(e)||"")===i}return!1;default:return this.logger.warn(`Unsupported condition type for params: ${this.condition.type}`),!1}}catch(e){return this.logger.error("Error evaluating params condition:",e),!1}}evaluateParamsLogicalCondition(t,e){const{operator:i,conditions:n}=e;return"||"===i?n.some(e=>this.evaluateParamsConditionRecursive(t,e)):"&&"===i&&n.every(e=>this.evaluateParamsConditionRecursive(t,e))}evaluateParamsConditionRecursive(t,e){switch(e.type){case"not":return!this.evaluateParamsConditionRecursive(t,e.condition);case"logical":return this.evaluateParamsLogicalCondition(t,e);case"property":return t.hasParam(e.property);case"comparison":const i=String(t.getParam(e.left.property)||""),n=String(e.right);switch(e.operator){case"===":case"==":return i===n;case"!==":case"!=":return i!==n;case">":return Number(i)>Number(n);case">=":return Number(i)>=Number(n);case"<":return Number(i)<Number(n);case"<=":return Number(i)<=Number(n);default:return!1}case"function":if("has"===e.method||"exists"===e.method){const i=e.args[0];return t.hasParam(i)}if("is"===e.method||"equals"===e.method){const i=e.args[0],n=String(e.args[1]);return(t.getParam(i)||"")===n}return!1;default:return!1}}evaluateSelectionProperty(t){const e=this.getSelectionPropertyValue(t.property);return Boolean(e)}evaluateSelectionComparison(t){const e=this.getSelectionPropertyValue(t.left.property),i=t.right;switch(t.operator){case">":return Number(e)>Number(i);case">=":return Number(e)>=Number(i);case"<":return Number(e)<Number(i);case"<=":return Number(e)<=Number(i);case"==":case"===":return e===i;case"!=":case"!==":return e!==i;default:return!1}}evaluateShippingProperty(t){const e=this.getShippingPropertyValue(t.property);return Boolean(e)}evaluateShippingComparison(t){const e=this.getShippingPropertyValue(t.left.property),i=t.right;switch(t.operator){case">":return Number(e)>Number(i);case">=":return Number(e)>=Number(i);case"<":return Number(e)<Number(i);case"<=":return Number(e)<=Number(i);case"==":case"===":return e===i;case"!=":case"!==":return e!==i;default:return!1}}evaluateProperty(t,e){const i=this.getPropertyValue(t,e.object,e.property);return Boolean(i)}evaluateFunction(t,e){const{object:i,method:n,args:s}=e;if("cart"===i)switch(n){case"hasItem":if(s.length>0){const e=s[0];return t.items.some(t=>t.packageId===e)}return!1;case"hasItems":return!t.isEmpty;default:return this.logger.warn(`Unknown cart method: ${n}`),!1}return!1}evaluateComparison(t,e){const i=this.getPropertyValue(t,e.left.object,e.left.property),n=e.right;switch(e.operator){case">":return Number(i)>Number(n);case">=":return Number(i)>=Number(n);case"<":return Number(i)<Number(n);case"<=":return Number(i)<=Number(n);case"==":case"===":return i===n;case"!=":case"!==":return i!==n;default:return!1}}getPropertyValue(t,e,i){var n;if("cart"===e)switch(i){case"total":case"total.value":return t.totals.total.value;case"subtotal":case"subtotal.value":return t.totals.subtotal.value;case"shipping":case"shipping.value":return t.totals.shipping.value;case"tax":case"tax.value":return t.totals.tax.value;case"discounts":case"discounts.value":return t.totals.discounts.value;case"count":return t.totalQuantity;case"isEmpty":return t.isEmpty;case"hasItems":return!t.isEmpty;case"hasShipping":return t.totals.shipping.value>0;case"hasFreeShipping":return 0===t.totals.shipping.value;case"savingsAmount":case"savingsAmount.value":return t.totals.savings.value;case"savingsPercentage":case"savingsPercentage.value":return t.totals.savingsPercentage.value;case"compareTotal":case"compareTotal.value":return t.totals.compareTotal.value;case"hasSavings":return t.totals.hasSavings;default:const e=si("cart",i);if(e){const{path:i,validator:n}=e;if(i.startsWith("!")){const e=i.substring(1);return!ui.getNestedProperty(t,e)}let s=ui.getNestedProperty(t,i);return n&&void 0!==s&&(s=n(s)),s}return ui.getNestedProperty(t,i)}if("package"===e)return this.getPackagePropertyValue(i);if("selection"===e||e&&e.startsWith("selection.")){let t=this.selectorId,s=i;if(e.startsWith("selection.")){const a=e.split(".");a.length>=2&&(t=null!=(n=a[1])?n:null,a.length>2&&(s=a.slice(2).join(".")+(i?"."+i:"")))}return this.getSelectionPropertyValue(s,t)}if("order"===e){const t=Dt.getState();return this.getOrderPropertyValue(t,i)}return"shipping"===e?this.getShippingPropertyValue(i):"param"===e||"params"===e?zt.getState().getParam(i):null}getSelectionPropertyValue(t,e){var i,n;let s=e||this.selectorId,a=t;if(t&&t.includes(".")){const e=t.split(".");e.length>=2&&(s=null!=(i=e[0])?i:null,a=e.slice(1).join("."))}if(!s)return this.logger.warn("Selection condition used but no selector context found"),null;const r=document.querySelector(`[data-next-selector-id="${s}"]`);if(!r)return this.logger.debug(`Selector element not found for ID: ${s}`),null;const o=r.wt,d="function"==typeof o?o():null;if(!d)return"hasSelection"!==a&&null;let l;try{l=null!=(n=lt.getState().getPackage(d.packageId))?n:void 0}catch(c){this.logger.debug("Could not get package data for selection")}switch(a){case"hasSelection":return!0;case"packageId":return d.packageId;case"quantity":case"totalUnits":case"totalQuantity":return d.quantity||1;case"name":return(null==l?void 0:l.name)||d.name||"";case"price":return l?parseFloat(l.price||"0"):d.price||0;case"total":case"price_total":return l?parseFloat(l.price_total||"0")||parseFloat(l.price||"0")*d.quantity:(d.price||0)*d.quantity;case"hasSavings":return!!l&&vi.calculatePackageMetrics({price:parseFloat(l.price||"0"),retailPrice:parseFloat(l.price_retail||"0"),quantity:d.quantity,priceTotal:parseFloat(l.price_total||"0"),retailPriceTotal:parseFloat(l.price_retail_total||"0")}).hasSavings;case"savingsAmount":return l?vi.calculatePackageMetrics({price:parseFloat(l.price||"0"),retailPrice:parseFloat(l.price_retail||"0"),quantity:d.quantity,priceTotal:parseFloat(l.price_total||"0"),retailPriceTotal:parseFloat(l.price_retail_total||"0")}).totalSavings:0;case"savingsPercentage":return l?vi.calculatePackageMetrics({price:parseFloat(l.price||"0"),retailPrice:parseFloat(l.price_retail||"0"),quantity:d.quantity,priceTotal:parseFloat(l.price_total||"0"),retailPriceTotal:parseFloat(l.price_retail_total||"0")}).totalSavingsPercentage:0;case"compareTotal":case"price_retail_total":if(!l)return 0;const t=parseFloat(l.price_retail_total||"0");if(t>0)return t;const e=parseFloat(l.price_retail||"0");return e>0?e*d.quantity:this.getSelectionPropertyValue("total",s);case"isBundle":case"isMultiPack":return(d.quantity||1)>1;case"isSingleUnit":return 1===(d.quantity||1);default:return l?ui.getNestedProperty(l,a):null}}getPackagePropertyValue(t){if(!this.packageContext)return this.logger.warn("Package condition used but no package context found"),null;try{const e=lt.getState().getPackage(this.packageContext);return e?this.calculatePackageProperty(e,t):(this.logger.warn(`Package ${this.packageContext} not found in campaign data`),null)}catch(e){return this.logger.error(`Error getting package property ${t}:`,e),null}}calculatePackageProperty(t,e){const i=parseFloat(t.price)||0,n=parseFloat(t.price_retail||t.price)||0,s=parseFloat(t.price_total||"0")||i*(t.qty||1),a=parseFloat(t.price_retail_total||"0")||n*(t.qty||1),r=t.qty||1,o=vi.calculatePackageMetrics({price:i,retailPrice:n,quantity:r,priceTotal:s,retailPriceTotal:a});switch(e){case"name":return t.name;case"price":case"price.raw":return i;case"quantity":case"qty":return r;case"image":return t.image;case"isRecurring":return t.is_recurring;case"interval":return t.interval;case"intervalCount":return t.interval_count;case"hasRetailPrice":return n>0&&n!==i;case"hasSavings":case"hasDiscount":return o.hasSavings;case"savingsAmount":case"totalSavings":case"savingsAmount.raw":return o.totalSavings;case"savingsPercentage":case"totalSavingsPercentage":return o.totalSavingsPercentage;case"priceRetailTotal":return o.totalRetailPrice;case"unitPrice":return o.unitPrice;case"unitRetailPrice":return o.unitRetailPrice;case"unitSavings":return o.unitSavings;case"unitSavingsPercentage":return o.unitSavingsPercentage;case"isBundle":return r>1;case"isSubscription":return!0===t.is_recurring;case"isOneTime":return!t.is_recurring;case"priceRetail.raw":return n;default:return ui.getNestedProperty(t,e)}}getShippingPropertyValue(t){var e;const i=this.element.closest("[data-next-shipping-id]");if(!i)return this.logger.warn("Shipping condition used but no shipping context found"),null;const n=i.getAttribute("data-next-shipping-id");if(!n)return null;const s=((null==(e=lt.getState().data)?void 0:e.shipping_methods)||[]).find(t=>t.ref_id===parseInt(n,10));if(!s)return this.logger.warn(`Shipping method ${n} not found in campaign data`),null;switch(t){case"isFree":return 0===parseFloat(s.price||"0");case"cost":case"price":return parseFloat(s.price||"0");case"name":case"code":return s.code;case"id":case"refId":return s.ref_id;case"method":return s;default:return null}}getOrderPropertyValue(t,e){var i,n,s,a,r,o,d,l,c,u,h;const p=t.order;switch(e){case"exists":case"hasOrder":return!!p;case"isLoaded":return!t.isLoading&&!!p;case"isLoading":return t.isLoading;case"hasError":return!!t.error;case"cacheFresh":case"isCacheFresh":return!(!p||!t.orderLoadedAt)&&Date.now()-t.orderLoadedAt<9e5;case"cacheExpired":case"isCacheExpired":return!(!p||!t.orderLoadedAt)&&Date.now()-t.orderLoadedAt>=9e5;case"isRecent":case"isRecentOrder":if(!p)return!1;const e=null==(n=null==(i=p.attribution)?void 0:i.metadata)?void 0:n.timestamp;return!!e&&Date.now()-e<9e5;case"isExpired":if(!p)return!1;const c=null==(a=null==(s=p.attribution)?void 0:s.metadata)?void 0:a.timestamp;return!!c&&Date.now()-c>=9e5;case"isNewOrder":case"wasPlacedRecently":if(!p)return!1;const u=null==(o=null==(r=p.attribution)?void 0:r.metadata)?void 0:o.timestamp;return!!u&&Date.now()-u<9e5;case"isOldOrder":case"wasPlacedLongAgo":if(!p)return!1;const h=null==(l=null==(d=p.attribution)?void 0:d.metadata)?void 0:l.timestamp;return!!h&&Date.now()-h>=9e5}if(!p)return!1;switch(e){case"isTest":return p.is_test||!1;case"hasItems":return p.lines&&p.lines.length>0;case"isEmpty":return!p.lines||0===p.lines.length;case"hasShipping":return parseFloat(p.shipping_incl_tax||"0")>0;case"hasTax":return parseFloat(p.total_tax||"0")>0;case"hasDiscounts":return parseFloat(p.total_discounts||"0")>0;case"hasUpsells":return(null==(c=p.lines)?void 0:c.some(t=>t.is_upsell))||!1;case"supportsUpsells":case"acceptsUpsells":case"supportsPostPurchaseUpsells":return p.supports_post_purchase_upsells||!1;case"total":return parseFloat(p.total_incl_tax||"0");case"subtotal":return p.lines&&p.lines.length>0?p.lines.reduce((t,e)=>t+parseFloat(e.price_excl_tax||"0"),0):parseFloat(p.total_excl_tax||"0")-parseFloat(p.shipping_excl_tax||"0");case"tax":return parseFloat(p.total_tax||"0");case"shipping":return parseFloat(p.shipping_incl_tax||"0");case"shippingExclTax":return parseFloat(p.shipping_excl_tax||"0");case"shippingTax":return parseFloat(p.shipping_tax||"0");case"discounts":return parseFloat(p.total_discounts||"0");case"itemCount":return(null==(u=p.lines)?void 0:u.length)||0;case"totalQuantity":return(null==(h=p.lines)?void 0:h.reduce((t,e)=>t+(e.quantity||0),0))||0;default:return ui.getNestedProperty(p,e)}}destroy(){this.selectionChangeHandler&&(this.eventBus.off("selector:selection-changed",this.selectionChangeHandler),this.eventBus.off("selector:item-selected",this.selectionChangeHandler)),super.destroy()}}},Symbol.toStringTag,{value:"Module"}));class Ri{static findField(t,e={}){const i=e.container||document,n=[`[data-next-checkout-field="${t}"]`,`[os-checkout-field="${t}"]`,`input[name="${t}"]`,`select[name="${t}"]`,`textarea[name="${t}"]`,`#${t}`,`[data-field="${t}"]`,`[data-field-name="${t}"]`],s=e.customSelectors||n;for(const r of s)try{const t=i.querySelector(r);if(t){const i=t;if(!e.includeHidden&&null===i.offsetParent)continue;if(!e.includeDisabled&&"disabled"in i&&i.disabled)continue;return i}}catch(a){}return null}static findFields(t,e={}){const i=new Map;return t.forEach(t=>{const n=this.findField(t,e);n&&i.set(t,n)}),i}static findFieldWrapper(t,e){const i=e||[".form-group",".frm-flds",".form-input",".select-form-wrapper",".field-wrapper",".input-wrapper",".form-field"];for(const n of i){const e=t.closest(n);if(e)return e}return t.parentElement}static findFormContainer(t){return t.closest("form")}static findFieldLabel(t){if(t.id){const e=document.querySelector(`label[for="${t.id}"]`);if(e)return e}let e=t.parentElement;for(;e;){const t=e.querySelector("label");if(t)return t;if("LABEL"===e.tagName)return e;e=e.parentElement}const i=this.findFieldWrapper(t);if(i){const t=i.querySelector("label");if(t)return t}return null}static findAllFormFields(t,e={}){const i=['input:not([type="hidden"]):not([type="submit"]):not([type="button"])',"select","textarea"];e.includeButtons&&i.push("button",'input[type="submit"]','input[type="button"]');const n=[];return t.querySelectorAll(i.join(", ")).forEach(t=>{n.push(t)}),n}static findFieldsByAttribute(t,e,i=document.body){const n=[],s=`[${t}]`;return i.querySelectorAll(s).forEach(i=>{const s=i.getAttribute(t);e&&s?"string"==typeof e?s.includes(e)&&n.push(i):e instanceof RegExp&&e.test(s)&&n.push(i):n.push(i)}),n}static isFormField(t){return["INPUT","SELECT","TEXTAREA"].includes(t.tagName)}static getFieldType(t){return t instanceof HTMLInputElement?t.type||"text":t instanceof HTMLSelectElement?"select":t instanceof HTMLTextAreaElement?"textarea":"unknown"}static getFieldValue(t){return t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement?t.value:""}static setFieldValue(t,e){return(t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement)&&(t.value=e,t.dispatchEvent(new Event("change",{bubbles:!0})),!0)}}class qi{constructor(t,e){this.isReady=!1,this.hasTrackedPaymentInfo=!1,this.fieldHasValue={number:!1,cvv:!1},this.originalPlaceholders={number:"Card Number",cvv:"CVV *"},this.labelBehavior={number:null,cvv:null},this.environmentKey=t,this.config=e,this.logger=X("CreditCardService"),this.validationState=this.initializeValidationState(),t?this.logger.debug("CreditCardService created with config:",e):this.logger.error("No Spreedly environment key provided")}initialize(){return m(this,null,function*(){try{if(this.isReady)return void this.logger.debug("CreditCardService already initialized, skipping");if(this.findCreditCardFields(),!this.numberField||!this.cvvField)return void this.logger.debug("Credit card fields not found, skipping Spreedly initialization");yield this.loadSpreedlyScript(),this.setupSpreedly(),this.logger.debug("CreditCardService initialized successfully")}catch(t){throw this.logger.error("Failed to initialize CreditCardService:",t),t}})}tokenizeCard(t){return m(this,null,function*(){if(!this.isReady)throw new Error("Credit card service is not ready");if(!t.full_name||!t.month||!t.year)throw new Error("Credit card data is incomplete");return this.logger.debug("Tokenizing credit card"),new Promise((e,i)=>{const n=this.onTokenCallback,s=this.onErrorCallback;this.onTokenCallback=(t,i)=>{n&&n(t,i),n?this.onTokenCallback=n:delete this.onTokenCallback,s?this.onErrorCallback=s:delete this.onErrorCallback,e(t)},this.onErrorCallback=t=>{s&&s(t),n?this.onTokenCallback=n:delete this.onTokenCallback,s?this.onErrorCallback=s:delete this.onErrorCallback,i(new Error(t.join(". ")))};const a=setTimeout(()=>{n?this.onTokenCallback=n:delete this.onTokenCallback,s?this.onErrorCallback=s:delete this.onErrorCallback,i(new Error("Credit card tokenization timed out"))},3e4),r=e,o=i;e=t=>{clearTimeout(a),r(t)},i=t=>{clearTimeout(a),o(t)},window.Spreedly.tokenizeCreditCard(t)})})}validateCreditCard(t){var e,i,n,s;const a={};let r=!0;const o=(null==(e=this.monthField)?void 0:e.getAttribute("data-next-checkout-field"))||(null==(i=this.monthField)?void 0:i.getAttribute("os-checkout-field"))||"cc-month",d=(null==(n=this.yearField)?void 0:n.getAttribute("data-next-checkout-field"))||(null==(s=this.yearField)?void 0:s.getAttribute("os-checkout-field"))||"cc-year";if(t.month&&""!==t.month.trim()){const e=parseInt(t.month,10);e<1||e>12?(a[o]="Please select a valid month",this.setCreditCardFieldError("month","Please select a valid month"),r=!1):this.setCreditCardFieldValid("month")}else a[o]="Expiration month is required",this.setCreditCardFieldError("month","Expiration month is required"),r=!1;if(t.year&&""!==t.year.trim()){const e=new Date,i=e.getFullYear(),n=e.getMonth()+1,s=parseInt(t.year,10),l=s<100?2e3+s:s;l<i||l>i+20?(a[d]="Please select a valid year",this.setCreditCardFieldError("year","Please select a valid year"),r=!1):l===i&&t.month&&parseInt(t.month,10)<n?(a[o]="Card has expired",a[d]="Card has expired",this.setCreditCardFieldError("month","Card has expired"),this.setCreditCardFieldError("year","Card has expired"),r=!1):this.setCreditCardFieldValid("year")}else a[d]="Expiration year is required",this.setCreditCardFieldError("year","Expiration year is required"),r=!1;const l={isValid:r};return Object.keys(a).length>0&&(l.errors=a),l}checkSpreedlyFieldsReady(){const t=[];return this.validationState.number.isValid||t.push({field:"number",message:"Please enter a valid credit card number"}),this.validationState.cvv.isValid||t.push({field:"cvv",message:"Please enter a valid CVV"}),{hasEmptyFields:t.length>0,errors:t}}clearAllErrors(){this.clearCreditCardFieldError("number"),this.clearCreditCardFieldError("cvv"),this.clearCreditCardFieldError("month"),this.clearCreditCardFieldError("year"),this.hidePaymentErrorContainers()}clearFields(){if(window.Spreedly&&this.isReady)try{window.Spreedly.reload(),this.logger.debug("Spreedly fields reloaded")}catch(t){this.logger.warn("Failed to reload Spreedly fields:",t)}this.monthField instanceof HTMLSelectElement&&(this.monthField.selectedIndex=0),this.yearField instanceof HTMLSelectElement&&(this.yearField.selectedIndex=0),this.validationState=this.initializeValidationState(),this.clearAllErrors()}hidePaymentErrorContainers(){const t=document.querySelector('[data-next-component="credit-error"]');t instanceof HTMLElement&&(t.style.display="none",t.classList.remove("visible"))}setOnReady(t){this.onReadyCallback=t,this.isReady&&t()}setOnError(t){this.onErrorCallback=t}setOnToken(t){this.onTokenCallback=t}setFloatingLabelCallbacks(t,e,i){this.onFieldFocusCallback=t,this.onFieldBlurCallback=e,this.onFieldInputCallback=i}get ready(){return this.isReady}focusField(t){window.Spreedly&&this.isReady&&(window.Spreedly.transferFocus(t),this.logger.debug(`Focusing ${t} field`))}initializeValidationState(){return{number:{isValid:!1,hasError:!1},cvv:{isValid:!1,hasError:!1},month:{isValid:!1,hasError:!1},year:{isValid:!1,hasError:!1}}}findCreditCardFields(){const t=Ri.findField("cc-number")||document.getElementById("spreedly-number");t&&(this.numberField=t,this.labelBehavior.number=t.getAttribute("data-label-behavior"));const e=Ri.findField("cvv")||document.getElementById("spreedly-cvv");e&&(this.cvvField=e,this.labelBehavior.cvv=e.getAttribute("data-label-behavior"));const i=Ri.findField("cc-month")||Ri.findField("exp-month");i&&(this.monthField=i,i instanceof HTMLSelectElement&&i.addEventListener("change",()=>this.checkAndTrackPaymentInfo()));const n=Ri.findField("cc-year")||Ri.findField("exp-year");n&&(this.yearField=n,n instanceof HTMLSelectElement&&n.addEventListener("change",()=>this.checkAndTrackPaymentInfo())),this.logger.debug("Credit card fields found:",{number:!!this.numberField,cvv:!!this.cvvField,month:!!this.monthField,year:!!this.yearField})}loadSpreedlyScript(){return m(this,null,function*(){if(void 0===window.Spreedly)return this.logger.debug("Loading Spreedly script..."),new Promise((t,e)=>{const i=document.createElement("script");i.src="https://core.spreedly.com/iframe/iframe-v1.min.js",i.async=!0,i.onload=()=>{this.logger.debug("Spreedly script loaded"),t()},i.onerror=()=>{this.logger.error("Failed to load Spreedly script"),e(new Error("Failed to load Spreedly script"))},document.head.appendChild(i)});this.logger.debug("Spreedly already loaded")})}setupSpreedly(){var t,e,i,n,s;try{this.numberField&&(this.numberField.id="spreedly-number",this.numberField.setAttribute("data-spreedly","number"),this.numberField.classList.add("spreedly-field-transition")),this.cvvField&&(this.cvvField.id="spreedly-cvv",this.cvvField.setAttribute("data-spreedly","cvv"),this.cvvField.classList.add("spreedly-field-transition"));const a={numberEl:"spreedly-number",cvvEl:"spreedly-cvv"};(null==(t=this.config)?void 0:t.nonce)&&(a.nonce=this.config.nonce),(null==(e=this.config)?void 0:e.timestamp)&&(a.timestamp=this.config.timestamp),(null==(i=this.config)?void 0:i.certificateToken)&&(a.certificateToken=this.config.certificateToken),(null==(n=this.config)?void 0:n.signature)&&(a.signature=this.config.signature),void 0!==(null==(s=this.config)?void 0:s.fraud)&&(a.fraud=this.config.fraud),window.Spreedly.init(this.environmentKey,a),this.setupSpreedlyEventListeners(),this.setupFieldClickHandlers(),this.addFocusStyles(),this.logger.debug("Spreedly setup complete")}catch(a){throw this.logger.error("Error setting up Spreedly:",a),a}}addFocusStyles(){}setupFieldClickHandlers(){this.numberField&&((this.numberField.closest(".frm-flds, .form-group, .form-field, .field-group")||this.numberField).addEventListener("click",t=>{const e=t.target;"INPUT"!==e.tagName&&"SELECT"!==e.tagName&&"TEXTAREA"!==e.tagName&&window.Spreedly&&this.isReady&&(window.Spreedly.transferFocus("number"),this.logger.debug("Transferring focus to credit card number field"))}),this.numberField.addEventListener("click",()=>{window.Spreedly&&this.isReady&&window.Spreedly.transferFocus("number")})),this.cvvField&&((this.cvvField.closest(".frm-flds, .form-group, .form-field, .field-group")||this.cvvField).addEventListener("click",t=>{const e=t.target;"INPUT"!==e.tagName&&"SELECT"!==e.tagName&&"TEXTAREA"!==e.tagName&&window.Spreedly&&this.isReady&&(window.Spreedly.transferFocus("cvv"),this.logger.debug("Transferring focus to CVV field"))}),this.cvvField.addEventListener("click",()=>{window.Spreedly&&this.isReady&&window.Spreedly.transferFocus("cvv")}))}setupSpreedlyEventListeners(){window.Spreedly.on("ready",()=>{this.logger.info("[Spreedly Event: ready] iFrame initialized and ready for configuration"),this.applySpreedlyConfig(),this.isReady=!0,this.onReadyCallback&&this.onReadyCallback()}),window.Spreedly.on("errors",t=>{this.logger.error("[Spreedly Event: errors] Tokenization failed:",t.map(t=>({attribute:t.attribute,key:t.key,message:t.message})));const e=t.map(t=>t.message&&""!==t.message.trim()?t.message:"errors.unexpected_error"===t.key||0===t.status?"Unable to process payment. Please check your internet connection and try again.":"An error occurred processing your payment. Please try again.");this.onErrorCallback&&this.onErrorCallback(e),this.showSpreedlyErrors(t)}),window.Spreedly.on("paymentMethod",(t,e)=>{this.logger.info("[Spreedly Event: paymentMethod] Successfully tokenized!",{token:t,last4:e.last_four_digits,cardType:e.card_type,fingerprint:e.fingerprint}),this.clearAllErrors(),this.onTokenCallback?(this.logger.debug("[Spreedly] Invoking token callback"),this.onTokenCallback(t,e)):this.logger.error("[Spreedly] No onTokenCallback registered!")}),window.Spreedly.on("validation",t=>{this.logger.info("[Spreedly Event: validation] Validation requested:",{cardType:t.cardType,validNumber:t.validNumber,validCvv:t.validCvv,numberLength:t.numberLength,cvvLength:t.cvvLength,iin:t.iin}),void 0!==t.validNumber&&(this.validationState.number.isValid=t.validNumber,this.validationState.number.hasError=!t.validNumber),void 0!==t.validCvv&&(this.validationState.cvv.isValid=t.validCvv,this.validationState.cvv.hasError=!t.validCvv)}),window.Spreedly.on("fieldEvent",(t,e,i,n)=>{this.handleSpreedlyFieldEvent(t,e,n)}),window.Spreedly.on("consoleError",t=>{this.logger.error("[Spreedly Event: consoleError] Error from iFrame:",{message:t.msg,url:t.url,line:t.line,col:t.col})})}applySpreedlyConfig(){var t,e,i,n,s,a,r,o,d,l,c,u,h,p,m,f,g,v,$,y,b,x,w,_,k,S,C,P,E,I,T,A,M;try{const L=(null==(e=null==(t=this.config)?void 0:t.fieldType)?void 0:e.number)||"text",F=(null==(n=null==(i=this.config)?void 0:i.fieldType)?void 0:n.cvv)||"text";window.Spreedly.setFieldType("number",L),window.Spreedly.setFieldType("cvv",F);const D=(null==(s=this.config)?void 0:s.numberFormat)||"prettyFormat";window.Spreedly.setNumberFormat(D),(null==(r=null==(a=this.config)?void 0:a.labels)?void 0:r.number)&&window.Spreedly.setLabel("number",this.config.labels.number),(null==(d=null==(o=this.config)?void 0:o.labels)?void 0:d.cvv)&&window.Spreedly.setLabel("cvv",this.config.labels.cvv),(null==(c=null==(l=this.config)?void 0:l.titles)?void 0:c.number)&&window.Spreedly.setTitle("number",this.config.titles.number),(null==(h=null==(u=this.config)?void 0:u.titles)?void 0:h.cvv)&&window.Spreedly.setTitle("cvv",this.config.titles.cvv),this.originalPlaceholders.number=(null==(m=null==(p=this.config)?void 0:p.placeholders)?void 0:m.number)||"Card Number",this.originalPlaceholders.cvv=(null==(g=null==(f=this.config)?void 0:f.placeholders)?void 0:g.cvv)||"CVV *",window.Spreedly.setPlaceholder("number",this.originalPlaceholders.number),window.Spreedly.setPlaceholder("cvv",this.originalPlaceholders.cvv);const N='color: #212529; font-size: .925rem; font-weight: 400; width: 100%; height:100%; font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";',U=(null==($=null==(v=this.config)?void 0:v.styles)?void 0:$.number)||N,O=(null==(b=null==(y=this.config)?void 0:y.styles)?void 0:b.cvv)||N;window.Spreedly.setStyle("number",U),window.Spreedly.setStyle("cvv",O),(null==(w=null==(x=this.config)?void 0:x.styles)?void 0:w.placeholder)&&window.Spreedly.setStyle("placeholder",this.config.styles.placeholder);const z=!1!==(null==(k=null==(_=this.config)?void 0:_.requiredAttributes)?void 0:k.number),R=!1!==(null==(C=null==(S=this.config)?void 0:S.requiredAttributes)?void 0:C.cvv);z&&window.Spreedly.setRequiredAttribute("number"),R&&window.Spreedly.setRequiredAttribute("cvv"),!1===(null==(P=this.config)?void 0:P.enableAutoComplete)&&window.Spreedly.toggleAutoComplete(),(null==(E=this.config)?void 0:E.allowBlankName)&&window.Spreedly.setParam("allow_blank_name",!0),(null==(I=this.config)?void 0:I.allowExpiredDate)&&window.Spreedly.setParam("allow_expired_date",!0),this.logger.debug("Spreedly configuration applied:",{fieldType:{number:L,cvv:F},numberFormat:D,placeholders:this.originalPlaceholders,requiredAttributes:{number:z,cvv:R},autoComplete:null==(T=this.config)?void 0:T.enableAutoComplete,validationParams:{allowBlankName:null==(A=this.config)?void 0:A.allowBlankName,allowExpiredDate:null==(M=this.config)?void 0:M.allowExpiredDate}})}catch(L){this.logger.error("Error applying Spreedly configuration:",L)}}handleSpreedlyFieldEvent(t,e,i){var n,s;if("focus"===e)this.handleFieldFocus(t),("number"===t||"cvv"===t)&&window.Spreedly&&this.isReady&&"placeholder"===this.labelBehavior[t]&&(window.Spreedly.setPlaceholder(t,""),this.logger.debug(`Cleared placeholder for ${t} field (label floating up)`)),!this.onFieldFocusCallback||"number"!==t&&"cvv"!==t||this.onFieldFocusCallback(t);else if("blur"===e){if(this.handleFieldBlur(t),("number"===t||"cvv"===t)&&window.Spreedly&&this.isReady){const e="number"===t?this.fieldHasValue.number:this.fieldHasValue.cvv;if("placeholder"===this.labelBehavior[t]&&!e){const e=this.originalPlaceholders[t];window.Spreedly.setPlaceholder(t,e),this.logger.debug(`Restored placeholder for ${t} field (label floating down)`)}}if(this.onFieldBlurCallback&&("number"===t||"cvv"===t)){const e="number"===t?this.fieldHasValue.number:this.fieldHasValue.cvv;this.onFieldBlurCallback(t,e)}}if("input"===e){if("number"===t){this.clearCreditCardFieldError("number");const t=At.getState();if(t.clearError("cc-number"),t.clearError("card_number"),i){const t=i.numberLength>0;if(this.fieldHasValue.number=t,window.Spreedly&&this.isReady&&"placeholder"===this.labelBehavior.number&&(t?window.Spreedly.setPlaceholder("number",""):(null==(n=this.numberField)?void 0:n.classList.contains("next-focused"))||window.Spreedly.setPlaceholder("number",this.originalPlaceholders.number)),this.onFieldInputCallback&&this.onFieldInputCallback("number",t),void 0!==i.validNumber){const t=this.validationState.number.isValid;this.validationState.number.isValid=i.validNumber,this.validationState.number.hasError=!i.validNumber,this.numberField&&(i.validNumber?(this.numberField.classList.add("no-error"),this.numberField.classList.remove("has-error","next-error-field")):this.numberField.classList.remove("no-error")),t!==i.validNumber&&this.logger.info(`[Spreedly] Card number validation changed: ${t} -> ${i.validNumber}`)}}}else if("cvv"===t){this.clearCreditCardFieldError("cvv");const t=At.getState();if(t.clearError("cvv"),t.clearError("card_cvv"),i){const t=i.cvvLength>0;if(this.fieldHasValue.cvv=t,window.Spreedly&&this.isReady&&"placeholder"===this.labelBehavior.cvv&&(t?window.Spreedly.setPlaceholder("cvv",""):(null==(s=this.cvvField)?void 0:s.classList.contains("next-focused"))||window.Spreedly.setPlaceholder("cvv",this.originalPlaceholders.cvv)),this.onFieldInputCallback&&this.onFieldInputCallback("cvv",t),void 0!==i.validCvv){const t=this.validationState.cvv.isValid;this.validationState.cvv.isValid=i.validCvv,this.validationState.cvv.hasError=!i.validCvv,this.cvvField&&(i.validCvv?(this.cvvField.classList.add("no-error"),this.cvvField.classList.remove("has-error","next-error-field")):this.cvvField.classList.remove("no-error")),t!==i.validCvv&&this.logger.info(`[Spreedly] CVV validation changed: ${t} -> ${i.validCvv}`)}}}this.checkAndTrackPaymentInfo()}}checkAndTrackPaymentInfo(){if(this.hasTrackedPaymentInfo)return;const t=this.validationState.number.isValid&&this.validationState.cvv.isValid,e=this.monthField instanceof HTMLSelectElement?this.monthField.value:"",i=this.yearField instanceof HTMLSelectElement?this.yearField.value:"";if(t&&e&&i&&""!==e&&""!==i)try{Xe.track(Fe.createAddPaymentInfoEvent("Credit Card")),this.hasTrackedPaymentInfo=!0,this.logger.info("Tracked add_payment_info event - credit card fields complete")}catch(n){this.logger.warn("Failed to track add_payment_info event:",n)}}handleFieldFocus(t){const e="number"===t?this.numberField:"cvv"===t?this.cvvField:null;if(e){e.classList.add("next-focused","has-focus");const i=e.closest(".frm-flds, .form-group, .form-field, .field-group");i&&i.classList.add("next-focused","has-focus");const n=e.closest(".credit-card-field, .form-input-wrapper");n&&n.classList.add("next-focused","has-focus"),this.logger.debug(`Field focused: ${t}`)}}handleFieldBlur(t){const e="number"===t?this.numberField:"cvv"===t?this.cvvField:null;if(e){e.classList.remove("next-focused","has-focus");const i=e.closest(".frm-flds, .form-group, .form-field, .field-group");i&&i.classList.remove("next-focused","has-focus");const n=e.closest(".credit-card-field, .form-input-wrapper");n&&n.classList.remove("next-focused","has-focus"),this.logger.debug(`Field blurred: ${t}`)}}showSpreedlyErrors(t){this.logger.info("[Spreedly] Showing errors:",t);const e=document.querySelector('[data-next-component="credit-error"]');if(e instanceof HTMLElement){const i=e.querySelector('[data-next-component="credit-error-text"]');if(i){const n=t.map(t=>t.message).join(". ");i.textContent=n,e.style.display="flex",e.classList.add("visible"),this.logger.debug("[Spreedly] Error displayed with message:",n),setTimeout(()=>{"flex"===e.style.display&&(e.style.display="none",e.classList.remove("visible"),this.logger.debug("[Spreedly] Error auto-hidden after 10 seconds"))},1e4)}}else this.logger.error("[Spreedly] Could not find error container to display errors");t.forEach(t=>{const e=t.attribute;"number"===e||"card_number"===e?this.setCreditCardFieldError("number",t.message):"cvv"===e&&this.setCreditCardFieldError("cvv",t.message)})}setCreditCardFieldValid(t){this.validationState[t].isValid=!0,this.validationState[t].hasError=!1,delete this.validationState[t].errorMessage;const e=this.getFieldElement(t);if(e){e.classList.remove("has-error","next-error-field"),e.classList.add("no-error");const t=Ri.findFieldWrapper(e);t&&(t.classList.remove("has-error","addErrorIcon"),t.classList.add("addTick"))}}setCreditCardFieldError(t,e){this.validationState[t].isValid=!1,this.validationState[t].hasError=!0,this.validationState[t].errorMessage=e,this.logger.debug(`[Spreedly] Setting error for field: ${t} - ${e}`);let i=null;"number"===t?i='[data-next-checkout-field="cc-number"], #spreedly-number':"cvv"===t?i='[data-next-checkout-field="cvv"], #spreedly-cvv':"month"===t?i='[data-next-checkout-field="cc-month"], [data-next-checkout-field="exp-month"]':"year"===t&&(i='[data-next-checkout-field="cc-year"], [data-next-checkout-field="exp-year"]'),i?document.querySelectorAll(i).forEach(t=>{if(t instanceof HTMLElement){t.classList.remove("no-error"),t.classList.add("has-error","next-error-field");const i=t.closest(".form-group, .frm-flds, .field-group");if(i){i.classList.remove("addTick"),i.classList.add("has-error","addErrorIcon"),i.querySelectorAll(".next-error-label").forEach(t=>t.remove());const t=document.createElement("div");t.className="next-error-label",t.setAttribute("role","alert"),t.setAttribute("aria-live","polite"),t.textContent=e,i.appendChild(t),this.logger.debug(`[Spreedly] Added error label: ${e}`)}}}):this.logger.warn(`[Spreedly] No selector found for field type: ${t}`)}clearCreditCardFieldError(t){this.validationState[t].hasError=!1,delete this.validationState[t].errorMessage,this.logger.debug(`[Spreedly] Clearing error for field: ${t}`);let e=null;"number"===t?e='[data-next-checkout-field="cc-number"], #spreedly-number':"cvv"===t?e='[data-next-checkout-field="cvv"], #spreedly-cvv':"month"===t?e='[data-next-checkout-field="cc-month"], [data-next-checkout-field="exp-month"]':"year"===t&&(e='[data-next-checkout-field="cc-year"], [data-next-checkout-field="exp-year"]'),e?document.querySelectorAll(e).forEach(t=>{if(t instanceof HTMLElement){t.classList.remove("has-error","next-error-field");const e=t.closest(".form-group, .frm-flds, .field-group");e&&(e.classList.remove("has-error","addErrorIcon"),e.querySelectorAll('.next-error-label, .error-message, [role="alert"]').forEach(t=>{this.logger.debug(`[Spreedly] Removing error label: ${t.textContent}`),t.remove()}))}}):this.logger.warn(`[Spreedly] No selector found for field type: ${t}`)}getFieldElement(t){switch(t){case"number":return this.numberField;case"cvv":return this.cvvField;case"month":return this.monthField;case"year":return this.yearField;default:return}}destroy(){this.clearAllErrors(),this.isReady=!1,delete this.onReadyCallback,delete this.onErrorCallback,delete this.onTokenCallback,this.logger.debug("CreditCardService destroyed")}}const ji={wrapperClass:"form-group",errorClass:"next-error-field",errorLabelClass:"next-error-label",successClass:"no-error",iconErrorClass:"addErrorIcon",iconSuccessClass:"addTick"};class Hi{constructor(t={}){this.options=c(c({},ji),t)}showFieldError(t,e){const i=Ri.findFieldWrapper(t);if(!i)return;this.clearFieldError(t),t.classList.add("has-error",this.options.errorClass),t.classList.remove(this.options.successClass),i.classList.add(this.options.iconErrorClass),i.classList.remove(this.options.iconSuccessClass);const n=document.createElement("div");n.className=this.options.errorLabelClass,n.textContent=e,n.setAttribute("role","alert"),n.setAttribute("aria-live","polite");const s=t.closest(`.${this.options.wrapperClass}`);s?s.appendChild(n):i.appendChild(n)}clearFieldError(t){const e=Ri.findFieldWrapper(t);if(t.classList.remove("has-error",this.options.errorClass),e){e.classList.remove(this.options.iconErrorClass);const i=e.querySelector(`.${this.options.errorLabelClass}`);i&&i.remove();const n=t.closest(`.${this.options.wrapperClass}`);if(n){const t=n.querySelector(`.${this.options.errorLabelClass}`);t&&t.remove()}}}showFieldValid(t){const e=Ri.findFieldWrapper(t);this.clearFieldError(t),t.classList.add(this.options.successClass),e&&e.classList.add(this.options.iconSuccessClass)}clearAllErrors(t){t.querySelectorAll(`.${this.options.errorLabelClass}`).forEach(t=>t.remove()),t.querySelectorAll(`.${this.options.errorClass}, .has-error`).forEach(t=>{t.classList.remove("has-error",this.options.errorClass)}),t.querySelectorAll(`.${this.options.iconErrorClass}`).forEach(t=>{t.classList.remove(this.options.iconErrorClass)})}displayErrors(t,e){this.clearAllErrors(e),Object.entries(t).forEach(([t,i])=>{const n=this.findField(t,e);n&&this.showFieldError(n,i)})}findField(t,e){const i=[`[data-next-checkout-field="${t}"]`,`[os-checkout-field="${t}"]`,`[name="${t}"]`,`#${t}`];for(const n of i){const t=e.querySelector(n);if(t)return t}return null}static showToastError(t,e=1e4){const i=document.querySelector('[next-checkout-element="spreedly-error"]');if(!(i instanceof HTMLElement))return;const n=i.querySelector('[data-os-message="error"]');n instanceof HTMLElement&&(n.textContent=t,i.style.display="flex",setTimeout(()=>{"flex"===i.style.display&&(i.style.display="none")},e))}static hideToastError(){const t=document.querySelector('[next-checkout-element="spreedly-error"]');t instanceof HTMLElement&&(t.style.display="none")}}new Hi;const Bi={EMAIL:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/,PHONE:/^[\d\s\-\+\(\)]+$/,NAME:/^[A-Za-zÀ-ÿ]+(?:[' -][A-Za-zÀ-ÿ]+)*$/,CITY:/^[\p{L}\s.''-]+$/u};class Vi{constructor(t,e,i){this.rules=new Map,this.errors=new Map,this.logger=t,this.countryService=e,this.phoneInputManager=i,this.errorManager=new Hi,this.initializeValidationRules()}setCreditCardService(t){this.creditCardService=t}setPhoneValidator(t){this.phoneValidator=t}initializeValidationRules(){const t={type:"required",message:"This field is required"},e={type:"name",message:"Name can only contain letters, spaces, hyphens, and apostrophes"};this.rules.set("email",[t,{type:"email",message:"Please enter a valid email address"}]),this.rules.set("fname",[t,e]),this.rules.set("lname",[t,e]),this.rules.set("address1",[t]),this.rules.set("city",[t,{type:"city",message:"Please enter a valid city name"}]),this.rules.set("postal",[t]),this.rules.set("country",[t]),this.rules.set("phone",[{type:"phone",message:"Please enter a valid phone number"}])}validateField(t,e,i){const n=this.rules.get(t)||[];let s,a=!0;for(const o of n)if(!this.applyRule(o,e,i)){s=o.message||`${this.formatFieldName(t,i)} is invalid`,this.setError(t,s),a=!1;break}a&&this.clearError(t);const r={isValid:a};return void 0!==s&&(r.message=s),r}validateStep(t,e,i,n){return m(this,null,function*(){let s,a=!0;const r={};let o=[];if(1===t){o=["email","fname","lname","country","address1","city","postal"];const t=i.get(e.country);(null==t?void 0:t.stateRequired)&&o.push("province");const n=document.querySelector('[name="phone"]');n&&(n.hasAttribute("required")||"true"===n.dataset.nextRequired)&&o.push("phone")}else if(2===t){o=["email","fname","lname","country","address1","city","postal"];const t=i.get(e.country);(null==t?void 0:t.stateRequired)&&o.push("province")}else if(3===t)return this.validateForm(e,i,n,!0,void 0,!0);if(o.forEach(t=>{e[t]&&""!==e[t].trim()||(r[t]=`${this.formatFieldName(t,n)} is required`,a=!1,s||(s=t))}),e.fname&&e.fname.trim()&&!this.isValidName(e.fname)&&(r.fname="First name can only contain letters, spaces, hyphens, and apostrophes",a=!1,s||(s="fname")),e.lname&&e.lname.trim()&&!this.isValidName(e.lname)&&(r.lname="Last name can only contain letters, spaces, hyphens, and apostrophes",a=!1,s||(s="lname")),e.city&&e.city.trim()&&!this.isValidCity(e.city)&&(r.city="Please enter a valid city name",a=!1,s||(s="city")),e.email&&!this.isValidEmail(e.email)&&(r.email="Please enter a valid email address",a=!1,s||(s="email")),o.includes("phone")&&e.phone){let t=!1;t=this.phoneValidator?this.phoneValidator(e.phone,"shipping"):this.phoneInputManager?this.phoneInputManager.validatePhoneNumber(!0):this.isValidPhone(e.phone),t||(r.phone="Please enter a valid phone number",a=!1,s||(s="phone"))}if(e.postal&&e.country){const t=i.get(e.country);if(t&&!this.countryService.validatePostalCode(e.postal,e.country,t)){const e=t.postcodeExample?`Please enter a valid ${t.postcodeLabel.toLowerCase()} (e.g. ${t.postcodeExample})`:`Please enter a valid ${t.postcodeLabel.toLowerCase()}`;r.postal=e,a=!1,s||(s="postal")}}return{isValid:a,firstErrorField:s,errors:r}})}validateForm(t,e,i,n=!1,s,a=!0){return m(this,null,function*(){let r,o=!0;const d={},l=e.get(t.country),h=["fname","lname","email","address1","city"],p=document.querySelector('[name="phone"]');if(p&&(p.hasAttribute("required")||"true"===p.dataset.nextRequired)&&h.push("phone"),(null==l?void 0:l.stateRequired)&&h.push("province"),h.push("postal","country"),h.forEach(e=>{t[e]&&""!==t[e].trim()||(d[e]=`${this.formatFieldName(e,i)} is required`,o=!1)}),t.fname&&t.fname.trim()&&!this.isValidName(t.fname)&&(d.fname="First name can only contain letters, spaces, hyphens, and apostrophes",o=!1),t.lname&&t.lname.trim()&&!this.isValidName(t.lname)&&(d.lname="Last name can only contain letters, spaces, hyphens, and apostrophes",o=!1),t.city&&t.city.trim()&&!this.isValidCity(t.city)&&(d.city="Please enter a valid city name",o=!1),t.email&&!this.isValidEmail(t.email)&&(d.email="Please enter a valid email address",o=!1),t.phone){let e=!1;if(this.phoneValidator)e=this.phoneValidator(t.phone,"shipping");else if(this.phoneInputManager){e=this.phoneInputManager.validatePhoneNumber(!0);const i=this.phoneInputManager.getFormattedPhoneNumber(!0);i&&(t.phone=i)}else e=this.isValidPhone(t.phone);e||(d.phone="Please enter a valid phone number",o=!1)}if(t.postal&&t.country){const i=e.get(t.country);if(i&&!this.countryService.validatePostalCode(t.postal,t.country,i)){const t=i.postcodeExample?`Please enter a valid ${i.postcodeLabel.toLowerCase()} (e.g. ${i.postcodeExample})`:`Please enter a valid ${i.postcodeLabel.toLowerCase()}`;d.postal=t,o=!1}}if(n){const e=t.paymentMethod||"credit-card";if("credit-card"===e||"card_token"===e){const e={full_name:`${t.fname||""} ${t.lname||""}`.trim(),month:t["exp-month"]||t["cc-month"]||"",year:t["exp-year"]||t["cc-year"]||""};if(this.creditCardService){const t=this.creditCardService.checkSpreedlyFieldsReady();t.hasEmptyFields&&(t.errors.forEach(t=>{const e="number"===t.field?"cc-number":"cvv";d[e]=t.message}),o=!1);const i=this.creditCardService.validateCreditCard(e);!i.isValid&&i.errors&&(Object.entries(i.errors).forEach(([t,e])=>{d[t]=e}),o=!1)}}}if(!a&&s){const t=this.validateBillingAddress(s,e);Object.entries(t.errors).forEach(([t,e])=>{d[{first_name:"billing-fname",last_name:"billing-lname",address1:"billing-address1",city:"billing-city",province:"billing-province",postal:"billing-postal",country:"billing-country",phone:"billing-phone"}[t]||`billing-${t}`]=e}),t.isValid||(o=!1)}return!o&&Object.keys(d).length>0&&(r=this.findFirstErrorFieldInDOM(d)),u(c({isValid:o},r&&{firstErrorField:r}),{errors:d})})}findFirstErrorFieldInDOM(t){const e=Object.keys(t);if(0===e.length)return;const i=[];return e.forEach(t=>{const e=this.findFormField(t);if(e){const n=e.getBoundingClientRect().top+window.scrollY;i.push({name:t,element:e,position:n})}}),i.length>0?(i.sort((t,e)=>t.position-e.position),i[0].name):e[0]}applyRule(t,e,i){var n;switch(t.type){case"required":return null!=e&&""!==e.toString().trim();case"email":return!e||this.isValidEmail(e);case"phone":return!e||(this.phoneInputManager?this.phoneInputManager.validatePhoneNumber(!0):this.isValidPhone(e));case"name":return!e||this.isValidName(e);case"city":return!e||this.isValidCity(e);case"postal":if(!e||!(null==i?void 0:i.country))return!0;const s=null==(n=i.countryConfigs)?void 0:n.get(i.country);return!s||this.countryService.validatePostalCode(e,i.country,s);case"custom":return!t.validator||t.validator(e,i);default:return!0}}isValidEmail(t){if(!Bi.EMAIL.test(t))return!1;if(t.includes(".."))return!1;const[e,i]=t.split("@");if(!e||!i)return!1;if(e.startsWith(".")||e.endsWith(".")||i.startsWith(".")||i.endsWith("."))return!1;const n=i.split("."),s=n[n.length-1];if(!s||s.length<2)return!1;const a=t.toLowerCase();if([/\.c$/,/\.n$/,/\.o$/].some(t=>t.test(a))){const t=i.split("."),e=t[t.length-1];if(e&&1===e.length)return!1}return!0}isValidPhone(t){return Bi.PHONE.test(t)&&t.replace(/\D/g,"").length>=10}isValidName(t){return Bi.NAME.test(t.trim())}isValidCity(t){const e=t.trim();return!!e&&!(e.length<2)&&!/\d/.test(e)&&!/---+/.test(e)&&!/\s{3,}/.test(e)&&!!/^[\p{L}]/u.test(e)&&Bi.CITY.test(e)}formatFieldName(t,e){return{fname:"First name",lname:"Last name",address1:"Address",address2:"Address line 2",city:"City",province:(null==e?void 0:e.stateLabel)||"State/Province",postal:(null==e?void 0:e.postcodeLabel)||"Postal code",country:"Country",email:"Email",phone:"Phone number"}[t]||t}validateBillingAddress(t,e){const i={};let n=!0;const s=["first_name","last_name","address1","city","country"],a=e.get(null==t?void 0:t.country);if((null==a?void 0:a.stateRequired)&&s.push("province"),s.push("postal"),s.forEach(e=>{const s=null==t?void 0:t[e];if(s&&""!==s.trim()){if(("first_name"===e||"last_name"===e)&&s.trim()&&!this.isValidName(s)){const t="first_name"===e?"First name":"Last name";i[e]=`Billing ${t.toLowerCase()} can only contain letters, spaces, hyphens, and apostrophes`,n=!1}}else{const t="first_name"===e?"First name":"last_name"===e?"Last name":"address1"===e?"Address":"city"===e?"City":"province"===e?"State/Province":"postal"===e?"ZIP/Postal code":"country"===e?"Country":e;i[e]=`Billing ${t.toLowerCase()} is required`,n=!1}}),null==t?void 0:t.phone){let e=!1;e=this.phoneValidator?this.phoneValidator(t.phone,"billing"):this.isValidPhone(t.phone),e||(i.phone="Please enter a valid billing phone number",n=!1)}if((null==t?void 0:t.postal)&&(null==t?void 0:t.country)){const s=e.get(t.country);if(s&&!this.countryService.validatePostalCode(t.postal,t.country,s)){const t=s.postcodeExample?`Please enter a valid billing ${s.postcodeLabel.toLowerCase()} (e.g. ${s.postcodeExample})`:`Please enter a valid billing ${s.postcodeLabel.toLowerCase()}`;i.postal=t,n=!1}}return{isValid:n,errors:i}}setError(t,e){this.errors.set(t,e),this.showError(t,e)}clearError(t){this.errors.delete(t),this.hideErrorOnly(t)}clearAllErrors(){this.errors.clear(),document.querySelectorAll("[data-next-checkout-field], [os-checkout-field]").forEach(t=>{const e=t.getAttribute("data-next-checkout-field")||t.getAttribute("os-checkout-field");e&&this.hideErrorOnly(e)}),this.creditCardService&&this.creditCardService.clearAllErrors()}showError(t,e){const i=this.findFormField(t);i?(this.logger.debug(`Showing error for field ${t}:`,{field:i,message:e}),this.errorManager.showFieldError(i,e)):this.logger.warn(`Field not found for error display: ${t}`)}hideErrorOnly(t){const e=this.findFormField(t);e&&this.errorManager.clearFieldError(e)}findFormField(t){return Ri.findField(t)}focusFirstErrorField(t){if(!t)return;if(["cc-month","cc-year","number","cvv","exp-month","exp-year"].includes(t))return void this.focusCreditCardErrorField(t);const e=this.findFormField(t);e&&"focus"in e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{e.focus()},800))}focusCreditCardErrorField(t){if("cc-number"===t||"number"===t)"undefined"!=typeof window&&window.Spreedly&&window.Spreedly.transferFocus("number");else if("cvv"===t)"undefined"!=typeof window&&window.Spreedly&&window.Spreedly.transferFocus("cvv");else{const e=this.findFormField(t);e&&"focus"in e&&e.focus()}}isValid(){return 0===this.errors.size}destroy(){this.clearAllErrors(),this.logger.debug("CheckoutValidator destroyed")}}class Gi{constructor(){this.handlers=new Map,this.bindings=[]}addHandler(t,e,i,n){if(!t)return;this.handlers.has(t)||this.handlers.set(t,new Map);const s=this.handlers.get(t);if(s.has(e)){const i=s.get(e);t.removeEventListener(e,i)}t.addEventListener(e,i,n),s.set(e,i);const a={element:t,event:e,handler:i};void 0!==n&&(a.options=n),this.bindings.push(a)}addHandlers(t){t.forEach(t=>{this.addHandler(t.element,t.event,t.handler,t.options)})}removeHandler(t,e){if(!t)return;const i=this.handlers.get(t);if(!i)return;const n=i.get(e);n&&(t.removeEventListener(e,n),i.delete(e),this.bindings=this.bindings.filter(i=>!(i.element===t&&i.event===e))),0===i.size&&this.handlers.delete(t)}removeElementHandlers(t){const e=this.handlers.get(t);e&&(e.forEach((e,i)=>{t.removeEventListener(i,e)}),this.handlers.delete(t),this.bindings=this.bindings.filter(e=>e.element!==t))}removeAllHandlers(){this.handlers.forEach((t,e)=>{t.forEach((t,i)=>{e.removeEventListener(i,t)})}),this.handlers.clear(),this.bindings=[]}addDelegatedHandler(t,e,i,n){this.addHandler(t,i,i=>{const s=i.target.closest(e);s&&t.contains(s)&&n(i,s)})}addDebouncedHandler(t,e,i,n=300){let s;this.addHandler(t,e,t=>{s&&clearTimeout(s),s=window.setTimeout(()=>{i(t)},n)})}addThrottledHandler(t,e,i,n=300){let s=!1;this.addHandler(t,e,t=>{s||(i(t),s=!0,setTimeout(()=>{s=!1},n))})}addOnceHandler(t,e,i){this.addHandler(t,e,n=>{i(n),this.removeHandler(t,e)})}getActiveBindings(){return[...this.bindings]}hasHandler(t,e){const i=this.handlers.get(t);return!!i&&i.has(e)}}class Ki{constructor(t,e,i,n){this.floatingLabels=new Map,this.loadingStates=new Map,this.lastErrorsString="",this.form=t,this.fields=e,this.logger=i,n&&(this.billingFields=n),this.errorManager=new Hi,this.eventManager=new Gi}initialize(){this.initializeFloatingLabels(),this.logger.debug("UIService initialized")}showLoading(t){this.loadingStates.set(t,!0),this.form.classList.add("next-processing");const e=this.form.querySelector(`[data-section="${t}"]`);e instanceof HTMLElement&&e.classList.add("next-loading"),this.logger.debug(`Showing loading state for section: ${t}`)}hideLoading(t){this.loadingStates.set(t,!1),Array.from(this.loadingStates.values()).some(t=>t)||this.form.classList.remove("next-processing");const e=this.form.querySelector(`[data-section="${t}"]`);e instanceof HTMLElement&&e.classList.remove("next-loading"),this.logger.debug(`Hiding loading state for section: ${t}`)}updateProgress(t){const e=this.form.querySelector(".next-progress-bar");if(e instanceof HTMLElement){const i=e.querySelector(".next-progress-fill");if(i instanceof HTMLElement){const e=Math.min(100,Math.max(0,25*t));i.style.width=`${e}%`,i.setAttribute("aria-valuenow",e.toString())}}this.logger.debug(`Updated progress to step: ${t}`)}displayErrors(t,e){this.errorManager.clearAllErrors(this.form);const i={};Object.entries(t).forEach(([t,e])=>{if("cc-number"===t||"cvv"===t){const e="cc-number"===t?"spreedly-number":"spreedly-cvv",i=document.getElementById(e);if(i&&i.classList.contains("no-error"))return}i[t]=e}),Object.entries(i).forEach(([t,e])=>{let i=this.fields.get(t);!i&&t.startsWith("billing-")&&this.billingFields&&(i=this.billingFields.get(t)),i?this.errorManager.showFieldError(i,e):this.logger.warn(`Field element not found for error: ${t}`)}),e&&this.focusFirstError(e)}focusFirstError(t){let e=this.fields.get(t);if(!e&&t.startsWith("billing-")&&this.billingFields&&(e=this.billingFields.get(t)),!e)return void this.logger.warn(`Field '${t}' not found for scrolling`);const i=(e.closest(".frm-flds")||e).getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:Math.max(0,i),behavior:"smooth"}),(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&setTimeout(()=>{try{e.focus(),e.style.outline="2px solid #ff6b6b",e.style.outlineOffset="2px",setTimeout(()=>{e.style.outline="",e.style.outlineOffset=""},2e3)}catch(t){this.logger.debug("Could not focus field after scroll:",t)}},300),this.logger.debug(`Scrolled to field: ${t}`)}updateFieldState(t,e){let i=this.fields.get(t);if(!i&&t.startsWith("billing-")&&this.billingFields&&(i=this.billingFields.get(t)),i){switch(i.classList.remove("next-error-field","next-valid-field","next-neutral-field"),e){case"valid":i.classList.add("next-valid-field");break;case"invalid":i.classList.add("next-error-field");break;case"neutral":i.classList.add("next-neutral-field")}this.logger.debug(`Updated field ${t} state to: ${e}`)}else this.logger.warn(`Field '${t}' not found for state update`)}handleCheckoutUpdate(t,e){const i=JSON.stringify(t.errors||{});i!==this.lastErrorsString&&(this.lastErrorsString=i,t.errors&&Object.keys(t.errors).length>0?e(t.errors):e({})),t.isProcessing?this.showLoading("checkout"):this.hideLoading("checkout")}handleCartUpdate(t){t.isEmpty&&this.logger.warn("Cart is empty, redirecting to cart page")}initializePaymentForms(){this.logger.debug("Initializing payment forms");const t=At.getState().paymentMethod;this.logger.debug("Payment method from store:",t),this.form.querySelectorAll("[data-next-payment-method]").forEach(e=>{var i;if(e instanceof HTMLElement){const n=e.getAttribute("data-next-payment-method"),s=e.querySelector('input[type="radio"]'),a=e.querySelector("[data-next-payment-form]");if(!(s instanceof HTMLInputElement&&a instanceof HTMLElement))return;const r=n&&(null==(i={credit:["credit-card","card_token"],paypal:["paypal"],"apple-pay":["apple_pay"],"google-pay":["google_pay"],klarna:["klarna"]}[n])?void 0:i.includes(t||""));s.checked=!!r,r?(e.classList.add("next-selected"),a.setAttribute("data-next-payment-state","expanded"),a.classList.add("payment-method__form--expanded"),a.classList.remove("payment-method__form--collapsed"),a.classList.remove("payment-method__form--collapsing"),a.classList.remove("payment-method__form--expanding"),a.style.height="",a.style.overflow="",a.style.transition="",this.logger.debug(`Expanded payment method: ${n} (store: ${t})`)):(e.classList.remove("next-selected"),a.setAttribute("data-next-payment-state","collapsed"),a.classList.add("payment-method__form--collapsed"),a.classList.remove("payment-method__form--expanded"),a.classList.remove("payment-method__form--expanding"),a.classList.remove("payment-method__form--collapsing"),a.style.height="0px",a.style.overflow="hidden",a.style.transition="",this.logger.debug(`Collapsed payment method: ${n}`))}})}updatePaymentFormVisibility(t){this.logger.debug("Updating payment form visibility for method:",t),this.form.querySelectorAll("[data-next-payment-method]").forEach(e=>{if(e instanceof HTMLElement){const i=e.querySelector('input[type="radio"]'),n=e.querySelector("[data-next-payment-form]");if(!(i instanceof HTMLInputElement&&n instanceof HTMLElement))return;if(i&&n){const s=i.value===t;this.logger.debug(`Payment method ${i.value}: ${s?"selected":"not selected"}`),s?(e.classList.add("next-selected"),n.setAttribute("data-next-payment-state","expanded"),this.expandPaymentForm(n),this.clearPaymentFormErrors(n)):(e.classList.remove("next-selected"),n.setAttribute("data-next-payment-state","collapsed"),this.collapsePaymentForm(n),this.clearPaymentFormErrors(n))}}})}expandPaymentForm(t){if(t.classList.contains("payment-method__form--expanded"))return;t.style.overflow="hidden";const e=t.offsetHeight;t.classList.remove("payment-method__form--collapsed"),t.classList.add("payment-method__form--expanding"),t.style.height="auto";const i=t.scrollHeight;t.style.height=e+"px",t.offsetHeight,requestAnimationFrame(()=>{t.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",t.style.height=i+"px",setTimeout(()=>{t.classList.remove("payment-method__form--expanding"),t.classList.add("payment-method__form--expanded"),t.style.height="",t.style.transition="",t.style.overflow=""},300)}),this.logger.debug("Expanded payment form")}collapsePaymentForm(t){if(t.classList.contains("payment-method__form--collapsed"))return;t.style.overflow="hidden";const e=t.scrollHeight;t.classList.remove("payment-method__form--expanded"),t.classList.add("payment-method__form--collapsing"),t.style.height=e+"px",t.offsetHeight,requestAnimationFrame(()=>{t.style.transition="height 0.3s cubic-bezier(0.4, 0, 0.2, 1)",t.style.height="0px",setTimeout(()=>{t.classList.remove("payment-method__form--collapsing"),t.classList.add("payment-method__form--collapsed"),t.style.transition=""},300)}),this.logger.debug("Collapsed payment form")}clearPaymentFormErrors(t){this.errorManager.clearAllErrors(t),t.querySelectorAll("input, select, textarea").forEach(t=>{t.classList.remove("no-error","has-error","next-error-field");const e=t.closest(".form-group");e&&e.classList.remove("addTick","addErrorIcon","has-error");const i=t.closest(".form-input");i&&i.classList.remove("addTick","addErrorIcon")}),this.logger.debug("Cleared payment form errors")}initializeFloatingLabels(){this.logger.debug("Initializing floating labels"),this.form.querySelectorAll(".form-group").forEach(t=>{const e=t.querySelector(".label-checkout"),i=t.querySelector("input[data-next-checkout-field], input[os-checkout-field], select[data-next-checkout-field], select[os-checkout-field]");e instanceof HTMLLabelElement&&(i instanceof HTMLInputElement||i instanceof HTMLSelectElement)&&this.setupFloatingLabel(i,e)}),this.setupSpreedlyFloatingLabels(),this.logger.debug(`Initialized ${this.floatingLabels.size} floating labels`),this.startPeriodicCheck()}setupSpreedlyFloatingLabels(){var t,e;const i=this.form.querySelector('[data-next-checkout-field="cc-number"], #spreedly-number');if(i){const e=null==(t=i.parentElement)?void 0:t.querySelector(".label-checkout");e instanceof HTMLLabelElement&&(this.floatingLabels.set(i,e),this.setupLabelStyles(e),"placeholder"===i.getAttribute("data-label-behavior")&&this.floatLabelDown(e,i),this.logger.debug("Set up Spreedly floating label for credit card number"))}const n=this.form.querySelector('[data-next-checkout-field="cvv"], #spreedly-cvv');if(n){const t=null==(e=n.parentElement)?void 0:e.querySelector(".label-checkout");t instanceof HTMLLabelElement&&(this.floatingLabels.set(n,t),this.setupLabelStyles(t),"placeholder"===n.getAttribute("data-label-behavior")&&this.floatLabelDown(t,n),this.logger.debug("Set up Spreedly floating label for CVV"))}}handleSpreedlyFieldFocus(t){const e="number"===t?"spreedly-number":"spreedly-cvv",i=document.getElementById(e)||this.form.querySelector(`[data-next-checkout-field="${"number"===t?"cc-number":"cvv"}"]`);if(!i)return void this.logger.warn(`Spreedly field not found: ${t}`);const n=this.floatingLabels.get(i);n&&("placeholder"===i.getAttribute("data-label-behavior")&&this.floatLabelUp(n,i,"focus"),this.logger.debug(`Spreedly field focused: ${t}`))}handleSpreedlyFieldBlur(t,e){const i="number"===t?"spreedly-number":"spreedly-cvv",n=document.getElementById(i)||this.form.querySelector(`[data-next-checkout-field="${"number"===t?"cc-number":"cvv"}"]`);if(!n)return void this.logger.warn(`Spreedly field not found: ${t}`);const s=this.floatingLabels.get(n);s&&("placeholder"===n.getAttribute("data-label-behavior")?e||this.floatLabelDown(s,n):e?this.floatLabelUp(s,n):this.floatLabelDown(s,n),this.logger.debug(`Spreedly field blurred: ${t}, hasValue: ${e}`))}handleSpreedlyFieldInput(t,e){const i="number"===t?"spreedly-number":"spreedly-cvv",n=document.getElementById(i)||this.form.querySelector(`[data-next-checkout-field="${"number"===t?"cc-number":"cvv"}"]`);if(!n)return void this.logger.warn(`Spreedly field not found: ${t}`);const s=this.floatingLabels.get(n);if(s){const i=n.getAttribute("data-label-behavior"),a=n.classList.contains("next-focused")||n.classList.contains("has-focus");"placeholder"===i?a||e?this.floatLabelUp(s,n,a?"focus":"value"):this.floatLabelDown(s,n):e?this.floatLabelUp(s,n):this.floatLabelDown(s,n),this.logger.debug(`Spreedly field input: ${t}, hasValue: ${e}`)}}setupFloatingLabel(t,e){if(!e){const i=t.closest(".form-group");if(i){const t=i.querySelector(".label-checkout");t instanceof HTMLLabelElement&&(e=t)}}e?(this.floatingLabels.set(t,e),this.setupLabelStyles(e),this.setupFieldStyles(t),this.updateLabelState(t,e),this.eventManager.addHandler(t,"input",t=>this.handleInput(t)),this.eventManager.addHandler(t,"focus",t=>this.handleFocus(t)),this.eventManager.addHandler(t,"blur",t=>this.handleBlur(t)),this.eventManager.addHandler(t,"change",t=>this.handleInput(t)),this.eventManager.addHandler(t,"animationstart",t=>this.handleAutofill(t)),this.logger.debug("Set up floating label for field:",t.getAttribute("data-next-checkout-field")||t.name)):this.logger.warn("No label found for floating label setup")}setupLabelStyles(t){t.style.transition||(t.style.transition="all 0.15s ease-in-out")}setupFieldStyles(t){const e=t.closest(".form-input");e instanceof HTMLElement&&(e.style.position="relative")}handleInput(t){const e=t.target,i=this.floatingLabels.get(e);i&&this.updateLabelState(e,i)}handleFocus(t){const e=t.target,i=this.floatingLabels.get(e);i&&("placeholder"===e.getAttribute("data-label-behavior")?this.floatLabelUp(i,e,"focus"):this.hasValue(e)&&this.floatLabelUp(i,e))}handleBlur(t){const e=t.target,i=this.floatingLabels.get(e);i&&("placeholder"===e.getAttribute("data-label-behavior")?this.hasValue(e)||this.floatLabelDown(i,e):this.updateLabelState(e,i))}handleAutofill(t){if("autofill"===t.animationName){const e=t.target,i=this.floatingLabels.get(e);i&&setTimeout(()=>{this.updateLabelState(e,i)},100)}}updateLabelState(t,e){if("placeholder"===t.getAttribute("data-label-behavior")){const i=document.activeElement===t;i||this.hasValue(t)?this.floatLabelUp(e,t,i?"focus":"value"):this.floatLabelDown(e,t)}else this.hasValue(t)?this.floatLabelUp(e,t):this.floatLabelDown(e,t)}hasValue(t){var e;return t instanceof HTMLSelectElement?""!==t.value&&t.value!==(null==(e=t.querySelector("option"))?void 0:e.value):""!==t.value.trim()}floatLabelUp(t,e,i="value"){t.classList.contains("has-value")?"focus"!==i||t.classList.contains("is-focused")||t.classList.add("is-focused"):(t.classList.add("has-value"),"focus"===i&&t.classList.add("is-focused"),e.style.paddingTop="14px","placeholder"===e.getAttribute("data-label-behavior")&&e instanceof HTMLInputElement&&(e.setAttribute("data-original-placeholder",e.placeholder||""),e.placeholder=""),this.logger.debug(`Added has-value class for field (${i}):`,e.getAttribute("data-next-checkout-field")||e.name))}floatLabelDown(t,e){if(t.classList.contains("has-value")){if(t.classList.remove("has-value","is-focused"),e.style.paddingTop="","placeholder"===e.getAttribute("data-label-behavior")&&e instanceof HTMLInputElement){const t=e.getAttribute("data-original-placeholder");null!==t&&(e.placeholder=t)}this.logger.debug("Removed has-value class for field:",e.getAttribute("data-next-checkout-field")||e.name)}}startPeriodicCheck(){this.periodicCheckInterval=window.setInterval(()=>{this.checkAllFieldsForChanges()},500)}checkAllFieldsForChanges(){this.floatingLabels.forEach((t,e)=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement)&&this.updateLabelState(e,t)})}updateLabelsForPopulatedData(){this.floatingLabels.forEach((t,e)=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement)&&this.updateLabelState(e,t)}),this.logger.debug("Updated all floating labels for populated data")}handleResponsiveUI(){const t=window.innerWidth<=768,e=window.innerWidth<=1024&&window.innerWidth>768;this.form.classList.toggle("next-mobile",t),this.form.classList.toggle("next-tablet",e),this.form.classList.toggle("next-desktop",!t&&!e),t&&this.floatingLabels.forEach((t,e)=>{e.addEventListener("focus",()=>{this.floatLabelUp(t,e)})}),this.logger.debug("Handled responsive UI adjustments for "+(t?"mobile":e?"tablet":"desktop"))}enhanceAccessibility(){this.fields.forEach((t,e)=>{var i;if(t instanceof HTMLInputElement||t instanceof HTMLSelectElement){const n=null==(i=t.parentElement)?void 0:i.querySelector(".next-error-label");if(n){const i=`${e}-error`;n.id=i,t.setAttribute("aria-describedby",i),t.setAttribute("aria-invalid","true")}else t.removeAttribute("aria-describedby"),t.setAttribute("aria-invalid","false");(t.hasAttribute("required")||"true"===t.getAttribute("data-required"))&&t.setAttribute("aria-required","true")}}),this.logger.debug("Enhanced accessibility features")}destroy(){this.periodicCheckInterval&&(clearInterval(this.periodicCheckInterval),delete this.periodicCheckInterval),this.eventManager.removeAllHandlers(),this.floatingLabels.clear(),this.loadingStates.clear(),this.logger.debug("UIService destroyed")}}class Ji extends ie{constructor(){super(...arguments),this.config={autoCreate:!0,triggerOn:"emailEntry",emailField:"email",includeUtmData:!0,sessionTimeout:30},this.hasTriggered=!1,this.updateTimeout=0}initialize(){return m(this,null,function*(){this.validateElement(),this.logger.info("Initializing ProspectCartEnhancer",{element:this.element.tagName,config:this.config});const t=vt.getState();this.apiClient=new qt(t.apiKey),this.loadConfig(),this.findEmailField(),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.setupTriggers(),this.checkExistingProspectCart(),this.logger.debug("ProspectCartEnhancer initialized",{emailFieldFound:!!this.emailField,triggerOn:this.config.triggerOn,autoCreate:this.config.autoCreate})})}update(t){(null==t?void 0:t.config)&&(this.config=c(c({},this.config),t.config),this.setupTriggers())}loadConfig(){const t=this.getAttribute("data-prospect-config");if(t)try{const e=JSON.parse(t);this.config=c(c({},this.config),e)}catch(e){this.logger.warn("Invalid prospect config JSON:",e)}if(this.hasAttribute("data-auto-create")&&(this.config.autoCreate="false"!==this.getAttribute("data-auto-create")),this.hasAttribute("data-trigger-on")){const t=this.getAttribute("data-trigger-on");!t||"formStart"!==t&&"emailEntry"!==t&&"manual"!==t||(this.config.triggerOn=t)}if(this.hasAttribute("data-email-field")){const t=this.getAttribute("data-email-field");t&&(this.config.emailField=t)}}findEmailField(){const t=['[data-next-checkout-field="email"]','[os-checkout-field="email"]',`input[name="${this.config.emailField}"]`,'input[type="email"]','input[data-field="email"]','input[name*="email"]'];for(const e of t){const t=this.element.querySelector(e);if(t){this.emailField=t,this.logger.debug("Found email field with selector:",e);break}}this.emailField||this.logger.warn("Email field not found for prospect cart")}getFormattedPhoneNumber(){var t,e;const i=this.element.querySelector('[data-next-checkout-field="phone"], [os-checkout-field="phone"], input[name="phone"], input[type="tel"]');if(!i)return"";const n=null==(e=null==(t=window.intlTelInputGlobals)?void 0:t.getInstance)?void 0:e.call(t,i);if(n&&"function"==typeof n.getNumber)try{const t=n.getNumber();if(t)return this.logger.debug("Got E.164 formatted phone from existing instance:",t),t}catch(s){this.logger.warn("Failed to get E.164 formatted phone from existing instance:",s)}return this.logger.debug("Using raw phone value (intlTelInput instance not found)"),i.value||""}setupTriggers(){if(this.config.autoCreate)switch(this.config.triggerOn){case"formStart":this.setupFormStartTrigger();break;case"emailEntry":this.setupEmailEntryTrigger()}}setupFormStartTrigger(){this.element.querySelectorAll("input, select, textarea").forEach(t=>{const e=()=>{this.hasTriggered||(this.createProspectCart(),this.hasTriggered=!0)};t.addEventListener("focus",e,{once:!0}),t.addEventListener("input",e,{once:!0})})}setupEmailEntryTrigger(){if(!this.emailField)return void this.logger.warn("Cannot setup email entry trigger - email field not found");this.logger.debug("Setting up email entry trigger on field:",this.emailField);const t=this.element.querySelector('[data-next-checkout-field="fname"], [os-checkout-field="fname"], input[name="first_name"]'),e=this.element.querySelector('[data-next-checkout-field="lname"], [os-checkout-field="lname"], input[name="last_name"]');let i,n="";const s=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{this.logger.debug("Checking if all required fields are valid for cart creation"),this.checkAndCreateCart()},300)};this.emailField.addEventListener("blur",()=>{var t;const e=this.emailField.value.trim();e!==n&&e.length>0&&(n=e,this.logger.debug("Email blur event processed, value:",e),e.includes("@")&&(null==(t=e.split("@")[1])?void 0:t.includes("."))?s():this.logger.debug("Email appears incomplete, skipping cart creation:",e))}),this.emailField.addEventListener("change",()=>{const t=this.emailField.value.trim();this.isValidEmail(t)&&(this.logger.debug("Valid email detected on change event:",t),s())}),t&&(t.addEventListener("blur",()=>{t.value.trim().length>=2&&(this.logger.debug("First name blur event, checking cart creation"),s())}),t.addEventListener("change",()=>{const e=t.value.trim();this.isValidName(e)&&(this.logger.debug("Valid first name detected on change event:",e),s())})),e&&(e.addEventListener("blur",()=>{e.value.trim().length>=2&&(this.logger.debug("Last name blur event, checking cart creation"),s())}),e.addEventListener("change",()=>{const t=e.value.trim();this.isValidName(t)&&(this.logger.debug("Valid last name detected on change event:",t),s())}))}checkExistingProspectCart(){const t=sessionStorage.getItem("next_prospect_cart");if(t)try{const e=JSON.parse(t);new Date(e.expires_at)>new Date?(this.prospectCart=e,this.logger.debug("Restored existing prospect cart:",e.id)):sessionStorage.removeItem("next_prospect_cart")}catch(e){this.logger.warn("Failed to parse stored prospect cart:",e),sessionStorage.removeItem("next_prospect_cart")}}createProspectCart(){return m(this,null,function*(){var t,e,i,n;if(this.prospectCart)this.logger.debug("Prospect cart already exists");else{this.logger.info("Starting prospect cart creation");try{const r=Et.getState(),o=(null==(t=this.emailField)?void 0:t.value)||"";if(this.logger.debug("Cart state:",{isEmpty:r.isEmpty,itemCount:r.items.length,items:r.items,email:o}),r.isEmpty||0===r.items.length)return void this.logger.warn("No items in cart, skipping prospect cart creation");const d=(null==(e=this.element.querySelector('[data-next-checkout-field="fname"], [os-checkout-field="fname"], input[name="first_name"]'))?void 0:e.value)||"",l=(null==(i=this.element.querySelector('[data-next-checkout-field="lname"], [os-checkout-field="lname"], input[name="last_name"]'))?void 0:i.value)||"",c=this.getFormattedPhoneNumber(),u=this.element.querySelector('[data-next-checkout-field="accepts_marketing"], [os-checkout-field="accepts_marketing"], input[name="accepts_marketing"]'),h=null==(n=null==u?void 0:u.checked)||n,p=Ut.getState().getAttributionForApi();p.metadata&&(p.metadata.landing_page=window.location.href,p.metadata.referrer||(p.metadata.referrer=document.referrer||""),p.metadata.domain||(p.metadata.domain=window.location.hostname),p.metadata.device||(p.metadata.device=navigator.userAgent||""),p.metadata.timestamp=Date.now()),p.funnel&&""!==p.funnel||(p.funnel="CH01");const m={first_name:d,last_name:l,language:"en",accepts_marketing:h};o&&(m.email=o),c&&(m.phone_number=c);const f={lines:r.items.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})),user:m,currency:this.getCurrency()};let g;p&&Object.keys(p).length>0&&(f.attribution=p),this.logger.debug("Creating prospect cart with data:",{hasAddress:!1,hasAttribution:!!f.attribution,attribution:p,userData:f.user,itemCount:f.lines.length});try{g=yield this.apiClient.createCart(f)}catch(s){if(this.logger.warn("Initial prospect cart creation failed, retrying with minimal data:",s),!this.isValidEmail(o))throw s;const t={lines:r.items.map(t=>({package_id:t.packageId,quantity:t.quantity})),user:{email:o,first_name:"",last_name:"",language:"en"},currency:this.getCurrency()};this.logger.info("Retrying prospect cart creation with minimal data (email only)");try{g=yield this.apiClient.createCart(t),this.logger.info("Successfully created prospect cart with minimal data")}catch(a){throw this.logger.error("Failed to create prospect cart even with minimal data:",a),a}}this.prospectCart={id:g.checkout_url||"",prospect_id:g.checkout_url||"",created_at:(new Date).toISOString(),expires_at:new Date(Date.now()+60*(this.config.sessionTimeout||30)*1e3).toISOString(),utm_data:this.collectUtmData(),cart_data:g},o&&(this.prospectCart.email=o),sessionStorage.setItem("next_prospect_cart",JSON.stringify(this.prospectCart)),this.emitProspectEvent("cart-created",{cart:g,prospectCart:this.prospectCart}),this.logger.info("Prospect cart created with checkout URL:",g.checkout_url)}catch(r){this.logger.error("Failed to create prospect cart:",r)}}})}updateProspectCart(){return m(this,null,function*(){this.prospectCart&&this.logger.debug("Prospect cart update skipped - using standard cart API")})}collectUtmData(){const t=new URLSearchParams(window.location.search),e={};["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(i=>{const n=t.get(i);n&&(e[i]=n)});const i=sessionStorage.getItem("next_utm_data");if(i)try{const t=JSON.parse(i);Object.assign(e,t)}catch(n){this.logger.warn("Failed to parse stored UTM data:",n)}return Object.keys(e).length>0&&sessionStorage.setItem("next_utm_data",JSON.stringify(e)),e}getCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}isValidEmail(t){if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?$/.test(t))return!1;if(t.includes(".."))return!1;const[e,i]=t.split("@");if(!e||!i)return!1;if(e.startsWith(".")||e.endsWith(".")||i.startsWith(".")||i.endsWith("."))return!1;const n=i.split("."),s=n[n.length-1];return!(!s||s.length<2)}isValidName(t){return!(!t||0===t.trim().length)&&(!(t.trim().length<2)&&/^[A-Za-zÀ-ÿ]+(?:[' -][A-Za-zÀ-ÿ]+)*$/.test(t.trim()))}handleCartUpdate(t){this.prospectCart&&!t.isEmpty&&(clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout(()=>{this.updateProspectCart()},1e3))}emitProspectEvent(t,e){const i=new CustomEvent(`next:prospect-${t}`,{detail:e,bubbles:!0});this.element.dispatchEvent(i)}createCartManually(){return m(this,null,function*(){return yield this.createProspectCart(),this.prospectCart||null})}getCurrentProspectCart(){return this.prospectCart||null}abandonCart(){return m(this,null,function*(){this.prospectCart&&(this.emitProspectEvent("cart-abandoned",{prospectCart:this.prospectCart}),sessionStorage.removeItem("next_prospect_cart"),this.prospectCart=void 0,this.logger.info("Prospect cart marked as abandoned"))})}convertCart(){return m(this,null,function*(){this.prospectCart&&(this.emitProspectEvent("cart-converted",{prospectCart:this.prospectCart}),sessionStorage.removeItem("next_prospect_cart"),this.prospectCart=void 0,this.logger.info("Prospect cart converted to order"))})}updateEmail(t){this.emailField&&(this.emailField.value=t),this.isValidEmail(t.trim())?this.checkAndCreateCart():this.logger.debug("updateEmail called with invalid email:",t)}checkAndCreateCart(){var t,e,i,n,s,a;const r=(null==(e=null==(t=this.element.querySelector('[data-next-checkout-field="email"], [os-checkout-field="email"], input[type="email"]'))?void 0:t.value)?void 0:e.trim())||"",o=(null==(n=null==(i=this.element.querySelector('[data-next-checkout-field="fname"], [os-checkout-field="fname"], input[name="first_name"]'))?void 0:i.value)?void 0:n.trim())||"",d=(null==(a=null==(s=this.element.querySelector('[data-next-checkout-field="lname"], [os-checkout-field="lname"], input[name="last_name"]'))?void 0:s.value)?void 0:a.trim())||"",l=this.isValidEmail(r),c=this.isValidName(o),u=this.isValidName(d);if(!this.hasTriggered){if(this.logger.debug("Field validation status for cart creation:",{email:{value:r,valid:l},firstName:{value:o,valid:c},lastName:{value:d,valid:u}}),!l||!c||!u)return void 0!==this.updateEmailTimeout&&(clearTimeout(this.updateEmailTimeout),this.updateEmailTimeout=void 0),void(l?c?u||this.logger.debug("Invalid or missing last name, waiting for valid name:",d):this.logger.debug("Invalid or missing first name, waiting for valid name:",o):this.logger.debug("Invalid or incomplete email, skipping cart creation:",r));void 0!==this.updateEmailTimeout&&(clearTimeout(this.updateEmailTimeout),this.updateEmailTimeout=void 0),void 0!==this.emailBlurTimeout&&clearTimeout(this.emailBlurTimeout),void 0!==this.emailInputTimeout&&clearTimeout(this.emailInputTimeout),this.logger.info("All required fields valid (email, fname, lname), creating prospect cart immediately",{email:r,firstName:o,lastName:d}),this.createProspectCart(),this.hasTriggered=!0}}}const Zi={"credit-card":"card_token",card_token:"card_token",paypal:"paypal",apple_pay:"apple_pay",google_pay:"google_pay"},Wi={paypal:"paypal","apple-pay":"apple_pay","google-pay":"google_pay"};class Qi{constructor(t,e,i,n,s){this.logger=t,this.showLoadingCallback=e,this.hideLoadingCallback=i,this.emitCallback=n,this.orderManager=s}handleExpressCheckout(t,e,i,n){return m(this,null,function*(){let n=!1;try{if(this.showLoadingCallback(),i)return this.logger.warn("Cannot checkout with empty cart"),this.emitCallback("express-checkout:error",{method:t,error:"Cart is empty"}),void(n=!0);const a=Wi[t]||t;try{const t={paypal:"PayPal",apple_pay:"Apple Pay",google_pay:"Google Pay"}[a]||a;Xe.track(Fe.createAddPaymentInfoEvent(t)),this.logger.info("Tracked add_payment_info event for express checkout",{paymentType:t})}catch(s){this.logger.warn("Failed to track add_payment_info event:",s)}this.emitCallback("express-checkout:started",{method:a,itemCount:e.length}),this.logger.info(`Express checkout initiated with ${t}`);const r=yield this.orderManager.createExpressOrder(e,a);this.emitCallback("express-checkout:completed",{method:a,order:r}),this.orderManager.handleOrderRedirect(r)}catch(a){if(n=!0,this.logger.error("Express checkout failed:",a),a.responseData){const e=a.responseData;"paypal"===t&&e.payment_details?this.displayPayPalError(e.payment_details):"apple_pay"!==t&&"google_pay"!==t||!e.payment_details||this.displayExpressPaymentError(t,e.payment_details)}throw this.emitCallback("express-checkout:failed",{method:t,error:a instanceof Error?a.message:"Unknown error"}),a}finally{this.hideLoadingCallback(n)}})}displayPayPalError(t){const e=document.querySelector('[data-next-component="paypal-error"]'),i=document.querySelector('[data-next-component="paypal-error-text"]');e instanceof HTMLElement&&i&&(i.textContent=t+" Please try a different payment method.",e.style.display="flex",this.logger.info("PayPal error displayed:",t)),this.displayGeneralPaymentError(t)}displayExpressPaymentError(t,e){const i=`${"apple_pay"===t?"Apple Pay":"Google Pay"} error: ${e}. Please try a different payment method.`;this.displayGeneralPaymentError(i)}displayGeneralPaymentError(t){const e=document.querySelector('[data-next-component="credit-error"]'),i=document.querySelector('[data-next-component="credit-error-text"]');e instanceof HTMLElement&&i&&(i.textContent=t,e.style.display="flex")}}function Yi(){const t=document.querySelector('meta[name="next-success-url"]')||document.querySelector('meta[name="next-next-url"]')||document.querySelector('meta[name="os-next-page"]');if(null==t?void 0:t.content){if(t.content.startsWith("http://")||t.content.startsWith("https://"))return t.content;const e=t.content.startsWith("/")?t.content:"/"+t.content;return window.location.origin+e}return window.location.origin+"/success"}function Xi(){const t=document.querySelector('meta[name="next-failure-url"]')||document.querySelector('meta[name="os-failure-url"]');if(null==t?void 0:t.content){if(t.content.startsWith("http://")||t.content.startsWith("https://"))return t.content;const e=t.content.startsWith("/")?t.content:"/"+t.content;return window.location.origin+e}const e=new URL(window.location.href);return e.searchParams.set("payment_failed","true"),e.href}class tn{getCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}buildOrder(t,e,i,n,s,a=!0,r,o=[]){var d;const l={first_name:t.fname||"",last_name:t.lname||"",line1:t.address1||"",line2:t.address2,line4:t.city||"",state:t.province,postcode:t.postal,country:t.country||"",phone_number:t.phone};let h;!a&&s&&(h=c(c(c(c({first_name:s.first_name||"",last_name:s.last_name||"",line1:s.address1||"",line4:s.city||"",country:s.country||""},s.address2&&{line2:s.address2}),s.province&&{state:s.province}),s.postal&&{postcode:s.postal}),s.phone&&{phone_number:s.phone}));const p=c({payment_method:this.mapPaymentMethod(i)},n&&{card_token:n}),m=Ut.getState().getAttributionForApi();return u(c({lines:e.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})),shipping_address:l},h&&{billing_address:h}),{billing_same_as_shipping_address:a,shipping_method:(null==r?void 0:r.id)||this.getDefaultShippingMethodId(),payment_detail:p,user:{email:t.email,first_name:t.fname||"",last_name:t.lname||"",language:"en",phone_number:t.phone,accepts_marketing:null==(d=t.accepts_marketing)||d},vouchers:o,attribution:m,currency:this.getCurrency(),success_url:Yi(),payment_failed_url:Xi()})}buildExpressOrder(t,e,i=[]){const n=Ut.getState().getAttributionForApi();return{lines:t.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})),payment_detail:{payment_method:e},shipping_method:this.getDefaultShippingMethodId(),vouchers:i,attribution:n,currency:this.getCurrency(),success_url:Yi(),payment_failed_url:Xi()}}buildTestOrder(t,e=[]){return{lines:t.length>0?t.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})):[{package_id:1,quantity:1,is_upsell:!1}],shipping_address:{first_name:"Test",last_name:"Order",line1:"Test Address 123",line2:"",line4:"Tempe",state:"AZ",postcode:"85281",country:"US",phone_number:"+14807581224"},billing_same_as_shipping_address:!0,shipping_method:this.getDefaultShippingMethodId(),payment_detail:{payment_method:"card_token",card_token:"test_card"},user:{email:"test@test.com",first_name:"Test",last_name:"Order",language:"en",phone_number:"+14807581224",accepts_marketing:!0},vouchers:e,attribution:this.getTestAttribution(),currency:this.getCurrency(),success_url:Yi(),payment_failed_url:Xi()}}mapPaymentMethod(t){return Zi[t]||"card_token"}getDefaultShippingMethodId(){var t,e,i;const n=Et.getState(),s=At.getState(),a=lt.getState();if(null==(t=n.shippingMethod)?void 0:t.id)return n.shippingMethod.id;if(null==(e=s.shippingMethod)?void 0:e.id)return s.shippingMethod.id;if((null==(i=a.data)?void 0:i.shipping_methods)&&a.data.shipping_methods.length>0){const t=a.data.shipping_methods[0];if(t)return t.ref_id}return 1}getTestAttribution(){const t=Ut.getState().getAttributionForApi();return u(c({},t),{utm_source:"konami_code",utm_medium:"test",utm_campaign:"debug_test_order",utm_content:"test_mode",metadata:u(c({},t.metadata),{test_order:!0,test_timestamp:Date.now()})})}}class en{constructor(t,e,i){this.apiClient=t,this.logger=e,this.emitCallback=i,this.orderBuilder=new tn}createOrder(t,e,i,n,s){return m(this,arguments,function*(t,e,i,n,s,a=!0,r,o=[]){try{if(!t.email||!t.fname||!t.lname)throw new Error("Missing required customer information");if(0===e.length)throw new Error("Cannot create order with empty cart");if(("credit-card"===i||"card_token"===i)&&!n)throw new Error("Payment token is required for credit card payments");const d=this.orderBuilder.buildOrder(t,e,i,n,s,a,r,o);this.logger.debug("Creating order with data:",u(c({},d),{payment_detail:u(c({},d.payment_detail),{card_token:d.payment_detail.card_token?"MASKED":void 0})}));const l=yield this.apiClient.createOrder(d);if(!l.ref_id)throw new Error("Invalid order response: missing ref_id");return this.logger.info("Order created successfully",{ref_id:l.ref_id,number:l.number,total:l.total_incl_tax,payment_method:i}),l}catch(d){if(this.logger.error("Failed to create order:",d),400===d.status&&d.responseData){const t=d.responseData;if(t.payment_details||t.payment_response_code){this.emitCallback("payment:error",{message:t.payment_details||"Payment failed",code:t.payment_response_code,details:t});let e="Payment failed: ";throw t.payment_details?e+=t.payment_details:e+="Please check your payment information and try again.",new Error(e)}}if(d instanceof Error){if(d.message.includes("Rate limited"))throw new Error("Too many requests. Please wait a moment and try again.");if(d.message.includes("401")||d.message.includes("403"))throw new Error("Authentication error. Please refresh the page and try again.");if(d.message.includes("400"))throw new Error("Invalid order data. Please check your information and try again.");if(d.message.includes("500"))throw new Error("Server error. Please try again in a few moments.")}throw d}})}createExpressOrder(t,e){return m(this,null,function*(){this.logger.info("createExpressOrder called with:",{paymentMethod:e,itemCount:t.length});try{if(0===t.length)throw new Error("Cannot create express order with empty cart");const{useCartStore:i}=yield Promise.resolve().then(()=>It),n=(i.getState().appliedCoupons||[]).map(t=>t.code),s=this.orderBuilder.buildExpressOrder(t,e,n);this.logger.debug("Creating express order with minimal data:",s),this.logger.info("Express order data built");const a=yield this.apiClient.createOrder(s);return this.logger.info("Express order created:",{ref_id:a.ref_id,has_order_status_url:!!a.order_status_url,has_payment_complete_url:!!a.payment_complete_url}),a}catch(i){throw this.logger.error("Failed to create express order:",i),i}})}createTestOrder(t){return m(this,null,function*(){try{const{useCartStore:e}=yield Promise.resolve().then(()=>It),i=(e.getState().appliedCoupons||[]).map(t=>t.code),n=this.orderBuilder.buildTestOrder(t,i);return this.logger.debug("Creating test order with data:",n),yield this.apiClient.createOrder(n)}catch(e){throw this.logger.error("Failed to create test order:",e),e}})}handleOrderRedirect(t){this.logger.info("handleOrderRedirect called with order:",{ref_id:t.ref_id,has_order_status_url:!!t.order_status_url,has_payment_complete_url:!!t.payment_complete_url});try{if(!t.ref_id)return this.logger.error("Cannot redirect: order missing ref_id"),void this.emitCallback("order:redirect-missing",{order:t});!function(t,e,i){let n;if(t.payment_complete_url)e.debug(`Using payment_complete_url from API: ${t.payment_complete_url}`),n=t.payment_complete_url;else{const i=function(t){const e=document.querySelector('meta[name="next-success-url"]')||document.querySelector('meta[name="next-next-url"]')||document.querySelector('meta[name="os-next-page"]');if(!(null==e?void 0:e.content))return null;const i=e.content,n=i.startsWith("http")?new URL(i):new URL(i,window.location.origin);return t&&n.searchParams.append("ref_id",t),n.href}(t.ref_id);i?(e.debug(`Using success URL from meta tag: ${i}`),n=i):t.order_status_url?(e.debug(`Using order_status_url from API: ${t.order_status_url}`),n=t.order_status_url):(e.warn("No order_status_url found in API response - using fallback URL"),n=`${window.location.origin}/checkout/confirmation/?ref_id=${t.ref_id||""}`)}if(n){const t=Ii(n);e.info("Redirecting to:",t),window.location.href=t}else e.error("No redirect URL could be determined"),i("order:redirect-missing",{order:t})}(t,this.logger,this.emitCallback)}catch(e){this.logger.error("Error handling order redirect:",e),this.emitCallback("order:redirect-missing",{order:t})}}handleTokenizedPayment(t,e,i){return m(this,null,function*(){try{if(!t)throw new Error("Payment token is required");this.logger.debug("Handling tokenized payment",{token:t.substring(0,8)+"...",pmData:e?"present":"missing"});const n=yield i();this.emitCallback("order:completed",n),this.handleOrderRedirect(n)}catch(n){throw this.logger.error("Failed to process tokenized payment:",n),n}})}getOrderStatus(t){return m(this,null,function*(){try{return yield this.apiClient.getOrder(t)}catch(e){throw this.logger.error("Failed to get order status:",e),e}})}}var nn,sn,an,rn={exports:{}};const on=g((nn||(nn=1,an=()=>(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,s={};((e,i)=>{for(var n in i)t(e,n,{get:i[n],enumerable:!0})})(s,{Iti:()=>j,default:()=>V});var a=[];for(const c of[["af","93",0,null,"0"],["ax","358",1,["18","4"],"0"],["al","355",0,null,"0"],["dz","213",0,null,"0"],["as","1",5,["684"],"1"],["ad","376"],["ao","244"],["ai","1",6,["264"],"1"],["ag","1",7,["268"],"1"],["ar","54",0,null,"0"],["am","374",0,null,"0"],["aw","297"],["ac","247"],["au","61",0,["4"],"0"],["at","43",0,null,"0"],["az","994",0,null,"0"],["bs","1",8,["242"],"1"],["bh","973"],["bd","880",0,null,"0"],["bb","1",9,["246"],"1"],["by","375",0,null,"8"],["be","32",0,null,"0"],["bz","501"],["bj","229"],["bm","1",10,["441"],"1"],["bt","975"],["bo","591",0,null,"0"],["ba","387",0,null,"0"],["bw","267"],["br","55",0,null,"0"],["io","246"],["vg","1",11,["284"],"1"],["bn","673"],["bg","359",0,null,"0"],["bf","226"],["bi","257"],["kh","855",0,null,"0"],["cm","237"],["ca","1",1,["204","226","236","249","250","257","263","289","306","343","354","365","367","368","382","403","416","418","428","431","437","438","450","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905","942"],"1"],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"],"1"],["cf","236"],["td","235"],["cl","56"],["cn","86",0,null,"0"],["cx","61",2,["4","89164"],"0"],["cc","61",1,["4","89162"],"0"],["co","57",0,null,"0"],["km","269"],["cg","242"],["cd","243",0,null,"0"],["ck","682"],["cr","506"],["ci","225"],["hr","385",0,null,"0"],["cu","53",0,null,"0"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"],"1"],["do","1",2,["809","829","849"],"1"],["ec","593",0,null,"0"],["eg","20",0,null,"0"],["sv","503"],["gq","240"],["er","291",0,null,"0"],["ee","372"],["sz","268"],["et","251",0,null,"0"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0,["4"],"0"],["fr","33",0,null,"0"],["gf","594",0,null,"0"],["pf","689"],["ga","241"],["gm","220"],["ge","995",0,null,"0"],["de","49",0,null,"0"],["gh","233",0,null,"0"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"],"1"],["gp","590",0,null,"0"],["gu","1",15,["671"],"1"],["gt","502"],["gg","44",1,["1481","7781","7839","7911"],"0"],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36",0,null,"06"],["is","354"],["in","91",0,null,"0"],["id","62",0,null,"0"],["ir","98",0,null,"0"],["iq","964",0,null,"0"],["ie","353",0,null,"0"],["im","44",2,["1624","74576","7524","7624","7924"],"0"],["il","972",0,null,"0"],["it","39",0,["3"]],["jm","1",4,["658","876"],"1"],["jp","81",0,null,"0"],["je","44",3,["1534","7509","7700","7797","7829","7937"],"0"],["jo","962",0,null,"0"],["kz","7",1,["33","7"],"8"],["ke","254",0,null,"0"],["ki","686",0,null,"0"],["xk","383",0,null,"0"],["kw","965"],["kg","996",0,null,"0"],["la","856",0,null,"0"],["lv","371"],["lb","961",0,null,"0"],["ls","266"],["lr","231",0,null,"0"],["ly","218",0,null,"0"],["li","423",0,null,"0"],["lt","370",0,null,"0"],["lu","352"],["mo","853"],["mg","261",0,null,"0"],["mw","265",0,null,"0"],["my","60",0,null,"0"],["mv","960"],["ml","223"],["mt","356"],["mh","692",0,null,"1"],["mq","596",0,null,"0"],["mr","222"],["mu","230"],["yt","262",1,["269","639"],"0"],["mx","52"],["fm","691"],["md","373",0,null,"0"],["mc","377",0,null,"0"],["mn","976",0,null,"0"],["me","382",0,null,"0"],["ms","1",16,["664"],"1"],["ma","212",0,["6","7"],"0"],["mz","258"],["mm","95",0,null,"0"],["na","264",0,null,"0"],["nr","674"],["np","977",0,null,"0"],["nl","31",0,null,"0"],["nc","687"],["nz","64",0,null,"0"],["ni","505"],["ne","227"],["ng","234",0,null,"0"],["nu","683"],["nf","672"],["kp","850",0,null,"0"],["mk","389",0,null,"0"],["mp","1",17,["670"],"1"],["no","47",0,["4","9"]],["om","968"],["pk","92",0,null,"0"],["pw","680"],["ps","970",0,null,"0"],["pa","507"],["pg","675"],["py","595",0,null,"0"],["pe","51",0,null,"0"],["ph","63",0,null,"0"],["pl","48"],["pt","351"],["pr","1",3,["787","939"],"1"],["qa","974"],["re","262",0,null,"0"],["ro","40",0,null,"0"],["ru","7",0,["33"],"8"],["rw","250",0,null,"0"],["ws","685"],["sm","378"],["st","239"],["sa","966",0,null,"0"],["sn","221"],["rs","381",0,null,"0"],["sc","248"],["sl","232",0,null,"0"],["sg","65"],["sx","1",21,["721"],"1"],["sk","421",0,null,"0"],["si","386",0,null,"0"],["sb","677"],["so","252",0,null,"0"],["za","27",0,null,"0"],["kr","82",0,null,"0"],["ss","211",0,null,"0"],["es","34"],["lk","94",0,null,"0"],["bl","590",1,null,"0"],["sh","290"],["kn","1",18,["869"],"1"],["lc","1",19,["758"],"1"],["mf","590",2,null,"0"],["pm","508",0,null,"0"],["vc","1",20,["784"],"1"],["sd","249",0,null,"0"],["sr","597"],["sj","47",1,["4","79","9"]],["se","46",0,null,"0"],["ch","41",0,null,"0"],["sy","963",0,null,"0"],["tw","886",0,null,"0"],["tj","992"],["tz","255",0,null,"0"],["th","66",0,null,"0"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"],"1"],["tn","216"],["tr","90",0,null,"0"],["tm","993",0,null,"8"],["tc","1",23,["649"],"1"],["tv","688"],["vi","1",24,["340"],"1"],["ug","256",0,null,"0"],["ua","380",0,null,"0"],["ae","971",0,null,"0"],["gb","44",0,null,"0"],["us","1",0,null,"1"],["uy","598",0,null,"0"],["uz","998"],["vu","678"],["va","39",1,["06698","3"]],["ve","58",0,null,"0"],["vn","84",0,null,"0"],["wf","681"],["eh","212",1,["5288","5289","6","7"],"0"],["ye","967",0,null,"0"],["zm","260",0,null,"0"],["zw","263",0,null,"0"]])a.push({name:"",iso2:c[0],dialCode:c[1],priority:c[2]||0,areaCodes:c[3]||null,nodeById:{},nationalPrefix:c[4]||null,normalisedName:"",initials:"",dialCodePlus:""});var r=a,o=c(c({},{ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe"}),{selectedCountryAriaLabel:"Change country, selected ${countryName} (${dialCode})",noCountrySelected:"Select country",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",clearSearchAriaLabel:"Clear search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"}),d="iti__hide",l="iti__v-hide",u="iti__arrow--up",h="iti__globe",p="iti__flag",m="iti__country",f="iti__highlight",g={ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",SPACE:" ",ENTER:"Enter",ESC:"Escape",TAB:"Tab"},v={ALPHA_UNICODE:new RegExp("\\p{L}","u"),NON_PLUS_NUMERIC:/[^+0-9]/,NON_PLUS_NUMERIC_GLOBAL:/[^+0-9]/g,HIDDEN_SEARCH_CHAR:/^[a-zA-ZÀ-ÿа-яА-Я ]$/},$="polite",y="auto",b="aria-expanded",x="aria-label",w="aria-selected",_="aria-activedescendant",k="aria-haspopup",S="aria-controls",C="aria-hidden",P="aria-autocomplete",E="aria-modal",I=t=>"undefined"!=typeof window&&"function"==typeof window.matchMedia&&window.matchMedia(t).matches,T={allowPhonewords:!1,allowDropdown:!0,autoPlaceholder:$,containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",loadUtils:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:(()=>{if("undefined"!=typeof navigator&&"undefined"!=typeof window){const t=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e=I("(max-width: 500px)"),i=I("(max-height: 600px)"),n=I("(pointer: coarse)");return t||e||n&&i}return!1})(),validationNumberTypes:["MOBILE"]},A=t=>t.replace(/\D/g,""),M=(t="")=>t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),L=t=>Object.keys(t).filter(e=>Boolean(t[e])).join(" "),F=(t,e,i)=>{const n=document.createElement(t);return e&&Object.entries(e).forEach(([t,e])=>n.setAttribute(t,e)),i&&i.appendChild(n),n},D=class{constructor(t,e,i){this.highlightedItem=null,t.dataset.intlTelInputId=i.toString(),this.telInput=t,this.options=e,this.id=i,this.hadInitialPlaceholder=Boolean(t.getAttribute("placeholder")),this.isRTL=!!this.telInput.closest("[dir=rtl]"),this.options.separateDialCode&&(this.originalPaddingLeft=this.telInput.style.paddingLeft)}generateMarkup(t){this.countries=t,this.Ct();const e=this.Pt();this.Et(e),e.appendChild(this.telInput),this.It(),this.Tt(e)}Ct(){var t;this.telInput.classList.add("iti__tel-input"),this.telInput.hasAttribute("autocomplete")||(null==(t=this.telInput.form)?void 0:t.hasAttribute("autocomplete"))||this.telInput.setAttribute("autocomplete","off")}Pt(){const{allowDropdown:t,showFlags:e,containerClass:i,useFullscreenPopup:n}=this.options,s=L({iti:!0,"iti--allow-dropdown":t,"iti--show-flags":e,"iti--inline-dropdown":!n,[i]:Boolean(i)}),a=F("div",{class:s});return this.isRTL&&a.setAttribute("dir","ltr"),this.telInput.before(a),a}Et(t){const{allowDropdown:e,separateDialCode:i,showFlags:n}=this.options;if(e||n||i){this.countryContainer=F("div",{class:`iti__country-container ${l}`},t),e?(this.selectedCountry=F("button",{type:"button",class:"iti__selected-country",[b]:"false",[x]:this.options.i18n.noCountrySelected,[k]:"dialog",[S]:`iti-${this.id}__dropdown-content`},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=F("div",{class:"iti__selected-country"},this.countryContainer);const n=F("div",{class:"iti__selected-country-primary"},this.selectedCountry);this.selectedCountryInner=F("div",{class:p},n),e&&(this.dropdownArrow=F("div",{class:"iti__arrow",[C]:"true"},n)),i&&(this.selectedDialCode=F("div",{class:"iti__selected-dial-code"},this.selectedCountry)),e&&this.At()}}At(){const{fixDropdownWidth:t,useFullscreenPopup:e,countrySearch:i,i18n:n,dropdownContainer:s,containerClass:a}=this.options,r=t?"":"iti--flexible-dropdown-width";if(this.dropdownContent=F("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content ${d} ${r}`,role:"dialog",[E]:"true"}),this.isRTL&&this.dropdownContent.setAttribute("dir","rtl"),i&&this.Mt(),this.countryList=F("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox",[x]:n.countryListAriaLabel},this.dropdownContent),this.Lt(),i&&this.updateSearchResultsA11yText(),s){const t=L({iti:!0,"iti--container":!0,"iti--fullscreen-popup":e,"iti--inline-dropdown":!e,[a]:Boolean(a)});this.dropdown=F("div",{class:t}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}Mt(){const{i18n:t}=this.options,e=F("div",{class:"iti__search-input-wrapper"},this.dropdownContent);this.searchIcon=F("span",{class:"iti__search-icon",[C]:"true"},e),this.searchIcon.innerHTML=`\n  <svg class="iti__search-icon-svg" width="14" height="14" viewBox="0 0 24 24" focusable="false" ${C}="true">\n    <circle cx="11" cy="11" r="7" />\n    <line x1="21" y1="21" x2="16.65" y2="16.65" />\n  </svg>`,this.searchInput=F("input",{id:`iti-${this.id}__search-input`,type:"search",class:"iti__search-input",placeholder:t.searchPlaceholder,role:"combobox",[b]:"true",[x]:t.searchPlaceholder,[S]:`iti-${this.id}__country-listbox`,[P]:"list",autocomplete:"off"},e),this.searchClearButton=F("button",{type:"button",class:`iti__search-clear ${d}`,[x]:t.clearSearchAriaLabel,tabindex:"-1"},e),this.searchClearButton.innerHTML=(()=>{const t=`iti-${this.id}-clear-mask`;return`\n    <svg class="iti__search-clear-svg" width="12" height="12" viewBox="0 0 16 16" ${C}="true" focusable="false">\n      <mask id="${t}" maskUnits="userSpaceOnUse">\n        <rect width="16" height="16" fill="white" />\n        <path d="M5.2 5.2 L10.8 10.8 M10.8 5.2 L5.2 10.8" stroke="black" stroke-linecap="round" class="iti__search-clear-x" />\n      </mask>\n      <circle cx="8" cy="8" r="8" class="iti__search-clear-bg" mask="url(#${t})" />\n    </svg>`})(),this.searchResultsA11yText=F("span",{class:"iti__a11y-text"},this.dropdownContent),this.searchNoResults=F("div",{class:`iti__no-results ${d}`,[C]:"true"},this.dropdownContent),this.searchNoResults.textContent=t.zeroSearchResults}It(){this.countryContainer&&(this.updateInputPadding(),this.countryContainer.classList.remove(l))}Tt(t){var e,i;const{hiddenInput:n}=this.options;if(n){const s=n(this.telInput.getAttribute("name")||"");if(s.phone){const i=null==(e=this.telInput.form)?void 0:e.querySelector(`input[name="${s.phone}"]`);i?this.hiddenInput=i:(this.hiddenInput=F("input",{type:"hidden",name:s.phone}),t.appendChild(this.hiddenInput))}if(s.country){const e=null==(i=this.telInput.form)?void 0:i.querySelector(`input[name="${s.country}"]`);e?this.hiddenInputCountry=e:(this.hiddenInputCountry=F("input",{type:"hidden",name:s.country}),t.appendChild(this.hiddenInputCountry))}}}Lt(){const t=document.createDocumentFragment();for(let e=0;e<this.countries.length;e++){const i=this.countries[e],n=L({[m]:!0,[f]:0===e}),s=F("li",{id:`iti-${this.id}__item-${i.iso2}`,class:n,tabindex:"-1",role:"option",[w]:"false"});s.dataset.dialCode=i.dialCode,s.dataset.countryCode=i.iso2,i.nodeById[this.id]=s,this.options.showFlags&&F("div",{class:`${p} iti__${i.iso2}`},s),F("span",{class:"iti__country-name"},s).textContent=i.name;const a=F("span",{class:"iti__dial-code"},s);this.isRTL&&a.setAttribute("dir","ltr"),a.textContent=`+${i.dialCode}`,t.appendChild(s)}this.countryList.appendChild(t)}updateInputPadding(){if(this.selectedCountry){const t=this.options.separateDialCode?78:42,e=(this.selectedCountry.offsetWidth||this.Ft()||t)+6;this.telInput.style.paddingLeft=`${e}px`}}Ft(){if(this.telInput.parentNode){let e;try{e=window.top.document.body}catch(t){e=document.body}const i=this.telInput.parentNode.cloneNode(!1);i.style.visibility="hidden",e.appendChild(i);const n=this.countryContainer.cloneNode();i.appendChild(n);const s=this.selectedCountry.cloneNode(!0);n.appendChild(s);const a=s.offsetWidth;return e.removeChild(i),a}return 0}updateSearchResultsA11yText(){const{i18n:t}=this.options,e=this.countryList.childElementCount;let i;i=0===e?t.zeroSearchResults:t.searchResultsText?t.searchResultsText(e):1===e?t.oneSearchResult:t.multipleSearchResults.replace("${count}",e.toString()),this.searchResultsA11yText.textContent=i}scrollTo(t){const e=this.countryList,i=document.documentElement.scrollTop,n=e.offsetHeight,s=e.getBoundingClientRect().top+i,a=s+n,r=t.offsetHeight,o=t.getBoundingClientRect().top+i,d=o+r,l=o-s+e.scrollTop;if(o<s)e.scrollTop=l;else if(d>a){const t=n-r;e.scrollTop=l-t}}highlightListItem(t,e){const i=this.highlightedItem;if(i&&(i.classList.remove(f),i.setAttribute(w,"false")),this.highlightedItem=t,this.highlightedItem&&(this.highlightedItem.classList.add(f),this.highlightedItem.setAttribute(w,"true"),this.options.countrySearch)){const t=this.highlightedItem.getAttribute("id")||"";this.searchInput.setAttribute(_,t)}e&&this.highlightedItem.focus()}filterCountries(t){this.countryList.innerHTML="";let e=!0;for(const i of t){const t=i.nodeById[this.id];t&&(this.countryList.appendChild(t),e&&(this.highlightListItem(t,!1),e=!1))}e?(this.highlightListItem(null,!1),this.searchNoResults&&this.searchNoResults.classList.remove(d)):this.searchNoResults&&this.searchNoResults.classList.add(d),this.countryList.scrollTop=0,this.updateSearchResultsA11yText()}destroy(){this.telInput.iti=void 0,delete this.telInput.dataset.intlTelInputId,this.options.separateDialCode&&(this.telInput.style.paddingLeft=this.originalPaddingLeft);const t=this.telInput.parentNode;t.before(this.telInput),t.remove(),this.telInput=null,this.countryContainer=null,this.selectedCountry=null,this.selectedCountryInner=null,this.selectedDialCode=null,this.dropdownArrow=null,this.dropdownContent=null,this.searchInput=null,this.searchIcon=null,this.searchClearButton=null,this.searchNoResults=null,this.searchResultsA11yText=null,this.countryList=null,this.dropdown=null,this.hiddenInput=null,this.hiddenInputCountry=null,this.highlightedItem=null;for(const e of this.countries)delete e.nodeById[this.id];this.countries=null}},N=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],U=t=>{const e=A(t);if(e.startsWith("1")&&e.length>=4){const t=e.substring(1,4);return N.includes(t)}return!1};for(const c of r)c.name=o[c.iso2];var O,z=0,R=new Set(r.map(t=>t.iso2)),q=t=>R.has(t),j=class t{constructor(e,i={}){var n,s;this.id=z++,this.options=c(c({},T),i),n=this.options,s=o,n.useFullscreenPopup&&(n.fixDropdownWidth=!1),1===n.onlyCountries.length&&(n.initialCountry=n.onlyCountries[0]),n.separateDialCode&&(n.nationalMode=!1),!n.allowDropdown||n.showFlags||n.separateDialCode||(n.nationalMode=!1),n.useFullscreenPopup&&!n.dropdownContainer&&(n.dropdownContainer=document.body),n.i18n=c(c({},s),n.i18n),this.ui=new D(e,this.options,this.id),this.isAndroid=t.Dt(),this.promise=this.Nt(),this.countries=(t=>{const{onlyCountries:e,excludeCountries:i}=t;if(e.length){const t=e.map(t=>t.toLowerCase());return r.filter(e=>t.includes(e.iso2))}if(i.length){const t=i.map(t=>t.toLowerCase());return r.filter(e=>!t.includes(e.iso2))}return r})(this.options);const{dialCodes:a,dialCodeMaxLen:d,dialCodeToIso2Map:l}=((t,e)=>{const i=new Set;let n=0;const s={},a=(t,e,i)=>{if(!t||!e)return;e.length>n&&(n=e.length),s.hasOwnProperty(e)||(s[e]=[]);const a=s[e];a.includes(t)||(a[void 0!==i?i:a.length]=t)};for(const r of t){i.has(r.dialCode)||i.add(r.dialCode);for(let t=1;t<r.dialCode.length;t++){const e=r.dialCode.substring(0,t);a(r.iso2,e)}a(r.iso2,r.dialCode,r.priority)}(e.onlyCountries.length||e.excludeCountries.length)&&i.forEach(t=>{s[t]=s[t].filter(Boolean)});for(const r of t)if(r.areaCodes){const t=s[r.dialCode][0];for(const e of r.areaCodes){for(let i=1;i<e.length;i++){const n=e.substring(0,i),s=r.dialCode+n;a(t,s),a(r.iso2,s)}a(r.iso2,r.dialCode+e)}}return{dialCodes:i,dialCodeMaxLen:n,dialCodeToIso2Map:s}})(this.countries,this.options);this.dialCodes=a,this.dialCodeMaxLen=d,this.dialCodeToIso2Map=l,this.countryByIso2=new Map(this.countries.map(t=>[t.iso2,t])),this.p()}static Dt(){return"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent)}Nt(){const t=new Promise((t,e)=>{this.resolveAutoCountryPromise=t,this.rejectAutoCountryPromise=e}),e=new Promise((t,e)=>{this.resolveUtilsScriptPromise=t,this.rejectUtilsScriptPromise=e});return Promise.all([t,e])}p(){this.selectedCountryData={},this.abortController=new AbortController,this.Ut(),this.ui.generateMarkup(this.countries),this.Ot(),this.zt(),this.Rt()}Ut(){var t,e;((t,e)=>{for(const i of t){const t=i.iso2.toLowerCase();e.i18n[t]&&(i.name=e.i18n[t])}})(this.countries,this.options),t=this.countries,(e=this.options).countryOrder&&(e.countryOrder=e.countryOrder.map(t=>t.toLowerCase())),t.sort((t,i)=>{const{countryOrder:n}=e;if(n){const e=n.indexOf(t.iso2),s=n.indexOf(i.iso2),a=e>-1,r=s>-1;if(a||r)return a&&r?e-s:a?-1:1}return t.name.localeCompare(i.name)}),(t=>{for(const e of t)e.normalisedName=M(e.name),e.initials=e.normalisedName.split(/[^a-z]/).map(t=>t[0]).join(""),e.dialCodePlus=`+${e.dialCode}`})(this.countries)}Ot(t=!1){const e=this.ui.telInput.getAttribute("value"),i=this.ui.telInput.value,n=!e||!e.startsWith("+")||i&&i.startsWith("+")?i:e,s=this.qt(n),a=U(n),{initialCountry:r,geoIpLookup:o}=this.options,d=r===y&&o;if(s&&!a)this.jt(n);else if(!d||t){const t=r?r.toLowerCase():"";q(t)?this.Ht(t):s&&a?this.Ht("us"):this.Ht("")}n&&this.Bt(n)}zt(){this.Vt(),this.options.allowDropdown&&this.Gt(),(this.ui.hiddenInput||this.ui.hiddenInputCountry)&&this.ui.telInput.form&&this.Kt()}Kt(){var t;null==(t=this.ui.telInput.form)||t.addEventListener("submit",()=>{this.ui.hiddenInput&&(this.ui.hiddenInput.value=this.getNumber()),this.ui.hiddenInputCountry&&(this.ui.hiddenInputCountry.value=this.selectedCountryData.iso2||"")},{signal:this.abortController.signal})}Gt(){const t=this.abortController.signal,e=this.ui.telInput.closest("label");e&&e.addEventListener("click",t=>{this.ui.dropdownContent.classList.contains(d)?this.ui.telInput.focus():t.preventDefault()},{signal:t}),this.ui.selectedCountry.addEventListener("click",()=>{!this.ui.dropdownContent.classList.contains(d)||this.ui.telInput.disabled||this.ui.telInput.readOnly||this.Jt()},{signal:t}),this.ui.countryContainer.addEventListener("keydown",t=>{this.ui.dropdownContent.classList.contains(d)&&[g.ARROW_UP,g.ARROW_DOWN,g.SPACE,g.ENTER].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),this.Jt()),t.key===g.TAB&&this.Zt()},{signal:t})}Rt(){const{loadUtils:t,initialCountry:e,geoIpLookup:i}=this.options;if(t&&!B.utils){const e=()=>{var e;null==(e=B.attachUtils(t))||e.catch(()=>{})};if(B.documentReady())e();else{const t=()=>{e()};window.addEventListener("load",t,{signal:this.abortController.signal})}}else this.resolveUtilsScriptPromise();e===y&&i&&!this.selectedCountryData.iso2?this.Wt():this.resolveAutoCountryPromise()}Wt(){B.autoCountry?this.handleAutoCountry():B.startedLoadingAutoCountry||(B.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup((t="")=>{const e=t.toLowerCase();q(e)?(B.autoCountry=e,setTimeout(()=>H("handleAutoCountry"))):(this.Ot(!0),H("rejectAutoCountryPromise"))},()=>{this.Ot(!0),H("rejectAutoCountryPromise")}))}Qt(){this.Jt(),this.ui.searchInput.value="+",this.Yt("")}Vt(){this.Xt(),this.te(),this.oe()}Xt(){const{strictMode:t,formatAsYouType:e,separateDialCode:i,allowDropdown:n,countrySearch:s}=this.options;let a=!1;v.ALPHA_UNICODE.test(this.ui.telInput.value)&&(a=!0),this.ui.telInput.addEventListener("input",r=>{if(this.isAndroid&&"+"===(null==r?void 0:r.data)&&i&&n&&s){const t=this.ui.telInput.selectionStart||0,e=this.ui.telInput.value.substring(0,t-1),i=this.ui.telInput.value.substring(t);return this.ui.telInput.value=e+i,void this.Qt()}this.jt(this.ui.telInput.value)&&this.le();const o=(null==r?void 0:r.data)&&v.NON_PLUS_NUMERIC.test(r.data),d="insertFromPaste"===(null==r?void 0:r.inputType)&&this.ui.telInput.value;o||d&&!t?a=!0:v.NON_PLUS_NUMERIC.test(this.ui.telInput.value)||(a=!1);const l=(null==r?void 0:r.detail)&&r.detail.isSetNumber;if(e&&!a&&!l){const t=this.ui.telInput.selectionStart||0,e=this.ui.telInput.value.substring(0,t).replace(v.NON_PLUS_NUMERIC_GLOBAL,"").length,i="deleteContentForward"===(null==r?void 0:r.inputType),n=((t,e,i,n,s)=>{const a=i?i.formatNumberAsYouType(t,n.iso2):t,{dialCode:r}=n;return s&&"+"!==e.charAt(0)&&a.includes(`+${r}`)?(a.split(`+${r}`)[1]||"").trim():a})(this.ce(),this.ui.telInput.value,B.utils,this.selectedCountryData,this.options.separateDialCode),s=((t,e,i,n)=>{if(0===i&&!n)return 0;let s=0;for(let a=0;a<e.length;a++){if(/[+0-9]/.test(e[a])&&s++,s===t&&!n)return a+1;if(n&&s===t+1)return a}return e.length})(e,n,t,i);this.ui.telInput.value=n,this.ui.telInput.setSelectionRange(s,s)}},{signal:this.abortController.signal})}te(){const{strictMode:t,separateDialCode:e,allowDropdown:i,countrySearch:n}=this.options;if(t||e){const s=s=>{if(s.key&&1===s.key.length&&!s.altKey&&!s.ctrlKey&&!s.metaKey){if(e&&i&&n&&"+"===s.key)return s.preventDefault(),void this.Qt();if(t){const t=this.ui.telInput.value,i=!t.startsWith("+")&&0===this.ui.telInput.selectionStart&&"+"===s.key,n=/^[0-9]$/.test(s.key),a=e?n:i||n,r=t.slice(0,this.ui.telInput.selectionStart)+s.key+t.slice(this.ui.telInput.selectionEnd),o=this.ce(r),d=B.utils.getCoreNumber(o,this.selectedCountryData.iso2),l=this.maxCoreNumberLength&&d.length>this.maxCoreNumberLength,c=this.ue(o);a&&(!l||null!==c||i)||s.preventDefault()}}};this.ui.telInput.addEventListener("keydown",s,{signal:this.abortController.signal})}}oe(){if(this.options.strictMode){const t=t=>{t.preventDefault();const e=this.ui.telInput,i=e.selectionStart,n=e.selectionEnd,s=e.value.slice(0,i),a=e.value.slice(n),r=this.selectedCountryData.iso2,o=t.clipboardData.getData("text"),d=0===i&&n>0,l=!e.value.startsWith("+")||d,c=o.replace(v.NON_PLUS_NUMERIC_GLOBAL,""),u=c.startsWith("+"),h=c.replace(/\+/g,""),p=u&&l?`+${h}`:h;let m=s+p+a,f=B.utils.getCoreNumber(m,r);for(;0===f.length&&m.length>0;)m=m.slice(0,-1),f=B.utils.getCoreNumber(m,r);if(!f)return;if(this.maxCoreNumberLength&&f.length>this.maxCoreNumberLength){if(e.selectionEnd!==e.value.length)return;{const t=f.length-this.maxCoreNumberLength;m=m.slice(0,m.length-t)}}e.value=m;const g=i+p.length;e.setSelectionRange(g,g),e.dispatchEvent(new InputEvent("input",{bubbles:!0}))};this.ui.telInput.addEventListener("paste",t,{signal:this.abortController.signal})}}he(t){const e=Number(this.ui.telInput.getAttribute("maxlength"));return e&&t.length>e?t.substring(0,e):t}fe(t,e={}){const i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:e});this.ui.telInput.dispatchEvent(i)}Jt(){const{fixDropdownWidth:t,countrySearch:e}=this.options;if(this.dropdownAbortController=new AbortController,t&&(this.ui.dropdownContent.style.width=`${this.ui.telInput.offsetWidth}px`),this.ui.dropdownContent.classList.remove(d),this.ui.selectedCountry.setAttribute(b,"true"),this.$e(),e){const t=this.ui.countryList.firstElementChild;t&&(this.ui.highlightListItem(t,!1),this.ui.countryList.scrollTop=0),this.ui.searchInput.focus()}this.xe(),this.ui.dropdownArrow.classList.add(u),this.fe("open:countrydropdown")}$e(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.ui.dropdown),!this.options.useFullscreenPopup){const t=this.ui.telInput.getBoundingClientRect(),e=this.ui.telInput.offsetHeight;if(this.options.dropdownContainer){this.ui.dropdown.style.top=`${t.top+e}px`,this.ui.dropdown.style.left=`${t.left}px`;const i=()=>this.Zt();window.addEventListener("scroll",i,{signal:this.dropdownAbortController.signal})}}}xe(){const t=this.dropdownAbortController.signal;this.we(t),this._e(t),this.Se(t),this.Ce(t),this.options.countrySearch&&this.Pe(t)}we(t){this.ui.countryList.addEventListener("mouseover",t=>{var e;const i=null==(e=t.target)?void 0:e.closest(`.${m}`);i&&this.ui.highlightListItem(i,!1)},{signal:t})}_e(t){this.ui.countryList.addEventListener("click",t=>{var e;const i=null==(e=t.target)?void 0:e.closest(`.${m}`);i&&this.Ee(i)},{signal:t})}Se(t){const e=t=>{t.target.closest(`#iti-${this.id}__dropdown-content`)||this.Zt()};setTimeout(()=>{document.documentElement.addEventListener("click",e,{signal:t})},0)}Ce(t){let e="",i=null;document.addEventListener("keydown",t=>{[g.ARROW_UP,g.ARROW_DOWN,g.ENTER,g.ESC].includes(t.key)&&(t.preventDefault(),t.stopPropagation(),t.key===g.ARROW_UP||t.key===g.ARROW_DOWN?this.Ie(t.key):t.key===g.ENTER?this.Te():t.key===g.ESC&&this.Zt()),!this.options.countrySearch&&v.HIDDEN_SEARCH_CHAR.test(t.key)&&(t.stopPropagation(),i&&clearTimeout(i),e+=t.key.toLowerCase(),this.Ae(e),i=setTimeout(()=>{e=""},1e3))},{signal:t})}Pe(t){const e=()=>{const t=this.ui.searchInput.value.trim();this.Yt(t),this.ui.searchInput.value?this.ui.searchClearButton.classList.remove(d):this.ui.searchClearButton.classList.add(d)};let i=null;this.ui.searchInput.addEventListener("input",()=>{i&&clearTimeout(i),i=setTimeout(()=>{e(),i=null},100)},{signal:t}),this.ui.searchClearButton.addEventListener("click",()=>{this.ui.searchInput.value="",this.ui.searchInput.focus(),e()},{signal:t})}Ae(t){const e=((t,e)=>{const i=e.toLowerCase();for(const n of t)if(n.name.toLowerCase().startsWith(i))return n;return null})(this.countries,t);if(e){const t=e.nodeById[this.id];this.ui.highlightListItem(t,!1),this.ui.scrollTo(t)}}Yt(t){let e;e=""===t?this.countries:((t,e)=>{const i=M(e),n=[],s=[],a=[],r=[],o=[],d=[];for(const c of t)c.iso2===i?n.push(c):c.normalisedName.startsWith(i)?s.push(c):c.normalisedName.includes(i)?a.push(c):i===c.dialCode||i===c.dialCodePlus?r.push(c):c.dialCodePlus.includes(i)?o.push(c):c.initials.includes(i)&&d.push(c);const l=(t,e)=>t.priority-e.priority;return[...n.sort(l),...s.sort(l),...a.sort(l),...r.sort(l),...o.sort(l),...d.sort(l)]})(this.countries,t),this.ui.filterCountries(e)}Ie(t){var e,i;let n=t===g.ARROW_UP?null==(e=this.ui.highlightedItem)?void 0:e.previousElementSibling:null==(i=this.ui.highlightedItem)?void 0:i.nextElementSibling;!n&&this.ui.countryList.childElementCount>1&&(n=t===g.ARROW_UP?this.ui.countryList.lastElementChild:this.ui.countryList.firstElementChild),n&&(this.ui.scrollTo(n),this.ui.highlightListItem(n,!1))}Te(){this.ui.highlightedItem&&this.Ee(this.ui.highlightedItem)}Bt(t){let e=t;if(this.options.formatOnDisplay&&B.utils&&this.selectedCountryData){const t=this.options.nationalMode||!e.startsWith("+")&&!this.options.separateDialCode,{NATIONAL:i,INTERNATIONAL:n}=B.utils.numberFormat,s=t?i:n;e=B.utils.formatNumber(e,this.selectedCountryData.iso2,s)}e=this.Me(e),this.ui.telInput.value=e}jt(t){const e=this.ue(t);return null!==e&&this.Ht(e)}Le(t){const{dialCode:e,nationalPrefix:i}=this.selectedCountryData;return t.startsWith("+")||!e?t:`+${e}${i&&t.startsWith(i)&&!this.options.separateDialCode?t.substring(1):t}`}ue(t){const e=t.indexOf("+");let i=e?t.substring(e):t;const n=this.selectedCountryData.iso2,s=this.selectedCountryData.dialCode;i=this.Le(i);const a=this.qt(i,!0),r=A(i);if(a){const t=A(a),e=this.dialCodeToIso2Map[t];if(1===e.length)return e[0]===n?null:e[0];if(!n&&this.defaultCountry&&e.includes(this.defaultCountry))return this.defaultCountry;if("1"===s&&U(r))return null;const{areaCodes:i,priority:o}=this.selectedCountryData;if(i){const t=i.map(t=>`${s}${t}`);for(const e of t)if(r.startsWith(e))return null}const d=i&&!(0===o)&&r.length>t.length,l=n&&e.includes(n)&&!d,c=n===e[0];if(!l&&!c)return e[0]}else{if(i.startsWith("+")&&r.length)return"";if(!(i&&"+"!==i||n))return this.defaultCountry}return null}Ht(t){const{separateDialCode:e,showFlags:i,i18n:n}=this.options,s=this.selectedCountryData.iso2||"";if(this.selectedCountryData=t?this.countryByIso2.get(t):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.ui.selectedCountry){const e=t&&i?`${p} iti__${t}`:`${p} ${h}`;let s,a;if(t){const{name:t,dialCode:e}=this.selectedCountryData;a=t,s=n.selectedCountryAriaLabel.replace("${countryName}",t).replace("${dialCode}",`+${e}`)}else a=n.noCountrySelected,s=n.noCountrySelected;this.ui.selectedCountryInner.className=e,this.ui.selectedCountry.setAttribute("title",a),this.ui.selectedCountry.setAttribute(x,s)}if(e){const t=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.ui.selectedDialCode.textContent=t,this.ui.updateInputPadding()}return this.Fe(),this.De(),s!==t}De(){const{strictMode:t,placeholderNumberType:e,validationNumberTypes:i}=this.options,{iso2:n}=this.selectedCountryData;if(t&&B.utils)if(n){const t=B.utils.numberType[e];let s=B.utils.getExampleNumber(n,!1,t,!0),a=s;for(;B.utils.isPossibleNumber(s,n,i);)a=s,s+="0";const r=B.utils.getCoreNumber(a,n);this.maxCoreNumberLength=r.length,"by"===n&&(this.maxCoreNumberLength=r.length+1)}else this.maxCoreNumberLength=null}Fe(){const{autoPlaceholder:t,placeholderNumberType:e,nationalMode:i,customPlaceholder:n}=this.options,s="aggressive"===t||!this.ui.hadInitialPlaceholder&&t===$;if(B.utils&&s){const t=B.utils.numberType[e];let s=this.selectedCountryData.iso2?B.utils.getExampleNumber(this.selectedCountryData.iso2,i,t):"";s=this.Me(s),"function"==typeof n&&(s=n(s,this.selectedCountryData)),this.ui.telInput.setAttribute("placeholder",s)}}Ee(t){const e=t.dataset.countryCode,i=this.Ht(e);this.Zt();const n=t.dataset.dialCode;this.Ne(n),this.options.formatOnDisplay&&this.Bt(this.ui.telInput.value),this.ui.telInput.focus(),i&&this.le()}Zt(){this.ui.dropdownContent.classList.contains(d)||(this.ui.dropdownContent.classList.add(d),this.ui.selectedCountry.setAttribute(b,"false"),this.ui.highlightedItem&&this.ui.highlightedItem.setAttribute(w,"false"),this.options.countrySearch&&this.ui.searchInput.removeAttribute(_),this.ui.dropdownArrow.classList.remove(u),this.dropdownAbortController.abort(),this.dropdownAbortController=null,this.options.dropdownContainer&&this.ui.dropdown.remove(),this.fe("close:countrydropdown"))}Ne(t){const e=this.ui.telInput.value,i=`+${t}`;let n;if(e.startsWith("+")){const t=this.qt(e);n=t?e.replace(t,i):i,this.ui.telInput.value=n}}qt(t,e){let i="";if(t.startsWith("+")){let n="";for(let s=0;s<t.length;s++){const a=t.charAt(s);if(/[0-9]/.test(a)){if(n+=a,!Boolean(this.dialCodeToIso2Map[n]))break;if(e)i=t.substring(0,s+1);else if(this.dialCodes.has(n)){i=t.substring(0,s+1);break}if(n.length===this.dialCodeMaxLen)break}}}return i}ce(t){const e=t||this.ui.telInput.value.trim(),{dialCode:i}=this.selectedCountryData;let n;const s=A(e);return n=this.options.separateDialCode&&!e.startsWith("+")&&i&&s?`+${i}`:"",n+e}Me(t){const e=((t,e,i,n)=>{let s=t;if(i&&e){const t=" "===s[(e=`+${n.dialCode}`).length]||"-"===s[e.length]?e.length+1:e.length;s=s.substring(t)}return s})(t,this.qt(t),this.options.separateDialCode,this.selectedCountryData);return this.he(e)}le(){this.fe("countrychange")}handleAutoCountry(){this.options.initialCountry===y&&B.autoCountry&&(this.defaultCountry=B.autoCountry,this.selectedCountryData.iso2||this.ui.selectedCountryInner.classList.contains(h)||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){B.utils&&(this.ui.telInput.value&&this.Bt(this.ui.telInput.value),this.selectedCountryData.iso2&&(this.Fe(),this.De())),this.resolveUtilsScriptPromise()}destroy(){this.ui.telInput&&(this.options.allowDropdown&&this.Zt(),this.abortController.abort(),this.abortController=null,this.ui.destroy(),B.instances instanceof Map?B.instances.delete(this.id):delete B.instances[this.id])}getExtension(){return B.utils?B.utils.getExtension(this.ce(),this.selectedCountryData.iso2):""}getNumber(t){if(B.utils){const{iso2:e}=this.selectedCountryData;return B.utils.formatNumber(this.ce(),e,t)}return""}getNumberType(){return B.utils?B.utils.getNumberType(this.ce(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(B.utils){const{iso2:t}=this.selectedCountryData;return B.utils.getValidationError(this.ce(),t)}return-99}isValidNumber(){const{dialCode:t,iso2:e}=this.selectedCountryData;if("44"===t&&B.utils){const t=this.ce(),i=B.utils.getCoreNumber(t,e);if("7"===i[0]&&10!==i.length)return!1}return this.Ue(!1)}isValidNumberPrecise(){return this.Ue(!0)}Oe(t){return B.utils?B.utils.isPossibleNumber(t,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}Ue(t){if(!B.utils)return null;if(!this.selectedCountryData.iso2)return!1;const e=e=>t?this.ze(e):this.Oe(e),i=this.ce(),n=i.search(v.ALPHA_UNICODE);if(n>-1&&!this.options.allowPhonewords){const t=e(i.substring(0,n)),s=e(i);return t&&s}return e(i)}ze(t){return B.utils?B.utils.isValidNumber(t,this.selectedCountryData.iso2,this.options.validationNumberTypes):null}setCountry(t){const e=null==t?void 0:t.toLowerCase();if(!q(e))throw new Error(`Invalid country code: '${e}'`);const i=this.selectedCountryData.iso2;(t&&e!==i||!t&&i)&&(this.Ht(e),this.Ne(this.selectedCountryData.dialCode),this.options.formatOnDisplay&&this.Bt(this.ui.telInput.value),this.le())}setNumber(t){const e=this.jt(t);this.Bt(t),e&&this.le(),this.fe("input",{isSetNumber:!0})}setPlaceholderNumberType(t){this.options.placeholderNumberType=t,this.Fe()}setDisabled(t){this.ui.telInput.disabled=t,t?this.ui.selectedCountry.setAttribute("disabled","true"):this.ui.selectedCountry.removeAttribute("disabled")}},H=(t,...e)=>{Object.values(B.instances).forEach(i=>{const n=i[t];"function"==typeof n&&n.apply(i,e)})},B=Object.assign((t,e)=>{const i=new j(t,e);return B.instances[i.id]=i,t.iti=i,i},{defaults:T,documentReady:()=>"complete"===document.readyState,getCountryData:()=>r,getInstance:t=>{const e=t.dataset.intlTelInputId;return e?B.instances[e]:null},instances:{},attachUtils:t=>{if(!B.utils&&!B.startedLoadingUtilsScript){let i;if("function"!=typeof t)return Promise.reject(new TypeError("The argument passed to attachUtils must be a function that returns a promise for the utilities module, not "+typeof t));try{i=Promise.resolve(t())}catch(e){return Promise.reject(e)}return B.startedLoadingUtilsScript=!0,i.then(t=>{const e=null==t?void 0:t.default;if(!e||"object"!=typeof e)throw new TypeError("The loader function passed to attachUtils did not resolve to a module object with utils as its default export.");return B.utils=e,H("handleUtils"),!0}).catch(t=>{throw H("rejectUtilsScriptPromise",t),t})}return null},startedLoadingUtilsScript:!1,startedLoadingAutoCountry:!1,version:"25.11.3"}),V=B;return O=s,((s,a,r,o)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let d of i(a))n.call(s,d)||undefined===d||t(s,d,{get:()=>a[d],enumerable:!(o=e(a,d))||o.enumerable});return s})(t({},"__esModule",{value:!0}),O)})().default,(sn=rn).exports?sn.exports=an():window.intlTelInput=an()),rn.exports)),dn=["[data-next-checkout-field]","[os-checkout-field]"],ln='[os-checkout-element="different-billing-address"], [data-next-component="different-billing-address"]',cn={credit:"credit-card",paypal:"paypal","apple-pay":"apple_pay","google-pay":"google_pay",klarna:"klarna"},un={"credit-card":"card_token",card_token:"card_token",paypal:"paypal",apple_pay:"apple_pay",google_pay:"google_pay",klarna:"klarna"},hn={fname:"first_name",lname:"last_name",address1:"address1",address2:"address2",city:"city",province:"province",postal:"postal",country:"country",phone:"phone"},pn=Object.freeze(Object.defineProperty({__proto__:null,CheckoutFormEnhancer:class extends ie{constructor(t){super(t),this.stateLoadingPromises=new Map,this.fields=new Map,this.billingFields=new Map,this.paymentButtons=new Map,this.countries=[],this.countryConfigs=new Map,this.detectedCountryCode="US",this.phoneInputs=new Map,this.isIntlTelInputAvailable=!1,this.googleMapsLoaded=!1,this.googleMapsLoading=!1,this.googleMapsLoadPromise=null,this.autocompleteInstances=new Map,this.enableAutocomplete=!0,this.locationElements=null,this.billingLocationElements=null,this.locationFieldsShown=!1,this.billingLocationFieldsShown=!1,this.billingAnimationInProgress=!1,this.billingAnimationTimeouts=new Set,this.hasTrackedShippingInfo=!1,this.hasTrackedBeginCheckout=!1,this.isMultiStep=!1,this.currentStep=1,this.autocompleteListenersAttached=!1,this.loadingOverlay=new Mi}initialize(){return m(this,null,function*(){if(this.validateElement(),!(this.element instanceof HTMLFormElement))throw new Error("CheckoutFormEnhancer must be applied to a form element");this.form=this.element,this.form.noValidate=!0,this.injectIntlTelInputStyles(),this.detectMultiStepCheckout(),this.loadingOverlay=new Mi;const t=vt.getState();this.apiClient=new qt(t.apiKey),this.countryService=Wt.getInstance();const e=Ut.getState();yield e.initialize(),this.orderManager=new en(this.apiClient,this.logger,(t,e)=>this.emit(t,e)),this.expressProcessor=new Qi(this.logger,()=>this.loadingOverlay.show(),t=>this.loadingOverlay.hide(t),(t,e)=>this.emit(t,e),this.orderManager),this.isIntlTelInputAvailable=!0,this.validator=new Vi(this.logger,this.countryService,void 0),this.scanAllFields(),this.setupBillingForm()&&this.scanBillingFields(),this.ui=new Ki(this.form,this.fields,this.logger,this.billingFields),this.ui.initialize(),this.ui.initializePaymentForms(),t.spreedlyEnvironmentKey&&(yield this.initializeCreditCard(t.spreedlyEnvironmentKey,t.debug)),yield this.initializeAddressManagement(t),this.initializePhoneInputs(),yield this.initializeAddressAutocomplete(),this.validator.setPhoneValidator((t,e="shipping")=>{const i=this.phoneInputs.get(e);return i?i.isValidNumber():/^[\d\s\-\+\(\)]+$/.test(t)}),this.populateExpirationFields(),this.setupEventHandlers(),this.subscribe(At,this.handleCheckoutUpdate.bind(this)),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.subscribe(vt,this.handleConfigUpdate.bind(this)),this.boundHandleTestDataFilled=this.handleTestDataFilled.bind(this),this.boundHandleKonamiActivation=this.handleKonamiActivation.bind(this),document.addEventListener("checkout:test-data-filled",this.boundHandleTestDataFilled),document.addEventListener("next:test-mode-activated",this.boundHandleKonamiActivation),yield this.populateFormData(),this.initializeLocationFieldVisibility(),yield this.initializeProspectCart(),this.eventBus.on("payment:error",t=>{t.message&&this.displayPaymentError(t.message)}),document.addEventListener("next:country-changed",t=>m(this,null,function*(){const e=t,{to:i}=e.detail;i&&(yield this.handleCountryChange(i))})),window.addEventListener("pageshow",e=>{var i;if(e.persisted||"back_forward"===(null==(i=performance.getEntriesByType("navigation")[0])?void 0:i.type)){this.logger.info("Page restored from bfcache, resetting express checkout state"),this.loadingOverlay.hide(!0);const e=At.getState();e.isProcessing&&(this.logger.info("Resetting processing state after bfcache restore"),e.setProcessing(!1)),"apple_pay"!==e.paymentMethod&&"google_pay"!==e.paymentMethod&&"paypal"!==e.paymentMethod||(this.logger.info("Resetting payment method from",e.paymentMethod,"to credit-card after bfcache restore"),e.setPaymentMethod("credit-card"),e.setPaymentToken("")),this.creditCardService&&t.spreedlyEnvironmentKey&&(this.logger.info("Re-initializing credit card service after bfcache restore"),this.creditCardService.initialize().catch(t=>{this.logger.error("Failed to re-initialize credit card service:",t)})),this.handlePurchaseEvent()}}),window.addEventListener("focus",()=>{const t=At.getState();t.isProcessing&&(this.logger.info("Window focused with processing=true, resetting express checkout state"),this.loadingOverlay.hide(!0),t.setProcessing(!1),"apple_pay"!==t.paymentMethod&&"google_pay"!==t.paymentMethod&&"paypal"!==t.paymentMethod||(this.logger.info("Resetting payment method from",t.paymentMethod,"to credit-card"),t.setPaymentMethod("credit-card"),t.setPaymentToken("")))}),this.handlePurchaseEvent(),setTimeout(()=>{this.trackBeginCheckout()},500),this.logger.debug("CheckoutFormEnhancer initialized"),this.emit("checkout:form-initialized",{form:this.form})})}scanAllFields(){dn.forEach(t=>{this.form.querySelectorAll(t).forEach(e=>{const i=e.getAttribute(t.includes("data-next")?"data-next-checkout-field":"os-checkout-field");i&&e instanceof HTMLElement&&this.fields.set(i,e)})});const t=this.form.querySelector('button[type="submit"]')||this.form.querySelector("[data-next-checkout-submit]")||this.form.querySelector("[os-checkout-submit]");t instanceof HTMLButtonElement?(this.submitButton=t,this.logger.debug("Found submit button:",t)):this.logger.warn("Submit button not found in checkout form"),["[data-next-checkout-payment]","[os-checkout-payment]"].forEach(t=>{document.querySelectorAll(t).forEach(e=>{const i=e.getAttribute(t.includes("data-next")?"data-next-checkout-payment":"os-checkout-payment");i&&e instanceof HTMLElement&&this.paymentButtons.set(i,e)})}),this.scanExpirationFields()}scanBillingFields(){['[os-checkout-field^="billing-"]','[data-next-checkout-field^="billing-"]'].forEach(t=>{document.querySelectorAll(t).forEach(t=>{const e=t.getAttribute("os-checkout-field")||t.getAttribute("data-next-checkout-field");e&&t instanceof HTMLElement&&this.billingFields.set(e,t)})})}scanExpirationFields(){const t=['[data-next-checkout-field="cc-month"]','[data-next-checkout-field="exp-month"]','[os-checkout-field="cc-month"]','[os-checkout-field="exp-month"]',"#credit_card_exp_month"].map(t=>document.querySelector(t)).find(t=>null!==t),e=['[data-next-checkout-field="cc-year"]','[data-next-checkout-field="exp-year"]','[os-checkout-field="cc-year"]','[os-checkout-field="exp-year"]',"#credit_card_exp_year"].map(t=>document.querySelector(t)).find(t=>null!==t);if(t){const e="exp-month"===t.getAttribute("data-next-checkout-field")||"exp-month"===t.getAttribute("os-checkout-field");e&&!this.fields.has("exp-month")?this.fields.set("exp-month",t):e||this.fields.has("cc-month")||this.fields.has("exp-month")||this.fields.set("cc-month",t)}if(e){const t="exp-year"===e.getAttribute("data-next-checkout-field")||"exp-year"===e.getAttribute("os-checkout-field");t&&!this.fields.has("exp-year")?this.fields.set("exp-year",e):t||this.fields.has("cc-year")||this.fields.has("exp-year")||this.fields.set("cc-year",e)}}populateExpirationFields(){const t=this.fields.get("cc-month")||this.fields.get("exp-month"),e=this.fields.get("cc-year")||this.fields.get("exp-year"),i=["January","February","March","April","May","June","July","August","September","October","November","December"];if(t instanceof HTMLSelectElement){t.innerHTML="";const e=document.createElement("option");e.value="",e.textContent="Month",e.disabled=!0,e.selected=!0,e.hidden=!0,t.appendChild(e);for(let n=1;n<=12;n++){const e=n.toString().padStart(2,"0"),s=document.createElement("option");s.value=e,s.textContent=`(${e}) ${i[n-1]}`,t.appendChild(s)}}if(e instanceof HTMLSelectElement){e.innerHTML="";const t=document.createElement("option");t.value="",t.textContent="Year",t.disabled=!0,t.selected=!0,t.hidden=!0,e.appendChild(t);const i=(new Date).getFullYear();for(let n=0;n<20;n++){const t=i+n,s=document.createElement("option");s.value=t.toString(),s.textContent=t.toString(),e.appendChild(s)}}}setupBillingForm(){const t=document.querySelector(ln);if(!t)return!1;const e=document.querySelector('[os-checkout-component="shipping-form"], [data-next-component="shipping-form"]');if(!e)return!1;const i=t.querySelector('[os-checkout-component="billing-form"], [data-next-component="billing-form"]');if(!i)return!1;i.innerHTML="";const n=e.querySelectorAll('[data-next-component="shipping-field-row"]');n.forEach(t=>{if(!t.closest('[data-next-component="location"]')){const e=t.cloneNode(!0);this.convertShippingFieldsToBilling(e),i.appendChild(e)}});const s=e.querySelector('[data-next-component="location"]');if(s){const t=s.cloneNode(!0);t.setAttribute("data-next-component","billing-location"),this.convertShippingFieldsToBilling(t),t.classList.add("next-hidden","next-location-hidden"),t.style.display="none",i.appendChild(t)}else n.forEach(t=>{if(t.closest('[data-next-component="location"]')){const e=t.cloneNode(!0);this.convertShippingFieldsToBilling(e),i.appendChild(e)}});return this.setInitialBillingFormState(),!0}convertShippingFieldsToBilling(t){t.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(t=>{t.remove()}),t.querySelectorAll("[data-next-checkout-field]").forEach(t=>{const e=t.getAttribute("data-next-checkout-field");e&&!e.startsWith("billing-")&&t.setAttribute("data-next-checkout-field",`billing-${e}`)}),t.querySelectorAll("[os-checkout-field]").forEach(t=>{const e=t.getAttribute("os-checkout-field");e&&!e.startsWith("billing-")&&t.setAttribute("os-checkout-field",`billing-${e}`)}),t.querySelectorAll("input, select, textarea").forEach(t=>{const e=t;e.name&&!e.name.startsWith("billing_")&&(e.name=e.name.startsWith("shipping_")?e.name.replace("shipping_","billing_"):`billing_${e.name}`),e.id&&!e.id.startsWith("billing_")&&(e.id=e.id.startsWith("shipping_")?e.id.replace("shipping_","billing_"):`billing_${e.id}`),"checkbox"===e.type||"radio"===e.type?e.checked=!1:e.value=""})}setInitialBillingFormState(){const t=this.form.querySelector('input[name="use_shipping_address"]'),e=document.querySelector(ln);this.logger.info("[Billing] Setting initial state",{toggleFound:!!t,sectionFound:!!e,toggleChecked:null==t?void 0:t.checked,currentHeight:null==e?void 0:e.style.height,currentOverflow:null==e?void 0:e.style.overflow,currentClasses:null==e?void 0:e.className}),t&&e?(e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition"),t.checked?(e.style.height="0px",e.style.overflow="hidden",e.classList.add("billing-form-collapsed"),e.classList.remove("billing-form-expanded"),this.logger.info("[Billing] Initial state: COLLAPSED (checkbox checked)")):(e.style.height="auto",e.style.overflow="visible",e.classList.add("billing-form-expanded"),e.classList.remove("billing-form-collapsed"),this.logger.info("[Billing] Initial state: EXPANDED (checkbox unchecked)"))):this.logger.warn("[Billing] Could not set initial state - missing elements")}expandBillingForm(t){this.billingAnimationTimeouts.forEach(t=>clearTimeout(t)),this.billingAnimationTimeouts.clear(),this.billingAnimationInProgress=!0,this.logger.debug("[Billing] Starting expand animation",{startHeight:t.offsetHeight,startOverflow:t.style.overflow}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.style.transition="none",t.style.height="auto";const e=t.scrollHeight;this.logger.debug("[Billing] Measured full height:",e),t.style.height="0px",t.style.overflow="hidden",t.offsetHeight,t.getBoundingClientRect(),requestAnimationFrame(()=>{t.style.setProperty("transition","height 0.3s cubic-bezier(0.4, 0, 0.2, 1)","important"),t.style.setProperty("height",`${e}px`,"important"),window.getComputedStyle(t),this.logger.debug("[Billing] Expand animation started",{fromHeight:"0px",toHeight:e});const i=()=>{t.style.transition="none",t.style.height="auto",t.style.overflow="visible",t.removeEventListener("transitionend",i),this.billingAnimationInProgress=!1,this.logger.info("[Billing] Expand complete",{finalHeight:t.style.height,finalOverflow:t.style.overflow,finalTransition:t.style.transition})};t.addEventListener("transitionend",i);const n=setTimeout(()=>{this.billingAnimationInProgress&&t.classList.contains("billing-form-expanded")&&(this.logger.warn("[Billing] Expand fallback triggered - forcing completion"),t.style.transition="none",t.style.height="auto",t.style.overflow="visible",this.billingAnimationInProgress=!1),this.billingAnimationTimeouts.delete(n)},350);this.billingAnimationTimeouts.add(n)}),t.classList.add("billing-form-expanded"),t.classList.remove("billing-form-collapsed")})})}collapseBillingForm(t){this.billingAnimationTimeouts.forEach(t=>clearTimeout(t)),this.billingAnimationTimeouts.clear(),this.billingAnimationInProgress=!0,this.logger.debug("[Billing] Starting collapse animation",{startHeight:t.offsetHeight,scrollHeight:t.scrollHeight}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const e=t.scrollHeight;t.style.transition="none",t.style.height=`${e}px`,t.style.overflow="hidden",t.offsetHeight,t.getBoundingClientRect(),requestAnimationFrame(()=>{t.style.setProperty("transition","height 0.3s cubic-bezier(0.4, 0, 0.2, 1)","important"),t.style.setProperty("height","0px","important"),window.getComputedStyle(t),this.logger.debug("[Billing] Collapse animation started",{fromHeight:e,toHeight:"0px"});const i=()=>{t.style.transition="none",t.style.height="0px",t.style.overflow="hidden",t.removeEventListener("transitionend",i),this.billingAnimationInProgress=!1,this.logger.info("[Billing] Collapse complete",{finalHeight:t.style.height,finalOverflow:t.style.overflow,finalTransition:t.style.transition})};t.addEventListener("transitionend",i);const n=setTimeout(()=>{this.billingAnimationInProgress&&t.classList.contains("billing-form-collapsed")&&(this.logger.warn("[Billing] Collapse fallback triggered - forcing completion"),t.style.transition="none",t.style.height="0px",t.style.overflow="hidden",this.billingAnimationInProgress=!1),this.billingAnimationTimeouts.delete(n)},350);this.billingAnimationTimeouts.add(n)}),t.classList.add("billing-form-collapsed"),t.classList.remove("billing-form-expanded")})})}loadGoogleMapsAPI(){return m(this,null,function*(){const t=vt.getState().googleMapsConfig;if(!1!==t.enableAutocomplete)if(t.apiKey)if(this.googleMapsLoaded)this.logger.debug("Google Maps API already loaded");else{if(this.googleMapsLoading)return this.logger.debug("Google Maps API loading in progress, waiting..."),this.googleMapsLoadPromise;this.googleMapsLoading=!0,this.googleMapsLoadPromise=this.performGoogleMapsLoad(t);try{yield this.googleMapsLoadPromise,this.googleMapsLoaded=!0,this.logger.info("Google Maps API loaded successfully")}catch(e){this.logger.error("Failed to load Google Maps API:",e)}finally{this.googleMapsLoading=!1}}else this.logger.warn("Google Maps API key not found. Autocomplete will be disabled.");else this.logger.debug("Google Maps Autocomplete is disabled in configuration")})}performGoogleMapsLoad(t){return m(this,null,function*(){if(void 0===window.google||void 0===window.google.maps)return new Promise((e,i)=>{const n=document.createElement("script"),s=t.region?`&region=${t.region}`:"";if(n.src=`https://maps.googleapis.com/maps/api/js?key=${t.apiKey}&libraries=places${s}&loading=async`,n.async=!0,n.defer=!0,n.onload=()=>m(this,null,function*(){this.logger.debug("Google Maps API script loaded successfully");let t=0;for(;t<10;){if(void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.places&&void 0!==window.google.maps.places.Autocomplete)return this.logger.debug("Google Maps Places API fully initialized"),void e();t++,this.logger.debug(`Waiting for Google Maps API to initialize... (attempt ${t}/10)`),yield new Promise(t=>setTimeout(t,100))}i(new Error("Google Maps API not fully available after script load"))}),n.onerror=()=>{const t=new Error("Failed to load Google Maps API script");this.logger.error(t.message),i(t)},document.querySelector('script[src*="maps.googleapis.com"]'))return this.logger.debug("Google Maps script already in DOM, waiting for load..."),void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.places&&void 0!==window.google.maps.places.Autocomplete?void e():void(()=>{m(this,null,function*(){let t=0;for(;t<10;){if(void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.places&&void 0!==window.google.maps.places.Autocomplete)return this.logger.debug("Existing Google Maps script fully loaded"),void e();t++,yield new Promise(t=>setTimeout(t,100))}i(new Error("Existing Google Maps script failed to fully initialize"))})})();document.head.appendChild(n)});this.logger.debug("Google Maps API already available")})}isGoogleMapsLoaded(){return this.googleMapsLoaded&&void 0!==window.google&&void 0!==window.google.maps}isGoogleMapsPlacesAvailable(){return this.isGoogleMapsLoaded()&&void 0!==window.google.maps.places&&void 0!==window.google.maps.places.Autocomplete}initializeAddressManagement(t){return m(this,null,function*(){try{this.addClass("next-loading-countries"),t.addressConfig&&this.countryService.setConfig(t.addressConfig);const i=t.googleMapsConfig||{};this.enableAutocomplete=!1!==i.enableAutocomplete&&!!i.apiKey;const n=yield this.countryService.getLocationData();this.countries=n.countries;let s=n.detectedCountryCode;const a=this.countryService.getConfig(),r=At.getState(),o=r.formData.country;if(this.logger.info("Shipping country selection priority check (does not affect currency):",{detectedCountry:n.detectedCountryCode,addressConfigDefault:null==a?void 0:a.defaultCountry,storedCountry:o,urlParam:new URLSearchParams(window.location.search).get("country"),sessionOverride:sessionStorage.getItem("next_selected_country")}),o)this.countries.some(t=>t.code===o)?(s=o,this.logger.info(`✅ Using stored country from previous step: ${o}`)):this.logger.warn(`Stored country ${o} not in available countries`);else{const t=new URLSearchParams(window.location.search).get("country");if(t){const e=t.toUpperCase();this.countries.some(t=>t.code===e)?(s=e,sessionStorage.setItem("next_selected_country",e),this.logger.info(`✅ Using shipping country from URL parameter: ${e} (currency unaffected)`)):this.logger.warn(`Country ${e} from URL not in available countries`)}else{const t=sessionStorage.getItem("next_selected_country");t?this.countries.some(e=>e.code===t)?(s=t,this.logger.info(`✅ Using shipping country from session storage: ${t} (currency unaffected)`)):this.logger.warn(`Saved country ${t} not in available countries`):this.logger.info(`✅ Using detected/default shipping country: ${s} (currency unaffected)`)}}this.detectedCountryCode=s;const d=this.fields.get("country");let l;d instanceof HTMLSelectElement&&(this.populateCountryDropdown(d,n.countries,s),s&&(this.updateFormData({country:s}),this.clearError("country")));try{l=yield this.countryService.getCountryConfig(s),this.logger.debug(`Fetched config for country ${s}`)}catch(e){this.logger.warn(`Failed to get config for country ${s}, using detected config`),l=n.detectedCountryConfig}this.countryConfigs.set(s,l);const c=r.formData.province;if(s){const t=this.fields.get("province");t instanceof HTMLSelectElement&&(yield this.updateStateOptions(s,t),this.currentCountryConfig=l,c&&o===s)&&Array.from(t.options).some(t=>t.value===c)&&(t.value=c,this.updateFormData({province:c})),this.updateFormLabels(l)}this.billingFields.size>0&&this.populateBillingCountryDropdown()}catch(e){this.logger.error("Failed to load country data:",e)}finally{this.removeClass("next-loading-countries")}})}populateCountryDropdown(t,e,i){const n=t.options[0];t.innerHTML="",n&&!n.value&&(n.disabled=!0,n.hidden=!0,t.appendChild(n)),e.forEach(e=>{const n=document.createElement("option");n.value=e.code,n.textContent=e.name,e.code===i&&(n.selected=!0),t.appendChild(n)}),i&&t.dispatchEvent(new Event("change",{bubbles:!0}))}populateBillingCountryDropdown(){const t=this.billingFields.get("billing-country");if(!(t instanceof HTMLSelectElement))return;const e=t.options[0];t.innerHTML="",e&&!e.value&&(e.disabled=!0,e.hidden=!0,t.appendChild(e)),this.countries.forEach(e=>{const i=document.createElement("option");i.value=e.code,i.textContent=e.name,t.appendChild(i)})}handleCountryChange(t){return m(this,null,function*(){this.logger.info(`Handling country change to: ${t}`);const e=this.fields.get("country");if(e instanceof HTMLSelectElement){e.value=t,this.updateFormData({country:t});const i=this.fields.get("province");i instanceof HTMLSelectElement&&(yield this.updateStateOptions(t,i)),e.dispatchEvent(new Event("change",{bubbles:!0})),this.logger.info(`Country field updated to: ${t}`)}const i=this.billingFields.get("billing-country");if(i instanceof HTMLSelectElement){i.value=t;const e=this.billingFields.get("billing-province");if(e instanceof HTMLSelectElement){const i=At.getState(),n=i.sameAsShipping?i.formData.province:void 0;yield this.updateBillingStateOptions(t,e,n)}i.dispatchEvent(new Event("change",{bubbles:!0}))}})}updateStateOptions(t,e){return m(this,null,function*(){if(!t||""===t.trim())return e.innerHTML='<option value="">Select Country First</option>',void(e.disabled=!0);e.disabled=!0;const i=e.innerHTML;e.innerHTML='<option value="">Loading...</option>';try{let i=this.stateLoadingPromises.get(t);i?this.logger.debug(`Reusing existing state loading promise for ${t}`):(i=this.countryService.getCountryStates(t),this.stateLoadingPromises.set(t,i),i.finally(()=>{setTimeout(()=>this.stateLoadingPromises.delete(t),100)}));const n=yield i;this.countryConfigs.set(t,n.countryConfig),this.currentCountryConfig=n.countryConfig,this.updateFormLabels(n.countryConfig);const s=n.states&&n.states.length>0,a=n.countryConfig.stateRequired,r=e.closest(".frm-flds, .form-group, .form-field, .field-group")||e.parentElement;if(!a&&!s)return r&&(r.style.display="none"),e.removeAttribute("required"),this.updateFormData({province:""}),void this.clearError("province");r&&(r.style.display=""),e.innerHTML="";const o=document.createElement("option");o.value="",o.textContent=`Select ${n.countryConfig.stateLabel}`,o.disabled=!0,o.selected=!0,o.hidden=!0,e.appendChild(o),n.states.forEach(t=>{const i=document.createElement("option");i.value=t.code,i.textContent=t.name,e.appendChild(i)}),n.countryConfig.stateRequired?e.setAttribute("required","required"):e.removeAttribute("required");const d=e.value;this.updateFormData({province:""}),this.clearError("province");let l=!1;d&&n.states.some(t=>t.code===d)?(e.value=d,this.updateFormData({province:d}),l=!0,this.logger.debug(`Kept autofilled state: ${d}`)):e.value="",l||(e.value="",this.logger.debug(`No valid state found, showing placeholder: Select ${n.countryConfig.stateLabel}`))}catch(n){this.logger.error("Failed to load states:",n),e.innerHTML=i}finally{e.disabled=!1}})}updateFormLabels(t){const e=this.form.querySelector('label[for*="province"], label[for*="state"]');if(e){const i=t.stateRequired?" *":"";e.textContent=t.stateLabel+i}const i=this.form.querySelector('label[for*="postal"], label[for*="zip"]');i&&(i.textContent=t.postcodeLabel+" *");const n=this.fields.get("postal");n instanceof HTMLInputElement&&(n.placeholder=t.postcodeLabel)}updateBillingFormLabels(t){const e=document.querySelector('[os-checkout-element="different-billing-address"]');if(!e)return;const i=e.querySelector('label[for*="billing"][for*="province"], label[for*="billing"][for*="state"]');if(i){const e=t.stateRequired?" *":"";i.textContent=`Billing ${t.stateLabel}${e}`}const n=e.querySelector('label[for*="billing"][for*="postal"], label[for*="billing"][for*="zip"]');n&&(n.textContent=`Billing ${t.postcodeLabel} *`);const s=this.billingFields.get("billing-postal");s instanceof HTMLInputElement&&(s.placeholder=`Billing ${t.postcodeLabel}`)}initializeAddressAutocomplete(){return m(this,null,function*(){if(this.enableAutocomplete)try{this.setupLazyAutocompleteLoading()}catch(t){this.logger.error("Failed to initialize autocomplete:",t)}else this.logger.debug("Google Maps autocomplete disabled, skipping initialization")})}setupLazyAutocompleteLoading(){const t=this.fields.get("address1"),e=this.billingFields.get("billing-address1");let i=!1,n=!1;const s=()=>m(this,null,function*(){if(!n&&!i){i=!0,this.logger.info("User focused on address field, loading Google Maps API...");try{yield this.initializeGoogleMapsAutocomplete(),n=!0,t&&t.removeEventListener("focus",s),e&&e.removeEventListener("focus",s)}catch(a){this.logger.error("Failed to load Google Maps on focus:",a)}finally{i=!1}}});t instanceof HTMLInputElement&&t.addEventListener("focus",s),e instanceof HTMLInputElement&&e.addEventListener("focus",s)}initializeGoogleMapsAutocomplete(){return m(this,null,function*(){var t,e,i,n,s,a;try{if(yield this.loadGoogleMapsAPI(),yield new Promise(t=>setTimeout(t,100)),this.logger.debug("Google Maps status:",{google:void 0!==window.google,maps:void 0!==(null==(t=window.google)?void 0:t.maps),places:void 0!==(null==(i=null==(e=window.google)?void 0:e.maps)?void 0:i.places),Autocomplete:void 0!==(null==(a=null==(s=null==(n=window.google)?void 0:n.maps)?void 0:s.places)?void 0:a.Autocomplete)}),!this.isGoogleMapsPlacesAvailable())return void this.logger.warn("Google Places API not available, skipping autocomplete setup");this.logger.debug("Google Maps API loaded, setting up autocomplete"),this.setupAutocomplete()}catch(r){this.logger.warn("Failed to load Google Maps API:",r)}})}setupAutocomplete(){const t=this.fields.get("address1"),e=this.billingFields.get("billing-address1"),i=this.detectedCountryCode||"US";t instanceof HTMLInputElement&&this.createAutocompleteInstance(t,"address1",i,"shipping"),e instanceof HTMLInputElement&&this.createAutocompleteInstance(e,"billing-address1",i,"billing"),this.setupAutocompleteCountryChangeListeners()}createAutocompleteInstance(t,e,i,n){var s,a;try{const r="shipping"===n?this.fields.get("country"):this.billingFields.get("billing-country"),o=r instanceof HTMLSelectElement&&r.value?r.value:i,d={types:["address"],fields:["address_components","formatted_address"],componentRestrictions:{country:o}};if(!(null==(a=null==(s=window.google)?void 0:s.maps)?void 0:a.places))return void this.logger.warn("Google Maps Places API not loaded, skipping autocomplete initialization");if(!window.google.maps.places.Autocomplete)return void this.logger.warn("Google Maps Autocomplete API not available");const l=new window.google.maps.places.Autocomplete(t,d);this.autocompleteInstances.set(e,l),this.logger.debug(`Autocomplete created for ${e}, restricted to: ${o}`);const c=()=>{const e=document.querySelector(".pac-container:not([data-close-added])");if(e){e.setAttribute("data-close-added","true");const i=document.createElement("button");i.type="button",i.className="pac-close-button",i.innerHTML="×",i.setAttribute("aria-label","Close suggestions"),i.style.cssText="\n            position: absolute;\n            top: 0.4rem;\n            right: 0.75rem;\n            background: none;\n            border: none;\n            font-size: 20px;\n            line-height: 24px;\n            color: #6b7280;\n            cursor: pointer;\n            padding: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border-radius: 4px;\n            transition: background-color 0.2s;\n            width: 24px;\n            height: 24px;\n          ",i.addEventListener("mouseenter",()=>{i.style.backgroundColor="#f3f4f6"}),i.addEventListener("mouseleave",()=>{i.style.backgroundColor="transparent"}),i.addEventListener("click",()=>{e.style.display="none",t.blur()}),e.appendChild(i)}};l.addListener("place_changed",()=>m(this,null,function*(){const t=l.getPlace();t&&t.address_components?yield this.fillAddressFromAutocomplete(t,n):this.logger.debug("No valid place data returned from autocomplete")})),t.addEventListener("focus",()=>{setTimeout(c,100)}),t.addEventListener("keydown",t=>{"Enter"===t.key&&t.preventDefault()})}catch(r){this.logger.error(`Failed to create autocomplete for ${e}:`,r)}}fillAddressFromAutocomplete(t,e){return m(this,null,function*(){var i,n,s,a,r,o,d,l;if(!t.address_components)return;const u=this.parseAddressComponents(t.address_components);if(!u)return void this.logger.warn("Failed to parse address components");const h=null==(i=u.country)?void 0:i.short,p="shipping"===e,m=p?"":"billing-",f=p?this.fields:this.billingFields,g=At.getState(),v=f.get(`${m}address1`);if(v instanceof HTMLInputElement){const t=(null==(n=u.street_number)?void 0:n.long)||"",e=(null==(s=u.route)?void 0:s.long)||"";let i="";"BR"===h&&e&&t?(i=`${e}, ${t}`,u.sublocality_level_1?i+=` - ${u.sublocality_level_1.long}`:u.sublocality&&(i+=` - ${u.sublocality.long}`)):i=[t,e].filter(Boolean).join(" "),v.value=i,v.dispatchEvent(new Event("change",{bubbles:!0}))}let $="",y="";if("BR"===h&&t.formatted_address&&(!u.administrative_area_level_2||!u.administrative_area_level_1)){const e=t.formatted_address.split(",");if(e.length>=3){const t=null==(a=e[e.length-3])?void 0:a.trim();if(t&&t.includes(" - ")){const[e,i]=t.split(" - ").map(t=>t.trim());$=e||"",y=i||""}}}const b=f.get(`${m}city`);if(b instanceof HTMLInputElement){let t="";"BR"===h?u.administrative_area_level_2?t=u.administrative_area_level_2.long:$&&(t=$):u.locality?t=u.locality.long:u.postal_town?t=u.postal_town.long:u.administrative_area_level_2?t=u.administrative_area_level_2.long:u.sublocality&&"BR"!==h?t=u.sublocality.long:u.sublocality_level_1&&"BR"!==h&&(t=u.sublocality_level_1.long),t?(b.value=t,b.dispatchEvent(new Event("change",{bubbles:!0})),this.logger.debug(`City set to: ${t} (type: ${u.locality?"locality":u.postal_town?"postal_town":u.sublocality?"sublocality":"sublocality_level_1"})`)):this.logger.warn("No suitable city component found in address")}const x=f.get(`${m}postal`);x instanceof HTMLInputElement&&(null==u?void 0:u.postal_code)&&(x.value=u.postal_code.long,x.dispatchEvent(new Event("change",{bubbles:!0})));const w=f.get(`${m}country`);if(w instanceof HTMLSelectElement&&(null==u?void 0:u.country)){const t=u.country.short;w.value!==t&&(w.value=t,w.dispatchEvent(new Event("change",{bubbles:!0})),this.logger.debug(`Country set to ${t}`));const e=f.get(`${m}province`);e instanceof HTMLSelectElement&&((null==u?void 0:u.administrative_area_level_1)?this.setStateWithRetry(e,u.administrative_area_level_1.short,m):"BR"===t&&y&&this.setStateWithRetry(e,y,m))}if(p){const t={};if(u.street_number||u.route){const e=(null==(r=u.street_number)?void 0:r.long)||"",i=(null==(o=u.route)?void 0:o.long)||"";let n="";"BR"===h&&i&&e?(n=`${i}, ${e}`,u.sublocality_level_1?n+=` - ${u.sublocality_level_1.long}`:u.sublocality&&(n+=` - ${u.sublocality.long}`)):n=[e,i].filter(Boolean).join(" "),t.address1=n}if("BR"===h&&u.administrative_area_level_2?t.city=u.administrative_area_level_2.long:u.locality?t.city=u.locality.long:u.postal_town?t.city=u.postal_town.long:u.administrative_area_level_2?t.city=u.administrative_area_level_2.long:u.sublocality&&"BR"!==h?t.city=u.sublocality.long:u.sublocality_level_1&&(t.city=u.sublocality_level_1.long),u.postal_code&&(t.postal=u.postal_code.long),u.country&&(t.country=u.country.short),u.administrative_area_level_1&&(t.province=u.administrative_area_level_1.short),g.updateFormData(t),!this.hasTrackedShippingInfo&&t.city&&t.province)try{const t=g.shippingMethod,e=t?t.name:"Standard";Xe.track(Fe.createAddShippingInfoEvent(e)),this.hasTrackedShippingInfo=!0,this.logger.info("Tracked add_shipping_info event (Google Places autofill)",{shippingTier:e})}catch(_){this.logger.warn("Failed to track add_shipping_info event after autofill:",_)}}else{const t=g.billingAddress||{first_name:"",last_name:"",address1:"",city:"",province:"",postal:"",country:"",phone:""},e=c({},t);if(u.street_number||u.route){const t=(null==(d=u.street_number)?void 0:d.long)||"",i=(null==(l=u.route)?void 0:l.long)||"";let n="";"BR"===h&&i&&t?(n=`${i}, ${t}`,u.sublocality_level_1?n+=` - ${u.sublocality_level_1.long}`:u.sublocality&&(n+=` - ${u.sublocality.long}`)):n=[t,i].filter(Boolean).join(" "),e.address1=n}"BR"===h&&u.administrative_area_level_2?e.city=u.administrative_area_level_2.long:u.locality?e.city=u.locality.long:u.postal_town?e.city=u.postal_town.long:u.administrative_area_level_2?e.city=u.administrative_area_level_2.long:u.sublocality&&"BR"!==h?e.city=u.sublocality.long:u.sublocality_level_1&&(e.city=u.sublocality_level_1.long),u.postal_code&&(e.postal=u.postal_code.long),u.country&&(e.country=u.country.short),u.administrative_area_level_1&&(e.province=u.administrative_area_level_1.short),g.setBillingAddress(e)}this.emit("address:autocomplete-filled",{type:e,components:u})})}parseAddressComponents(t){var e,i,n,s;const a={};return t.forEach(t=>{t.types.forEach(e=>{"political"!==e&&(a[e]={long:t.long_name,short:t.short_name})})}),this.logger.debug("Parsed address components:",{availableTypes:Object.keys(a),cityRelatedComponents:{locality:null==(e=a.locality)?void 0:e.long,postal_town:null==(i=a.postal_town)?void 0:i.long,sublocality:null==(n=a.sublocality)?void 0:n.long,sublocality_level_1:null==(s=a.sublocality_level_1)?void 0:s.long},allComponents:a}),a}setStateWithRetry(t,e,i,n=0){return m(this,null,function*(){n>=5?this.logger.warn(`Failed to set state ${e} after 5 attempts`):(yield new Promise(t=>setTimeout(t,300*Math.pow(1.5,n))),Array.from(t.options).some(t=>t.value===e)?(t.value=e,t.dispatchEvent(new Event("change",{bubbles:!0})),this.logger.debug(`State set to ${e}`)):this.setStateWithRetry(t,e,i,n+1))})}setupAutocompleteCountryChangeListeners(){if(this.autocompleteListenersAttached)return void this.logger.debug("Autocomplete country change listeners already attached, skipping");const t=this.fields.get("country");t instanceof HTMLSelectElement&&(t.Re=!0,t.addEventListener("change",()=>{const e=this.autocompleteInstances.get("address1"),i=t.value;e&&i&&2===i.length&&(e.setComponentRestrictions&&e.setComponentRestrictions({country:i}),this.logger.debug(`Shipping autocomplete restricted to: ${i}`))}));const e=this.billingFields.get("billing-country");e instanceof HTMLSelectElement&&e.addEventListener("change",()=>{const t=this.autocompleteInstances.get("billing-address1"),i=e.value;t&&i&&2===i.length&&(t.setComponentRestrictions&&t.setComponentRestrictions({country:i}),this.logger.debug(`Billing autocomplete restricted to: ${i}`))}),this.autocompleteListenersAttached=!0}initializeLocationFieldVisibility(){var t,e,i;this.locationElements=this.form.querySelectorAll('[data-next-component="location"], [data-next-component-location="location"]'),this.billingLocationElements=this.form.querySelectorAll('[data-next-component="billing-location"]'),this.locationElements&&0!==this.locationElements.length||this.logger.debug("No shipping location elements found"),this.billingLocationElements&&0!==this.billingLocationElements.length||this.logger.debug("No billing location elements found"),this.hideLocationFields(),this.hideBillingLocationFields();const n=this.fields.get("address1");n instanceof HTMLInputElement&&(n.addEventListener("input",this.handleAddressInput.bind(this)),n.addEventListener("change",this.handleAddressInput.bind(this)),n.addEventListener("blur",this.handleAddressInput.bind(this)),n.value&&n.value.trim().length>0&&this.showLocationFields());const s=null==(t=this.billingFields)?void 0:t.get("billing-address1");s instanceof HTMLInputElement&&(s.addEventListener("input",this.handleBillingAddressInput.bind(this)),s.addEventListener("change",this.handleBillingAddressInput.bind(this)),s.addEventListener("blur",this.handleBillingAddressInput.bind(this)),s.value&&s.value.trim().length>0&&this.showBillingLocationFields()),this.eventBus.on("address:autocomplete-filled",t=>{"shipping"===t.type?this.showLocationFields():"billing"===t.type&&this.showBillingLocationFields()});const a=At.getState();a.formData.address1&&a.formData.address1.trim().length>0&&this.showLocationFields(),a.formData["billing-address1"]&&a.formData["billing-address1"].trim().length>0&&this.showBillingLocationFields(),this.logger.debug("Location field visibility initialized",{shippingLocationElementsCount:(null==(e=this.locationElements)?void 0:e.length)||0,billingLocationElementsCount:(null==(i=this.billingLocationElements)?void 0:i.length)||0})}handleAddressInput(t){const e=t.target;e.value&&e.value.trim().length>0&&this.showLocationFields()}handleBillingAddressInput(t){const e=t.target;e.value&&e.value.trim().length>0&&this.showBillingLocationFields()}hideLocationFields(){this.locationElements&&(this.locationElements.forEach(t=>{t instanceof HTMLElement&&(t.style.display="none",t.classList.add("next-location-hidden"))}),this.locationFieldsShown=!1,this.logger.debug("Location fields hidden"))}showLocationFields(){!this.locationFieldsShown&&this.locationElements&&(this.locationElements.forEach(t=>{t instanceof HTMLElement&&(t.style.display="flex",t.classList.remove("next-location-hidden"))}),this.locationFieldsShown=!0,this.eventBus.emit("checkout:location-fields-shown",{}),this.form.dispatchEvent(new CustomEvent("checkout:location-fields-shown")),this.logger.debug("Location fields shown"))}hideBillingLocationFields(){this.billingLocationElements&&(this.billingLocationElements.forEach(t=>{t instanceof HTMLElement&&(t.style.display="none",t.classList.add("next-location-hidden"))}),this.billingLocationFieldsShown=!1,this.logger.debug("Billing location fields hidden"))}showBillingLocationFields(){!this.billingLocationFieldsShown&&this.billingLocationElements&&(this.billingLocationElements.forEach(t=>{t instanceof HTMLElement&&(t.style.display="flex",t.classList.remove("next-location-hidden"))}),this.billingLocationFieldsShown=!0,this.eventBus.emit("checkout:billing-location-fields-shown",{}),this.form.dispatchEvent(new CustomEvent("checkout:billing-location-fields-shown")),this.logger.debug("Billing location fields shown"))}initializeProspectCart(){return m(this,null,function*(){try{this.prospectCartEnhancer=new Ji(this.form),yield this.prospectCartEnhancer.initialize(),this.form.addEventListener("next:prospect-cart-created",t=>{const e=t;this.logger.info("Prospect cart created",e.detail)}),this.form.addEventListener("next:prospect-cart-abandoned",t=>{const e=t;this.logger.info("Prospect cart abandoned",e.detail)}),this.logger.debug("ProspectCartEnhancer initialized")}catch(t){this.logger.warn("Failed to initialize ProspectCartEnhancer:",t)}})}injectIntlTelInputStyles(){const t="intl-tel-input-paths";if(document.getElementById(t))return;const e="true"===new URLSearchParams(window.location.search).get("debug")?"http://localhost:3000":"https://cdn.jsdelivr.net/gh/NextCommerceCo/campaign-cart/dist",i=document.createElement("style");i.id=t,i.textContent=`\n      .iti {\n        --iti-path-flags-1x: url('${e}/intl-tel-input/img/flags.webp');\n        --iti-path-flags-2x: url('${e}/intl-tel-input/img/flags@2x.webp');\n        --iti-path-globe-1x: url('${e}/intl-tel-input/img/globe.webp');\n        --iti-path-globe-2x: url('${e}/intl-tel-input/img/globe@2x.webp');\n      }\n    `,document.head.appendChild(i)}initializePhoneInputs(){if(!this.isIntlTelInputAvailable)return;const t=this.fields.get("phone"),e=this.billingFields.get("billing-phone");t instanceof HTMLInputElement&&this.initializePhoneInput("shipping",t),e instanceof HTMLInputElement&&this.initializePhoneInput("billing",e)}initializePhoneInput(t,e){try{const i=this.phoneInputs.get(t);i&&i.destroy();const n="shipping"===t?"country":"billing-country",s="shipping"===t?this.fields.get(n):this.billingFields.get(n),a=s instanceof HTMLSelectElement&&s.value?s.value.toLowerCase():this.detectedCountryCode.toLowerCase(),r="true"===e.getAttribute("data-next-required")||e.hasAttribute("required");e.placeholder=r?"Phone*":"Phone (Optional)";const o=on(e,{separateDialCode:!1,nationalMode:!0,autoPlaceholder:"off",loadUtils:()=>Promise.resolve().then(()=>za),countryOrder:["us","ca","gb","au"],allowDropdown:!1,showFlags:!0,initialCountry:a.toLowerCase(),formatOnDisplay:!0});if(this.phoneInputs.set(t,o),e.addEventListener("input",()=>{if(o){const e=o.getNumber();if("shipping"===t)this.updateFormData({phone:e});else{const t=At.getState(),i=t.billingAddress||{first_name:"",last_name:"",address1:"",city:"",province:"",postal:"",country:"",phone:""};t.setBillingAddress(u(c({},i),{phone:e}))}}}),s instanceof HTMLSelectElement){const t=()=>{const t=s.value;t&&o&&o.setCountry(t.toLowerCase())};s.addEventListener("change",t)}}catch(i){this.logger.error(`Failed to initialize ${t} phone field:`,i)}}initializeCreditCard(t,e){return m(this,null,function*(){var e;try{this.addClass("next-loading-spreedly");const i=null==(e=vt.getState().paymentConfig)?void 0:e.spreedly;this.creditCardService=new qi(t,i),this.creditCardService.setOnReady(()=>{this.removeClass("next-loading-spreedly"),this.emit("checkout:spreedly-ready",{}),this.logger.debug("[Spreedly] Credit card service ready")}),this.creditCardService.setOnError(t=>{if(this.logger.warn("[Spreedly] Credit card validation errors:",t),this.emit("payment:error",{errors:t}),t&&t.length>0){const e=t.map(t=>t.message||t).join(". ");this.displayPaymentError(e)}}),this.creditCardService.setOnToken((t,e)=>{this.logger.info("[Spreedly] Payment token received:",{token:t,pmData:e}),this.handleTokenizedPayment(t,e)}),this.ui&&(this.creditCardService.setFloatingLabelCallbacks(t=>{this.ui.handleSpreedlyFieldFocus(t)},(t,e)=>{this.ui.handleSpreedlyFieldBlur(t,e)},(t,e)=>{this.ui.handleSpreedlyFieldInput(t,e)}),this.logger.debug("[Spreedly] Connected floating label callbacks")),yield this.creditCardService.initialize(),this.validator.setCreditCardService(this.creditCardService)}catch(i){throw this.logger.error("Failed to initialize credit card service:",i),this.removeClass("next-loading-spreedly"),i}})}clearAllCheckoutFields(){try{this.fields.forEach(t=>{t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?"checkbox"===t.type||"radio"===t.type?t.checked=!1:t.value="":t instanceof HTMLSelectElement&&(t.selectedIndex=0)}),this.billingFields.forEach(t=>{t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement?"checkbox"===t.type||"radio"===t.type?t.checked=!1:t.value="":t instanceof HTMLSelectElement&&(t.selectedIndex=0)}),this.creditCardService&&"function"==typeof this.creditCardService.clearFields&&this.creditCardService.clearFields();const t=At.getState();t.reset(),t.clearAllErrors();const e=this.fields.get("country");e instanceof HTMLSelectElement&&this.detectedCountryCode&&(e.value=this.detectedCountryCode,e.dispatchEvent(new Event("change",{bubbles:!0})));const i=this.form.querySelector('input[name="use_shipping_address"]');i&&(i.checked=!0,i.dispatchEvent(new Event("change",{bubbles:!0}))),this.logger.info("All checkout fields cleared")}catch(t){this.logger.error("Error clearing checkout fields:",t)}}handlePurchaseEvent(){return m(this,null,function*(){var t;const e=sessionStorage.getItem("next-order");if(e)try{const i=JSON.parse(e),n=null==(t=null==i?void 0:i.state)?void 0:t.order;if(!(null==n?void 0:n.ref_id)||!(null==n?void 0:n.number))return;const s=sessionStorage.getItem("next-shown-order-warnings"),a=s?JSON.parse(s):[];if(a.includes(n.ref_id))return void this.logger.debug("Already shown warning for order",n.ref_id);this.logger.info("Fresh purchase detected, showing attention modal",{orderNumber:n.number,refId:n.ref_id});Date.now();At.getState().setProcessing(!1);const r=yield Ai.show({title:"Attention",content:"Your initial order has been successfully processed. Please check your email for the order confirmation. Entering your payment details again will result in a secondary purchase.",buttons:[{text:"Close",action:"cancel"},{text:"Back",action:"confirm"}],className:"purchase-warning-modal"});if(a.push(n.ref_id),sessionStorage.setItem("next-shown-order-warnings",JSON.stringify(a)),Date.now(),"confirm"===r){const t=this.getSuccessUrl();if(t){const e=new URL(t,window.location.origin);!e.searchParams.has("ref_id")&&n.ref_id&&e.searchParams.set("ref_id",n.ref_id),window.location.href=e.href}}else this.populateFormData(),this.ui&&this.ui.hideLoading("checkout"),this.clearAllCheckoutFields()}catch(i){this.logger.error("Failed to parse order data from sessionStorage:",i),At.getState().setProcessing(!1)}})}buildOrderData(t,e){var i,n,s;const a={first_name:t.formData.fname||"",last_name:t.formData.lname||"",line1:t.formData.address1||"",line2:t.formData.address2,line4:t.formData.city||"",state:t.formData.province,postcode:t.formData.postal,country:t.formData.country||"",phone_number:t.formData.phone};let r;!t.sameAsShipping&&t.billingAddress&&(r=c(c(c(c({first_name:t.billingAddress.first_name||"",last_name:t.billingAddress.last_name||"",line1:t.billingAddress.address1||"",line4:t.billingAddress.city||"",country:t.billingAddress.country||""},t.billingAddress.address2&&{line2:t.billingAddress.address2}),t.billingAddress.province&&{state:t.billingAddress.province}),t.billingAddress.postal&&{postcode:t.billingAddress.postal}),t.billingAddress.phone&&{phone_number:t.billingAddress.phone}));const o=c({payment_method:un[t.paymentMethod]||"card_token"},t.paymentToken&&{card_token:t.paymentToken}),d=Ut.getState().getAttributionForApi(),l=(e.appliedCoupons||[]).map(t=>t.code);return u(c({lines:e.items.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})),shipping_address:a},r&&{billing_address:r}),{billing_same_as_shipping_address:t.sameAsShipping,shipping_method:(null==(i=t.shippingMethod)?void 0:i.id)||(null==(n=e.shippingMethod)?void 0:n.id)||1,payment_detail:o,user:{email:t.formData.email,first_name:t.formData.fname||"",last_name:t.formData.lname||"",language:"en",phone_number:t.formData.phone,accepts_marketing:null==(s=t.formData.accepts_marketing)||s},vouchers:l,attribution:d,currency:this.getCurrency(),success_url:this.getSuccessUrl(),payment_failed_url:this.getFailureUrl()})}createOrder(){return m(this,null,function*(){const t=At.getState(),e=Et.getState();try{if(!t.formData.email||!t.formData.fname||!t.formData.lname)throw new Error("Missing required customer information");if(0===e.items.length)throw new Error("Cannot create order with empty cart");if(("credit-card"===t.paymentMethod||"card_token"===t.paymentMethod)&&!t.paymentToken)throw new Error("Payment token is required for credit card payments");const i=this.buildOrderData(t,e),n=yield this.apiClient.createOrder(i);if(!n.ref_id)throw new Error("Invalid order response: missing ref_id");return this.logger.info("Order created successfully",{ref_id:n.ref_id,number:n.number,total:n.total_incl_tax,payment_method:t.paymentMethod}),n}catch(i){if(this.logger.error("Failed to create order:",i),400===i.status&&i.responseData){const t=i.responseData;if(this.logger.warn("API 400 error response:",t),t.message&&Array.isArray(t.message)){const e=t.message.map(t=>"object"==typeof t&&null!==t?t.message||JSON.stringify(t):String(t)).join(". ");throw this.displayPaymentError(e),new Error(e)}if(t.message&&"string"==typeof t.message)throw this.displayPaymentError(t.message),new Error(t.message);if(t.payment_details||t.payment_response_code){this.logger.warn("Payment error detected:",{payment_details:t.payment_details,payment_response_code:t.payment_response_code}),this.displayPaymentError(t.payment_details||"Payment failed. Please check your payment information.");let e="Payment failed: ";throw t.payment_details?e+=t.payment_details:e+="Please check your payment information and try again.",new Error(e)}if(t.errors){const e=Object.entries(t.errors).map(([,t])=>Array.isArray(t)?t.join(". "):t).join(". ");throw this.displayPaymentError(e),new Error(e)}}if(i instanceof Error){if(i.message.includes("Rate limited"))throw new Error("Too many requests. Please wait a moment and try again.");if(i.message.includes("401")||i.message.includes("403"))throw new Error("Authentication error. Please refresh the page and try again.");if(i.message.includes("400"))throw new Error("Invalid order data. Please check your information and try again.");if(i.message.includes("500"))throw new Error("Server error. Please try again in a few moments.")}throw i}})}createTestOrder(){return m(this,null,function*(){var t;const e=Et.getState();try{const i=(e.appliedCoupons||[]).map(t=>t.code),n={lines:e.items.length>0?e.items.map(t=>({package_id:t.packageId,quantity:t.quantity,is_upsell:t.is_upsell||!1})):[{package_id:1,quantity:1,is_upsell:!1}],shipping_address:{first_name:"Test",last_name:"Order",line1:"Test Address 123",line2:"",line4:"Tempe",state:"AZ",postcode:"85281",country:"US",phone_number:"+14807581224"},billing_same_as_shipping_address:!0,shipping_method:(null==(t=e.shippingMethod)?void 0:t.id)||1,payment_detail:{payment_method:"card_token",card_token:"test_card"},user:{email:"test@test.com",first_name:"Test",last_name:"Order",language:"en",phone_number:"+14807581224",accepts_marketing:!0},vouchers:i,attribution:this.getTestAttribution(),currency:this.getCurrency(),success_url:this.getSuccessUrl(),payment_failed_url:this.getFailureUrl()};return yield this.apiClient.createOrder(n)}catch(i){throw this.logger.error("Failed to create test order:",i),i}})}getTestAttribution(){const t=Ut.getState().getAttributionForApi();return u(c({},t),{utm_source:"konami_code",utm_medium:"test",utm_campaign:"debug_test_order",utm_content:"test_mode",metadata:u(c({},t.metadata),{test_order:!0,test_timestamp:Date.now()})})}handleOrderRedirect(t){let e;if(t.payment_complete_url)e=t.payment_complete_url;else{e=this.getNextPageUrlFromMeta(t.ref_id)||(t.order_status_url?t.order_status_url:`${window.location.origin}/checkout/confirmation/?ref_id=${t.ref_id||""}`)}if(e){const t=this.preserveQueryParams(e);window.location.href=t}else At.getState().setProcessing(!1),this.emit("order:redirect-missing",{order:t})}getNextPageUrlFromMeta(t){const e=document.querySelector('meta[name="next-success-url"]')||document.querySelector('meta[name="next-next-url"]')||document.querySelector('meta[name="os-next-page"]');if(!(null==e?void 0:e.content))return null;const i=e.content,n=i.startsWith("http")?new URL(i):new URL(i,window.location.origin);return t&&n.searchParams.append("ref_id",t),n.href}preserveQueryParams(t,e=["debug","debugger"]){try{const i=new URL(t,window.location.origin),n=new URLSearchParams(window.location.search);return e.forEach(t=>{const e=n.get(t);e&&!i.searchParams.has(t)&&i.searchParams.append(t,e)}),i.href}catch(i){return t}}getCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}getSuccessUrl(){const t=document.querySelector('meta[name="next-success-url"]')||document.querySelector('meta[name="next-next-url"]')||document.querySelector('meta[name="os-next-page"]');return(null==t?void 0:t.content)?t.content.startsWith("/")?window.location.origin+t.content:t.content:window.location.origin+"/success"}validateExpressCheckoutFields(t,e){return m(this,null,function*(){const i={};let n=null;for(const s of e){const e=t[s];if(!e||"string"==typeof e&&!e.trim()){const t={email:"Email",fname:"First Name",lname:"Last Name",phone:"Phone",address1:"Address",city:"City",province:"State/Province",postal:"ZIP/Postal Code",country:"Country"}[s]||s;i[s]=`${t} is required`,n||(n=s)}"email"===s&&e&&(this.validator.isValidEmail(e)||(i[s]="Please enter a valid email address",n||(n=s)))}return{isValid:0===Object.keys(i).length,errors:i,firstErrorField:n}})}getFailureUrl(){const t=document.querySelector('meta[name="next-failure-url"]')||document.querySelector('meta[name="os-failure-url"]');if(null==t?void 0:t.content)return t.content.startsWith("/")?window.location.origin+t.content:t.content;const e=new URL(window.location.href);return e.searchParams.set("payment_failed","true"),e.href}detectMultiStepCheckout(){const t=this.form.getAttribute("data-next-checkout-step")||this.form.getAttribute("os-checkout-step");t&&(this.isMultiStep=!0,this.currentStep=parseInt(this.form.getAttribute("data-next-step-number")||"1",10),this.nextStepUrl=t,this.logger.info("Multi-step checkout detected",{currentStep:this.currentStep,nextStepUrl:this.nextStepUrl}),At.getState().setStep(this.currentStep))}handleStepNavigation(t,e){return m(this,null,function*(){try{t.clearAllErrors(),t.setProcessing(!0),this.loadingOverlay.show(),this.logger.info(`Validating step ${this.currentStep} before navigation`);const e=yield this.validator.validateStep(this.currentStep,t.formData,this.countryConfigs,this.currentCountryConfig);if(!e.isValid)return this.logger.warn(`Step ${this.currentStep} validation failed`,e.errors),e.errors&&Object.entries(e.errors).forEach(([e,i])=>{t.setError(e,i),this.validator.showError(e,i)}),e.firstErrorField&&setTimeout(()=>{this.validator.focusFirstErrorField(e.firstErrorField)},100),t.setProcessing(!1),void this.loadingOverlay.hide(!0);this.logger.info(`Step ${this.currentStep} validated successfully, navigating to: ${this.nextStepUrl}`),t.setStep(this.currentStep+1);let i=this.nextStepUrl;if("true"===new URLSearchParams(window.location.search).get("debug")){const t=i.includes("?")?"&":"?";i=`${i}${t}debug=true`,this.logger.debug("Preserving debug parameter in next step URL")}yield new Promise(t=>setTimeout(t,1e3)),t.setProcessing(!1),window.location.href=i}catch(e){this.logger.error("Step navigation error:",e),t.setError("general","Failed to proceed to next step. Please try again."),t.setProcessing(!1),this.loadingOverlay.hide(!0)}})}handleFormSubmit(t){return m(this,null,function*(){var e,i,n,s,a,r;t.preventDefault();const o=At.getState(),d=Et.getState();if(this.isMultiStep&&this.nextStepUrl)return this.handleStepNavigation(o,d);try{if(o.clearAllErrors(),o.setProcessing(!0),this.loadingOverlay.show(),this.isIntlTelInputAvailable){const t=this.phoneInputs.get("shipping");if(t){const e=t.isValidNumber();if(!e&&o.formData.phone)o.setError("phone","Please enter a valid phone number");else if(e){const e=t.getNumber();e&&o.updateFormData({phone:e})}}if(!o.sameAsShipping&&o.billingAddress){const t=this.phoneInputs.get("billing");t&&!t.isValidNumber()&&o.billingAddress.phone&&o.setError("billing-phone","Please enter a valid phone number")}}const t=["paypal","apple_pay","google_pay"].includes(o.paymentMethod),l=vt.getState(),c=null==(i=null==(e=l.paymentConfig)?void 0:e.expressCheckout)?void 0:i.requireValidation;if(this.logger.debug("Express payment config:",{isExpressPayment:t,paymentMethod:o.paymentMethod,requireExpressValidation:c,hasExpressProcessor:!!this.expressProcessor,fullConfig:null==(n=l.paymentConfig)?void 0:n.expressCheckout}),t&&this.expressProcessor&&!c)return this.logger.info(`Processing express checkout for ${o.paymentMethod} (skipping validation)`),this.loadingOverlay.hide(!0),void(yield this.expressProcessor.handleExpressCheckout(o.paymentMethod,d.items,d.isEmpty,()=>d.reset()));t&&c&&this.logger.info(`Express payment ${o.paymentMethod} requires validation (requireValidation: true)`);const u="credit-card"===o.paymentMethod||"card_token"===o.paymentMethod||t&&c;let h;if(t&&c&&(null==(a=null==(s=l.paymentConfig)?void 0:s.expressCheckout)?void 0:a.requiredFields)){const t=l.paymentConfig.expressCheckout.requiredFields;h=yield this.validateExpressCheckoutFields(o.formData,t)}else h=yield this.validator.validateForm(o.formData,this.countryConfigs,this.currentCountryConfig,u,o.billingAddress,o.sameAsShipping);if(!h.isValid){if(this.logger.warn("Validation failed",{paymentMethod:o.paymentMethod,isExpressPayment:t,requireExpressValidation:c,errors:h.errors,firstErrorField:h.firstErrorField}),h.errors&&Object.entries(h.errors).forEach(([t,e])=>{o.setError(t,e),this.validator.showError(t,e)}),t&&c){const t=Object.keys(h.errors||{}),e={email:"Email",fname:"First Name",lname:"Last Name",phone:"Phone",address1:"Address",city:"City",province:"State/Province",postal:"ZIP/Postal Code",country:"Country","cc-month":"Expiration Month","cc-year":"Expiration Year","exp-month":"Expiration Month","exp-year":"Expiration Year","billing-fname":"Billing First Name","billing-lname":"Billing Last Name","billing-address1":"Billing Address","billing-city":"Billing City","billing-province":"Billing State/Province","billing-postal":"Billing ZIP/Postal Code","billing-country":"Billing Country"},i=`Please fill in the following required fields: ${t.map(t=>e[t]||t).join(", ")}`;o.setError("general",i),this.displayPaymentError(i)}return h.firstErrorField&&setTimeout(()=>{this.validator.focusFirstErrorField(h.firstErrorField)},100),o.setProcessing(!1),void this.loadingOverlay.hide(!0)}if(t&&this.expressProcessor)return this.logger.info(`Processing express checkout for ${o.paymentMethod} (after validation)`),this.loadingOverlay.hide(!0),void(yield this.expressProcessor.handleExpressCheckout(o.paymentMethod,d.items,d.isEmpty,()=>d.reset()));if("credit-card"===o.paymentMethod||"card_token"===o.paymentMethod){if(null==(r=this.creditCardService)?void 0:r.ready){const t={full_name:`${o.formData.fname||""} ${o.formData.lname||""}`.trim(),month:o.formData["cc-month"]||o.formData["exp-month"]||"",year:o.formData["cc-year"]||o.formData["exp-year"]||""};return void(yield this.creditCardService.tokenizeCard(t))}throw new Error("Credit card payment system is not ready. Please refresh the page and try again.")}yield this.processOrder()}catch(l){this.handleError(l,"handleFormSubmit"),o.setError("general","Failed to process order. Please try again."),o.setProcessing(!1),this.loadingOverlay.hide(!0)}})}processOrder(){return m(this,null,function*(){try{const t=yield this.createOrder();this.prospectCartEnhancer&&(yield this.prospectCartEnhancer.convertCart()),this.emit("order:completed",t),this.handleOrderRedirect(t)}catch(t){throw At.getState().setProcessing(!1),this.loadingOverlay.hide(!0),t}})}handleTokenizedPayment(t,e){return m(this,null,function*(){try{const i=At.getState();i.setPaymentToken(t),this.emit("payment:tokenized",{token:t,pmData:e,paymentMethod:i.paymentMethod}),yield this.processOrder()}catch(i){this.logger.error("Failed to process tokenized payment:",i);const t=At.getState();i.message&&i.message.includes("Payment failed:")?t.setError("general",i.message):t.setError("general","Payment processing failed. Please try again."),t.setProcessing(!1),this.loadingOverlay.hide(!0)}})}handleFieldChange(t){return m(this,null,function*(){const e=t.target,i=this.getFieldNameFromElement(e);if(!i)return;const n=At.getState();if(i.startsWith("billing-")){if("billing-postal"===i&&e instanceof HTMLInputElement){const t=this.billingFields.get("billing-country"),i=t instanceof HTMLSelectElement?t.value:"";if(i){const t=this.countryConfigs.get(i);if(t){const i=this.countryService.formatPostalCode(e.value,t);if(i!==e.value){const t=e.selectionStart||0,n=i.length-e.value.length;e.value=i,e.setSelectionRange(t+n,t+n)}}}}if(this.handleBillingFieldChange(i,e.value,n),"billing-country"===i){const t=this.billingFields.get("billing-province");t instanceof HTMLSelectElement&&(yield this.updateBillingStateOptions(e.value,t,n.formData.province))}}else{if("postal"===i&&e instanceof HTMLInputElement){const t=this.fields.get("country"),i=t instanceof HTMLSelectElement?t.value:"";if(i){const t=this.countryConfigs.get(i);if(t){const i=this.countryService.formatPostalCode(e.value,t);if(i!==e.value){const t=e.selectionStart||0,n=i.length-e.value.length;e.value=i,e.setSelectionRange(t+n,t+n)}}}}const a=e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type)?e.checked:e.value;if(this.updateFormData({[i]:a}),n.clearError(i),["email","city","fname","lname"].includes(i)&&("blur"===t.type||"change"===t.type)){const t=e.value.trim();if(t){const e=this.validator.validateField(i,t);!e.isValid&&e.message?(this.validator.setError(i,e.message),this.logger.warn(`Invalid ${i} detected on blur:`,t)):e.isValid&&this.validator.clearError(i)}}if("country"===i){const t=this.fields.get("province");t instanceof HTMLSelectElement&&(yield this.updateStateOptions(e.value,t)),sessionStorage.setItem("next_selected_country",e.value),this.logger.debug(`Saved user's country selection to session: ${e.value}`)}if("address1"===i&&e.value&&e.value.trim().length>0&&(this.showLocationFields(),!this.hasTrackedShippingInfo&&n.formData.city&&n.formData.province))try{const t=n.shippingMethod,e=t?t.name:"Standard";Xe.track(Fe.createAddShippingInfoEvent(e)),this.hasTrackedShippingInfo=!0,this.logger.info("Tracked add_shipping_info event (address complete)",{shippingTier:e})}catch(s){this.logger.warn("Failed to track add_shipping_info event:",s)}if("blur"===t.type||"change"===t.type){if("email"===i&&this.prospectCartEnhancer&&this.prospectCartEnhancer.updateEmail(e.value),"email"===i||"fname"===i||"lname"===i||"phone"===i){const t={};"email"===i&&(t.email=e.value),"fname"===i&&(t.firstName=e.value),"lname"===i&&(t.lastName=e.value),"phone"===i&&(t.phone=e.value),ze.updateUserData(t),this.logger.debug("Updated user data storage:",i,e.value)}this.prospectCartEnhancer&&["email","fname","lname"].includes(i)&&this.prospectCartEnhancer.checkAndCreateCart()}}if("blur"===t.type){const t=this.getFieldByName(i);if(!t)return;const n=t.closest(".form-group, .form-input");if(!e.value||"string"==typeof e.value&&""===e.value.trim()){const e=t.closest(".form-group");(null==n?void 0:n.querySelector(".next-error-label"))||(null==e?void 0:e.querySelector(".next-error-label"))?(t.classList.add("has-error","next-error-field"),t.classList.remove("no-error"),n&&(n.classList.add("addErrorIcon"),n.classList.remove("addTick"))):(t.classList.remove("has-error","next-error-field","no-error"),n&&n.classList.remove("addErrorIcon","addTick"))}else{const s=this.validator.validateField(i,e.value);if(s.isValid){if(t.classList.remove("has-error","next-error-field"),t.classList.add("no-error"),n){n.classList.remove("addErrorIcon"),n.classList.add("addTick");const t=n.querySelector(".next-error-label");t&&t.remove()}}else s.message&&(t.classList.remove("no-error"),this.validator.showError(i,s.message))}}else if("input"===t.type){const t=this.getFieldByName(i);if(t){t.classList.remove("has-error","next-error-field");const e=t.closest(".form-group, .form-input");if(e){let t=e.querySelector(".next-error-label");t&&t.remove();const i=e.closest(".form-group");i&&(t=i.querySelector(".next-error-label"),t&&t.remove())}const i=t.closest(".form-group");if(i){const t=i.querySelector(".next-error-label");t&&t.remove()}}}else if("change"===t.type){const t=this.getFieldByName(i);if(t&&e.value&&""!==e.value.trim()&&this.validator.validateField(i,e.value).isValid){t.classList.remove("has-error","next-error-field"),t.classList.add("no-error");const e=t.closest(".form-group, .form-input");if(e){e.classList.remove("addErrorIcon"),e.classList.add("addTick");const t=e.querySelector(".next-error-label");t&&t.remove()}At.getState().clearError(i)}}})}updateBillingStateOptions(t,e,i){return m(this,null,function*(){if(!t||""===t.trim())return e.innerHTML='<option value="">Select Country First</option>',void(e.disabled=!0);e.disabled=!0;const n=e.innerHTML;e.innerHTML='<option value="">Loading...</option>';try{let n=this.stateLoadingPromises.get(t);n?this.logger.debug(`Reusing existing state loading promise for ${t} (billing)`):(n=this.countryService.getCountryStates(t),this.stateLoadingPromises.set(t,n),n.finally(()=>{setTimeout(()=>this.stateLoadingPromises.delete(t),100)}));const s=yield n;this.updateBillingFormLabels(s.countryConfig),e.innerHTML="";const a=document.createElement("option");a.value="",a.textContent=`Select ${s.countryConfig.stateLabel}`,a.disabled=!0,a.selected=!0,a.hidden=!0,e.appendChild(a),s.states.forEach(t=>{const i=document.createElement("option");i.value=t.code,i.textContent=t.name,e.appendChild(i)}),s.countryConfig.stateRequired?e.setAttribute("required","required"):e.removeAttribute("required"),i&&(e.value=i)}catch(s){this.logger.error("Failed to load billing states:",s),e.innerHTML=n}finally{e.disabled=!1}})}getFieldNameFromElement(t){return t.getAttribute("data-next-checkout-field")||t.getAttribute("os-checkout-field")||((t instanceof HTMLInputElement||t instanceof HTMLSelectElement)&&t.name?t.name:null)}getFieldByName(t){const e=this.fields.get(t);if(e)return e;return this.billingFields.get(t)||null}handleBillingFieldChange(t,e,i){const n=t.replace("billing-",""),s=i.billingAddress||{first_name:"",last_name:"",address1:"",city:"",province:"",postal:"",country:"",phone:""},a=hn[n]||n;i.setBillingAddress(u(c({},s),{[a]:e}))}handlePaymentMethodChange(t){const e=t.target,i=At.getState(),n=cn[e.value]||"credit-card";i.setPaymentMethod(n);const s=document.querySelector('[data-next-component="paypal-error"]');s instanceof HTMLElement&&(s.style.display="none");const a=document.querySelector('[data-next-component="credit-error"]');a instanceof HTMLElement&&(a.style.display="none"),this.ui.updatePaymentFormVisibility(e.value)}handleShippingMethodChange(t){const e=t.target,i=At.getState(),n=parseInt(e.value);if(isNaN(n))return;const s=[{id:1,name:"Standard Shipping",price:0,code:"standard"},{id:2,name:"Subscription Shipping",price:5,code:"subscription"},{id:3,name:"Expedited: Standard Overnight",price:28,code:"overnight"}].find(t=>t.id===n);if(s&&(i.setShippingMethod(s),Et.getState().setShippingMethod(s.id),!this.hasTrackedShippingInfo))try{const t={standard:"Standard",subscription:"Subscription",overnight:"Express"}[s.code]||s.name;Xe.track(Fe.createAddShippingInfoEvent(t)),this.hasTrackedShippingInfo=!0,this.logger.info("Tracked add_shipping_info event",{shippingTier:t})}catch(a){this.logger.warn("Failed to track add_shipping_info event:",a)}}handleBillingAddressToggle(t){const e=t.target;if(this.logger.info("[Billing] Toggle clicked",{checked:e.checked,animationInProgress:this.billingAnimationInProgress}),this.billingAnimationInProgress)return t.preventDefault(),e.checked=!e.checked,void this.logger.warn("[Billing] Click blocked - animation in progress");this.billingAnimationDebounceTimer&&clearTimeout(this.billingAnimationDebounceTimer),this.billingAnimationDebounceTimer=setTimeout(()=>{const t=At.getState(),i=document.querySelector(ln);i&&i instanceof HTMLElement?(this.logger.info("[Billing] Processing toggle",{targetChecked:e.checked,currentHeight:i.style.height,currentOverflow:i.style.overflow,currentTransition:i.style.transition,classes:i.className}),t.setSameAsShipping(e.checked),e.checked?(this.logger.info("[Billing] Collapsing form..."),this.collapseBillingForm(i)):(this.logger.info("[Billing] Expanding form..."),this.expandBillingForm(i),setTimeout(()=>{const e=t.formData.country,i=this.billingFields.get("billing-country");e&&i instanceof HTMLSelectElement&&(i.value=e,i.dispatchEvent(new Event("change",{bubbles:!0})),this.logger.debug("[Billing] Set country to:",e)),t.setBillingAddress({first_name:"",last_name:"",address1:"",address2:"",city:"",province:"",postal:"",country:e||"",phone:""})},50))):this.logger.error("[Billing] CRITICAL: Billing section not found!")},10)}setupAutofillDetection(){const t=new Map;let e=!1;this.eventBus.on("address:autocomplete-filled",()=>{e=!0,setTimeout(()=>{e=!1,[...this.fields.values()].forEach(e=>{(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&t.set(e,e.value)})},2e3)}),[...this.fields.values()].forEach(e=>{(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&t.set(e,e.value)});let i=0;const n=setInterval(()=>{if(i++,e)return;let s=!1;const a=[];[...this.fields.values()].forEach(e=>{if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement){const i=t.get(e)||"",n=e.value,r=e.getAttribute("data-next-checkout-field")||e.getAttribute("os-checkout-field")||e.name;if("address1"===r||"address"===r)return void t.set(e,n);n!==i&&""!==n&&document.activeElement!==e&&(s=!0,t.set(e,n),r&&a.push(r),"country"!==r&&"billing-country"!==r&&e.dispatchEvent(new Event("change",{bubbles:!0})))}}),s&&a.length>0&&(this.logger.info("Browser autofill detected for fields:",a),setTimeout(()=>{const t=At.getState();if(!this.hasTrackedShippingInfo&&t.formData.city&&t.formData.province)try{const e=t.shippingMethod,i=e?e.name:"Standard";Xe.track(Fe.createAddShippingInfoEvent(i)),this.hasTrackedShippingInfo=!0,this.logger.info("Tracked add_shipping_info event (browser autofill)",{shippingTier:i})}catch(e){this.logger.warn("Failed to track add_shipping_info event after browser autofill:",e)}},100)),i>=60&&(clearInterval(n),this.logger.debug("Stopped autofill detection after 30 seconds"))},500);this.autofillInterval=n}setupEventHandlers(){this.submitHandler=this.handleFormSubmit.bind(this),this.form.addEventListener("submit",this.submitHandler),this.changeHandler=this.handleFieldChange.bind(this),[...this.fields.values(),...this.billingFields.values()].forEach(t=>{(t instanceof HTMLInputElement||t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement)&&(t.addEventListener("change",this.changeHandler),t.addEventListener("blur",this.changeHandler),t.addEventListener("input",this.changeHandler))}),this.setupAutofillDetection(),this.paymentMethodChangeHandler=this.handlePaymentMethodChange.bind(this),this.form.querySelectorAll(['[data-next-checkout-field="payment-method"]','[os-checkout-field="payment-method"]','input[name="payment_method"]'].join(", ")).forEach(t=>{t.addEventListener("change",this.paymentMethodChangeHandler)}),this.shippingMethodChangeHandler=this.handleShippingMethodChange.bind(this),this.form.querySelectorAll('input[name="shipping_method"]').forEach(t=>{t.addEventListener("change",this.shippingMethodChangeHandler)}),this.billingAddressToggleHandler=this.handleBillingAddressToggle.bind(this);const t=this.form.querySelector('input[name="use_shipping_address"]');t&&t.addEventListener("change",this.billingAddressToggleHandler)}updateFormData(t){At.getState().updateFormData(t)}clearError(t){At.getState().clearError(t)}populateFormData(){return m(this,null,function*(){const t=At.getState(),e=t.formData.country,i=this.fields.get("country");if(e&&i instanceof HTMLSelectElement){i.value=e;const t=i.value;if(t&&t!==this.detectedCountryCode){this.logger.info(`Restoring saved country: ${t}`);const e=this.fields.get("province");e instanceof HTMLSelectElement&&(yield this.updateStateOptions(t,e))}}this.fields.forEach((e,i)=>{t.formData[i]&&(e instanceof HTMLInputElement||e instanceof HTMLSelectElement)&&("province"===i&&e instanceof HTMLSelectElement||(e.value=t.formData[i]))});const n=t.formData.province,s=this.fields.get("province");n&&s instanceof HTMLSelectElement&&(Array.from(s.options).map(t=>({value:t.value,text:t.text})),Array.from(s.options).some(t=>t.value===n)?(s.value=n,this.updateFormData({province:n}),this.logger.debug(`Restored province: ${n}`)):this.logger.warn(`Province ${n} not found in options for country ${e}`)),this.ui.updateLabelsForPopulatedData()})}handleTestDataFilled(t){setTimeout(()=>{this.populateFormData(),this.fields.forEach(t=>{(t instanceof HTMLInputElement||t instanceof HTMLSelectElement)&&t.dispatchEvent(new Event("change",{bubbles:!0}))}),this.ui.updateLabelsForPopulatedData()},150)}handleKonamiActivation(t){return m(this,null,function*(){var e,i;const n=At.getState();if("konami"===(null==(e=t.detail)?void 0:e.method))try{const t={email:"test@test.com",fname:"Test",lname:"Order",phone:"+14807581224",address1:"Test Address 123",address2:"",city:"Tempe",province:"AZ",postal:"85281",country:"US",accepts_marketing:!0};n.clearAllErrors(),this.validator.clearAllErrors(),n.updateFormData(t),n.setPaymentMethod("credit-card"),n.setPaymentToken("test_card"),n.setSameAsShipping(!0);const e=Et.getState().shippingMethod||n.shippingMethod;if(e)n.setShippingMethod(e);else{const t=lt.getState();if((null==(i=t.data)?void 0:i.shipping_methods)&&t.data.shipping_methods.length>0){const e=t.data.shipping_methods[0];e&&n.setShippingMethod({id:e.ref_id,name:e.code,price:parseFloat(e.price||"0"),code:e.code})}else n.setShippingMethod({id:1,name:"Standard Shipping",price:0,code:"standard"})}this.populateFormData(),setTimeout(()=>m(this,null,function*(){try{const t=yield this.createTestOrder();this.emit("order:completed",t),this.handleOrderRedirect(t)}catch(t){this.logger.error("Failed to create test order:",t)}}),1e3)}catch(s){this.logger.error("Error filling test data for Konami order:",s)}})}handleCheckoutUpdate(t){var e;t.errors&&Object.keys(t.errors).length>0&&Object.entries(t.errors).forEach(([t,e])=>{this.validator.setError(t,e)}),(null==(e=t.formData)?void 0:e.address1)&&t.formData.address1.trim().length>0&&this.showLocationFields(),t.isProcessing?this.submitButton&&(this.submitButton.disabled=!0,this.submitButton.setAttribute("aria-busy","true")):this.submitButton&&(this.submitButton.disabled=!1,this.submitButton.setAttribute("aria-busy","false"))}handleCartUpdate(t){t.isEmpty&&this.logger.warn("Cart is empty")}handleConfigUpdate(t){return m(this,null,function*(){try{t.spreedlyEnvironmentKey&&!this.creditCardService&&(yield this.initializeCreditCard(t.spreedlyEnvironmentKey,t.debug||!1))}catch(e){this.logger.error("Error handling config update:",e)}})}setSuccessUrl(t){this.setOrCreateMetaTag("next-success-url",t),this.setOrCreateMetaTag("next-next-url",t),this.setOrCreateMetaTag("os-next-page",t)}setFailureUrl(t){this.setOrCreateMetaTag("next-failure-url",t),this.setOrCreateMetaTag("os-failure-url",t)}setOrCreateMetaTag(t,e){let i=document.querySelector(`meta[name="${t}"]`);i||(i=document.createElement("meta"),i.name=t,document.head.appendChild(i)),i.content=e}validateField(t,e){const i=this.validator.validateField(t,e);return c({isValid:i.isValid},i.message&&{errorMessage:i.message})}clearAllValidationErrors(){At.getState().clearAllErrors(),this.validator.clearAllErrors()}update(){this.scanAllFields(),this.initializePhoneInputs()}cleanupEventListeners(){if(this.submitHandler&&this.form.removeEventListener("submit",this.submitHandler),this.changeHandler&&[...this.fields.values(),...this.billingFields.values()].forEach(t=>{t.removeEventListener("change",this.changeHandler),t.removeEventListener("blur",this.changeHandler),t.removeEventListener("input",this.changeHandler)}),this.autofillInterval&&clearInterval(this.autofillInterval),this.paymentMethodChangeHandler&&this.form.querySelectorAll(['[data-next-checkout-field="payment-method"]','[os-checkout-field="payment-method"]','input[name="payment_method"]'].join(", ")).forEach(t=>{t.removeEventListener("change",this.paymentMethodChangeHandler)}),this.shippingMethodChangeHandler&&this.form.querySelectorAll('input[name="shipping_method"]').forEach(t=>{t.removeEventListener("change",this.shippingMethodChangeHandler)}),this.billingAddressToggleHandler){const t=this.form.querySelector('input[name="use_shipping_address"]');t&&t.removeEventListener("change",this.billingAddressToggleHandler)}this.boundHandleTestDataFilled&&document.removeEventListener("checkout:test-data-filled",this.boundHandleTestDataFilled),this.boundHandleKonamiActivation&&document.removeEventListener("next:test-mode-activated",this.boundHandleKonamiActivation)}displayPaymentError(t){this.logger.info("[Payment Error] Displaying error:",t),setTimeout(()=>{const e=document.querySelector('[data-next-component="credit-error"]');if(e instanceof HTMLElement){const i=e.querySelector('[data-next-component="credit-error-text"]');i&&(i.textContent=t),e.style.display="flex",e.style.visibility="visible",e.style.opacity="1",e.classList.add("visible"),e.classList.remove("hidden"),"none"===e.style.display&&(e.style.removeProperty("display"),e.style.display="flex"),this.logger.info("[Payment Error] Error container shown with message:",t),setTimeout(()=>{e.style.display="none",e.classList.remove("visible")},1e4)}else this.logger.error("[Payment Error] Could not find error container element")},100),this.emit("payment:error",{errors:[t]})}trackBeginCheckout(){if(this.hasTrackedBeginCheckout)this.logger.debug("begin_checkout already tracked, skipping duplicate");else try{const t=Et.getState(),e=At.getState();!t.isEmpty&&t.items.length>0&&(this.hasTrackedBeginCheckout=!0,Xe.track(Fe.createBeginCheckoutEvent()),this.emit("checkout:started",{formData:e.formData,paymentMethod:e.paymentMethod,isProcessing:e.isProcessing,step:e.step}),this.logger.info("Tracked begin_checkout event on checkout form initialization"))}catch(t){this.logger.warn("Failed to track begin_checkout event:",t)}}destroy(){this.billingAnimationDebounceTimer&&clearTimeout(this.billingAnimationDebounceTimer),this.billingAnimationTimeouts.forEach(t=>clearTimeout(t)),this.billingAnimationTimeouts.clear(),this.validator&&this.validator.destroy(),this.creditCardService&&this.creditCardService.destroy(),this.prospectCartEnhancer&&this.prospectCartEnhancer.destroy(),this.phoneInputs.forEach(t=>{try{t.destroy()}catch(e){}}),this.phoneInputs.clear(),this.autocompleteInstances.clear(),this.fields.clear(),this.billingFields.clear(),this.paymentButtons.clear(),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),mn=Object.freeze(Object.defineProperty({__proto__:null,CheckoutReviewEnhancer:class extends ie{constructor(t){super(t),this.configs=[]}initialize(){return m(this,null,function*(){yield this.enhance()})}update(){const t=At.getState();this.updateDisplay(t.formData)}enhance(){return m(this,null,function*(){this.logger.info("CheckoutReviewEnhancer initializing",{element:this.element.tagName,className:this.element.className});const t=this.element.querySelectorAll("[data-next-checkout-review]");this.logger.info("Found review elements:",{count:t.length,elements:Array.from(t).map(t=>({tag:t.tagName,field:t.getAttribute("data-next-checkout-review"),format:t.getAttribute("data-next-format")}))}),t.forEach(t=>{const e=t.getAttribute("data-next-checkout-review"),i=t.getAttribute("data-next-format")||"text",n=t.getAttribute("data-next-fallback")||"";e&&t instanceof HTMLElement&&this.configs.push({element:t,field:e,format:i,fallback:n})}),this.logger.debug("Found review elements:",{count:this.configs.length,fields:this.configs.map(t=>t.field)}),this.unsubscribe=At.subscribe(t=>{this.updateDisplay(t.formData)})||void 0;const e=At.getState();this.updateDisplay(e.formData)})}updateDisplay(t){const e=At.getState();this.configs.forEach(i=>{const n=this.getFieldValue(i.field,t,e),s=this.formatValue(n,i.format,t);s?(i.element.textContent=s,i.element.classList.remove("next-review-empty")):(i.element.textContent=i.fallback||"",i.element.classList.add("next-review-empty"))})}getFieldValue(t,e,i){if(t.includes(".")){const n=t.split("."),s=n[0];if(i&&["shippingMethod","billingAddress","paymentMethod"].includes(s)){let t=i;for(const e of n)if(t=null==t?void 0:t[e],void 0===t)break;return t}let a=e;for(const t of n)if(a=null==a?void 0:a[t],void 0===a)break;return a}return e[t]}formatValue(t,e,i){if(!t&&"address"!==e&&"name"!==e)return"";switch(e){case"address":return this.formatAddress(i);case"name":return this.formatName(i);case"phone":return this.formatPhone(t);case"currency":return this.formatCurrency(t);default:return String(t||"")}}formatCurrency(t){if(null==t)return"";const e="number"==typeof t?t:parseFloat(t);return isNaN(e)?String(t):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}formatAddress(t){const e=[];t.address1&&e.push(t.address1),t.address2&&e.push(t.address2);const i=[];if(t.city&&i.push(t.city),t.province&&i.push(t.province),t.postal&&i.push(t.postal),i.length>0&&e.push(i.join(" ")),t.country){const i=this.getCountryName(t.country);e.push(i)}return e.join(", ")}formatName(t){const e=[];return t.fname&&e.push(t.fname),t.lname&&e.push(t.lname),e.join(" ")}formatPhone(t){if(!t)return"";if(t.startsWith("+"))return t;const e=t.replace(/\D/g,"");return 10===e.length?`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6)}`:t}getCountryName(t){return{US:"United States",CA:"Canada",GB:"United Kingdom",AU:"Australia",NZ:"New Zealand",IE:"Ireland",DE:"Germany",FR:"France",ES:"Spain",IT:"Italy",NL:"Netherlands",BE:"Belgium",CH:"Switzerland",AT:"Austria",DK:"Denmark",SE:"Sweden",NO:"Norway",FI:"Finland",BR:"Brazil",MX:"Mexico",AR:"Argentina",CL:"Chile",CO:"Colombia",PE:"Peru",JP:"Japan",CN:"China",KR:"South Korea",IN:"India",SG:"Singapore",MY:"Malaysia",TH:"Thailand",PH:"Philippines",ID:"Indonesia",VN:"Vietnam",ZA:"South Africa",EG:"Egypt",NG:"Nigeria",KE:"Kenya",IL:"Israel",AE:"United Arab Emirates",SA:"Saudi Arabia",TR:"Turkey",RU:"Russia",UA:"Ukraine",PL:"Poland",CZ:"Czech Republic",HU:"Hungary",RO:"Romania",GR:"Greece",PT:"Portugal"}[t]||t}destroy(){this.unsubscribe&&this.unsubscribe(),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),fn=X("PaymentAvailability");function gn(){try{return/Android/i.test(navigator.userAgent)?(fn.debug("Android device detected - hiding Apple Pay"),!1):(fn.debug("Apple Pay available (non-Android device)"),!0)}catch(t){return fn.warn("Error checking Apple Pay availability:",t),!0}}function vn(){return!0}function $n(){return!0}const yn=Object.freeze(Object.defineProperty({__proto__:null,ExpressCheckoutContainerEnhancer:class extends ie{constructor(t){super(t),this.buttonInstances=new Map,this.buttonClickHandlers=new Map,this.loadingOverlay=new Mi}initialize(){return m(this,null,function*(){if(this.validateElement(),"container"!==this.getAttribute("data-next-express-checkout"))throw new Error("ExpressCheckoutContainerEnhancer can only be used on container elements");const t={applePay:gn(),googlePay:!0,paypal:!0,userAgent:navigator.userAgent,platform:navigator.platform||"unknown"};if(this.logger.info("Payment capabilities detected:",t),this.buttonsContainer=this.element.querySelector('[data-next-express-checkout="buttons"]'),!this.buttonsContainer)return void this.logger.warn('No buttons container found with data-next-express-checkout="buttons"');this.errorElement=document.querySelector('[data-next-component="express-error"]'),this.errorTextElement=document.querySelector('[data-next-component="express-error-text"]'),this.errorElement&&(this.errorElement.style.display="none");const e=vt.getState(),i=new qt(e.apiKey);this.orderManager=new en(i,this.logger,(t,e)=>this.emit(t,e)),this.expressProcessor=new Qi(this.logger,()=>this.loadingOverlay.show(),t=>this.loadingOverlay.hide(t),(t,e)=>this.emit(t,e),this.orderManager),this.subscribe(vt,this.handleConfigUpdate.bind(this)),this.subscribe(lt,this.handleCampaignUpdate.bind(this)),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.handleConfigUpdate(vt.getState()),this.handleCampaignUpdate(lt.getState()),this.logger.debug("ExpressCheckoutContainerEnhancer initialized")})}handleConfigUpdate(t){const e=this.paymentConfig;this.paymentConfig=t.paymentConfig,JSON.stringify(e)!==JSON.stringify(t.paymentConfig)&&this.updateExpressCheckoutButtons()}handleCampaignUpdate(t){var e;const i=null==(e=t.data)?void 0:e.available_express_payment_methods;JSON.stringify(this.availableExpressMethods)!==JSON.stringify(i)&&(this.availableExpressMethods=i,this.updateExpressCheckoutButtons())}updateExpressCheckoutButtons(){return m(this,null,function*(){var t,e,i;if(this.buttonsContainer)if(this.availableExpressMethods&&this.availableExpressMethods.length>0){this.showContainer(),this.clearButtons();const i=null==(e=null==(t=this.paymentConfig)?void 0:t.expressCheckout)?void 0:e.methodOrder,n=new Map(this.availableExpressMethods.map(t=>[t.code,t])),s=i?i.filter(t=>n.has(t)).map(t=>n.get(t)):this.availableExpressMethods;for(const t of s)switch(t.code){case"paypal":this.createPayPalButton();break;case"apple_pay":gn()?this.createApplePayButton():this.logger.debug("Apple Pay not available on this device/browser");break;case"google_pay":this.createGooglePayButton();break;default:this.logger.warn(`Unknown express payment method: ${t.code}`)}const a=this.buttonInstances.size>0;this.logger.debug("Express checkout buttons updated from campaign data",{requestedMethods:this.availableExpressMethods.map(t=>t.code),methodOrder:i||"campaign order",actuallyShown:Array.from(this.buttonInstances.keys()),hasVisibleButtons:a}),a||this.hideContainer()}else if(null==(i=this.paymentConfig)?void 0:i.expressCheckout){const{enabled:t,methods:e,methodOrder:i}=this.paymentConfig.expressCheckout;if(!t)return void this.hideContainer();if(!Object.values(e||{}).some(t=>t))return void this.hideContainer();this.showContainer(),this.clearButtons();const n=i||["paypal","apple_pay","google_pay"];for(const a of n)switch(a){case"paypal":e.paypal&&$n()?this.createPayPalButton():e.paypal&&this.logger.debug("PayPal enabled in config but not available on device");break;case"apple_pay":e.applePay&&gn()?this.createApplePayButton():e.applePay&&this.logger.debug("Apple Pay enabled in config but not available on device/browser");break;case"google_pay":e.googlePay&&vn()?this.createGooglePayButton():e.googlePay&&this.logger.debug("Google Pay enabled in config but not available on device/browser");break;default:this.logger.warn(`Unknown payment method in methodOrder: ${a}`)}const s=this.buttonInstances.size>0;this.logger.debug("Express checkout buttons updated from config",{requestedMethods:{paypal:e.paypal,applePay:e.applePay,googlePay:e.googlePay},methodOrder:n,actuallyShown:Array.from(this.buttonInstances.keys()),hasVisibleButtons:s}),s||this.hideContainer()}else this.hideContainer();else this.hideContainer()})}hideContainer(){this.element.style.display="none",this.logger.debug("Express checkout container hidden - no methods enabled")}showContainer(){this.element.style.display="",this.logger.debug("Express checkout container shown")}clearButtons(){for(const[t,e]of this.buttonClickHandlers){const i=this.buttonInstances.get(t);i&&i.removeEventListener("click",e)}if(this.buttonClickHandlers.clear(),this.buttonsContainer)for(;this.buttonsContainer.firstChild;)this.buttonsContainer.removeChild(this.buttonsContainer.firstChild);this.buttonInstances.clear()}handleButtonClick(t,e){return m(this,null,function*(){if(e.preventDefault(),e.currentTarget.disabled)return;this.errorElement&&(this.errorElement.style.display="none");for(const[,t]of this.buttonInstances)t.setAttribute("disabled","true");const i=Et.getState(),n=At.getState();try{n.setProcessing(!0),n.setPaymentMethod(t),yield this.expressProcessor.handleExpressCheckout(t,i.items,i.isEmpty,()=>i.reset()),setTimeout(()=>{for(const[,t]of this.buttonInstances)i.isEmpty||t.removeAttribute("disabled")},3e3)}catch(s){if(this.handleError(s,"handleButtonClick"),n.setError("payment","Express checkout failed. Please try again."),this.errorElement&&this.errorTextElement){const t=s instanceof Error?s.message:"Express checkout failed";this.errorTextElement.textContent=`${t}. Please try a different payment method.`,this.errorElement.style.display="flex",this.errorElement.style.position="relative",this.errorElement.style.zIndex="10000"}for(const[,t]of this.buttonInstances)i.isEmpty||t.removeAttribute("disabled")}finally{n.setProcessing(!1)}})}handleCartUpdate(t){for(const[,e]of this.buttonInstances)t.isEmpty?(e.setAttribute("disabled","true"),e.classList.add("next-cart-empty")):(e.removeAttribute("disabled"),e.classList.remove("next-cart-empty"))}createPayPalButton(){return m(this,null,function*(){const t=this.createButton("paypal","cc-paypal","paypal-btn",'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="86px" height="22px" viewBox="0 0 86 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <title>paypal</title>\n  <g id="-Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g id="express-checkout-cta" transform="translate(-204.000000, -15.000000)" fill-rule="nonzero">\n      <g id="paypal" transform="translate(204.000000, 15.000000)">\n        <path d="M66.4793651,5.73913043 L61.8380952,5.73913043 C61.5650794,5.73913043 61.2920635,6.01242236 61.1555556,6.28571429 L59.2444444,18.310559 C59.2444444,18.5838509 59.3809524,18.7204969 59.6539683,18.7204969 L62.1111111,18.7204969 C62.384127,18.7204969 62.5206349,18.5838509 62.5206349,18.310559 L63.0666667,14.8944099 C63.0666667,14.621118 63.3396825,14.3478261 63.7492063,14.3478261 L65.2507937,14.3478261 C68.3904762,14.3478261 70.1650794,12.8447205 70.5746032,9.83850932 C70.847619,8.60869565 70.5746032,7.51552795 70.0285714,6.83229814 C69.2095238,6.14906832 67.9809524,5.73913043 66.4793651,5.73913043 M67.0253968,10.2484472 C66.752381,11.8881988 65.5238095,11.8881988 64.2952381,11.8881988 L63.4761905,11.8881988 L64.0222222,8.74534161 C64.0222222,8.60869565 64.1587302,8.47204969 64.431746,8.47204969 L64.7047619,8.47204969 C65.5238095,8.47204969 66.3428571,8.47204969 66.752381,9.01863354 C67.0253968,9.1552795 67.0253968,9.56521739 67.0253968,10.2484472" id="Shape" fill="#139AD6"></path>\n        <g id="Group" transform="translate(25.800000, 5.739130)" fill="#263B80">\n          <path d="M7.23492063,0 L2.59365079,0 C2.32063492,0 2.04761905,0.273291925 1.91111111,0.546583851 L0,12.5714286 C0,12.8447205 0.136507937,12.9813665 0.40952381,12.9813665 L2.59365079,12.9813665 C2.86666667,12.9813665 3.13968254,12.7080745 3.27619048,12.4347826 L3.82222222,9.1552795 C3.82222222,8.88198758 4.0952381,8.60869565 4.5047619,8.60869565 L6.00634921,8.60869565 C9.14603175,8.60869565 10.9206349,7.10559006 11.3301587,4.09937888 C11.6031746,2.86956522 11.3301587,1.77639752 10.784127,1.0931677 C9.96507937,0.409937888 8.87301587,0 7.23492063,0 M7.78095238,4.50931677 C7.50793651,6.14906832 6.27936508,6.14906832 5.05079365,6.14906832 L4.36825397,6.14906832 L4.91428571,3.00621118 C4.91428571,2.86956522 5.05079365,2.73291925 5.32380952,2.73291925 L5.5968254,2.73291925 C6.41587302,2.73291925 7.23492063,2.73291925 7.64444444,3.27950311 C7.78095238,3.41614907 7.91746032,3.82608696 7.78095238,4.50931677" id="Shape"></path>\n          <path d="M21.2952381,4.37267081 L19.1111111,4.37267081 C18.9746032,4.37267081 18.7015873,4.50931677 18.7015873,4.64596273 L18.5650794,5.32919255 L18.4285714,5.05590062 C17.8825397,4.37267081 16.9269841,4.09937888 15.8349206,4.09937888 C13.3777778,4.09937888 11.1936508,6.01242236 10.784127,8.60869565 C10.5111111,9.97515528 10.9206349,11.2049689 11.6031746,12.0248447 C12.2857143,12.8447205 13.2412698,13.1180124 14.4698413,13.1180124 C16.5174603,13.1180124 17.6095238,11.8881988 17.6095238,11.8881988 L17.4730159,12.5714286 C17.4730159,12.8447205 17.6095238,12.9813665 17.8825397,12.9813665 L19.9301587,12.9813665 C20.2031746,12.9813665 20.4761905,12.7080745 20.6126984,12.4347826 L21.8412698,4.7826087 C21.7047619,4.64596273 21.431746,4.37267081 21.2952381,4.37267081 M18.1555556,8.74534161 C17.8825397,9.97515528 16.9269841,10.931677 15.5619048,10.931677 C14.8793651,10.931677 14.3333333,10.6583851 14.0603175,10.3850932 C13.7873016,9.97515528 13.6507937,9.42857143 13.6507937,8.74534161 C13.7873016,7.51552795 14.8793651,6.55900621 16.1079365,6.55900621 C16.7904762,6.55900621 17.2,6.83229814 17.6095238,7.10559006 C18.0190476,7.51552795 18.1555556,8.19875776 18.1555556,8.74534161" id="Shape"></path>\n        </g>\n        <path d="M80.4031746,10.1118012 L78.2190476,10.1118012 C78.0825397,10.1118012 77.8095238,10.2484472 77.8095238,10.3850932 L77.6730159,11.068323 L77.5365079,10.7950311 C76.9904762,10.1118012 76.0349206,9.83850932 74.9428571,9.83850932 C72.4857143,9.83850932 70.3015873,11.7515528 69.8920635,14.3478261 C69.6190476,15.7142857 70.0285714,16.9440994 70.7111111,17.7639752 C71.3936508,18.5838509 72.3492063,18.8571429 73.5777778,18.8571429 C75.6253968,18.8571429 76.7174603,17.6273292 76.7174603,17.6273292 L76.5809524,18.310559 C76.5809524,18.5838509 76.7174603,18.7204969 76.9904762,18.7204969 L79.0380952,18.7204969 C79.3111111,18.7204969 79.584127,18.447205 79.7206349,18.173913 L80.9492063,10.5217391 C80.8126984,10.3850932 80.6761905,10.1118012 80.4031746,10.1118012 M77.2634921,14.484472 C76.9904762,15.7142857 76.0349206,16.6708075 74.6698413,16.6708075 C73.9873016,16.6708075 73.4412698,16.3975155 73.168254,16.1242236 C72.8952381,15.7142857 72.7587302,15.1677019 72.7587302,14.484472 C72.8952381,13.2546584 73.9873016,12.2981366 75.215873,12.2981366 C75.8984127,12.2981366 76.3079365,12.5714286 76.7174603,12.8447205 C77.2634921,13.2546584 77.4,13.9378882 77.2634921,14.484472" id="Shape" fill="#139AD6"></path>\n        <path d="M58.9714286,10.1118012 L56.6507937,10.1118012 C56.3777778,10.1118012 56.2412698,10.2484472 56.1047619,10.3850932 L53.1015873,15.0310559 L51.7365079,10.6583851 C51.6,10.3850932 51.4634921,10.2484472 51.0539683,10.2484472 L48.8698413,10.2484472 C48.5968254,10.2484472 48.4603175,10.5217391 48.4603175,10.7950311 L50.9174603,18.0372671 L48.5968254,21.3167702 C48.4603175,21.5900621 48.5968254,22 48.8698413,22 L51.0539683,22 C51.3269841,22 51.4634921,21.863354 51.6,21.7267081 L59.1079365,10.931677 C59.5174603,10.5217391 59.2444444,10.1118012 58.9714286,10.1118012" id="Path" fill="#263B80"></path>\n        <path d="M82.9968254,6.14906832 L81.0857143,18.447205 C81.0857143,18.7204969 81.2222222,18.8571429 81.4952381,18.8571429 L83.4063492,18.8571429 C83.6793651,18.8571429 83.952381,18.5838509 84.0888889,18.310559 L86,6.28571429 C86,6.01242236 85.8634921,5.8757764 85.5904762,5.8757764 L83.4063492,5.8757764 C83.2698413,5.73913043 83.1333333,5.8757764 82.9968254,6.14906832" id="Path" fill="#139AD6"></path>\n        <path d="M15.6984127,1.63975155 C14.7428571,0.546583851 12.968254,4.85463981e-15 10.5111111,4.85463981e-15 L3.68571429,4.85463981e-15 C3.27619048,4.85463981e-15 2.86666667,0.409937888 2.73015873,0.819875776 L0,18.7204969 C0,19.1304348 0.273015873,19.4037267 0.546031746,19.4037267 L4.77777778,19.4037267 L5.86984127,12.7080745 L5.86984127,12.9813665 C6.00634921,12.5714286 6.41587302,12.1614907 6.82539683,12.1614907 L8.87301587,12.1614907 C12.831746,12.1614907 15.8349206,10.5217391 16.7904762,6.01242236 C16.7904762,5.8757764 16.7904762,5.73913043 16.7904762,5.60248447 C16.6539683,5.60248447 16.6539683,5.60248447 16.7904762,5.60248447 C16.9269841,3.82608696 16.6539683,2.73291925 15.6984127,1.63975155" id="Path" fill="#263B80"></path>\n        <path d="M16.6539683,5.60248447 L16.6539683,5.60248447 C16.6539683,5.73913043 16.6539683,5.8757764 16.6539683,6.01242236 C15.6984127,10.6583851 12.6952381,12.1614907 8.73650794,12.1614907 L6.68888889,12.1614907 C6.27936508,12.1614907 5.86984127,12.5714286 5.73333333,12.9813665 L4.36825397,21.3167702 C4.36825397,21.5900621 4.5047619,21.863354 4.91428571,21.863354 L8.46349206,21.863354 C8.87301587,21.863354 9.28253968,21.5900621 9.28253968,21.1801242 L9.28253968,21.0434783 L9.96507937,16.8074534 L9.96507937,16.5341615 C9.96507937,16.1242236 10.3746032,15.8509317 10.784127,15.8509317 L11.3301587,15.8509317 C14.7428571,15.8509317 17.4730159,14.484472 18.1555556,10.3850932 C18.4285714,8.74534161 18.2920635,7.24223602 17.4730159,6.28571429 C17.3365079,6.01242236 17.0634921,5.73913043 16.6539683,5.60248447" id="Path" fill="#139AD6"></path>\n        <path d="M15.6984127,5.19254658 C15.5619048,5.19254658 15.4253968,5.05590062 15.2888889,5.05590062 C15.152381,5.05590062 15.015873,5.05590062 14.8793651,4.91925466 C14.3333333,4.7826087 13.7873016,4.7826087 13.1047619,4.7826087 L7.78095238,4.7826087 C7.64444444,4.7826087 7.50793651,4.7826087 7.37142857,4.91925466 C7.0984127,5.05590062 6.96190476,5.32919255 6.96190476,5.60248447 L5.86984127,12.7080745 L5.86984127,12.9813665 C6.00634921,12.5714286 6.41587302,12.1614907 6.82539683,12.1614907 L8.87301587,12.1614907 C12.831746,12.1614907 15.8349206,10.5217391 16.7904762,6.01242236 C16.7904762,5.8757764 16.7904762,5.73913043 16.9269841,5.60248447 C16.6539683,5.46583851 16.5174603,5.32919255 16.2444444,5.32919255 C15.8349206,5.19254658 15.8349206,5.19254658 15.6984127,5.19254658" id="Path" fill="#232C65"></path>\n      </g>\n    </g>\n  </g>\n</svg>');this.buttonInstances.set("paypal",t),this.buttonsContainer.appendChild(t);const e=t=>this.handleButtonClick("paypal",t);this.buttonClickHandlers.set("paypal",e),t.addEventListener("click",e),this.emit("express-checkout:initialized",{method:"paypal",element:t}),this.logger.debug("PayPal express checkout button created")})}createApplePayButton(){return m(this,null,function*(){const t=this.createButton("apple_pay","cc-apple-pay","payment-btn__logo",'<?xml version="1.0" encoding="UTF-8"?>\n<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 512 252.2">\n  <defs></defs>\n  <path class="st0" fill="white" d="M93.6,69.1c-6,7.1-15.6,12.7-25.2,11.9-1.2-9.6,3.5-19.8,9-26.1,6-7.3,16.5-12.5,25-12.9,1,10-2.9,19.8-8.8,27.1M102.3,82.9c-13.9-.8-25.8,7.9-32.4,7.9s-16.8-7.5-27.8-7.3c-14.3.2-27.6,8.3-34.9,21.2-15,25.8-3.9,64,10.6,85,7.1,10.4,15.6,21.8,26.8,21.4,10.6-.4,14.8-6.9,27.6-6.9s16.6,6.9,27.8,6.7c11.6-.2,18.9-10.4,26-20.8,8.1-11.8,11.4-23.3,11.6-23.9-.2-.2-22.4-8.7-22.6-34.3-.2-21.4,17.5-31.6,18.3-32.2-10-14.8-25.6-16.4-31-16.8M182.6,53.9v155.9h24.2v-53.3h33.5c30.6,0,52.1-21,52.1-51.4s-21.1-51.2-51.3-51.2h-58.5ZM206.8,74.3h27.9c21,0,33,11.2,33,30.9s-12,31-33.1,31h-27.8v-61.9ZM336.6,211c15.2,0,29.3-7.7,35.7-19.9h.5v18.7h22.4v-77.6c0-22.5-18-37-45.7-37s-44.7,14.7-45.4,34.9h21.8c1.8-9.6,10.7-15.9,22.9-15.9s23.1,6.9,23.1,19.6v8.6l-30.2,1.8c-28.1,1.7-43.3,13.2-43.3,33.2s15.7,33.6,38.2,33.6ZM343.1,192.5c-12.9,0-21.1-6.2-21.1-15.7s7.9-15.5,23-16.4l26.9-1.7v8.8c0,14.6-12.4,25-28.8,25ZM425.1,252.2c23.6,0,34.7-9,44.4-36.3l42.5-119.2h-24.6l-28.5,92.1h-.5l-28.5-92.1h-25.3l41,113.5-2.2,6.9c-3.7,11.7-9.7,16.2-20.4,16.2s-5.6-.2-7.1-.4v18.7c1.4.4,7.4.6,9.2.6Z" />\n</svg>');this.buttonInstances.set("apple_pay",t),this.buttonsContainer.appendChild(t);const e=t=>this.handleButtonClick("apple_pay",t);this.buttonClickHandlers.set("apple_pay",e),t.addEventListener("click",e),this.emit("express-checkout:initialized",{method:"apple_pay",element:t}),this.logger.debug("Apple Pay express checkout button created")})}createGooglePayButton(){return m(this,null,function*(){const t=this.createButton("google_pay","cc-google-pay","payment-btn__logo",'<?xml version="1.0" encoding="UTF-8"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 41 20.3" width="100%" height="100%">\n  <path fill="#ffffff" fill-rule="evenodd" d="M19.5,5.9v4.1h2.5c.6,0,1.1-.2,1.5-.6.4-.4.6-.9.6-1.4s-.2-1-.6-1.4c-.4-.4-.9-.6-1.5-.6h-2.5ZM19.5,11.5v4.7h-1.5V4.5h4c1,0,1.9.3,2.6,1,.7.7,1.1,1.5,1.1,2.5s-.4,1.8-1.1,2.5c-.7.7-1.6,1-2.6,1h-2.5s0,0,0,0ZM27.2,13.7c0,.4.2.7.5,1,.3.3.7.4,1.2.4.6,0,1.2-.2,1.7-.7.5-.5.7-1,.7-1.6-.5-.4-1.1-.6-2-.6s-1.1.1-1.5.4c-.4.3-.6.7-.6,1.1M29.1,7.9c1.1,0,2,.3,2.6.9.6.6,1,1.4,1,2.4v4.9h-1.4v-1.1h0c-.6.9-1.5,1.4-2.5,1.4s-1.6-.3-2.2-.8c-.6-.5-.9-1.2-.9-2s.3-1.5.9-2,1.5-.7,2.5-.7,1.6.2,2.2.5v-.3c0-.5-.2-1-.6-1.3-.4-.4-.9-.6-1.5-.5-.8,0-1.5.4-2,1.1l-1.3-.8c.7-1,1.8-1.6,3.2-1.6M41,8.2l-5,11.5h-1.6l1.9-4-3.3-7.5h1.6l2.4,5.7h0l2.3-5.8h1.6Z" />\n  <path fill="#4285f4" fill-rule="evenodd" d="M13.4,10.4c0-.5,0-.9-.1-1.4h-6.3v2.6h3.6c-.2.8-.6,1.6-1.3,2v1.7h2.2c1.3-1.2,2-2.9,2-4.9" />\n  <path fill="#34a853" fill-rule="evenodd" d="M7,17c1.8,0,3.3-.6,4.5-1.6l-2.2-1.7c-.6.4-1.4.6-2.3.6-1.8,0-3.2-1.2-3.8-2.8H1v1.7c1.1,2.3,3.5,3.7,6,3.7" />\n  <path fill="#fabb05" fill-rule="evenodd" d="M3.2,11.6c-.3-.8-.3-1.7,0-2.6v-1.7H1c-.5.9-.7,2-.7,3,0,1.1.3,2.1.7,3l2.2-1.7h0Z" />\n  <path fill="#e94235" fill-rule="evenodd" d="M7,6.2c1,0,1.9.3,2.6,1h0s1.9-1.9,1.9-1.9c-1.2-1.1-2.7-1.7-4.5-1.7-2.5,0-4.9,1.4-6,3.7l2.2,1.7c.5-1.6,2-2.8,3.8-2.8" />\n</svg>');this.buttonInstances.set("google_pay",t),this.buttonsContainer.appendChild(t);const e=t=>this.handleButtonClick("google_pay",t);this.buttonClickHandlers.set("google_pay",e),t.addEventListener("click",e),this.emit("express-checkout:initialized",{method:"google_pay",element:t}),this.logger.debug("Google Pay express checkout button created")})}createButton(t,e,i,n){const s=document.createElement("button");s.setAttribute("data-next-express-checkout",t),s.setAttribute("data-action","submit"),s.className=`payment-btn ${e}`;const a=document.createElement("div");a.className=i,a.innerHTML=n,s.appendChild(a);const r=document.createElement("div");return r.setAttribute("next-slot","spinner"),r.className="payment-btn-spinner",r.innerHTML='<div class="spinner"></div>',s.appendChild(r),s}update(){this.handleConfigUpdate(vt.getState())}destroy(){this.clearButtons(),super.destroy()}}},Symbol.toStringTag,{value:"Module"}));class bn{static render(t,e){const{data:i,formatters:n={},defaultValues:s={}}=e;return t.replace(/\{([^}]+)\}/g,(t,e)=>{try{const t=this.getValue(i,e),a=this.formatValue(t,e,n);return""===a||null==a?s[e]||"":String(a)}catch(a){return s[e]||""}})}static getValue(t,e){const i=e.split(".");let n=t;for(const s of i){if(null==n)return;n=n[s]}return n}static formatValue(t,e,i){if(e.endsWith(".raw"))return t;const n=["price","total","savings","amount","cost","fee","charge","compare","retail","recurring","subtotal","tax","shipping","discount","credit","balance","payment","refund"].some(t=>e.toLowerCase().includes(t.toLowerCase()));return n&&"number"==typeof t?i.currency?i.currency(t):t:n&&"string"==typeof t&&!isNaN(parseFloat(t))?i.currency?i.currency(parseFloat(t)):t:e.includes("date")||e.includes("created_at")?i.date?i.date(t):t:"string"==typeof t&&(e.includes("name")||e.includes("title")||e.includes("description"))&&i.escapeHtml?i.escapeHtml(t):t}static validateTemplate(t,e){const i=[],n=this.extractPlaceholders(t);for(const a of n){const t=a.replace(".raw","");e.some(e=>e.startsWith(t))||i.push(`Unknown placeholder: {${a}}`)}const s=t.match(/\{[^}]*$/g);return s&&i.push(`Unclosed placeholders found: ${s.join(", ")}`),i}static extractPlaceholders(t){return(t.match(/\{([^}]+)\}/g)||[]).map(t=>t.slice(1,-1))}static createDefaultFormatters(){return{currency:t=>{const{formatCurrency:e}=require("@/utils/currencyFormatter");return e(t)},date:t=>{if(!t)return"";try{const e=new Date(t);return isNaN(e.getTime())?String(t):new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}catch(e){return String(t)}},escapeHtml:t=>{const e=document.createElement("div");return e.textContent=t,e.innerHTML}}}}const xn=Object.freeze(Object.defineProperty({__proto__:null,CartItemListEnhancer:class extends ie{constructor(){super(...arguments),this.lastRenderedItems="",this.groupItems=!1}initialize(){return m(this,null,function*(){var t,e;this.validateElement();const i=this.getAttribute("data-item-template-id"),n=this.getAttribute("data-item-template-selector");if(i){const e=document.getElementById(i);this.template=null!=(t=null==e?void 0:e.innerHTML.trim())?t:""}else if(n){const t=document.querySelector(n);this.template=null!=(e=null==t?void 0:t.innerHTML.trim())?e:""}else this.template=this.getAttribute("data-item-template")||this.element.innerHTML.trim();this.template&&""!==this.template.replace(/<!--[\s\S]*?-->/g,"").trim()||(this.template=this.getDefaultItemTemplate()),this.emptyTemplate=this.getAttribute("data-empty-template")||'<div class="cart-empty">Your cart is empty</div>';const s=this.getAttribute("data-title-map");if(s)try{this.titleMap=JSON.parse(s)}catch(a){this.logger.warn("Invalid title map JSON:",a)}this.groupItems=this.hasAttribute("data-group-items"),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.handleCartUpdate(Et.getState()),this.logger.debug("CartItemListEnhancer initialized")})}update(t){t&&this.handleCartUpdate(t)}handleCartUpdate(t){return m(this,null,function*(){try{t.isEmpty||0===t.items.length?this.renderEmptyCart():yield this.renderCartItems(t.items)}catch(e){this.handleError(e,"handleCartUpdate")}})}renderEmptyCart(){this.element.innerHTML=this.emptyTemplate||"",this.addClass("cart-empty"),this.removeClass("cart-has-items")}renderCartItems(t){return m(this,null,function*(){this.removeClass("cart-empty"),this.addClass("cart-has-items");const e=lt.getState(),i=[],n=this.groupItems?this.groupIdenticalItems(t):t;for(const t of n){const n=yield this.renderCartItem(t,e);n&&i.push(n)}const s=i.join("");s!==this.lastRenderedItems?(this.element.innerHTML=s,this.lastRenderedItems=s,yield this.enhanceNewElements()):this.logger.debug("Cart items HTML unchanged, skipping DOM update")})}renderCartItem(t,e){return m(this,null,function*(){try{const i=e.getPackage(t.packageId);if(!i)return this.logger.warn(`Package data not found for item ${t.packageId}`),"";const n=this.prepareCartItemData(t,i),s=this.template||this.getDefaultItemTemplate(),a=u(c({},bn.createDefaultFormatters()),{currency:t=>ci.formatCurrency(t)});return bn.render(s,{data:{item:n},formatters:a})}catch(i){return this.logger.error("Error rendering cart item:",i),""}})}getDefaultItemTemplate(){return'\n      <div class="cart-item" data-cart-item-id="{item.id}" data-package-id="{item.packageId}">\n        <div class="cart-item-image">\n          <img src="{item.image}" alt="{item.name}" onerror="this.style.display=\'none\';">\n          <span style="font-size: 1.5em;">📦</span>\n        </div>\n        <div class="cart-item-details">\n          <h4 class="cart-item-name">{item.name}</h4>\n          <div class="cart-item-variant" style="color: #666; font-size: 0.9em;">{item.variantAttributesFormatted}</div>\n          <div class="cart-item-sku" style="color: #999; font-size: 0.85em;">SKU: {item.variantSku}</div>\n          <div class="cart-item-pricing">\n            <div class="original-price {item.showOriginalPrice}" style="text-decoration: line-through; color: #999;">{item.price} each</div>\n            <div class="current-price">{item.finalPrice} each</div>\n            <div class="discount-badge {item.showDiscount}" style="color: #e74c3c; font-weight: bold;">-{item.discountAmount} coupon discount</div>\n            <div class="compare-price {item.showCompare}" style="text-decoration: line-through; color: #999;">{item.comparePrice}</div>\n            <div class="savings {item.showSavings}" style="color: #0d7519; font-weight: bold;">Save {item.savingsAmount} ({item.savingsPct})</div>\n            <div class="frequency">{item.frequency}</div>\n            <div class="recurring-price {item.showRecurring}" style="color: #666;">Then {item.recurringPrice} recurring</div>\n          </div>\n        </div>\n        <div class="quantity-controls">\n          <button class="quantity-btn" data-next-quantity="decrease" data-package-id="{item.packageId}">-</button>\n          <span class="quantity-display">{item.quantity}</span>\n          <button class="quantity-btn" data-next-quantity="increase" data-package-id="{item.packageId}">+</button>\n        </div>\n        <div class="cart-item-total">\n          <div class="line-total-original {item.showOriginalPrice}" style="text-decoration: line-through; color: #999; font-size: 0.9em;">{item.lineTotal}</div>\n          <div class="line-total">{item.finalLineTotal}</div>\n          <div class="line-compare {item.showCompare}" style="text-decoration: line-through; color: #999; font-size: 0.9em;">{item.lineCompare}</div>\n        </div>\n        <button class="remove-btn" data-next-remove-item data-package-id="{item.packageId}" data-confirm="true" data-confirm-message="Remove this item from your cart?">Remove</button>\n      </div>\n    '.trim()}enhanceNewElements(){return m(this,null,function*(){const t=this.element.querySelectorAll("[data-next-quantity]"),e=this.element.querySelectorAll("[data-next-remove-item]");if(t.length>0){const{QuantityControlEnhancer:e}=yield Promise.resolve().then(()=>kn);for(const n of Array.from(t))if(n instanceof HTMLElement)try{const t=new e(n);yield t.initialize(),this.logger.debug("Enhanced quantity control button",n)}catch(i){this.logger.error("Failed to enhance quantity button:",i,n)}}if(e.length>0){const{RemoveItemEnhancer:t}=yield Promise.resolve().then(()=>Sn);for(const n of Array.from(e))if(n instanceof HTMLElement)try{const e=new t(n);yield e.initialize(),this.logger.debug("Enhanced remove button",n)}catch(i){this.logger.error("Failed to enhance remove button:",i,n)}}this.logger.debug(`Enhanced ${t.length} quantity buttons and ${e.length} remove buttons`)})}prepareCartItemData(t,e){var i,n,s;const a=t.price,r=a*t.quantity,o=parseFloat(e.price||"0"),d=parseFloat(e.price_total||"0"),l=parseFloat(e.price_retail||e.price||"0"),h=parseFloat(e.price_retail_total||"0"),p=e.qty||1,m=Et.getState();let f=0,g=!1;if(m.appliedCoupons&&m.appliedCoupons.length>0)for(const c of m.appliedCoupons)if("package"===c.definition.scope&&(null==(i=c.definition.packageIds)?void 0:i.includes(t.packageId))){if("percentage"===c.definition.type)f+=r*(c.definition.value/100),c.definition.maxDiscount&&(f=Math.min(f,c.definition.maxDiscount));else{const t=r/m.items.filter(t=>{var e;return null==(e=c.definition.packageIds)?void 0:e.includes(t.packageId)}).reduce((t,e)=>t+e.price*e.quantity,0);f+=c.definition.value*t}g=!0}else if("order"===c.definition.scope){const t=r/m.subtotal;"percentage"===c.definition.type?f+=r*(c.definition.value/100):f+=c.definition.value*t,g=!0}const v=r-f,$=a-f/t.quantity,y=vi.calculatePackageMetrics({price:o,retailPrice:l,quantity:p,priceTotal:d,retailPriceTotal:h}),b=y.totalRetailPrice*t.quantity,x=y.totalSavings*t.quantity,w=parseFloat(e.price_recurring||"0"),_=parseFloat(e.price_recurring_total||"0"),k=e.is_recurring&&w>0,S=k?e.interval_count&&e.interval_count>1?`Every ${e.interval_count} ${e.interval}s`:`Per ${e.interval}`:"One time",C=(null==(n=window.nextConfig)?void 0:n.productTitleMap)||{},P=this.titleMap||C;let E=P[t.packageId]||P[String(t.packageId)];const I=null==(s=window.nextConfig)?void 0:s.productTitleTransform;if(!E&&"function"==typeof I)try{E=I(t.packageId,e.name)}catch(T){this.logger.warn("Error in productTitleTransform:",T)}return u(c({id:t.id,packageId:t.packageId,title:E||t.title||e.name,name:E||e.name,quantity:t.quantity,productId:t.productId||e.product_id,productName:t.productName||e.product_name||"",variantId:t.variantId||e.product_variant_id,variantName:t.variantName||e.product_variant_name||"",variantAttributes:t.variantAttributes||e.product_variant_attribute_values||[],variantSku:t.variantSku||e.product_sku||"",variantAttributesFormatted:this.formatVariantAttributes(t.variantAttributes||e.product_variant_attribute_values||[]),variantAttributesList:this.formatVariantAttributesList(t.variantAttributes||e.product_variant_attribute_values||[])},this.extractIndividualAttributes(t.variantAttributes||e.product_variant_attribute_values||[])),{price:a,unitPrice:y.unitPrice,lineTotal:r,lineCompare:y.hasSavings?b:0,comparePrice:y.hasSavings?y.totalRetailPrice:0,unitComparePrice:y.unitRetailPrice,recurringPrice:k?w:0,savingsAmount:x>0?x:0,unitSavings:y.unitSavings,discountAmount:f,discountedPrice:$,discountedLineTotal:v,hasDiscount:g,finalPrice:g?$:a,finalLineTotal:g?v:r,packagePrice:o,packagePriceTotal:y.totalPrice,packageRetailPrice:l,packageRetailTotal:y.totalRetailPrice,packageSavings:y.totalSavings>0?y.totalSavings:0,recurringTotal:k?_:0,savingsPct:y.totalSavingsPercentage>0?`${Math.round(y.totalSavingsPercentage)}%`:"",packageSavingsPct:y.totalSavingsPercentage>0?`${Math.round(y.totalSavingsPercentage)}%`:"",packageQty:p,frequency:S,isRecurring:k?"true":"false",hasSavings:x>0?"true":"false",hasPackageSavings:y.hasSavings?"true":"false",image:e.image||"",sku:e.external_id?String(e.external_id):"","price.raw":a,"unitPrice.raw":y.unitPrice,"lineTotal.raw":r,"lineCompare.raw":b,"comparePrice.raw":y.totalRetailPrice,"unitComparePrice.raw":y.unitRetailPrice,"recurringPrice.raw":w,"savingsAmount.raw":x,"unitSavings.raw":y.unitSavings,"packagePrice.raw":o,"packagePriceTotal.raw":y.totalPrice,"packageRetailPrice.raw":l,"packageRetailTotal.raw":y.totalRetailPrice,"packageSavings.raw":y.totalSavings,"recurringTotal.raw":_,"savingsPct.raw":Math.round(y.totalSavingsPercentage),"packageSavingsPct.raw":Math.round(y.totalSavingsPercentage),"discountAmount.raw":f,"discountedPrice.raw":$,"discountedLineTotal.raw":v,"finalPrice.raw":g?$:a,"finalLineTotal.raw":g?v:r,showCompare:y.hasSavings?"show":"hide",showSavings:x>0?"show":"hide",showUnitPrice:p>1?"show":"hide",showUnitCompare:p>1&&y.unitSavings>0?"show":"hide",showUnitSavings:p>1&&y.unitSavings>0?"show":"hide",showRecurring:k?"show":"hide",showPackageSavings:y.totalSavings>0?"show":"hide",showPackageTotal:y.totalPrice>0?"show":"hide",showRecurringTotal:k&&_>0?"show":"hide",showDiscount:g?"show":"hide",showOriginalPrice:g?"show":"hide"})}getItemCount(){return this.element.querySelectorAll("[data-cart-item-id]").length}getItemElements(){return this.element.querySelectorAll("[data-cart-item-id]")}refreshItem(t){const e=Et.getState();this.handleCartUpdate(e)}groupIdenticalItems(t){const e=new Map;for(const i of t){const t=e.get(i.packageId);t?(t.quantity+=i.quantity,t.groupedItemIds||(t.groupedItemIds=[t.id]),t.groupedItemIds.push(i.id)):e.set(i.packageId,c({},i))}return Array.from(e.values())}formatVariantAttributes(t){return t&&0!==t.length?t.map(t=>`${t.name}: ${t.value}`).join(", "):""}formatVariantAttributesList(t){return t&&0!==t.length?t.map(t=>`<span class="variant-attr">${t.name}: ${t.value}</span>`).join(" "):""}extractIndividualAttributes(t){const e={};return t&&0!==t.length?(t.forEach(t=>{const i=t.code.charAt(0).toUpperCase()+t.code.slice(1).toLowerCase();e[`variant${i}`]=t.value,e[`variant.${t.code.toLowerCase()}`]=t.value,e[`variantAttr.${t.code.toLowerCase()}`]=t.value,e[`variant_${t.code}`]=t.value}),e):e}}},Symbol.toStringTag,{value:"Module"})),wn=Object.freeze(Object.defineProperty({__proto__:null,OrderItemListEnhancer:class extends ie{initialize(){return m(this,null,function*(){var t,e;this.validateElement();const i=this.getAttribute("data-item-template-id"),n=this.getAttribute("data-item-template-selector");if(i){const e=document.getElementById(i);this.template=null!=(t=null==e?void 0:e.innerHTML.trim())?t:""}else if(n){const t=document.querySelector(n);this.template=null!=(e=null==t?void 0:t.innerHTML.trim())?e:""}else this.template=this.getAttribute("data-item-template")||this.element.innerHTML.trim();this.template&&""!==this.template.replace(/<!--[\s\S]*?-->/g,"").trim()||(this.template=this.getDefaultItemTemplate()),this.emptyTemplate=this.getAttribute("data-empty-template")||'<div class="order-empty">No items found in order</div>',yield this.checkAndLoadOrderFromUrl(),this.subscribe(Dt,this.handleOrderUpdate.bind(this)),this.handleOrderUpdate(Dt.getState()),this.logger.debug("OrderItemListEnhancer initialized")})}update(t){t&&this.handleOrderUpdate(t)}checkAndLoadOrderFromUrl(){return m(this,null,function*(){const t=new URLSearchParams(window.location.search).get("ref_id");if(t){const i=Dt.getState();if(!i.order&&!i.isLoading&&i.refId!==t)try{const e=vt.getState();this.apiClient=new qt(e.apiKey),yield i.loadOrder(t,this.apiClient)}catch(e){this.logger.error("Failed to auto-load order:",e)}}})}handleOrderUpdate(t){return m(this,null,function*(){try{const e=t.order;if(t.isLoading)return this.element.innerHTML='<div class="status-message">Loading order items...</div>',this.addClass("order-loading"),this.removeClass("order-has-items"),void this.removeClass("order-empty");if(t.error)return this.element.innerHTML='<div class="status-message">Error loading order items</div>',this.addClass("order-error"),this.removeClass("order-has-items"),this.removeClass("order-empty"),void this.removeClass("order-loading");e&&e.lines&&0!==e.lines.length?yield this.renderOrderItems(e.lines):this.renderEmptyOrder()}catch(e){this.handleError(e,"handleOrderUpdate")}})}renderEmptyOrder(){this.element.innerHTML=this.emptyTemplate||"",this.addClass("order-empty"),this.removeClass("order-has-items"),this.removeClass("order-loading"),this.removeClass("order-error")}renderOrderItems(t){return m(this,null,function*(){this.removeClass("order-empty"),this.removeClass("order-loading"),this.removeClass("order-error"),this.addClass("order-has-items");const e=[];for(const i of t){const t=this.renderOrderItem(i);t&&e.push(t)}this.element.innerHTML=e.join("")})}renderOrderItem(t){try{const e=this.prepareOrderLineData(t),i=this.template||this.getDefaultItemTemplate(),n=u(c({},bn.createDefaultFormatters()),{currency:t=>ci.formatCurrency(t)});return bn.render(i,{data:{item:e},formatters:n})}catch(e){return this.logger.error("Error rendering order item:",e),""}}getDefaultItemTemplate(){return'\n      <div class="order-item" data-order-line-id="{item.id}">\n        <div class="order-item-image {item.showImage}">\n          <img src="{item.image}" alt="{item.name}" onerror="this.style.display=\'none\';">\n          <span class="item-fallback-icon" style="font-size: 1.5em;">📦</span>\n        </div>\n        <div class="order-item-details">\n          <h4 class="order-item-name">\n            {item.name}\n            <span class="upsell-badge {item.showUpsell}" style="background: #e7f3ff; color: #0056b3; padding: 2px 6px; border-radius: 10px; font-size: 0.8em; margin-left: 8px;">{item.upsellBadge}</span>\n          </h4>\n          <div class="order-item-meta">\n            <div class="item-sku">SKU: {item.sku}</div>\n            <div class="item-variant {item.showVariant}">Variant: {item.variant}</div>\n            <div class="item-description {item.showDescription}" style="color: #6c757d; font-size: 0.9em;">{item.description}</div>\n          </div>\n          <div class="order-item-pricing">\n            <div class="unit-price">{item.price} each</div>\n            <div class="tax-info {item.showTax}" style="color: #666; font-size: 0.9em;">Tax: {item.unitTax}</div>\n          </div>\n        </div>\n        <div class="quantity-info">\n          <span class="quantity-label">Qty:</span>\n          <span class="quantity-value">{item.quantity}</span>\n        </div>\n        <div class="order-item-total">\n          <div class="line-total">{item.lineTotal}</div>\n          <div class="line-tax {item.showTax}" style="color: #666; font-size: 0.9em;">Tax: {item.lineTax}</div>\n        </div>\n      </div>\n    '.trim()}prepareOrderLineData(t){const e=parseFloat(t.price_incl_tax||"0"),i=parseFloat(t.price_excl_tax||"0"),n=t.quantity||1,s=parseFloat(t.price_incl_tax_excl_discounts||t.price_incl_tax||"0"),a=parseFloat(t.price_excl_tax_excl_discounts||t.price_excl_tax||"0"),r=n>0?e/n:e,o=n>0?i/n:i,d=n>0?s/n:s,l=n>0?a/n:a,c=r-o,u=e-i,h=d-r,p=s-e,m=h>.01,f=t.is_upsell?"UPSELL":"";return{id:String(t.id||""),title:t.product_title||"Unknown Product",name:t.product_title||"Unknown Product",sku:t.product_sku||"",quantity:String(n),price:r,priceExclTax:o,unitTax:c,lineTotal:e,lineTotalExclTax:i,lineTax:u,priceExclDiscounts:d,priceExclTaxExclDiscounts:l,lineTotalExclDiscounts:s,lineTotalExclTaxExclDiscounts:a,unitDiscount:h,lineDiscount:p,image:t.image||"",description:t.product_description||"",variant:t.variant_title||"",isUpsell:t.is_upsell?"true":"false",upsellBadge:f,hasImage:t.image?"true":"false",hasDescription:t.product_description?"true":"false",hasVariant:t.variant_title?"true":"false",hasTax:c>0?"true":"false",hasDiscount:m?"true":"false",showUpsell:t.is_upsell?"show":"hide",showImage:t.image?"show":"hide",showDescription:t.product_description?"show":"hide",showVariant:t.variant_title?"show":"hide",showTax:c>0?"show":"hide",showDiscount:m?"show":"hide"}}getItemCount(){return this.element.querySelectorAll("[data-order-line-id]").length}getItemElements(){return this.element.querySelectorAll("[data-order-line-id]")}}},Symbol.toStringTag,{value:"Module"}));class _n extends ie{setupCartSubscription(){this.subscribe(Et,this.handleCartUpdate.bind(this)),this.cartState=Et.getState()}isCartEmpty(){var t,e;return null==(e=null==(t=this.cartState)?void 0:t.isEmpty)||e}getCartItem(t){var e;return null==(e=this.cartState)?void 0:e.items.find(e=>e.packageId===t)}getTotalQuantity(){var t,e;return null!=(e=null==(t=this.cartState)?void 0:t.totalQuantity)?e:0}getCartTotals(){var t,e;return null!=(e=null==(t=this.cartState)?void 0:t.totals)?e:{subtotal:{value:0,formatted:"$0.00"},shipping:{value:0,formatted:"$0.00"},tax:{value:0,formatted:"$0.00"},discounts:{value:0,formatted:"$0.00"},total:{value:0,formatted:"$0.00"},count:0,isEmpty:!0,savings:{value:0,formatted:"$0.00"},savingsPercentage:{value:0,formatted:"0%"},compareTotal:{value:0,formatted:"$0.00"},hasSavings:!1}}getCartItems(){var t,e;return null!=(e=null==(t=this.cartState)?void 0:t.items)?e:[]}hasPackageInCart(t){return void 0!==this.getCartItem(t)}}const kn=Object.freeze(Object.defineProperty({__proto__:null,QuantityControlEnhancer:class extends _n{constructor(){super(...arguments),this.step=1,this.min=0,this.max=99}initialize(){return m(this,null,function*(){this.validateElement();const t=this.getRequiredAttribute("data-next-quantity");if(!["increase","decrease","set"].includes(t))throw new Error(`Invalid quantity action: ${t}. Must be 'increase', 'decrease', or 'set'`);this.action=t;const e=this.getRequiredAttribute("data-package-id");if(this.packageId=parseInt(e,10),isNaN(this.packageId))throw new Error(`Invalid package ID: ${e}`);this.step=parseInt(this.getAttribute("data-step")||"1",10)||1,this.min=parseInt(this.getAttribute("data-min")||"0",10)||0,this.max=parseInt(this.getAttribute("data-max")||"99",10)||99,this.setupEventListeners(),this.setupCartSubscription(),this.logger.debug(`QuantityControlEnhancer initialized for package ${this.packageId} with action ${this.action}`)})}update(t){t&&this.handleCartUpdate(t)}setupEventListeners(){"set"!==this.action||"INPUT"!==this.element.tagName&&"SELECT"!==this.element.tagName?this.element.addEventListener("click",this.handleClick.bind(this)):(this.element.addEventListener("change",this.handleQuantityChange.bind(this)),this.element.addEventListener("blur",this.handleQuantityChange.bind(this)),this.element instanceof HTMLInputElement&&"number"===this.element.type&&this.element.addEventListener("input",this.handleNumberInput.bind(this)))}handleClick(t){return m(this,null,function*(){if(t.preventDefault(),t.stopPropagation(),!this.hasClass("disabled")&&!this.element.hasAttribute("disabled"))try{this.addClass("processing"),yield this.updateQuantity()}catch(e){this.handleError(e,"handleClick")}finally{this.removeClass("processing")}})}handleQuantityChange(t){return m(this,null,function*(){if("set"!==this.action)return;const e=t.target,i=parseInt(e.value,10);if(isNaN(i)||i<this.min)e.value=String(this.min);else if(i>this.max)e.value=String(this.max);else try{this.addClass("processing");const t=Et.getState();0===i?yield t.removeItem(this.packageId):yield t.updateQuantity(this.packageId,i)}catch(n){this.handleError(n,"handleQuantityChange");const t=Et.getState().getItemQuantity(this.packageId);e.value=String(t)}finally{this.removeClass("processing")}})}handleNumberInput(t){const e=t.target,i=parseInt(e.value,10);i<this.min&&(e.value=String(this.min)),i>this.max&&(e.value=String(this.max))}updateQuantity(){return m(this,null,function*(){const t=Et.getState(),e=t.getItemQuantity(this.packageId);let i;switch(this.action){case"increase":i=Math.min(e+this.step,this.max);break;case"decrease":i=Math.max(e-this.step,this.min);break;default:return}i!==e?(i<=0?(yield t.removeItem(this.packageId),this.logger.debug(`Removed item ${this.packageId} from cart`)):(yield t.updateQuantity(this.packageId,i),this.logger.debug(`Updated quantity for item ${this.packageId} to ${i}`)),this.emitQuantityChangeEvent(e,i)):this.logger.debug("Quantity unchanged, no action needed")})}handleCartUpdate(t){const e=this.getCartItem(this.packageId),i=(null==e?void 0:e.quantity)||0,n=i>0;this.updateButtonState(i),"set"===this.action&&(this.element instanceof HTMLInputElement||this.element instanceof HTMLSelectElement)&&this.element.value!==String(i)&&(this.element.value=String(i)),this.toggleClass("has-item",n),this.toggleClass("empty",!n),this.element.setAttribute("data-quantity",String(i)),this.element.setAttribute("data-in-cart",String(n))}updateButtonState(t){const e=t<this.max,i=t>this.min;switch(this.action){case"increase":this.toggleClass("disabled",!e),this.element.toggleAttribute("disabled",!e),this.setAttribute("aria-disabled",String(!e));break;case"decrease":this.toggleClass("disabled",!i),this.element.toggleAttribute("disabled",!i),this.setAttribute("aria-disabled",String(!i));break;case"set":this.element instanceof HTMLInputElement&&(this.element.min=String(this.min),this.element.max=String(this.max),this.element.step=String(this.step))}this.updateButtonContent(t)}updateButtonContent(t){const e=this.getAttribute("data-original-content")||this.element.innerHTML;this.hasAttribute("data-original-content")||this.setAttribute("data-original-content",this.element.innerHTML);const i=e.replace(/\{quantity\}/g,String(t)).replace(/\{step\}/g,String(this.step));this.element.innerHTML!==i&&(this.element.innerHTML=i)}emitQuantityChangeEvent(t,e){this.emit("cart:quantity-changed",{packageId:this.packageId,quantity:e,oldQuantity:t})}getCurrentQuantity(){return Et.getState().getItemQuantity(this.packageId)}setQuantity(t){const e=Math.max(this.min,Math.min(this.max,t)),i=Et.getState();return e<=0?i.removeItem(this.packageId):i.updateQuantity(this.packageId,e)}getConstraints(){return{min:this.min,max:this.max,step:this.step}}}},Symbol.toStringTag,{value:"Module"})),Sn=Object.freeze(Object.defineProperty({__proto__:null,RemoveItemEnhancer:class extends ie{constructor(){super(...arguments),this.confirmRemoval=!1,this.confirmMessage="Are you sure you want to remove this item?"}initialize(){return m(this,null,function*(){this.validateElement();const t=this.getRequiredAttribute("data-package-id");if(this.packageId=parseInt(t,10),isNaN(this.packageId))throw new Error(`Invalid package ID: ${t}`);this.confirmRemoval="true"===this.getAttribute("data-confirm"),this.confirmMessage=this.getAttribute("data-confirm-message")||this.confirmMessage,this.element.addEventListener("click",this.handleClick.bind(this)),this.subscribe(Et,this.handleCartUpdate.bind(this)),this.handleCartUpdate(Et.getState()),this.logger.debug(`RemoveItemEnhancer initialized for package ${this.packageId}`)})}update(t){t&&this.handleCartUpdate(t)}handleClick(t){return m(this,null,function*(){if(t.preventDefault(),t.stopPropagation(),!this.hasClass("disabled")&&!this.element.hasAttribute("disabled")&&(!this.confirmRemoval||confirm(this.confirmMessage)))try{this.addClass("processing"),yield this.removeItem()}catch(e){this.handleError(e,"handleClick")}finally{this.removeClass("processing")}})}removeItem(){return m(this,null,function*(){const t=Et.getState();0!==t.getItemQuantity(this.packageId)?(yield t.removeItem(this.packageId),this.logger.debug(`Removed item ${this.packageId} from cart`),this.emitRemoveEvent(),this.addRemovalFeedback()):this.logger.debug(`Item ${this.packageId} not in cart, nothing to remove`)})}emitRemoveEvent(){this.emit("cart:item-removed",{packageId:this.packageId})}handleCartUpdate(t){var e;const i=(null==(e=t.items.find(t=>t.packageId===this.packageId))?void 0:e.quantity)||0,n=i>0;this.toggleClass("disabled",!n),this.element.toggleAttribute("disabled",!n),this.setAttribute("aria-disabled",String(!n)),this.toggleClass("has-item",n),this.toggleClass("empty",!n),this.element.setAttribute("data-quantity",String(i)),this.element.setAttribute("data-in-cart",String(n)),this.updateButtonContent(i)}updateButtonContent(t){const e=this.getAttribute("data-original-content")||this.element.innerHTML;this.hasAttribute("data-original-content")||this.setAttribute("data-original-content",this.element.innerHTML);const i=e.replace(/\{quantity\}/g,String(t));this.element.innerHTML!==i&&(this.element.innerHTML=i)}addRemovalFeedback(){this.addClass("item-removed");const t=this.element.closest("[data-cart-item-id], .cart-item");t instanceof HTMLElement&&(t.classList.add("removing"),setTimeout(()=>{t.classList.remove("removing")},300)),setTimeout(()=>{this.removeClass("item-removed")},300)}getCurrentQuantity(){return Et.getState().getItemQuantity(this.packageId)}isInCart(){return this.getCurrentQuantity()>0}setConfirmation(t,e){this.confirmRemoval=t,e&&(this.confirmMessage=e)}}},Symbol.toStringTag,{value:"Module"})),Cn=class t extends ie{constructor(t){super(t),this.quantity=1,this.actionButtons=[],this.isProcessing=!1,this.isSelector=!1,this.options=new Map,this.quantityBySelectorId=new Map,this.loadingOverlay=new Mi}initialize(){return m(this,null,function*(){if(this.validateElement(),this.pageShowHandler=t=>{t.persisted&&(this.loadingOverlay.hide(!0),this.isProcessing=!1,this.setProcessingState(!1))},window.addEventListener("pageshow",this.pageShowHandler),setTimeout(()=>{this.trackUpsellPageView()},100),this.selectorId=this.getAttribute("data-next-selector-id")||"",this.isSelector=!!this.selectorId,this.isSelector)this.initializeSelectorMode();else{const t=this.getAttribute("data-next-package-id");if(!t)throw new Error("UpsellEnhancer requires data-next-package-id attribute (or use selector mode with data-next-selector-id)");if(this.packageId=parseInt(t,10),isNaN(this.packageId))throw new Error("Invalid package ID provided");const e=Dt.getState();e.order&&e.markUpsellViewed(this.packageId.toString())}const t=this.getAttribute("data-next-quantity");t&&(this.quantity=parseInt(t,10)||1);const e=vt.getState();this.apiClient=new qt(e.apiKey),this.scanUpsellElements(),this.setupEventHandlers(),this.subscribe(Dt,this.handleOrderUpdate.bind(this)),this.eventBus.on("upsell:quantity-changed",t=>{(this.selectorId&&t.selectorId===this.selectorId||!this.selectorId&&!t.selectorId&&this.packageId&&t.packageId===this.packageId)&&(this.selectorId?(this.quantityBySelectorId.set(this.selectorId,t.quantity),this.currentQuantitySelectorId=this.selectorId):this.quantity=t.quantity,this.updateQuantityDisplay())}),this.eventBus.on("upsell:option-selected",t=>{const e=this.element.querySelectorAll("[data-next-selector-id]");let i=!1;e.forEach(e=>{e.getAttribute("data-next-selector-id")===t.selectorId&&(i=!0)}),this.selectorId===t.selectorId&&(i=!0),i&&(this.selectedPackageId=t.packageId,this.packageId=t.packageId,this.options.forEach((e,i)=>{i===t.packageId?(e.classList.add("next-selected"),e.setAttribute("data-next-selected","true")):(e.classList.remove("next-selected"),e.setAttribute("data-next-selected","false"))}))}),this.updateUpsellDisplay(),this.logger.debug("UpsellEnhancer initialized",{mode:this.isSelector?"selector":"direct",packageId:this.packageId,selectorId:this.selectorId,quantity:this.quantity,actionButtons:this.actionButtons.length,options:this.options.size,currentPagePath:this.currentPagePath}),this.emit("upsell:initialized",{packageId:this.packageId||0,element:this.element})})}trackUpsellPageView(){const e=document.querySelector('meta[name="next-page-type"]');if(e&&"upsell"===e.getAttribute("content")&&(this.currentPagePath=window.location.pathname,!t.pageViewTracked||t.currentPagePath!==this.currentPagePath)){t.pageViewTracked=!0,t.currentPagePath=this.currentPagePath;const e=Dt.getState();e.order&&(e.markUpsellPageViewed(this.currentPagePath),this.logger.debug("Tracked upsell page view:",this.currentPagePath),this.eventBus.emit("upsell:viewed",{pagePath:this.currentPagePath,orderId:e.order.ref_id}))}}initializeSelectorMode(){this.selectorId&&!this.quantityBySelectorId.has(this.selectorId)&&this.quantityBySelectorId.set(this.selectorId,this.quantity),this.element.querySelectorAll("[data-next-upsell-option]").forEach(t=>{if(t instanceof HTMLElement){const e=t.getAttribute("data-next-package-id");if(e){const i=parseInt(e,10);isNaN(i)||(this.options.set(i,t),t.addEventListener("click",()=>this.selectOption(i)),"true"===t.getAttribute("data-next-selected")&&this.selectOption(i))}}});let t=null;if(t="SELECT"===this.element.tagName?this.element:this.element.querySelector(`[data-next-upsell-select="${this.selectorId}"]`),t&&(t.addEventListener("change",()=>{const e=t.value;if(e){const t=parseInt(e,10);isNaN(t)||this.selectOption(t)}else delete this.selectedPackageId,delete this.packageId}),t.value)){const e=parseInt(t.value,10);isNaN(e)||this.selectOption(e)}}selectOption(t){this.options.forEach((e,i)=>{i===t?(e.classList.add("next-selected"),e.setAttribute("data-next-selected","true")):(e.classList.remove("next-selected"),e.setAttribute("data-next-selected","false"))}),this.selectedPackageId=t,this.packageId=t;let e=this.selectorId;const i=this.options.get(t);if(i){const t=i.closest("[data-next-selector-id]");t&&(e=t.getAttribute("data-next-selector-id")||this.selectorId)}this.eventBus.emit("upsell-selector:item-selected",{selectorId:e||"",packageId:t}),this.eventBus.emit("upsell:option-selected",{selectorId:e||"",packageId:t}),e&&this.syncOptionSelectionAcrossContainers(e,t),this.element.St=t,this.logger.debug("Upsell option selected:",{packageId:t,selectorId:e})}scanUpsellElements(){["[data-next-upsell-action]"].forEach(t=>{this.element.querySelectorAll(t).forEach(t=>{t instanceof HTMLElement&&(this.actionButtons.push(t),this.logger.debug("Found upsell action button:",t))})});const t=this.element.querySelector('[data-next-upsell-quantity="increase"]'),e=this.element.querySelector('[data-next-upsell-quantity="decrease"]'),i=(null==t?void 0:t.getAttribute("data-next-quantity-selector-id"))||(null==e?void 0:e.getAttribute("data-next-quantity-selector-id"))||this.selectorId;t&&t.addEventListener("click",()=>{if(i){const t=this.quantityBySelectorId.get(i)||1,e=Math.min(10,t+1);this.quantityBySelectorId.set(i,e),this.currentQuantitySelectorId=i,this.eventBus.emit("upsell:quantity-changed",{selectorId:i,quantity:e,packageId:this.packageId})}else this.quantity=Math.min(10,this.quantity+1),this.eventBus.emit("upsell:quantity-changed",{quantity:this.quantity,packageId:this.packageId});this.updateQuantityDisplay(),this.syncQuantityAcrossContainers(i,this.packageId)}),e&&e.addEventListener("click",()=>{if(i){const t=this.quantityBySelectorId.get(i)||1,e=Math.max(1,t-1);this.quantityBySelectorId.set(i,e),this.currentQuantitySelectorId=i,this.eventBus.emit("upsell:quantity-changed",{selectorId:i,quantity:e,packageId:this.packageId})}else this.quantity=Math.max(1,this.quantity-1),this.eventBus.emit("upsell:quantity-changed",{quantity:this.quantity,packageId:this.packageId});this.updateQuantityDisplay(),this.syncQuantityAcrossContainers(i,this.packageId)}),this.element.querySelectorAll("[data-next-upsell-quantity-toggle]").forEach(t=>{if(t instanceof HTMLElement){const e=parseInt(t.getAttribute("data-next-upsell-quantity-toggle")||"1",10);t.addEventListener("click",()=>{this.quantity=e,this.updateQuantityDisplay(),this.updateQuantityToggles(),this.eventBus.emit("upsell:quantity-changed",{selectorId:this.selectorId,quantity:this.quantity,packageId:this.packageId})}),e===this.quantity&&t.classList.add("next-selected")}})}updateQuantityDisplay(){const t=this.currentQuantitySelectorId||this.selectorId;if(t&&this.quantityBySelectorId.has(t)){const e=document.querySelectorAll(`[data-next-upsell-quantity="display"][data-next-quantity-selector-id="${t}"]`),i=this.quantityBySelectorId.get(t);e.forEach(t=>{t instanceof HTMLElement&&(t.textContent=i.toString())});const n=this.element.querySelector('[data-next-upsell-quantity="display"]:not([data-next-quantity-selector-id])');n&&n instanceof HTMLElement&&(n.textContent=i.toString())}else{const t=this.element.querySelector('[data-next-upsell-quantity="display"]');t&&(t.textContent=this.quantity.toString())}}updateQuantityToggles(){this.element.querySelectorAll("[data-next-upsell-quantity-toggle]").forEach(t=>{t instanceof HTMLElement&&(parseInt(t.getAttribute("data-next-upsell-quantity-toggle")||"1",10)===this.quantity?t.classList.add("next-selected"):t.classList.remove("next-selected"))})}syncQuantityAcrossContainers(t,e){if(t){const e=this.quantityBySelectorId.get(t);if(!e)return;document.querySelectorAll(`[data-next-selector-id="${t}"] [data-next-upsell-option]`).forEach(t=>{t instanceof HTMLElement&&t.setAttribute("data-next-quantity",e.toString())}),document.querySelectorAll(`[data-next-upsell-select="${t}"]`).forEach(t=>{t instanceof HTMLSelectElement&&t.querySelectorAll("option[data-next-package-id]").forEach(t=>{t instanceof HTMLOptionElement&&t.setAttribute("data-next-quantity",e.toString())})})}else e&&document.querySelectorAll(`[data-next-upsell="offer"][data-next-package-id="${e}"]:not([data-next-selector-id])`).forEach(t=>{if(t instanceof HTMLElement){const e=t.querySelector('[data-next-upsell-quantity="display"]');e&&e instanceof HTMLElement&&(e.textContent=this.quantity.toString())}})}syncOptionSelectionAcrossContainers(t,e){document.querySelectorAll(`[data-next-selector-id="${t}"]`).forEach(t=>{if(t instanceof HTMLElement){t.querySelectorAll("[data-next-upsell-option]").forEach(t=>{t instanceof HTMLElement&&(parseInt(t.getAttribute("data-next-package-id")||"0",10)===e?(t.classList.add("next-selected"),t.setAttribute("data-next-selected","true")):(t.classList.remove("next-selected"),t.setAttribute("data-next-selected","false")))});const i=t.querySelector("select");i&&(i.value=e.toString())}})}setupEventHandlers(){this.clickHandler=this.handleActionClick.bind(this),this.actionButtons.forEach(t=>{t.addEventListener("click",this.clickHandler)}),this.keydownHandler=t=>{"Enter"===t.key&&this.isProcessing&&(t.preventDefault(),t.stopPropagation(),this.logger.debug("Enter key blocked - upsell is processing"))},this.element.addEventListener("keydown",this.keydownHandler,!0)}handleActionClick(t){return m(this,null,function*(){if(t.preventDefault(),this.isProcessing)return void this.logger.debug("Upsell action blocked - already processing");const e=t.currentTarget,i=e.getAttribute("data-next-upsell-action")||"";let n=e.getAttribute("data-next-url")||e.getAttribute("data-next-next-url")||e.getAttribute("data-os-next-url")||void 0;if(!n){if("add"===i||"accept"===i){const t=document.querySelector('meta[name="next-upsell-accept-url"]');n=(null==t?void 0:t.getAttribute("content"))||void 0}else if("skip"===i||"decline"===i){const t=document.querySelector('meta[name="next-upsell-decline-url"]');n=(null==t?void 0:t.getAttribute("content"))||void 0}n&&this.logger.debug("Using fallback URL from meta tag:",n)}switch(this.logger.debug("Upsell action clicked:",{action:i,nextUrl:n}),i){case"add":case"accept":yield this.addUpsellToOrder(n);break;case"skip":case"decline":this.skipUpsell(n);break;default:this.logger.warn(`Unknown upsell action: ${i}`)}})}getCurrency(){var t;const e=lt.getState();if(null==(t=null==e?void 0:e.data)?void 0:t.currency)return e.data.currency;const i=vt.getState();return(null==i?void 0:i.selectedCurrency)||(null==i?void 0:i.detectedCurrency)||"USD"}addUpsellToOrder(t){return m(this,null,function*(){var e,i,n,s,a;const r=Dt.getState();if(this.logger.debug("Order state check:",{hasOrder:!!r.order,supportsUpsells:null==(e=r.order)?void 0:e.supports_post_purchase_upsells,isProcessingUpsell:r.isProcessingUpsell,canAddUpsells:r.canAddUpsells()}),!r.canAddUpsells()){if(this.logger.warn("Order does not support upsells or is currently processing"),!r.isProcessingUpsell||!(null==(i=r.order)?void 0:i.supports_post_purchase_upsells))return this.showError("Unable to add upsell at this time"),void(t&&(this.logger.info("Navigating to next page despite error"),setTimeout(()=>this.navigateToUrl(t),1e3)));if(this.logger.warn("Processing flag stuck, resetting..."),r.setProcessingUpsell(!1),!r.canAddUpsells())return this.showError("Unable to add upsell at this time"),void(t&&(this.logger.info("Navigating to next page despite error"),setTimeout(()=>this.navigateToUrl(t),1e3)));this.logger.info("Reset successful, continuing with upsell...")}const o=this.isSelector&&this.selectedPackageId||this.packageId;if(o&&this.checkIfUpsellAlreadyAccepted(o)&&!(yield this.showDuplicateUpsellDialog()))t&&this.navigateToUrl(t);else{if(this.logger.debug("Package selection:",{isSelector:this.isSelector,packageId:this.packageId,selectedPackageId:this.selectedPackageId,packageToAdd:o}),!o)return this.logger.warn("No package selected for upsell"),void this.showError("Please select an option first");try{this.isProcessing=!0,this.setProcessingState(!0),this.loadingOverlay.show(),this.emit("upsell:adding",{packageId:o});let e=this.quantity;this.selectorId&&this.quantityBySelectorId.has(this.selectorId)?e=this.quantityBySelectorId.get(this.selectorId):this.currentQuantitySelectorId&&this.quantityBySelectorId.has(this.currentQuantitySelectorId)&&(e=this.quantityBySelectorId.get(this.currentQuantitySelectorId));const i={lines:[{package_id:o,quantity:e}],currency:this.getCurrency()};this.logger.info("Adding upsell to order:",i);const d=yield r.addUpsell(i,this.apiClient);if(!d)throw new Error("Failed to add upsell - no updated order returned");{this.logger.info("Upsell added successfully"),this.showSuccess();let i=0;const l=(null==(s=null==(n=r.order)?void 0:n.lines)?void 0:s.map(t=>t.id))||[],c=null==(a=d.lines)?void 0:a.find(t=>t.is_upsell&&!l.includes(t.id));(null==c?void 0:c.price_incl_tax)&&(i=parseFloat(c.price_incl_tax));const u=lt.getState().getPackage(o);u&&!i&&u.price&&(i=parseFloat(u.price)*this.quantity),this.emit("upsell:added",{packageId:o,quantity:e,order:d,value:i,willRedirect:!!t}),t?setTimeout(()=>{this.navigateToUrl(t,d.ref_id)},100):this.loadingOverlay.hide()}}catch(d){this.logger.error("Failed to add upsell:",d),this.showError(d instanceof Error?d.message:"Failed to add upsell"),this.emit("upsell:error",{packageId:this.packageId||0,error:d instanceof Error?d.message:"Unknown error"}),this.loadingOverlay.hide(!0),t&&(this.logger.info("Navigating to next page despite API error"),setTimeout(()=>this.navigateToUrl(t),1e3))}finally{this.isProcessing=!1,this.setProcessingState(!1)}}})}skipUpsell(t){var e;this.logger.info("Upsell skipped by user"),this.addClass("next-skipped"),this.disableActions(),this.packageId&&Dt.getState().markUpsellSkipped(this.packageId.toString(),this.currentPagePath);const i=Dt.getState(),n={};void 0!==this.packageId&&(n.packageId=this.packageId),void 0!==(null==(e=i.order)?void 0:e.ref_id)&&(n.orderId=i.order.ref_id),this.emit("upsell:skipped",n),t&&this.navigateToUrl(t)}navigateToUrl(t,e){var i;if(t)try{const n=new URL(t,window.location.origin),s=Dt.getState(),a=e||(null==(i=s.order)?void 0:i.ref_id);a&&!n.searchParams.has("ref_id")&&n.searchParams.append("ref_id",a);const r=Ii(n.href,["debug","debugger","test"]);this.logger.info(`Navigating to ${r}`),window.location.href=r}catch(n){this.logger.error("Invalid URL for navigation:",t,n);const e=Ii(t);window.location.href=e}else this.logger.warn("No URL provided for navigation")}handleOrderUpdate(t){this.updateUpsellDisplay(),t.isProcessingUpsell?this.setProcessingState(!0):this.setProcessingState(!1),t.upsellError&&this.showError(t.upsellError)}updateUpsellDisplay(){Dt.getState().canAddUpsells()?this.showUpsellOffer():this.hideUpsellOffer()}setProcessingState(t){t?(this.addClass("next-processing"),this.disableActions()):(this.removeClass("next-processing"),this.enableActions())}disableActions(){this.actionButtons.forEach(t=>{t instanceof HTMLButtonElement&&(t.disabled=!0),t.classList.add("next-disabled")})}enableActions(){this.actionButtons.forEach(t=>{t instanceof HTMLButtonElement&&(t.disabled=!1),t.classList.remove("next-disabled")})}showUpsellOffer(){this.removeClass("next-hidden"),this.removeClass("next-error"),this.addClass("next-available")}hideUpsellOffer(){this.addClass("next-hidden"),this.removeClass("next-available")}showSuccess(){this.addClass("next-success"),setTimeout(()=>{this.removeClass("next-success")},3e3)}showError(t){this.addClass("next-error"),this.removeClass("next-processing"),this.logger.error("Upsell error:",t),setTimeout(()=>{this.removeClass("next-error")},5e3)}checkIfUpsellAlreadyAccepted(t){const e=Dt.getState();return!!e.completedUpsells.includes(t.toString())||e.upsellJourney.some(e=>e.packageId===t.toString()&&"accepted"===e.action)}showDuplicateUpsellDialog(){return m(this,null,function*(){const t=yield Ai.showDuplicateUpsell();return this.logger.info(t?"User confirmed to add duplicate upsell":"User declined to add duplicate upsell"),t})}update(){this.scanUpsellElements(),this.updateUpsellDisplay()}cleanupEventListeners(){this.clickHandler&&this.actionButtons.forEach(t=>{t.removeEventListener("click",this.clickHandler)}),this.keydownHandler&&this.element.removeEventListener("keydown",this.keydownHandler,!0)}destroy(){this.pageShowHandler&&window.removeEventListener("pageshow",this.pageShowHandler),this.actionButtons=[],super.destroy()}};Cn.pageViewTracked=!1,Cn.currentPagePath=null;let Pn=Cn;const En=Object.freeze(Object.defineProperty({__proto__:null,UpsellEnhancer:Pn},Symbol.toStringTag,{value:"Module"})),In=Object.freeze(Object.defineProperty({__proto__:null,CouponEnhancer:class extends Ei{constructor(){super(...arguments),this.input=null,this.button=null,this.display=null,this.template=null,this.unsubscribe=null}initialize(){return m(this,null,function*(){var t,e;this.logger.debug("Enhancing coupon element:",this.element),this.input=this.element.querySelector('input[os-checkout-field="coupon"]')||this.element.querySelector('input[data-next-coupon="input"]')||this.element.querySelector('input[type="text"]')||this.element.querySelector("input"),this.button=this.element.querySelector("button")||this.element.querySelector('[data-next-coupon="apply"]'),this.display=this.element.querySelector('[data-next-coupon="display"]')||this.element.querySelector('[pb-checkout="coupon-display"]')||(null==(t=this.element.parentElement)?void 0:t.querySelector('[data-next-coupon="display"]'))||document.querySelector('[data-next-coupon="display"]'),this.template=(null==(e=this.display)?void 0:e.querySelector('[pb-checkout="coupon-card"]'))||null,this.input&&this.button?(this.setupInputListener(),this.setupButtonListener(),this.updateButtonState(),this.renderAppliedCoupons(),this.unsubscribe=Et.subscribe(t=>t.appliedCoupons,()=>this.renderAppliedCoupons()),this.logger.info("Coupon enhancer initialized successfully")):this.logger.warn("Required coupon elements not found",{input:!!this.input,button:!!this.button})})}setupInputListener(){this.input&&(this.input.addEventListener("input",()=>{this.updateButtonState()}),this.input.addEventListener("keypress",t=>{"Enter"===t.key&&(t.preventDefault(),this.applyCoupon())}))}setupButtonListener(){this.button&&this.button.addEventListener("click",t=>{t.preventDefault(),this.applyCoupon()})}updateButtonState(){this.input&&this.button&&(this.input.value.trim().length>0?(this.button.classList.remove("next-disabled"),this.button.disabled=!1):(this.button.classList.add("next-disabled"),this.button.disabled=!0))}applyCoupon(){return m(this,null,function*(){if(!this.input||!this.button)return;const t=this.input.value.trim();t&&(yield this.executeAction(()=>m(this,null,function*(){this.logger.debug("Applying coupon:",t);const e=yield Et.getState().applyCoupon(t);e.success?(this.input&&(this.input.value=""),this.updateButtonState(),this.showMessage(e.message,"success"),this.logger.info("Coupon applied successfully:",t),this.eventBus.emit("coupon:applied",{code:t})):(this.showMessage(e.message,"error"),this.logger.warn("Coupon application failed:",e.message),this.eventBus.emit("coupon:validation-failed",{code:t,message:e.message}))}),{showLoading:!0,disableOnProcess:!0}))})}renderAppliedCoupons(){if(!this.display||!this.template)return void this.logger.debug("No display area or template found for coupons");const t=Et.getState().getCoupons();this.display.querySelectorAll('[pb-checkout="coupon-card"]:not([data-template])').forEach(t=>t.remove()),this.template.style.display="none",this.template.setAttribute("data-template","true"),t.forEach(t=>{const e=this.template.cloneNode(!0);e.removeAttribute("data-template"),e.style.display="";const i=e.querySelector('[pb-checkout="coupon-title"]');i&&(i.textContent=t.code);const n=e.querySelector('[pb-checkout="coupon-description"]');n&&t.definition.description&&(n.textContent=t.definition.description);const s=e.querySelector('[pb-checkout="coupon-discount"]');if(s){const{formatCurrency:e}=require("@/utils/currencyFormatter"),i=e(t.discount);s.textContent=`-${i}`}const a=e.querySelector('[pb-checkout="coupon-remove"]');a&&a.addEventListener("click",()=>{this.removeCoupon(t.code)}),this.display.appendChild(e)}),this.logger.debug("Rendered applied coupons:",t.length)}removeCoupon(t){this.logger.debug("Removing coupon:",t),Et.getState().removeCoupon(t),this.eventBus.emit("coupon:removed",{code:t}),this.showMessage(`Coupon ${t} removed`,"info")}showMessage(t,e){var i;this.logger.debug(`Showing message [${e}]:`,t);const n=document.querySelector('[data-next-coupon="messages"]')||document.querySelector(".coupon-messages")||(null==(i=this.element)?void 0:i.querySelector(".messages"));if(n){n.innerHTML="";const i=document.createElement("div");i.className=`coupon-message coupon-message--${e}`,i.textContent=t,n.appendChild(i),setTimeout(()=>{i.remove()},5e3)}}update(){return m(this,null,function*(){this.renderAppliedCoupons()})}destroy(){this.logger.debug("Destroying coupon enhancer"),this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),super.destroy(),this.input=null,this.button=null,this.display=null,this.template=null,this.logger.debug("Coupon enhancer destroyed")}}},Symbol.toStringTag,{value:"Module"})),Tn=class extends ie{constructor(){super(...arguments),this.accordions=new Map}initialize(){return m(this,null,function*(){this.enhance()})}enhance(){const t=this.element.getAttribute("data-next-accordion");if(!t)return void this.logger.warn("No accordion ID found on element");const e=this.parseConfig(this.element),i=new Mn(t,this.element,e);this.accordions.set(t,i),this.setupEventListeners(i),this.logger.debug(`Accordion enhanced: ${t}`)}update(t){}parseConfig(t){return{openText:t.getAttribute("data-open-text")||"Hide",closeText:t.getAttribute("data-close-text")||"Show",toggleClass:t.getAttribute("data-toggle-class")||"next-expanded",initialState:t.getAttribute("data-initial-state")||"closed",animationDuration:parseInt(t.getAttribute("data-animation-duration")||"300")}}setupEventListeners(t){t.triggers.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.toggleAccordion(t)})}),t.triggers.forEach(e=>{e.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.toggleAccordion(t))}),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.setAttribute("aria-expanded",t.isOpen.toString()),e.setAttribute("aria-controls",t.id)}),t.panels.forEach(e=>{e.setAttribute("aria-labelledby",t.id),e.setAttribute("id",`${t.id}-content`)})}toggleAccordion(t){const e=t.isOpen;e?this.closeAccordion(t):this.openAccordion(t),this.eventBus.emit("accordion:toggled",{id:t.id,isOpen:!e,element:t.element})}openAccordion(t){t.isOpen=!0,t.panels.forEach(e=>{const i=e.offsetHeight;e.style.height=i+"px",e.style.height="auto";const n=e.offsetHeight;e.style.height=i+"px",e.offsetHeight,requestAnimationFrame(()=>{e.style.height=n+"px",e.classList.add(t.config.toggleClass),setTimeout(()=>{t.isOpen&&(e.style.height="auto")},(t.config.animationDuration||300)+50)})}),t.element.classList.add(t.config.toggleClass),t.textElements.forEach(e=>{t.config.openText&&(e.textContent=t.config.openText)}),t.triggers.forEach(t=>{t.setAttribute("aria-expanded","true")}),this.logger.debug(`Accordion opened: ${t.id}`),this.eventBus.emit("accordion:opened",{id:t.id,element:t.element})}closeAccordion(t){t.isOpen=!1,t.panels.forEach(e=>{const i=e.offsetHeight;e.style.height=i+"px",e.offsetHeight,e.style.height="0px",setTimeout(()=>{e.classList.remove(t.config.toggleClass)},t.config.animationDuration||300)}),t.element.classList.remove(t.config.toggleClass),t.textElements.forEach(e=>{t.config.closeText&&(e.textContent=t.config.closeText)}),t.triggers.forEach(t=>{t.setAttribute("aria-expanded","false")}),this.logger.debug(`Accordion closed: ${t.id}`),this.eventBus.emit("accordion:closed",{id:t.id,element:t.element})}openAccordionById(t){const e=this.accordions.get(t);e&&!e.isOpen&&this.openAccordion(e)}closeAccordionById(t){const e=this.accordions.get(t);e&&e.isOpen&&this.closeAccordion(e)}toggleAccordionById(t){const e=this.accordions.get(t);e&&this.toggleAccordion(e)}getAccordionState(t){const e=this.accordions.get(t);return e?e.isOpen:null}getAllAccordions(){return Array.from(this.accordions.keys())}destroy(){this.accordions.clear(),super.destroy()}};Tn.selector="[data-next-accordion]";let An=Tn;class Mn{constructor(t,e,i){this.id=t,this.element=e,this.config=i,this.triggers=[],this.panels=[],this.textElements=[],this.findComponents(),this.isOpen=this.detectInitialState(),this.initializeState()}detectInitialState(){const t=this.config.toggleClass,e=this.panels.some(e=>e.classList.contains(t)),i=this.element.classList.contains(t);return!(!e&&!i)||"open"===this.config.initialState}findComponents(){const t=this.element.querySelectorAll(`[data-next-accordion-trigger="${this.id}"]`);this.triggers=Array.from(t);const e=this.element.querySelectorAll(`[data-next-accordion-panel="${this.id}"]`);this.panels=Array.from(e);const i=this.element.querySelectorAll(`[data-next-accordion-text="${this.id}"]`);this.textElements=Array.from(i),this.triggers.length,this.panels.length}initializeState(){const t=this.config.toggleClass;this.isOpen?(this.element.classList.add(t),this.panels.forEach(e=>{e.classList.add(t),e.style.height="auto"}),this.textElements.forEach(t=>{this.config.openText&&(t.textContent=this.config.openText)})):(this.element.classList.remove(t),this.panels.forEach(e=>{e.classList.remove(t),e.style.height="0px"}),this.textElements.forEach(t=>{this.config.closeText&&(t.textContent=this.config.closeText)}))}}const Ln=Object.freeze(Object.defineProperty({__proto__:null,AccordionEnhancer:An},Symbol.toStringTag,{value:"Module"})),Fn=Math.min,Dn=Math.max,Nn=Math.round,Un=t=>({x:t,y:t}),On={left:"right",right:"left",bottom:"top",top:"bottom"},zn={start:"end",end:"start"};function Rn(t,e,i){return Dn(t,Fn(e,i))}function qn(t,e){return"function"==typeof t?t(e):t}function jn(t){return t.split("-")[0]}function Hn(t){return t.split("-")[1]}function Bn(t){return"x"===t?"y":"x"}function Vn(t){return"y"===t?"height":"width"}const Gn=new Set(["top","bottom"]);function Kn(t){return Gn.has(jn(t))?"y":"x"}function Jn(t){return Bn(Kn(t))}function Zn(t){return t.replace(/start|end/g,t=>zn[t])}const Wn=["left","right"],Qn=["right","left"],Yn=["top","bottom"],Xn=["bottom","top"];function ts(t){return t.replace(/left|right|bottom|top/g,t=>On[t])}function es(t){return"number"!=typeof t?function(t){return c({top:0,right:0,bottom:0,left:0},t)}(t):{top:t,right:t,bottom:t,left:t}}function is(t){const{x:e,y:i,width:n,height:s}=t;return{width:n,height:s,top:i,left:e,right:e+n,bottom:i+s,x:e,y:i}}function ns(t,e,i){let{reference:n,floating:s}=t;const a=Kn(e),r=Jn(e),o=Vn(r),d=jn(e),l="y"===a,c=n.x+n.width/2-s.width/2,u=n.y+n.height/2-s.height/2,h=n[o]/2-s[o]/2;let p;switch(d){case"top":p={x:c,y:n.y-s.height};break;case"bottom":p={x:c,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:u};break;case"left":p={x:n.x-s.width,y:u};break;default:p={x:n.x,y:n.y}}switch(Hn(e)){case"start":p[r]-=h*(i&&l?-1:1);break;case"end":p[r]+=h*(i&&l?-1:1)}return p}function ss(t,e){return m(this,null,function*(){var i;void 0===e&&(e={});const{x:n,y:s,platform:a,rects:r,elements:o,strategy:d}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:h=!1,padding:p=0}=qn(e,t),m=es(p),f=o[h?"floating"===u?"reference":"floating":u],g=is(yield a.getClippingRect({element:null==(i=yield null==a.isElement?void 0:a.isElement(f))||i?f:f.contextElement||(yield null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:l,rootBoundary:c,strategy:d})),v="floating"===u?{x:n,y:s,width:r.floating.width,height:r.floating.height}:r.reference,$=yield null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating),y=(yield null==a.isElement?void 0:a.isElement($))&&(yield null==a.getScale?void 0:a.getScale($))||{x:1,y:1},b=is(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:$,strategy:d}):v);return{top:(g.top-b.top+m.top)/y.y,bottom:(b.bottom-g.bottom+m.bottom)/y.y,left:(g.left-b.left+m.left)/y.x,right:(b.right-g.right+m.right)/y.x}})}const as=new Set(["left","top"]);function rs(){return"undefined"!=typeof window}function os(t){return cs(t)?(t.nodeName||"").toLowerCase():"#document"}function ds(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function ls(t){var e;return null==(e=(cs(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function cs(t){return!!rs()&&(t instanceof Node||t instanceof ds(t).Node)}function us(t){return!!rs()&&(t instanceof Element||t instanceof ds(t).Element)}function hs(t){return!!rs()&&(t instanceof HTMLElement||t instanceof ds(t).HTMLElement)}function ps(t){return!(!rs()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof ds(t).ShadowRoot)}const ms=new Set(["inline","contents"]);function fs(t){const{overflow:e,overflowX:i,overflowY:n,display:s}=Ps(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!ms.has(s)}const gs=new Set(["table","td","th"]);function vs(t){return gs.has(os(t))}const $s=[":popover-open",":modal"];function ys(t){return $s.some(e=>{try{return t.matches(e)}catch(i){return!1}})}const bs=["transform","translate","scale","rotate","perspective"],xs=["transform","translate","scale","rotate","perspective","filter"],ws=["paint","layout","strict","content"];function _s(t){const e=ks(),i=us(t)?Ps(t):t;return bs.some(t=>!!i[t]&&"none"!==i[t])||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||xs.some(t=>(i.willChange||"").includes(t))||ws.some(t=>(i.contain||"").includes(t))}function ks(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Ss=new Set(["html","body","#document"]);function Cs(t){return Ss.has(os(t))}function Ps(t){return ds(t).getComputedStyle(t)}function Es(t){return us(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Is(t){if("html"===os(t))return t;const e=t.assignedSlot||t.parentNode||ps(t)&&t.host||ls(t);return ps(e)?e.host:e}function Ts(t){const e=Is(t);return Cs(e)?t.ownerDocument?t.ownerDocument.body:t.body:hs(e)&&fs(e)?e:Ts(e)}function As(t,e,i){var n;void 0===e&&(e=[]);const s=Ts(t),a=s===(null==(n=t.ownerDocument)?void 0:n.body),r=ds(s);return a?(Ms(r),e.concat(r,r.visualViewport||[],fs(s)?s:[],[])):e.concat(s,As(s,[]))}function Ms(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ls(t){const e=Ps(t);let i=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=hs(t),a=s?t.offsetWidth:i,r=s?t.offsetHeight:n,o=Nn(i)!==a||Nn(n)!==r;return o&&(i=a,n=r),{width:i,height:n,$:o}}function Fs(t){return us(t)?t:t.contextElement}function Ds(t){const e=Fs(t);if(!hs(e))return Un(1);const i=e.getBoundingClientRect(),{width:n,height:s,$:a}=Ls(e);let r=(a?Nn(i.width):i.width)/n,o=(a?Nn(i.height):i.height)/s;return r&&Number.isFinite(r)||(r=1),o&&Number.isFinite(o)||(o=1),{x:r,y:o}}const Ns=Un(0);function Us(t){const e=ds(t);return ks()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:Ns}function Os(t,e,i,n){void 0===e&&(e=!1),void 0===i&&(i=!1);const s=t.getBoundingClientRect(),a=Fs(t);let r=Un(1);e&&(n?us(n)&&(r=Ds(n)):r=Ds(t));const o=function(t,e,i){return void 0===e&&(e=!1),!(!i||e&&i!==ds(t))&&e}(a,i,n)?Us(a):Un(0);let d=(s.left+o.x)/r.x,l=(s.top+o.y)/r.y,c=s.width/r.x,u=s.height/r.y;if(a){const t=ds(a),e=n&&us(n)?ds(n):n;let i=t,s=Ms(i);for(;s&&n&&e!==i;){const t=Ds(s),e=s.getBoundingClientRect(),n=Ps(s),a=e.left+(s.clientLeft+parseFloat(n.paddingLeft))*t.x,r=e.top+(s.clientTop+parseFloat(n.paddingTop))*t.y;d*=t.x,l*=t.y,c*=t.x,u*=t.y,d+=a,l+=r,i=ds(s),s=Ms(i)}}return is({width:c,height:u,x:d,y:l})}function zs(t,e){const i=Es(t).scrollLeft;return e?e.left+i:Os(ls(t)).left+i}function Rs(t,e){const i=t.getBoundingClientRect();return{x:i.left+e.scrollLeft-zs(t,i),y:i.top+e.scrollTop}}const qs=new Set(["absolute","fixed"]);function js(t,e,i){let n;if("viewport"===e)n=function(t,e){const i=ds(t),n=ls(t),s=i.visualViewport;let a=n.clientWidth,r=n.clientHeight,o=0,d=0;if(s){a=s.width,r=s.height;const t=ks();(!t||t&&"fixed"===e)&&(o=s.offsetLeft,d=s.offsetTop)}const l=zs(n);if(l<=0){const t=n.ownerDocument,e=t.body,i=getComputedStyle(e),s="CSS1Compat"===t.compatMode&&parseFloat(i.marginLeft)+parseFloat(i.marginRight)||0,r=Math.abs(n.clientWidth-e.clientWidth-s);r<=25&&(a-=r)}else l<=25&&(a+=l);return{width:a,height:r,x:o,y:d}}(t,i);else if("document"===e)n=function(t){const e=ls(t),i=Es(t),n=t.ownerDocument.body,s=Dn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Dn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let r=-i.scrollLeft+zs(t);const o=-i.scrollTop;return"rtl"===Ps(n).direction&&(r+=Dn(e.clientWidth,n.clientWidth)-s),{width:s,height:a,x:r,y:o}}(ls(t));else if(us(e))n=function(t,e){const i=Os(t,!0,"fixed"===e),n=i.top+t.clientTop,s=i.left+t.clientLeft,a=hs(t)?Ds(t):Un(1);return{width:t.clientWidth*a.x,height:t.clientHeight*a.y,x:s*a.x,y:n*a.y}}(e,i);else{const i=Us(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return is(n)}function Hs(t,e){const i=Is(t);return!(i===e||!us(i)||Cs(i))&&("fixed"===Ps(i).position||Hs(i,e))}function Bs(t,e,i){const n=hs(e),s=ls(e),a="fixed"===i,r=Os(t,!0,a,e);let o={scrollLeft:0,scrollTop:0};const d=Un(0);function l(){d.x=zs(s)}if(n||!n&&!a)if(("body"!==os(e)||fs(s))&&(o=Es(e)),n){const t=Os(e,!0,a,e);d.x=t.x+e.clientLeft,d.y=t.y+e.clientTop}else s&&l();a&&!n&&s&&l();const c=!s||n||a?Un(0):Rs(s,o);return{x:r.left+o.scrollLeft-d.x-c.x,y:r.top+o.scrollTop-d.y-c.y,width:r.width,height:r.height}}function Vs(t){return"static"===Ps(t).position}function Gs(t,e){if(!hs(t)||"fixed"===Ps(t).position)return null;if(e)return e(t);let i=t.offsetParent;return ls(t)===i&&(i=i.ownerDocument.body),i}function Ks(t,e){const i=ds(t);if(ys(t))return i;if(!hs(t)){let e=Is(t);for(;e&&!Cs(e);){if(us(e)&&!Vs(e))return e;e=Is(e)}return i}let n=Gs(t,e);for(;n&&vs(n)&&Vs(n);)n=Gs(n,e);return n&&Cs(n)&&Vs(n)&&!_s(n)?i:n||function(t){let e=Is(t);for(;hs(e)&&!Cs(e);){if(_s(e))return e;if(ys(e))return null;e=Is(e)}return null}(t)||i}const Js={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:i,offsetParent:n,strategy:s}=t;const a="fixed"===s,r=ls(n),o=!!e&&ys(e.floating);if(n===r||o&&a)return i;let d={scrollLeft:0,scrollTop:0},l=Un(1);const c=Un(0),u=hs(n);if((u||!u&&!a)&&(("body"!==os(n)||fs(r))&&(d=Es(n)),hs(n))){const t=Os(n);l=Ds(n),c.x=t.x+n.clientLeft,c.y=t.y+n.clientTop}const h=!r||u||a?Un(0):Rs(r,d);return{width:i.width*l.x,height:i.height*l.y,x:i.x*l.x-d.scrollLeft*l.x+c.x+h.x,y:i.y*l.y-d.scrollTop*l.y+c.y+h.y}},getDocumentElement:ls,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:n,strategy:s}=t;const a=[..."clippingAncestors"===i?ys(e)?[]:function(t,e){const i=e.get(t);if(i)return i;let n=As(t,[]).filter(t=>us(t)&&"body"!==os(t)),s=null;const a="fixed"===Ps(t).position;let r=a?Is(t):t;for(;us(r)&&!Cs(r);){const e=Ps(r),i=_s(r);i||"fixed"!==e.position||(s=null),(a?!i&&!s:!i&&"static"===e.position&&s&&qs.has(s.position)||fs(r)&&!i&&Hs(t,r))?n=n.filter(t=>t!==r):s=e,r=Is(r)}return e.set(t,n),n}(e,this.qe):[].concat(i),n],r=a[0],o=a.reduce((t,i)=>{const n=js(e,i,s);return t.top=Dn(n.top,t.top),t.right=Fn(n.right,t.right),t.bottom=Fn(n.bottom,t.bottom),t.left=Dn(n.left,t.left),t},js(e,r,s));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Ks,getElementRects:function(t){return m(this,null,function*(){const e=this.getOffsetParent||Ks,i=this.getDimensions,n=yield i(t.floating);return{reference:Bs(t.reference,yield e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:i}=Ls(t);return{width:e,height:i}},getScale:Ds,isElement:us,isRTL:function(t){return"rtl"===Ps(t).direction}},Zs=function(t){return void 0===t&&(t={}),{name:"shift",options:t,fn(e){return m(this,null,function*(){const{x:i,y:n,placement:s}=e,a=qn(t,e),{mainAxis:r=!0,crossAxis:o=!1,limiter:d={fn:t=>{let{x:e,y:i}=t;return{x:e,y:i}}}}=a,l=h(a,["mainAxis","crossAxis","limiter"]),p={x:i,y:n},m=yield ss(e,l),f=Kn(jn(s)),g=Bn(f);let v=p[g],$=p[f];if(r){const t="y"===g?"bottom":"right";v=Rn(v+m["y"===g?"top":"left"],v,v-m[t])}if(o){const t="y"===f?"bottom":"right";$=Rn($+m["y"===f?"top":"left"],$,$-m[t])}const y=d.fn(u(c({},e),{[g]:v,[f]:$}));return u(c({},y),{data:{x:y.x-i,y:y.y-n,enabled:{[g]:r,[f]:o}}})})}}},Ws=function(t){return void 0===t&&(t={}),{name:"flip",options:t,fn(e){return m(this,null,function*(){var i,n;const{placement:s,middlewareData:a,rects:r,initialPlacement:o,platform:d,elements:l}=e,c=qn(t,e),{mainAxis:u=!0,crossAxis:p=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0}=c,$=h(c,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if(null!=(i=a.arrow)&&i.alignmentOffset)return{};const y=jn(s),b=Kn(o),x=jn(o)===o,w=yield null==d.isRTL?void 0:d.isRTL(l.floating),_=m||(x||!v?[ts(o)]:function(t){const e=ts(t);return[Zn(t),e,Zn(e)]}(o)),k="none"!==g;!m&&k&&_.push(...function(t,e,i,n){const s=Hn(t);let a=function(t,e,i){switch(t){case"top":case"bottom":return i?e?Qn:Wn:e?Wn:Qn;case"left":case"right":return e?Yn:Xn;default:return[]}}(jn(t),"start"===i,n);return s&&(a=a.map(t=>t+"-"+s),e&&(a=a.concat(a.map(Zn)))),a}(o,v,g,w));const S=[o,..._],C=yield ss(e,$),P=[];let E=(null==(n=a.flip)?void 0:n.overflows)||[];if(u&&P.push(C[y]),p){const t=function(t,e,i){void 0===i&&(i=!1);const n=Hn(t),s=Jn(t),a=Vn(s);let r="x"===s?n===(i?"end":"start")?"right":"left":"start"===n?"bottom":"top";return e.reference[a]>e.floating[a]&&(r=ts(r)),[r,ts(r)]}(s,r,w);P.push(C[t[0]],C[t[1]])}if(E=[...E,{placement:s,overflows:P}],!P.every(t=>t<=0)){var I,T;const t=((null==(I=a.flip)?void 0:I.index)||0)+1,e=S[t];if(e&&("alignment"!==p||b===Kn(e)||E.every(t=>Kn(t.placement)!==b||t.overflows[0]>0)))return{data:{index:t,overflows:E},reset:{placement:e}};let i=null==(T=E.filter(t=>t.overflows[0]<=0).sort((t,e)=>t.overflows[1]-e.overflows[1])[0])?void 0:T.placement;if(!i)switch(f){case"bestFit":{var A;const t=null==(A=E.filter(t=>{if(k){const e=Kn(t.placement);return e===b||"y"===e}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:A[0];t&&(i=t);break}case"initialPlacement":i=o}if(s!==i)return{reset:{placement:i}}}return{}})}}},Qs=t=>({name:"arrow",options:t,fn(e){return m(this,null,function*(){const{x:i,y:n,placement:s,rects:a,platform:r,elements:o,middlewareData:d}=e,{element:l,padding:u=0}=qn(t,e)||{};if(null==l)return{};const h=es(u),p={x:i,y:n},m=Jn(s),f=Vn(m),g=yield r.getDimensions(l),v="y"===m,$=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",x=a.reference[f]+a.reference[m]-p[m]-a.floating[f],w=p[m]-a.reference[m],_=yield null==r.getOffsetParent?void 0:r.getOffsetParent(l);let k=_?_[b]:0;k&&(yield null==r.isElement?void 0:r.isElement(_))||(k=o.floating[b]||a.floating[f]);const S=x/2-w/2,C=k/2-g[f]/2-1,P=Fn(h[$],C),E=Fn(h[y],C),I=P,T=k-g[f]-E,A=k/2-g[f]/2+S,M=Rn(I,A,T),L=!d.arrow&&null!=Hn(s)&&A!==M&&a.reference[f]/2-(A<I?P:E)-g[f]/2<0,F=L?A<I?A-I:A-T:0;return{[m]:p[m]+F,data:c({[m]:M,centerOffset:A-M-F},L&&{alignmentOffset:F}),reset:L}})}}),Ys=class t extends ie{constructor(t){super(t),this.tooltip=null,this.arrow=null,this.showTimeout=null,this.hideTimeout=null,this.isVisible=!1,this.handleMouseEnter=()=>{this.scheduleShow()},this.handleMouseLeave=()=>{this.scheduleHide()},this.handleFocus=()=>{this.scheduleShow()},this.handleBlur=()=>{this.scheduleHide()},this.handleTouchStart=()=>{this.isVisible?this.hide():this.show()},this.handleKeydown=t=>{"Escape"===t.key&&this.isVisible&&this.hide()},this.config=this.parseConfig(),this.injectStyles()}initialize(){return m(this,null,function*(){try{this.validateElement(),this.setupEventListeners(),this.logger.debug("Tooltip enhancer initialized")}catch(t){this.handleError(t,"initialize")}})}update(){this.config=this.parseConfig(),this.isVisible&&this.tooltip&&this.updateTooltipContent()}destroy(){this.hide(),this.cleanupTimeouts(),super.destroy()}parseConfig(){return{placement:this.getAttribute("data-next-tooltip-placement")||"top",offset:parseInt(this.getAttribute("data-next-tooltip-offset")||"8"),delay:parseInt(this.getAttribute("data-next-tooltip-delay")||"500"),maxWidth:this.getAttribute("data-next-tooltip-max-width")||"200px",className:this.getAttribute("data-next-tooltip-class")||""}}injectStyles(){if(t.stylesInjected)return;const e="next-tooltip-styles";if(document.getElementById(e))return;const i=document.createElement("style");i.id=e,i.textContent='\n      .next-tooltip {\n        position: fixed;\n        top: 0;\n        left: 0;\n        z-index: 99999;\n        opacity: 0;\n        visibility: hidden;\n        transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;\n        transform: scale(0.95);\n        pointer-events: none;\n      }\n\n      .next-tooltip--visible {\n        opacity: 1;\n        visibility: visible;\n        transform: scale(1);\n        pointer-events: auto;\n      }\n\n      .next-tooltip__content {\n        background: #333;\n        color: #fff;\n        padding: 8px 12px;\n        border-radius: 6px;\n        font-size: 13px;\n        line-height: 1.4;\n        font-weight: 400;\n        text-align: center;\n        word-wrap: break-word;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n        white-space: nowrap;\n        max-width: 200px;\n        white-space: normal;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      .next-tooltip__arrow {\n        position: absolute;\n        width: 8px;\n        height: 8px;\n        background: #333;\n        transform: rotate(45deg);\n      }\n\n      .next-tooltip[data-placement^="top"] .next-tooltip__arrow {\n        border-top: none;\n        border-left: none;\n      }\n\n      .next-tooltip[data-placement^="bottom"] .next-tooltip__arrow {\n        border-bottom: none;\n        border-right: none;\n      }\n\n      .next-tooltip[data-placement^="left"] .next-tooltip__arrow {\n        border-left: none;\n        border-bottom: none;\n      }\n\n      .next-tooltip[data-placement^="right"] .next-tooltip__arrow {\n        border-right: none;\n        border-top: none;\n      }\n\n      .next-tooltip--light .next-tooltip__content {\n        background: #fff;\n        color: #333;\n        border: 1px solid #ddd;\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .next-tooltip--light .next-tooltip__arrow {\n        background: #fff;\n        border: 1px solid #ddd;\n      }\n\n      .next-tooltip--error .next-tooltip__content {\n        background: #dc3545;\n        color: #fff;\n      }\n\n      .next-tooltip--error .next-tooltip__arrow {\n        background: #dc3545;\n      }\n\n      .next-tooltip--success .next-tooltip__content {\n        background: #28a745;\n        color: #fff;\n      }\n\n      .next-tooltip--success .next-tooltip__arrow {\n        background: #28a745;\n      }\n\n      .next-tooltip--warning .next-tooltip__content {\n        background: #ffc107;\n        color: #333;\n      }\n\n      .next-tooltip--warning .next-tooltip__arrow {\n        background: #ffc107;\n      }\n\n      .next-tooltip--large .next-tooltip__content {\n        padding: 12px 16px;\n        font-size: 14px;\n        max-width: 300px;\n      }\n\n      .next-tooltip--small .next-tooltip__content {\n        padding: 4px 8px;\n        font-size: 12px;\n        max-width: 150px;\n      }\n\n      @media (hover: none) {\n        .next-tooltip {\n          transition-duration: 0.15s;\n        }\n      }\n\n      @media (prefers-contrast: high) {\n        .next-tooltip__content {\n          border: 2px solid currentColor;\n        }\n      }\n\n      @media (prefers-reduced-motion: reduce) {\n        .next-tooltip {\n          transition: opacity 0.1s ease, visibility 0.1s ease;\n          transform: none;\n        }\n        \n        .next-tooltip--visible {\n          transform: none;\n        }\n      }\n    ',document.head.appendChild(i),t.stylesInjected=!0,this.logger.debug("Tooltip styles injected into document head")}setupEventListeners(){this.element.addEventListener("mouseenter",this.handleMouseEnter),this.element.addEventListener("mouseleave",this.handleMouseLeave),this.element.addEventListener("focus",this.handleFocus),this.element.addEventListener("blur",this.handleBlur),this.element.addEventListener("touchstart",this.handleTouchStart),document.addEventListener("keydown",this.handleKeydown)}cleanupEventListeners(){this.element.removeEventListener("mouseenter",this.handleMouseEnter),this.element.removeEventListener("mouseleave",this.handleMouseLeave),this.element.removeEventListener("focus",this.handleFocus),this.element.removeEventListener("blur",this.handleBlur),this.element.removeEventListener("touchstart",this.handleTouchStart),document.removeEventListener("keydown",this.handleKeydown)}scheduleShow(){this.cleanupTimeouts(),this.showTimeout=window.setTimeout(()=>{this.show()},this.config.delay)}scheduleHide(){this.cleanupTimeouts(),this.hideTimeout=window.setTimeout(()=>{this.hide()},150)}cleanupTimeouts(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}show(){return m(this,null,function*(){if(this.isVisible)return;const t=this.getTooltipContent();if(t)try{if(this.createTooltip(t),!this.tooltip)return;this.isVisible=!0,document.body.appendChild(this.tooltip);const e=this.element.getBoundingClientRect();this.logger.debug("Element position",{top:e.top,left:e.left,width:e.width,height:e.height,scrollY:window.scrollY,scrollX:window.scrollX}),yield new Promise(t=>requestAnimationFrame(t)),yield this.positionTooltip(),requestAnimationFrame(()=>{this.tooltip&&this.tooltip.classList.add("next-tooltip--visible")}),this.element.setAttribute("aria-describedby",this.tooltip.id),this.logger.debug("Tooltip shown")}catch(e){this.handleError(e,"show tooltip")}})}hide(){this.isVisible&&this.tooltip&&(this.isVisible=!1,this.tooltip.classList.remove("next-tooltip--visible"),setTimeout(()=>{this.tooltip&&this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.arrow=null},200),this.element.removeAttribute("aria-describedby"),this.logger.debug("Tooltip hidden"))}getTooltipContent(){return this.getAttribute("data-next-tooltip")||""}updateTooltipContent(){if(!this.tooltip)return;const t=this.getTooltipContent(),e=this.tooltip.querySelector(".next-tooltip__content");e&&(e.textContent=t)}createTooltip(t){this.tooltip=document.createElement("div"),this.tooltip.className=`next-tooltip ${this.config.className||""}`.trim(),this.tooltip.id=`tooltip-${Math.random().toString(36).substr(2,9)}`,this.tooltip.role="tooltip",this.tooltip.style.maxWidth=this.config.maxWidth||"200px";const e=document.createElement("div");e.className="next-tooltip__content",e.textContent=t,this.arrow=document.createElement("div"),this.arrow.className="next-tooltip__arrow",this.tooltip.appendChild(e),this.tooltip.appendChild(this.arrow),this.tooltip.addEventListener("mouseenter",()=>{this.cleanupTimeouts()}),this.tooltip.addEventListener("mouseleave",()=>{this.scheduleHide()})}positionTooltip(){return m(this,null,function*(){if(this.tooltip&&this.arrow)try{const{x:e,y:i,placement:n,middlewareData:s}=yield((t,e,i)=>{const n=new Map,s=c({platform:Js},i),a=u(c({},s.platform),{qe:n});return((t,e,i)=>m(null,null,function*(){const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:r}=i,o=a.filter(Boolean),d=yield null==r.isRTL?void 0:r.isRTL(e);let l=yield r.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:p}=ns(l,n,d),m=n,f={},g=0;for(let i=0;i<o.length;i++){const{name:a,fn:v}=o[i],{x:$,y:y,data:b,reset:x}=yield v({x:h,y:p,initialPlacement:n,placement:m,strategy:s,middlewareData:f,rects:l,platform:r,elements:{reference:t,floating:e}});h=null!=$?$:h,p=null!=y?y:p,f=u(c({},f),{[a]:c(c({},f[a]),b)}),x&&g<=50&&(g++,"object"==typeof x&&(x.placement&&(m=x.placement),x.rects&&(l=!0===x.rects?yield r.getElementRects({reference:t,floating:e,strategy:s}):x.rects),({x:h,y:p}=ns(l,m,d))),i=-1)}return{x:h,y:p,placement:m,strategy:s,middlewareData:f}}))(t,e,u(c({},s),{platform:a}))})(this.element,this.tooltip,{placement:this.config.placement||"top",middleware:[(t=this.config.offset||8,void 0===t&&(t=0),{name:"offset",options:t,fn(e){return m(this,null,function*(){var i,n;const{x:s,y:a,placement:r,middlewareData:o}=e,d=yield function(t,e){return m(this,null,function*(){const{placement:i,platform:n,elements:s}=t,a=yield null==n.isRTL?void 0:n.isRTL(s.floating),r=jn(i),o=Hn(i),d="y"===Kn(i),l=as.has(r)?-1:1,c=a&&d?-1:1,u=qn(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof m&&(p="end"===o?-1*m:m),d?{x:p*c,y:h*l}:{x:h*l,y:p*c}})}(e,t);return r===(null==(i=o.offset)?void 0:i.placement)&&null!=(n=o.arrow)&&n.alignmentOffset?{}:{x:s+d.x,y:a+d.y,data:u(c({},d),{placement:r})}})}}),Ws(),Zs({padding:5}),Qs({element:this.arrow})],strategy:"fixed"});if(Object.assign(this.tooltip.style,{left:`${e}px`,top:`${i}px`}),s.arrow){const{x:t,y:e}=s.arrow,i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];Object.assign(this.arrow.style,{left:null!=t?`${t}px`:"",top:null!=e?`${e}px`:"",right:"",bottom:"",[i]:"-4px"})}this.tooltip.setAttribute("data-placement",n),this.logger.debug("Tooltip positioned",{x:e,y:i,placement:n})}catch(e){this.handleError(e,"position tooltip")}var t})}};Ys.stylesInjected=!1;let Xs=Ys;const ta=Object.freeze(Object.defineProperty({__proto__:null,TooltipEnhancer:Xs},Symbol.toStringTag,{value:"Module"})),ea=Object.freeze(Object.defineProperty({__proto__:null,ScrollHintEnhancer:class extends ie{constructor(){super(...arguments),this.scrollThreshold=5,this.activeClass="cart-items__scroll-hint--active"}initialize(){return m(this,null,function*(){this.validateElement(),this.scrollThreshold=parseInt(this.getAttribute("data-next-scroll-threshold")||"5",10);const t=this.getAttribute("data-next-scroll-target");if(t)this.scrollTarget=document.querySelector(t);else{const t=this.findScrollTarget();t&&(this.scrollTarget=t)}this.scrollTarget?(this.scrollHandler=this.throttle(this.updateScrollHint.bind(this),16),this.resizeHandler=this.debounce(this.updateScrollHint.bind(this),100),this.scrollTarget.addEventListener("scroll",this.scrollHandler),window.addEventListener("resize",this.resizeHandler),this.observeContentChanges(),this.updateScrollHint(),this.logger.debug("ScrollHintEnhancer initialized",{scrollTarget:this.scrollTarget,threshold:this.scrollThreshold})):this.logger.warn("No scroll target found for scroll hint")})}findScrollTarget(){const t=[".cart-items__list","[data-next-cart-items]","[data-next-order-items]",".order-items__list",".scrollable-content"],e=this.element.parentElement;if(e)for(const n of t){const t=e.querySelector(n);if(t)return t}const i=this.element.closest(".order-summary, .cart-items, .modal-content");if(i)for(const n of t){const t=i.querySelector(n);if(t)return t}return null}observeContentChanges(){this.scrollTarget&&(this.mutationObserver=new MutationObserver(()=>{this.scheduleUpdate()}),this.mutationObserver.observe(this.scrollTarget,{childList:!0,subtree:!0,characterData:!0}))}scheduleUpdate(){this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(()=>{this.updateScrollHint()})}hasScrollableContent(){return!!this.scrollTarget&&this.scrollTarget.scrollHeight>this.scrollTarget.clientHeight}updateScrollHint(){if(!this.scrollTarget)return;if(!this.hasScrollableContent())return this.removeClass(this.activeClass),void this.setAttribute("aria-hidden","true");const t=this.scrollTarget.scrollTop<=this.scrollThreshold;t?(this.addClass(this.activeClass),this.setAttribute("aria-hidden","false")):(this.removeClass(this.activeClass),this.setAttribute("aria-hidden","true")),this.eventBus.emit("scroll-hint:updated",{isVisible:t&&this.hasScrollableContent(),scrollTop:this.scrollTarget.scrollTop,scrollHeight:this.scrollTarget.scrollHeight,clientHeight:this.scrollTarget.clientHeight})}throttle(t,e){let i=!1;return(...n)=>{i||(t.apply(this,n),i=!0,setTimeout(()=>i=!1,e))}}debounce(t,e){let i;return(...n)=>{clearTimeout(i),i=window.setTimeout(()=>t.apply(this,n),e)}}update(){this.updateScrollHint()}destroy(){this.scrollTarget&&this.scrollHandler&&this.scrollTarget.removeEventListener("scroll",this.scrollHandler),this.resizeHandler&&window.removeEventListener("resize",this.resizeHandler),this.mutationObserver&&this.mutationObserver.disconnect(),this.rafId&&cancelAnimationFrame(this.rafId),super.destroy()}}},Symbol.toStringTag,{value:"Module"})),ia=Object.freeze(Object.defineProperty({__proto__:null,QuantityTextEnhancer:class extends ie{constructor(){super(...arguments),this.template="",this.currentQuantity=1}initialize(){return m(this,null,function*(){if(this.validateElement(),this.template=this.getAttribute("data-next-quantity-text")||"",!this.template)return void this.logger.warn("QuantityTextEnhancer requires data-next-quantity-text attribute");this.quantitySelectorId=this.getAttribute("data-next-quantity-selector-id")||"";const t=this.element.closest("[data-next-package-id]");if(t){const e=t.getAttribute("data-next-package-id");e&&(this.containerPackageId=parseInt(e,10))}this.setupQuantityListeners(),this.getInitialQuantity(),this.updateText(),this.logger.debug("QuantityTextEnhancer initialized",{template:this.template,quantitySelectorId:this.quantitySelectorId,packageId:this.containerPackageId})})}setupQuantityListeners(){this.eventBus.on("upsell:quantity-changed",t=>{if(this.quantitySelectorId&&t.selectorId===this.quantitySelectorId)this.currentQuantity=t.quantity,this.updateText();else if(this.quantitySelectorId||t.selectorId){if(!this.quantitySelectorId){const e=this.element.closest("[data-next-selector-id]");e?e.getAttribute("data-next-selector-id")===t.selectorId&&(this.currentQuantity=t.quantity,this.updateText()):t.packageId===this.containerPackageId&&(this.currentQuantity=t.quantity,this.updateText())}}else t.packageId===this.containerPackageId&&(this.currentQuantity=t.quantity,this.updateText())})}getInitialQuantity(){if(this.quantitySelectorId){const t=document.querySelector(`[data-next-upsell-quantity="display"][data-next-quantity-selector-id="${this.quantitySelectorId}"]`);if(t&&t.textContent){const e=parseInt(t.textContent,10);isNaN(e)||(this.currentQuantity=e)}}else{const t=this.element.closest('[data-next-upsell="offer"]');if(t){const e=t.querySelector('[data-next-upsell-quantity="display"]');if(e&&e.textContent){const t=parseInt(e.textContent,10);isNaN(t)||(this.currentQuantity=t)}}}}updateText(){let t=this.template;t=t.replace(/\{qty([*+\-]?\d*)\}/g,(t,e)=>{let i=this.currentQuantity;if(e){const t=e[0],n=parseInt(e.substring(1),10);switch(t){case"*":i=this.currentQuantity*n;break;case"+":i=this.currentQuantity+n;break;case"-":i=Math.max(0,this.currentQuantity-n)}}return i.toString()}),t=t.replace(/\{([^|]+)\|([^}]+)\}/g,(t,e,i)=>1===this.currentQuantity?e:i),this.element.textContent=t}update(){this.updateText()}destroy(){super.destroy()}}},Symbol.toStringTag,{value:"Module"})),na=X("UtmTransfer"),sa=Object.freeze(Object.defineProperty({__proto__:null,UtmTransfer:class{constructor(t={}){this.config=c({enabled:!0,applyToExternalLinks:!1,excludedDomains:[],paramsToCopy:[],debug:!1},t),this.paramsToApply=new URLSearchParams}init(){if(!this.config.enabled)return void na.debug("UTM Transfer disabled by configuration");const t=new URLSearchParams(window.location.search);if(""!==t.toString()){if(this.config.debug){const e=[];t.forEach((t,i)=>{e.push(`${i}=${t}`)}),na.debug(`Available parameters: ${e.join(", ")}`)}this.prepareParameters(t),""!==this.paramsToApply.toString()?(this.enhanceLinks(),this.observeNewLinks(),na.debug(`UTM Transfer initialized with parameters: ${this.paramsToApply.toString()}`)):na.debug("No matching parameters to transfer")}else na.debug("No URL parameters to transfer")}prepareParameters(t){Array.isArray(this.config.paramsToCopy)&&this.config.paramsToCopy.length>0?(na.debug(`Filtering to specific parameters: ${this.config.paramsToCopy.join(", ")}`),this.config.paramsToCopy.forEach(e=>{t.has(e)&&(this.paramsToApply.append(e,t.get(e)),na.debug(`Found parameter to copy: ${e}=${t.get(e)}`))})):(na.debug("No specific parameters configured, will copy all parameters"),t.forEach((t,e)=>{this.paramsToApply.append(e,t)}))}enhanceLinks(){const t=document.querySelectorAll("a");na.debug(`Found ${t.length} links on the page`),t.forEach(t=>{this.addClickListener(t)})}addClickListener(t){"true"!==t.dataset.utmEnhanced&&(t.addEventListener("click",e=>{this.applyParamsToLink(t)}),t.dataset.utmEnhanced="true")}applyParamsToLink(t){if(!t||!t.getAttribute)return void na.error("Invalid link element provided");const e=t.getAttribute("href");if(!e)return;if(this.shouldSkipLink(e))return;if(this.isExternalLink(e)){if(!this.config.applyToExternalLinks)return;if(this.isExcludedDomain(e))return}let i;try{i=new URL(e,window.location.origin)}catch(a){return void na.error("Invalid URL:",e)}const n=new URLSearchParams(i.search);let s=!1;this.paramsToApply.forEach((t,e)=>{n.has(e)||(n.append(e,t),s=!0)}),s&&(i.search=n.toString(),t.setAttribute("href",i.toString()),na.debug(`Updated link ${e} to ${i.toString()}`))}shouldSkipLink(t){return t.startsWith("#")||t.startsWith("javascript:")||t.startsWith("mailto:")||t.startsWith("tel:")||t.startsWith("sms:")||t.startsWith("whatsapp:")}isExternalLink(t){return t.includes("://")&&!t.includes(window.location.hostname)}isExcludedDomain(t){return!(!this.config.excludedDomains||0===this.config.excludedDomains.length)&&this.config.excludedDomains.some(e=>t.includes(e))}observeNewLinks(){new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const e=t;"A"===e.tagName&&this.addClickListener(e),e.querySelectorAll("a").forEach(t=>{this.addClickListener(t)})}})})}).observe(document.body,{childList:!0,subtree:!0})}getConfig(){return c({},this.config)}updateConfig(t){this.config=c(c({},this.config),t)}}},Symbol.toStringTag,{value:"Module"})),aa=new class{constructor(){this.logger=new Q("ErrorHandler"),this.initialized=!1,this.isHandlingError=!1}initialize(){if(this.initialized)return;window.addEventListener("error",t=>{this.handleError(t.error,{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno})}),window.addEventListener("unhandledrejection",t=>{this.handleError(t.reason,{type:"unhandledRejection",promise:t.promise})});const t=console.error;console.error=(...e)=>{if(t.apply(console,e),this.isHandlingError)return;const i=e[0];i instanceof Error?this.handleError(i,{source:"console.error"}):"string"==typeof i&&i.toLowerCase().includes("error")&&this.handleError(new Error(i),{source:"console.error",additionalArgs:e.slice(1)})},this.initialized=!0,this.logger.debug("Global error handler initialized")}handleError(t,e){if(t&&!this.isHandlingError)try{this.isHandlingError=!0;const i=t instanceof Error?t:new Error(String(t)),n=u(c({},e),{sdk:{version:"0.2.0",timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent}});this.logger.error("Captured error:",i,n),st.getInstance().emit("error:occurred",{message:i.message,code:i.name,details:n})}finally{this.isHandlingError=!1}}captureMessage(t,e="info"){}addBreadcrumb(t){}},ra=Object.freeze(Object.defineProperty({__proto__:null,errorHandler:aa},Symbol.toStringTag,{value:"Module"}));class oa{constructor(){this.eventLog=[],this.maxEvents=100,this.initializeEventCapture()}initializeEventCapture(){["next:cart-updated","next:checkout-step","next:item-added","next:item-removed","next:timer-expired","next:validation-error","next:payment-success","next:payment-error"].forEach(t=>{document.addEventListener(t,e=>{this.logEvent(t.replace("next:",""),e.detail,"CustomEvent")})}),this.interceptFetch()}interceptFetch(){const t=window.fetch;window.fetch=(...e)=>m(this,null,function*(){var i;const n=e[0].toString();return(n.includes("29next.com")||n.includes("campaigns."))&&this.logEvent("api-request",{url:n,method:(null==(i=e[1])?void 0:i.method)||"GET"},"API"),t.apply(window,e)})}logEvent(t,e,i){this.eventLog.push({timestamp:new Date,type:t,data:e,source:i}),this.eventLog.length>this.maxEvents&&this.eventLog.shift()}getEvents(t){return(t?this.eventLog.slice(-t):this.eventLog).reverse()}clearEvents(){this.eventLog=[]}exportEvents(){return JSON.stringify(this.eventLog,null,2)}}class da{static createOverlayHTML(t,e,i,n){const s=t.find(t=>t.id===e);return`\n      <div class="enhanced-debug-overlay ${i?"expanded":"collapsed"}">\n        ${this.createBottomBar(i)}\n        ${i?this.createExpandedContent(t,s,e,n):""}\n      </div>\n    `}static createBottomBar(t){return`\n      <div class="debug-bottom-bar">\n        <div class="debug-logo-section">\n          ${this.getNextCommerceLogo()}\n          <span class="debug-title">Debug Tools</span>\n          <div class="debug-status">\n            <div class="status-indicator active"></div>\n            <span class="status-text">Active</span>\n          </div>\n        </div>\n        \n        <div class="debug-quick-stats">\n          <div class="stat-item">\n            <span class="stat-value" data-debug-stat="cart-items">0</span>\n            <span class="stat-label">Items</span>\n          </div>\n          <div class="stat-item">\n            <span class="stat-value" data-debug-stat="cart-total">$0.00</span>\n            <span class="stat-label">Total</span>\n          </div>\n          <div class="stat-item">\n            <span class="stat-value" data-debug-stat="enhanced-elements">0</span>\n            <span class="stat-label">Enhanced</span>\n          </div>\n        </div>\n\n        <div class="debug-controls">\n          <button class="debug-control-btn" data-action="toggle-mini-cart" title="Toggle Mini Cart">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z"/>\n            </svg>\n          </button>\n          <button class="debug-control-btn" data-action="clear-cart" title="Clear Cart">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>\n            </svg>\n          </button>\n          <button class="debug-control-btn" data-action="toggle-xray" title="Toggle X-Ray View">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M5 3C3.89 3 3 3.9 3 5V19C3 20.11 3.89 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3H5M5 5H19V19H5V5M7 7V9H9V7H7M11 7V9H13V7H11M15 7V9H17V7H15M7 11V13H9V11H7M11 11V13H13V11H11M15 11V13H17V11H15M7 15V17H9V15H7M11 15V17H13V15H11M15 15V17H17V15H15Z"/>\n            </svg>\n          </button>\n          <button class="debug-control-btn" data-action="export-data" title="Export Debug Data">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>\n            </svg>\n          </button>\n          <button class="debug-expand-btn" data-action="toggle-expand" title="${t?"Collapse":"Expand"}">\n            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="expand-icon ${t?"rotated":""}">\n              <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>\n            </svg>\n          </button>\n          <button class="debug-control-btn close-btn" data-action="close" title="Close Debug Tools">\n            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">\n              <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    `}static createExpandedContent(t,e,i,n){return`\n      <div class="debug-expanded-content">\n        <div class="debug-sidebar">\n          ${this.createPanelTabs(t,i)}\n        </div>\n        \n        <div class="debug-main-content">\n          ${this.createPanelContent(e,n)}\n        </div>\n      </div>\n    `}static createPanelTabs(t,e){return`\n      <div class="debug-panel-tabs">\n        ${t.map(t=>`\n          <button class="debug-panel-tab ${t.id===e?"active":""}" \n                  data-panel="${t.id}">\n            <span class="tab-icon">${t.icon}</span>\n            <span class="tab-label">${t.title}</span>\n            ${"events"===t.id?'<div class="tab-badge" data-debug-badge="events">0</div>':""}\n          </button>\n        `).join("")}\n      </div>\n    `}static createPanelContent(t,e){var i,n;if(!t)return"";const s=(null==(i=t.getTabs)?void 0:i.call(t))||[];if(s.length>0){const i=e||(null==(n=s[0])?void 0:n.id),a=s.find(t=>t.id===i)||s[0];return`\n        <div class="debug-panel-container">\n          <div class="panel-header">\n            <div class="panel-title">\n              <span class="panel-icon">${t.icon}</span>\n              <h2>${t.title}</h2>\n            </div>\n            ${t.getActions?`\n              <div class="panel-actions">\n                ${t.getActions().map(t=>`\n                  <button class="panel-action-btn ${t.variant||"primary"}" \n                          data-panel-action="${t.label}">\n                    ${t.label}\n                  </button>\n                `).join("")}\n              </div>\n            `:""}\n          </div>\n          \n          <div class="panel-horizontal-tabs">\n            ${s.map(t=>`\n              <button class="horizontal-tab ${t.id===i?"active":""}" \n                      data-panel-tab="${t.id}">\n                ${t.icon?`<span class="tab-icon">${t.icon}</span>`:""}\n                <span class="tab-label">${t.label}</span>\n              </button>\n            `).join("")}\n          </div>\n          \n          <div class="panel-content ${"events"===t.id||"event-timeline"===t.id||"order"===t.id&&"lines"===i||"raw"===i?"no-padding":""}">\n            ${a?a.getContent():""}\n          </div>\n        </div>\n      `}return`\n      <div class="debug-panel-container">\n        <div class="panel-header">\n          <div class="panel-title">\n            <span class="panel-icon">${t.icon}</span>\n            <h2>${t.title}</h2>\n          </div>\n          ${t.getActions?`\n            <div class="panel-actions">\n              ${t.getActions().map(t=>`\n                <button class="panel-action-btn ${t.variant||"primary"}" \n                        data-panel-action="${t.label}">\n                  ${t.label}\n                </button>\n              `).join("")}\n            </div>\n          `:""}\n        </div>\n        <div class="panel-content ${"events"===t.id||"event-timeline"===t.id||"order"===t.id?"no-padding":""}">\n          ${t.getContent()}\n        </div>\n      </div>\n    `}static getNextCommerceLogo(){return'\n      <svg class="debug-logo" width="32" height="32" viewBox="0 0 115.4 101.9" fill="none">\n        <defs>\n          <style>\n            .st0 {\n              fill: currentColor;\n              stroke: currentColor;\n              stroke-width: 2.5px;\n            }\n          </style>\n        </defs>\n        <path class="st0" d="M83.5,58.3l-1.9-1.3L27.2,21.2c-.7-.4-1.4-.6-2-.6-2,0-3.6,1.6-3.6,3.6v53.4c0,2,1.6,3.6,3.6,3.6h3.8v12.3h-3.8c-8.8,0-15.8-7.1-15.8-15.8V24.3c0-8.8,7.1-15.8,15.8-15.8,3.1,0,6.2.9,8.7,2.6h0l49,33.4.5.4v13.5ZM90.2,8.4c8.8,0,15.8,7.1,15.8,15.8v53.4c0,8.8-7.1,15.8-15.8,15.8s-6.2-.9-8.7-2.6h0l-49-33.4-.5-.4v-13.5l1.9,1.3,54.3,35.7c.7.4,1.4.7,2,.7,2,0,3.6-1.6,3.6-3.6V24.3c0-2-1.6-3.6-3.6-3.6h-3.8v-12.3h3.8Z"/>\n      </svg>\n    '}static addStyles(){}static removeStyles(){}}const la=class{static initialize(){"true"===localStorage.getItem(this.STORAGE_KEY)&&this.activate()}static toggle(){return this.isActive?this.deactivate():this.activate(),this.isActive}static activate(){this.isActive||(this.styleElement=document.createElement("style"),this.styleElement.id="debug-xray-styles",this.styleElement.textContent='\n    /* X-RAY WIREFRAME CSS - PURE CSS, NO JS */\n\n    /* Subtle outlines for all data attributes */\n    [data-next-display],\n    [data-next-show],\n    [data-next-checkout],\n    [data-next-selector-id],\n    [data-next-cart-selector],\n    [data-next-selection-mode],\n    [data-next-shipping-id],\n    [data-next-selector-card],\n    [data-next-package-id],\n    [data-next-quantity],\n    [data-next-selected],\n    [data-next-await],\n    [data-next-in-cart],\n    [data-next-express-checkout],\n    [data-next-payment-method],\n    [data-next-checkout-field],\n    [data-next-payment-form] {\n      position: relative !important;\n      outline: 1px dashed rgba(0, 0, 0, 0.3) !important;\n      outline-offset: -1px !important;\n    }\n\n    /* Color coding for different attribute types */\n    [data-next-display] {\n      outline-color: #4ecdc4 !important;\n    }\n\n    [data-next-show] {\n      outline-color: #ffe66d !important;\n    }\n\n    [data-next-checkout] {\n      outline-color: #ff6b6b !important;\n    }\n\n    [data-next-selector-id] {\n      outline-color: #a8e6cf !important;\n    }\n\n    [data-next-selector-card] {\n      outline-color: #95e1d3 !important;\n    }\n\n    [data-next-in-cart] {\n      outline-color: #c7ceea !important;\n    }\n\n    [data-next-selected] {\n      outline-color: #ffa502 !important;\n    }\n\n    [data-next-package-id] {\n      outline-color: #ff8b94 !important;\n    }\n\n    /* Small corner labels */\n    [data-next-selector-id]::before {\n      content: attr(data-next-selector-id) !important;\n      position: absolute !important;\n      top: 2px !important;\n      right: 2px !important;\n      background: rgba(168, 230, 207, 0.9) !important;\n      color: #333 !important;\n      padding: 2px 4px !important;\n      font-size: 9px !important;\n      font-family: monospace !important;\n      line-height: 1 !important;\n      border-radius: 2px !important;\n      pointer-events: none !important;\n      z-index: 10 !important;\n    }\n\n    [data-next-package-id]::before {\n      content: "PKG " attr(data-next-package-id) !important;\n      position: absolute !important;\n      top: 2px !important;\n      left: 2px !important;\n      background: rgba(255, 139, 148, 0.9) !important;\n      color: white !important;\n      padding: 2px 4px !important;\n      font-size: 9px !important;\n      font-family: monospace !important;\n      font-weight: bold !important;\n      line-height: 1 !important;\n      border-radius: 2px !important;\n      pointer-events: none !important;\n      z-index: 10 !important;\n    }\n\n    /* Special highlighting for active states */\n    [data-next-selected="true"] {\n      outline-width: 2px !important;\n      outline-style: solid !important;\n    }\n\n    [data-next-in-cart="true"] {\n      background-color: rgba(199, 206, 234, 0.1) !important;\n    }\n\n    /* Hover tooltips */\n    [data-next-display]:hover::after,\n    [data-next-show]:hover::after,\n    [data-next-selector-card]:hover::after {\n      position: absolute !important;\n      z-index: 99999 !important;\n      pointer-events: none !important;\n      font-family: monospace !important;\n      font-size: 10px !important;\n      padding: 4px 6px !important;\n      border-radius: 3px !important;\n      white-space: nowrap !important;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;\n      bottom: 100% !important;\n      left: 0 !important;\n      margin-bottom: 4px !important;\n    }\n\n    [data-next-display]:hover::after {\n      content: "display: " attr(data-next-display) !important;\n      background: #4ecdc4 !important;\n      color: white !important;\n    }\n\n    [data-next-show]:hover::after {\n      content: "show: " attr(data-next-show) !important;\n      background: #ffe66d !important;\n      color: #333 !important;\n    }\n\n    [data-next-selector-card]:hover::after {\n      content: "pkg:" attr(data-next-package-id) " | selected:" attr(data-next-selected) " | in-cart:" attr(data-next-in-cart) !important;\n      background: #95e1d3 !important;\n      color: #333 !important;\n    }\n  ',document.head.appendChild(this.styleElement),document.body.classList.add("debug-xray-active"),this.isActive=!0,localStorage.setItem(this.STORAGE_KEY,"true"))}static deactivate(){this.isActive&&(this.styleElement&&(this.styleElement.remove(),this.styleElement=null),document.body.classList.remove("debug-xray-active"),this.isActive=!1,localStorage.setItem(this.STORAGE_KEY,"false"))}static isXrayActive(){return this.isActive}};la.styleElement=null,la.isActive=!1,la.STORAGE_KEY="debug-xray-active";let ca=la;class ua{constructor(){this.container=null,this.shadowRoot=null,this.logger=new Q("CurrencySelector"),this.isChanging=!1,this.listenersAttached=!1,this.renderDebounceTimer=null,this.hasInitiallyRendered=!1}static getInstance(){return ua.instance||(ua.instance=new ua),ua.instance}initialize(){vt.getState().debug&&(this.createContainer(),this.render(),this.setupEventListeners(),this.setupStoreSubscriptions(),this.logger.info("Currency selector initialized"))}setupStoreSubscriptions(){const t=lt.subscribe((t,e)=>{var i,n;if(this.isChanging)return;const s=(null==(i=t.data)?void 0:i.currency)!==(null==(n=null==e?void 0:e.data)?void 0:n.currency),a=!(null==e?void 0:e.data)&&t.data;(s||a)&&(this.logger.debug("Campaign currency changed or data loaded, re-rendering currency selector"),this.render())});this.He=t}createContainer(){this.container&&this.container.remove(),this.container=document.createElement("div"),this.container.id="debug-currency-selector",this.container.style.cssText="\n      position: relative;\n      pointer-events: auto;\n    ",this.shadowRoot=this.container.attachShadow({mode:"open"}),document.body.appendChild(this.container)}getAvailableCurrencies(){var t;const e=lt.getState();return(null==(t=e.data)?void 0:t.available_currencies)&&e.data.available_currencies.length>0?e.data.available_currencies:[{code:"USD",label:"$ USD"},{code:"EUR",label:"€ EUR"},{code:"GBP",label:"£ GBP"}]}render(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.renderDebounceTimer=setTimeout(()=>{this.doRender()},50)}doRender(){if(!this.shadowRoot)return;const t=vt.getState(),e=lt.getState(),i=t.selectedCurrency||t.detectedCurrency||"USD",n=this.getAvailableCurrencies();if(!e.data)return this.logger.debug("No campaign data available yet, skipping currency selector render"),void setTimeout(()=>this.doRender(),1e3);if(n.length<=1)return this.logger.debug("Only one currency available, hiding currency selector"),void(this.container&&(this.container.style.display="none"));this.container&&(this.container.style.display="block");const s=t.detectedCurrency;this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        }\n\n        .currency-selector {\n          background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);\n          backdrop-filter: blur(10px);\n          border: 1px solid #333;\n          border-radius: 4px;\n          padding: 4px 8px;\n          display: inline-flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 11px;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n          transition: all 0.2s ease;\n        }\n\n        .currency-selector:hover {\n          background: linear-gradient(135deg, #2a2a2a 0%, #222 100%);\n          border-color: #444;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);\n        }\n\n        .currency-label {\n          color: rgba(255, 255, 255, 0.9);\n          font-size: 11px;\n          font-weight: 500;\n          white-space: nowrap;\n        }\n\n        .currency-select {\n          appearance: none;\n          background: #2a2a2a;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 3px;\n          padding: 2px 20px 2px 6px;\n          font-size: 11px;\n          font-weight: 500;\n          color: rgba(255, 255, 255, 0.9);\n          cursor: pointer;\n          min-width: 60px;\n        }\n\n        .currency-select option {\n          background: #2a2a2a;\n          color: rgba(255, 255, 255, 0.9);\n          padding: 4px;\n        }\n\n        .currency-select:hover {\n          background: #333;\n          border-color: rgba(255, 255, 255, 0.3);\n        }\n\n        .currency-select:focus {\n          outline: none;\n          border-color: #4299e1;\n          background: #333;\n        }\n\n        .currency-select:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .select-wrapper {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .select-arrow {\n          position: absolute;\n          right: 4px;\n          top: 50%;\n          transform: translateY(-50%);\n          pointer-events: none;\n          color: rgba(255, 255, 255, 0.6);\n          width: 10px;\n          height: 10px;\n        }\n\n        .loading-indicator {\n          display: none;\n          width: 10px;\n          height: 10px;\n          border: 1px solid #cbd5e0;\n          border-top-color: #4299e1;\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        .loading-indicator.active {\n          display: inline-block;\n        }\n\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n\n        .detected-info {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 10px;\n          font-weight: 400;\n          white-space: nowrap;\n          padding-left: 6px;\n          border-left: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .detected-value {\n          color: rgba(255, 255, 255, 0.8);\n          font-weight: 500;\n        }\n      </style>\n\n      <div class="currency-selector">\n        <span class="currency-label">💱</span>\n        \n        <div class="select-wrapper">\n          <select class="currency-select" id="currency-select">\n            ${n.map(t=>`\n              <option value="${t.code}" ${t.code===i?"selected":""}>\n                ${t.code}\n              </option>\n            `).join("")}\n          </select>\n          <svg class="select-arrow" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>\n          </svg>\n        </div>\n\n        <div class="loading-indicator" id="loading-indicator"></div>\n\n        ${s?`\n          <div class="detected-info">\n            Detected: <span class="detected-value">${s}</span>\n          </div>\n        `:""}\n      </div>\n    `,this.hasInitiallyRendered||(this.hasInitiallyRendered=!0)}setupEventListeners(){this.shadowRoot&&!this.listenersAttached&&(this.shadowRoot.addEventListener("change",t=>m(this,null,function*(){const e=t.target;if(e&&"currency-select"===e.id){const t=e.value;if(this.isChanging)return void this.logger.warn("Currency change already in progress");this.logger.debug(`Currency select changed to: ${t}`),yield this.handleCurrencyChange(t)}})),document.addEventListener("next:currency-changed",t=>{var e;"currency-selector"!==(null==(e=t.detail)?void 0:e.source)&&(clearTimeout(this.Be),this.Be=setTimeout(()=>{this.logger.debug("External currency change detected, re-rendering selector"),this.render()},100))}),this.listenersAttached=!0,this.logger.debug("Event listeners attached to currency selector"))}handleCurrencyChange(t){return m(this,null,function*(){var e,i;this.isChanging=!0;const n=null==(e=this.shadowRoot)?void 0:e.getElementById("currency-select"),s=null==(i=this.shadowRoot)?void 0:i.getElementById("loading-indicator");n&&(n.disabled=!0),s&&s.classList.add("active");try{this.logger.info(`Changing currency to ${t}`);const e=vt.getState(),i=lt.getState(),n=Et.getState(),s=e.selectedCurrency||e.detectedCurrency||"USD";e.updateConfig({selectedCurrency:t}),sessionStorage.setItem("next_selected_currency",t),this.logger.info(`Saved currency preference to session: ${t}`),yield i.loadCampaign(e.apiKey),yield n.refreshItemPrices(),this.logger.info(`Currency changed successfully to ${t}`),document.dispatchEvent(new CustomEvent("next:currency-changed",{detail:{from:s,to:t,source:"currency-selector"}})),document.dispatchEvent(new CustomEvent("debug:update-content")),this.showSuccessFeedback(t)}catch(a){this.logger.error("Failed to change currency:",a),this.showErrorFeedback();const t=vt.getState().selectedCurrency||"USD";n&&(n.value=t)}finally{this.isChanging=!1,n&&(n.disabled=!1),s&&s.classList.remove("active")}})}showSuccessFeedback(t){var e;const i=null==(e=this.shadowRoot)?void 0:e.querySelector(".currency-selector");i&&(i.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",setTimeout(()=>{i.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}showErrorFeedback(){var t;const e=null==(t=this.shadowRoot)?void 0:t.querySelector(".currency-selector");e&&(e.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",setTimeout(()=>{e.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}destroy(){this.He&&(this.He(),this.He=null),this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.Be&&clearTimeout(this.Be),this.container&&(this.container.remove(),this.container=null,this.shadowRoot=null)}hide(){this.container&&(this.container.style.display="none")}show(){this.container&&(this.container.style.display="block")}}const ha=ua.getInstance();class pa{constructor(){this.container=null,this.shadowRoot=null,this.logger=new Q("CountrySelector"),this.isChanging=!1,this.listenersAttached=!1,this.renderDebounceTimer=null,this.hasInitiallyRendered=!1,this.countries=[]}static getInstance(){return pa.instance||(pa.instance=new pa),pa.instance}initialize(){return m(this,null,function*(){vt.getState().debug&&(yield this.loadCountries(),this.createContainer(),this.render(),this.setupEventListeners(),this.logger.info("Country selector initialized"))})}loadCountries(){return m(this,null,function*(){try{const t=Wt.getInstance(),e=yield t.getLocationData();this.countries=e.countries||[],this.logger.debug(`Loaded ${this.countries.length} countries`)}catch(t){this.logger.error("Failed to load countries:",t),this.countries=[]}})}createContainer(){this.container&&this.container.remove(),this.container=document.createElement("div"),this.container.id="debug-country-selector",this.container.style.cssText="\n      position: relative;\n      pointer-events: auto;\n    ",this.shadowRoot=this.container.attachShadow({mode:"open"}),document.body.appendChild(this.container)}render(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.renderDebounceTimer=setTimeout(()=>{this.doRender()},50)}doRender(){if(!this.shadowRoot)return;const t=vt.getState(),e=t.detectedCountry||"US",i=sessionStorage.getItem("next_selected_country")||e;if(0===this.countries.length)return this.logger.debug("No countries available, hiding country selector"),void(this.container&&(this.container.style.display="none"));this.container&&(this.container.style.display="block");const n=t.detectedCountry;this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        }\n\n        .country-selector {\n          background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);\n          backdrop-filter: blur(10px);\n          border: 1px solid #333;\n          border-radius: 4px;\n          padding: 4px 8px;\n          display: inline-flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 11px;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n          transition: all 0.2s ease;\n        }\n\n        .country-selector:hover {\n          background: linear-gradient(135deg, #2a2a2a 0%, #222 100%);\n          border-color: #444;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);\n        }\n\n        .country-label {\n          color: rgba(255, 255, 255, 0.9);\n          font-size: 11px;\n          font-weight: 500;\n          white-space: nowrap;\n        }\n\n        .country-select {\n          appearance: none;\n          background: #2a2a2a;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 3px;\n          padding: 2px 20px 2px 6px;\n          font-size: 11px;\n          font-weight: 500;\n          color: rgba(255, 255, 255, 0.9);\n          cursor: pointer;\n          min-width: 80px;\n          max-width: 120px;\n        }\n\n        .country-select option {\n          background: #2a2a2a;\n          color: rgba(255, 255, 255, 0.9);\n          padding: 4px;\n        }\n\n        .country-select:hover {\n          background: #333;\n          border-color: rgba(255, 255, 255, 0.3);\n        }\n\n        .country-select:focus {\n          outline: none;\n          border-color: #4299e1;\n          background: #333;\n        }\n\n        .country-select:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .select-wrapper {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .select-arrow {\n          position: absolute;\n          right: 4px;\n          top: 50%;\n          transform: translateY(-50%);\n          pointer-events: none;\n          color: rgba(255, 255, 255, 0.6);\n          width: 10px;\n          height: 10px;\n        }\n\n        .loading-indicator {\n          display: none;\n          width: 10px;\n          height: 10px;\n          border: 1px solid #cbd5e0;\n          border-top-color: #4299e1;\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        .loading-indicator.active {\n          display: inline-block;\n        }\n\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n\n        .reset-button {\n          background: rgba(239, 68, 68, 0.2);\n          border: 1px solid rgba(239, 68, 68, 0.3);\n          border-radius: 3px;\n          color: #ff6b6b;\n          padding: 2px 6px;\n          font-size: 10px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .reset-button:hover {\n          background: rgba(239, 68, 68, 0.3);\n          border-color: rgba(239, 68, 68, 0.4);\n          color: #ff8787;\n        }\n\n        .detected-info {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 10px;\n          font-weight: 400;\n          white-space: nowrap;\n          padding-left: 6px;\n          border-left: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .detected-value {\n          color: rgba(255, 255, 255, 0.8);\n          font-weight: 500;\n        }\n      </style>\n\n      <div class="country-selector">\n        <span class="country-label">🌍</span>\n        \n        <div class="select-wrapper">\n          <select class="country-select" id="country-select">\n            ${this.countries.map(t=>`\n              <option value="${t.code}" ${t.code===i?"selected":""}>\n                ${t.name.length>15?t.name.substring(0,15)+"...":t.name}\n              </option>\n            `).join("")}\n          </select>\n          <svg class="select-arrow" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>\n          </svg>\n        </div>\n\n        <div class="loading-indicator" id="loading-indicator"></div>\n\n        ${n!==i?`\n          <button class="reset-button" id="reset-button" title="Reset to detected country: ${n}">\n            Reset\n          </button>\n        `:""}\n\n        ${n?`\n          <div class="detected-info">\n            Detected: <span class="detected-value">${n}</span>\n          </div>\n        `:""}\n      </div>\n    `,this.hasInitiallyRendered||(this.hasInitiallyRendered=!0)}setupEventListeners(){this.shadowRoot&&!this.listenersAttached&&(this.shadowRoot.addEventListener("change",t=>m(this,null,function*(){const e=t.target;if(e&&"country-select"===e.id){const t=e.value;if(this.isChanging)return void this.logger.warn("Country change already in progress");this.logger.debug(`Country select changed to: ${t}`),yield this.handleCountryChange(t)}})),this.shadowRoot.addEventListener("click",t=>m(this,null,function*(){const e=t.target;if(e&&"reset-button"===e.id){const t=vt.getState().detectedCountry||"US";this.logger.debug("Resetting to detected country:",t),yield this.handleCountryChange(t,!0)}})),document.addEventListener("next:country-changed",()=>{this.logger.debug("External country change detected, re-rendering selector"),this.render()}),this.listenersAttached=!0,this.logger.debug("Event listeners attached to country selector"))}handleCountryChange(t,e=!1){return m(this,null,function*(){var i,n;this.isChanging=!0;const s=null==(i=this.shadowRoot)?void 0:i.getElementById("country-select"),a=null==(n=this.shadowRoot)?void 0:n.getElementById("loading-indicator");s&&(s.disabled=!0),a&&a.classList.add("active");try{this.logger.info(`Changing country to ${t}`);const i=vt.getState(),n=lt.getState(),s=Et.getState(),a=Wt.getInstance(),r=sessionStorage.getItem("next_selected_country")||i.detectedCountry||"US";e?(sessionStorage.removeItem("next_selected_country"),this.logger.info("Cleared selected country override, using detected country")):(sessionStorage.setItem("next_selected_country",t),this.logger.info(`Saved selected country to session: ${t}`));const o=yield a.getCountryConfig(t),d=yield a.getCountryStates(t);i.updateConfig({locationData:{detectedCountryCode:t,detectedCountryConfig:o,detectedStates:d.states,detectedStateCode:"",detectedCity:"",countries:this.countries}}),o.currencyCode&&o.currencyCode!==i.selectedCurrency&&(this.logger.info(`Country currency is ${o.currencyCode}, updating...`),i.updateConfig({selectedCurrency:o.currencyCode}),sessionStorage.setItem("next_selected_currency",o.currencyCode),yield n.loadCampaign(i.apiKey),yield s.refreshItemPrices(),document.dispatchEvent(new CustomEvent("next:currency-changed",{detail:{from:i.selectedCurrency,to:o.currencyCode,source:"country-selector"}}))),this.logger.info(`Country changed successfully to ${t}`),document.dispatchEvent(new CustomEvent("next:country-changed",{detail:{from:r,to:t,currency:o.currencyCode}})),document.dispatchEvent(new CustomEvent("debug:update-content")),this.showSuccessFeedback(t),this.render()}catch(r){this.logger.error("Failed to change country:",r),this.showErrorFeedback();const t=sessionStorage.getItem("next_selected_country")||vt.getState().detectedCountry||"US";s&&(s.value=t)}finally{this.isChanging=!1,s&&(s.disabled=!1),a&&a.classList.remove("active")}})}showSuccessFeedback(t){var e;const i=null==(e=this.shadowRoot)?void 0:e.querySelector(".country-selector");i&&(i.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",setTimeout(()=>{i.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}showErrorFeedback(){var t;const e=null==(t=this.shadowRoot)?void 0:t.querySelector(".country-selector");e&&(e.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",setTimeout(()=>{e.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}destroy(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.container&&(this.container.remove(),this.container=null,this.shadowRoot=null)}hide(){this.container&&(this.container.style.display="none")}show(){this.container&&(this.container.style.display="block")}}const ma=pa.getInstance();class fa{constructor(){this.container=null,this.shadowRoot=null,this.logger=new Q("LocaleSelector"),this.isChanging=!1,this.listenersAttached=!1,this.renderDebounceTimer=null,this.hasInitiallyRendered=!1,this.locales=[{code:"en-US",name:"English (US)",flag:"🇺🇸"},{code:"en-GB",name:"English (UK)",flag:"🇬🇧"},{code:"en-CA",name:"English (CA)",flag:"🇨🇦"},{code:"en-AU",name:"English (AU)",flag:"🇦🇺"},{code:"pt-BR",name:"Português (BR)",flag:"🇧🇷"},{code:"es-ES",name:"Español (ES)",flag:"🇪🇸"},{code:"es-MX",name:"Español (MX)",flag:"🇲🇽"},{code:"fr-FR",name:"Français",flag:"🇫🇷"},{code:"de-DE",name:"Deutsch",flag:"🇩🇪"},{code:"it-IT",name:"Italiano",flag:"🇮🇹"},{code:"ja-JP",name:"日本語",flag:"🇯🇵"},{code:"zh-CN",name:"中文",flag:"🇨🇳"},{code:"ko-KR",name:"한국어",flag:"🇰🇷"},{code:"ru-RU",name:"Русский",flag:"🇷🇺"},{code:"ar-SA",name:"العربية",flag:"🇸🇦"},{code:"hi-IN",name:"हिन्दी",flag:"🇮🇳"},{code:"nl-NL",name:"Nederlands",flag:"🇳🇱"},{code:"sv-SE",name:"Svenska",flag:"🇸🇪"},{code:"pl-PL",name:"Polski",flag:"🇵🇱"},{code:"tr-TR",name:"Türkçe",flag:"🇹🇷"}]}static getInstance(){return fa.instance||(fa.instance=new fa),fa.instance}initialize(){this.createContainer(),this.render(),this.setupEventListeners(),this.logger.info("Locale selector initialized")}createContainer(){this.container&&this.container.remove(),this.container=document.createElement("div"),this.container.id="debug-locale-selector",this.container.style.cssText="\n      position: relative;\n      pointer-events: auto;\n    ",this.shadowRoot=this.container.attachShadow({mode:"open"}),document.body.appendChild(this.container)}getCurrentLocale(){return sessionStorage.getItem("next_selected_locale")||navigator.language||"en-US"}render(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.renderDebounceTimer=setTimeout(()=>{this.doRender()},50)}doRender(){if(!this.shadowRoot)return;const t=this.getCurrentLocale(),e=navigator.language||"en-US";this.container&&(this.container.style.display="block"),this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        }\n\n        .locale-selector {\n          background: linear-gradient(135deg, #222 0%, #1a1a1a 100%);\n          backdrop-filter: blur(10px);\n          border: 1px solid #333;\n          border-radius: 4px;\n          padding: 4px 8px;\n          display: inline-flex;\n          align-items: center;\n          gap: 6px;\n          font-size: 11px;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n          transition: all 0.2s ease;\n        }\n\n        .locale-selector:hover {\n          background: linear-gradient(135deg, #2a2a2a 0%, #222 100%);\n          border-color: #444;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);\n        }\n\n        .locale-label {\n          color: rgba(255, 255, 255, 0.9);\n          font-size: 11px;\n          font-weight: 500;\n          white-space: nowrap;\n        }\n\n        .locale-select {\n          appearance: none;\n          background: #2a2a2a;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 3px;\n          padding: 2px 20px 2px 6px;\n          font-size: 11px;\n          font-weight: 500;\n          color: rgba(255, 255, 255, 0.9);\n          cursor: pointer;\n          min-width: 100px;\n          max-width: 140px;\n        }\n\n        .locale-select option {\n          background: #2a2a2a;\n          color: rgba(255, 255, 255, 0.9);\n          padding: 4px;\n        }\n\n        .locale-select:hover {\n          background: #333;\n          border-color: rgba(255, 255, 255, 0.3);\n        }\n\n        .locale-select:focus {\n          outline: none;\n          border-color: #4299e1;\n          background: #333;\n        }\n\n        .locale-select:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n\n        .select-wrapper {\n          position: relative;\n          display: flex;\n          align-items: center;\n        }\n\n        .select-arrow {\n          position: absolute;\n          right: 4px;\n          top: 50%;\n          transform: translateY(-50%);\n          pointer-events: none;\n          color: rgba(255, 255, 255, 0.6);\n          width: 10px;\n          height: 10px;\n        }\n\n        .loading-indicator {\n          display: none;\n          width: 10px;\n          height: 10px;\n          border: 1px solid #cbd5e0;\n          border-top-color: #4299e1;\n          border-radius: 50%;\n          animation: spin 0.8s linear infinite;\n        }\n\n        .loading-indicator.active {\n          display: inline-block;\n        }\n\n        @keyframes spin {\n          to { transform: rotate(360deg); }\n        }\n\n        .reset-button {\n          background: rgba(239, 68, 68, 0.2);\n          border: 1px solid rgba(239, 68, 68, 0.3);\n          border-radius: 3px;\n          color: #ff6b6b;\n          padding: 2px 6px;\n          font-size: 10px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .reset-button:hover {\n          background: rgba(239, 68, 68, 0.3);\n          border-color: rgba(239, 68, 68, 0.4);\n          color: #ff8787;\n        }\n\n        .detected-info {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 10px;\n          font-weight: 400;\n          white-space: nowrap;\n          padding-left: 6px;\n          border-left: 1px solid rgba(255, 255, 255, 0.2);\n        }\n\n        .detected-value {\n          color: rgba(255, 255, 255, 0.8);\n          font-weight: 500;\n        }\n      </style>\n\n      <div class="locale-selector">\n        <span class="locale-label">🌐</span>\n        \n        <div class="select-wrapper">\n          <select class="locale-select" id="locale-select">\n            ${this.locales.map(e=>`\n              <option value="${e.code}" ${e.code===t?"selected":""}>\n                ${e.flag} ${e.code}\n              </option>\n            `).join("")}\n          </select>\n          <svg class="select-arrow" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"/>\n          </svg>\n        </div>\n\n        <div class="loading-indicator" id="loading-indicator"></div>\n\n        ${e!==t?`\n          <button class="reset-button" id="reset-button" title="Reset to browser locale: ${e}">\n            Reset\n          </button>\n        `:""}\n\n        <div class="detected-info">\n          Browser: <span class="detected-value">${e}</span>\n        </div>\n      </div>\n    `,this.hasInitiallyRendered||(this.hasInitiallyRendered=!0)}setupEventListeners(){this.shadowRoot&&!this.listenersAttached&&(this.shadowRoot.addEventListener("change",t=>m(this,null,function*(){const e=t.target;if(e&&"locale-select"===e.id){const t=e.value;if(this.isChanging)return void this.logger.warn("Locale change already in progress");this.logger.debug(`Locale select changed to: ${t}`),yield this.handleLocaleChange(t)}})),this.shadowRoot.addEventListener("click",t=>m(this,null,function*(){const e=t.target;if(e&&"reset-button"===e.id){const t=navigator.language||"en-US";this.logger.debug("Resetting to browser locale:",t),yield this.handleLocaleChange(t,!0)}})),document.addEventListener("next:locale-changed",()=>{this.logger.debug("External locale change detected, re-rendering selector"),this.render()}),this.listenersAttached=!0,this.logger.debug("Event listeners attached to locale selector"))}handleLocaleChange(t,e=!1){return m(this,null,function*(){var i,n;this.isChanging=!0;const s=null==(i=this.shadowRoot)?void 0:i.getElementById("locale-select"),a=null==(n=this.shadowRoot)?void 0:n.getElementById("loading-indicator");s&&(s.disabled=!0),a&&a.classList.add("active");try{this.logger.info(`Changing locale to ${t}`);const i=this.getCurrentLocale();e?(sessionStorage.removeItem("next_selected_locale"),this.logger.info("Cleared selected locale override, using browser locale")):(sessionStorage.setItem("next_selected_locale",t),this.logger.info(`Saved selected locale to session: ${t}`));const{CurrencyFormatter:n}=yield Promise.resolve().then(()=>St);n.clearCache();const{useCartStore:s}=yield Promise.resolve().then(()=>It),a=s.getState();yield a.calculateTotals(),document.dispatchEvent(new CustomEvent("next:locale-changed",{detail:{from:i,to:t,source:"locale-selector"}})),document.dispatchEvent(new CustomEvent("debug:update-content")),document.dispatchEvent(new CustomEvent("next:display-refresh")),this.refreshAllCurrencyDisplays(),this.showSuccessFeedback(t),this.render(),this.logFormatExamples(t)}catch(r){this.logger.error("Failed to change locale:",r),this.showErrorFeedback();const t=this.getCurrentLocale();s&&(s.value=t)}finally{this.isChanging=!1,s&&(s.disabled=!1),a&&a.classList.remove("active")}})}refreshAllCurrencyDisplays(){const t=document.querySelectorAll("[data-next-display]");t.forEach(t=>{const e=t.getAttribute("data-next-display");((null==e?void 0:e.includes("price"))||(null==e?void 0:e.includes("total"))||(null==e?void 0:e.includes("subtotal"))||(null==e?void 0:e.includes("cost"))||(null==e?void 0:e.includes("amount")))&&t.dispatchEvent(new CustomEvent("next:refresh-display",{bubbles:!0}))});const e=document.querySelectorAll('.next-price, .next-total, .next-subtotal, .next-amount, [class*="price"], [class*="total"], [class*="amount"]');e.forEach(t=>{const e=t.textContent||"";(/[$£€¥₹₽¢]/u.test(e)||/\d+[.,]\d{2}/.test(e))&&t.dispatchEvent(new CustomEvent("next:refresh-display",{bubbles:!0}))}),this.logger.debug(`Refreshed ${t.length+e.length} potential currency displays`)}logFormatExamples(t){new Intl.NumberFormat(t,{style:"currency",currency:"USD",currencyDisplay:"narrowSymbol"}),new Intl.DateTimeFormat(t,{year:"numeric",month:"long",day:"numeric"}),new Intl.NumberFormat(t)}showSuccessFeedback(t){var e;const i=null==(e=this.shadowRoot)?void 0:e.querySelector(".locale-selector");i&&(i.style.background="linear-gradient(135deg, #10b981 0%, #059669 100%)",setTimeout(()=>{i.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}showErrorFeedback(){var t;const e=null==(t=this.shadowRoot)?void 0:t.querySelector(".locale-selector");e&&(e.style.background="linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",setTimeout(()=>{e.style.background="linear-gradient(135deg, #222 0%, #1a1a1a 100%)"},1e3))}destroy(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.container&&(this.container.remove(),this.container=null,this.shadowRoot=null)}hide(){this.container&&(this.container.style.display="none")}show(){this.container&&(this.container.style.display="block")}}const ga=fa.getInstance();class va{constructor(){this.container=null,this.setupPanelListener()}static getInstance(){return va.instance||(va.instance=new va),va.instance}initialize(){this.createContainer(),ha.initialize(),ma.initialize(),ga.initialize(),this.moveSelectorsToContainer()}createContainer(){this.container&&this.container.remove(),this.container=document.createElement("div"),this.container.id="debug-selectors-container",this.container.style.cssText="\n      position: fixed;\n      bottom: 70px;\n      right: 20px;\n      display: flex;\n      gap: 10px;\n      align-items: center;\n      z-index: 999998;\n      pointer-events: auto;\n      transition: bottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    ",document.body.appendChild(this.container)}moveSelectorsToContainer(){this.container&&setTimeout(()=>{const t=document.getElementById("debug-currency-selector"),e=document.getElementById("debug-country-selector"),i=document.getElementById("debug-locale-selector");t&&(t.style.position="relative",t.style.bottom="auto",t.style.left="auto",t.style.transform="none",this.container.appendChild(t)),e&&(e.style.position="relative",e.style.bottom="auto",e.style.left="auto",e.style.transform="none",this.container.appendChild(e)),i&&(i.style.position="relative",i.style.bottom="auto",i.style.left="auto",i.style.transform="none",this.container.appendChild(i))},100)}setupPanelListener(){setTimeout(()=>{const t=document.getElementById("next-debug-overlay-host");if(t&&t.shadowRoot){const e=t.shadowRoot.querySelector(".enhanced-debug-overlay");if(e){new MutationObserver(t=>{t.forEach(t=>{if("attributes"===t.type&&"class"===t.attributeName){const e=t.target;if(e.classList.contains("enhanced-debug-overlay")){const t=e.classList.contains("expanded");this.updatePosition(t)}}})}).observe(e,{attributes:!0,attributeFilter:["class"]});const t=e.classList.contains("expanded");this.updatePosition(t)}}},500),document.addEventListener("debug:panel-toggled",t=>{var e;this.updatePosition((null==(e=t.detail)?void 0:e.isExpanded)||!1)})}updatePosition(t){this.container&&(this.container.style.bottom=t?"calc(max(40vh, 450px) + 10px)":"70px")}destroy(){this.container&&(this.container.remove(),this.container=null)}}const $a=va.getInstance();class ya{constructor(){this.container=null,this.shadowRoot=null,this.logger=new Q("UpsellSelector"),this.eventBus=st.getInstance(),this.state={mode:"none",quantity:1},this.isUpsellPage=!1,this.renderDebounceTimer=null}static getInstance(){return ya.instance||(ya.instance=new ya),ya.instance}initialize(){this.checkIfUpsellPage(),this.isUpsellPage?(this.createContainer(),this.setupEventListeners(),this.scanExistingUpsells(),this.logger.info("UpsellSelector initialized")):this.logger.debug("Not an upsell page, skipping initialization")}createContainer(){this.container&&this.container.remove(),this.container=document.createElement("div"),this.container.id="debug-upsell-display",this.container.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      z-index: 999998;\n      pointer-events: auto;\n    ",this.shadowRoot=this.container.attachShadow({mode:"open"}),document.body.appendChild(this.container)}scanExistingUpsells(){const t=document.querySelectorAll('[data-next-upsell="offer"], [data-next-upsell-selector]');if(this.logger.debug("Scanning for existing upsell elements:",t.length),0===t.length)return void this.logger.debug("No upsell elements found");const e=t[0];let i=e.getAttribute("data-next-selector-id"),n=e.getAttribute("data-next-package-id"),s=n?parseInt(n,10):void 0;if(!s){const t=e.querySelector('[data-next-upsell-option][data-next-selected="true"]');if(t){const e=t.getAttribute("data-next-package-id");s=e?parseInt(e,10):void 0,this.logger.debug("Found selected option:",{packageId:s})}if(!s){const t=e.querySelector("[data-next-upsell-option][data-next-package-id]");if(t){const e=t.getAttribute("data-next-package-id");s=e?parseInt(e,10):void 0,this.logger.debug("Found first available option:",{packageId:s})}}}if(!i){const t=e.querySelector("[data-next-selector-id]");t&&(i=t.getAttribute("data-next-selector-id")||null,this.logger.debug("Found nested selector:",{selectorId:i}))}this.state={packageId:s||void 0,selectorId:i||void 0,quantity:1,mode:i?"selector":s?"direct":"none"},this.render(),this.logger.debug("Initialized state from existing upsell element:",{mode:this.state.mode,packageId:this.state.packageId,selectorId:this.state.selectorId})}checkIfUpsellPage(){const t=document.querySelector('meta[name="next-page-type"]');this.isUpsellPage="upsell"===(null==t?void 0:t.getAttribute("content"))}setupEventListeners(){this.eventBus.on("upsell:initialized",t=>{const{packageId:e,element:i}=t;if(this.logger.debug("Upsell initialized:",t),!i)return;const n=i.getAttribute("data-next-selector-id");this.state={packageId:e||void 0,selectorId:n||void 0,quantity:1,mode:n?"selector":"direct"},this.render()}),this.eventBus.on("upsell:option-selected",t=>{const{packageId:e,selectorId:i}=t;this.logger.debug("Upsell option selected:",t),this.state.packageId=e,i&&(this.state.selectorId=i),this.render()}),this.eventBus.on("upsell:quantity-changed",t=>{const{quantity:e,selectorId:i,packageId:n}=t;this.logger.debug("Upsell quantity changed:",t),this.state.quantity=e,this.render()})}getPackageName(t){const e=lt.getState().getPackage(t);return(null==e?void 0:e.name)||`Package ${t}`}render(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.renderDebounceTimer=setTimeout(()=>{this.doRender()},50)}doRender(){if(!this.shadowRoot)return;if("none"===this.state.mode||!this.isUpsellPage)return void(this.container&&(this.container.style.display="none"));this.container&&(this.container.style.display="block");const t=this.state.packageId?this.getPackageName(this.state.packageId):"None",e="selector"===this.state.mode?"🎯 Selector":"➡️ Direct";this.shadowRoot.innerHTML=`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        }\n\n        .upsell-badge {\n          background: linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%);\n          backdrop-filter: blur(10px);\n          border: 2px solid rgba(99, 102, 241, 0.4);\n          border-radius: 8px;\n          padding: 14px 18px;\n          display: inline-flex;\n          flex-direction: column;\n          gap: 10px;\n          font-size: 14px;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(99, 102, 241, 0.1);\n          transition: all 0.2s ease;\n          min-width: 320px;\n        }\n\n        .upsell-badge:hover {\n          background: linear-gradient(135deg, rgba(51, 65, 85, 0.95) 0%, rgba(30, 41, 59, 0.95) 100%);\n          border-color: rgba(99, 102, 241, 0.6);\n          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5), 0 0 0 1px rgba(99, 102, 241, 0.2);\n          transform: translateY(-1px);\n        }\n\n        .badge-header {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding-bottom: 10px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .debug-label {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 11px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.8px;\n          flex: 1;\n        }\n\n        .mode-badge {\n          background: rgba(99, 102, 241, 0.15);\n          border: 1px solid rgba(99, 102, 241, 0.3);\n          color: #a5b4fc;\n          padding: 4px 10px;\n          border-radius: 4px;\n          font-size: 11px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .badge-content {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n        }\n\n        .info-row {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n\n        .info-label {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 11px;\n          font-weight: 500;\n          min-width: 50px;\n        }\n\n        .info-value {\n          color: rgba(255, 255, 255, 0.95);\n          font-size: 14px;\n          font-weight: 600;\n          flex: 1;\n        }\n\n        .package-id {\n          background: rgba(99, 102, 241, 0.2);\n          border: 1px solid rgba(99, 102, 241, 0.3);\n          color: #c7d2fe;\n          padding: 4px 10px;\n          border-radius: 4px;\n          font-size: 13px;\n          font-weight: 700;\n          font-family: 'Courier New', monospace;\n        }\n\n        .package-name {\n          color: rgba(255, 255, 255, 0.9);\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n        }\n\n        .quantity-badge {\n          background: rgba(34, 197, 94, 0.15);\n          border: 1px solid rgba(34, 197, 94, 0.3);\n          color: #86efac;\n          padding: 4px 12px;\n          border-radius: 4px;\n          font-size: 13px;\n          font-weight: 700;\n          font-family: 'Courier New', monospace;\n        }\n\n        .selector-id-value {\n          color: rgba(255, 255, 255, 0.7);\n          font-size: 12px;\n          font-family: 'Courier New', monospace;\n          background: rgba(255, 255, 255, 0.05);\n          padding: 4px 10px;\n          border-radius: 4px;\n        }\n\n        .status-indicator {\n          width: 10px;\n          height: 10px;\n          border-radius: 50%;\n          margin-left: auto;\n        }\n\n        .status-indicator.selected {\n          background: #22c55e;\n          box-shadow: 0 0 10px rgba(34, 197, 94, 0.6);\n        }\n\n        .status-indicator.unselected {\n          background: rgba(255, 255, 255, 0.2);\n        }\n      </style>\n\n      <div class="upsell-badge">\n        <div class="badge-header">\n          <span class="debug-label">🔍 Debug Info</span>\n          <span class="mode-badge">${e}</span>\n        </div>\n\n        <div class="badge-content">\n          ${this.state.packageId?`\n            <div class="info-row">\n              <span class="info-label">Package:</span>\n              <span class="package-id">#${this.state.packageId}</span>\n              <span class="status-indicator selected"></span>\n            </div>\n            <div class="info-row">\n              <span class="info-label">Name:</span>\n              <span class="info-value package-name" title="${t}">${t}</span>\n            </div>\n          `:'\n            <div class="info-row">\n              <span class="info-label">Status:</span>\n              <span class="info-value">No selection</span>\n              <span class="status-indicator unselected"></span>\n            </div>\n          '}\n\n          ${this.state.quantity>1?`\n            <div class="info-row">\n              <span class="info-label">Qty:</span>\n              <span class="quantity-badge">×${this.state.quantity}</span>\n            </div>\n          `:""}\n\n          ${this.state.selectorId?`\n            <div class="info-row">\n              <span class="info-label">ID:</span>\n              <span class="selector-id-value">${this.state.selectorId}</span>\n            </div>\n          `:""}\n        </div>\n      </div>\n    `}destroy(){this.renderDebounceTimer&&clearTimeout(this.renderDebounceTimer),this.container&&(this.container.remove(),this.container=null,this.shadowRoot=null)}hide(){this.container&&(this.container.style.display="none")}show(){this.container&&this.isUpsellPage&&(this.container.style.display="block")}}const ba=ya.getInstance();class xa{static generateRawDataContent(t){const e=JSON.stringify(t,null,2),i=`copy-btn-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;return`\n      <style>\n        .raw-data-wrapper {\n          position: relative;\n          height: auto;\n          background: #0f0f0f;\n        }\n        .copy-button-fixed {\n          position: sticky;\n          top: 12px;\n          float: right;\n          margin: 12px;\n          background: rgba(60, 125, 255, 0.9);\n          border: none;\n          color: white;\n          padding: 8px 16px;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 12px;\n          font-weight: 600;\n          transition: all 0.2s ease;\n          z-index: 100;\n          display: inline-flex;\n          align-items: center;\n          gap: 6px;\n          backdrop-filter: blur(10px);\n        }\n        .copy-button-fixed:hover {\n          background: rgba(60, 125, 255, 1);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(60, 125, 255, 0.3);\n        }\n        .copy-button-fixed:active {\n          transform: translateY(0);\n        }\n        .copy-button-fixed.copied {\n          background: rgba(76, 175, 80, 0.9);\n        }\n        .copy-button-fixed.copied:hover {\n          background: rgba(76, 175, 80, 1);\n        }\n        .json-content {\n          padding: 20px;\n          padding-top: 1rem;\n          font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;\n          font-size: 12px;\n          line-height: 1.6;\n          color: #e6e6e6;\n          white-space: pre;\n          word-break: break-all;\n        }\n      </style>\n      <div class="raw-data-wrapper">\n        <button id="${i}" class="copy-button-fixed" onclick="\n          (function() {\n            const btn = document.getElementById('${i}');\n            const dataToCopy = ${JSON.stringify(e).replace(/"/g,"&quot;").replace(/'/g,"\\'")};\n            navigator.clipboard.writeText(dataToCopy).then(() => {\n              btn.innerHTML = '<svg width=\\'14\\' height=\\'14\\' viewBox=\\'0 0 24 24\\' fill=\\'currentColor\\'><path d=\\'M9,5H7A2,2 0 0,0 5,7V21A2,2 0 0,0 7,23H17A2,2 0 0,0 19,21V7A2,2 0 0,0 17,5H15M12,2L14,5H10L12,2M10,18L7,15L8.41,13.59L10,15.17L15.59,9.59L17,11L10,18Z\\'/></svg> Copied!';\n              btn.classList.add('copied');\n              setTimeout(() => {\n                btn.innerHTML = '<svg width=\\'14\\' height=\\'14\\' viewBox=\\'0 0 24 24\\' fill=\\'currentColor\\'><path d=\\'M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\\'/></svg> Copy';\n                btn.classList.remove('copied');\n              }, 2000);\n            }).catch(err => {\n              console.error('Failed to copy:', err);\n            });\n          })();\n        ">\n          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">\n            <path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/>\n          </svg>\n          Copy\n        </button>\n        <div class="json-content">${e}</div>\n      </div>\n    `}}class wa{constructor(){this.id="cart",this.title="Cart State",this.icon="🛒"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"items",label:"Items",icon:"📦",getContent:()=>this.getItemsContent()},{id:"raw",label:"Raw Data",icon:"🔧",getContent:()=>this.getRawDataContent()}]}getOverviewContent(){const t=Et.getState();return`\n      <div class="enhanced-panel">\n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">📦</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.items.length}</div>\n              <div class="metric-label">Unique Items</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🔢</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.totalQuantity}</div>\n              <div class="metric-label">Total Quantity</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">💰</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.totals.subtotal.formatted}</div>\n              <div class="metric-label">Subtotal</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🚚</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.totals.shipping.formatted}</div>\n              <div class="metric-label">Shipping</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">📊</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.totals.tax.formatted}</div>\n              <div class="metric-label">Tax</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">💳</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.totals.total.formatted}</div>\n              <div class="metric-label">Total</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getItemsContent(){const t=Et.getState();return`\n      <div class="enhanced-panel">\n        <div class="section">\n          ${0===t.items.length?'\n            <div class="empty-state">\n              <div class="empty-icon">🛒</div>\n              <div class="empty-text">Cart is empty</div>\n              <button class="empty-action" onclick="window.nextDebug.addTestItems()">Add Test Items</button>\n            </div>\n          ':`\n            <div class="cart-items-list">\n              ${t.items.map(t=>`\n                <div class="cart-item-card">\n                  <div class="item-info">\n                    <div class="item-title">${t.title}</div>\n                    <div class="item-details">\n                      Package ID: ${t.packageId} • Price: $${t.price}\n                    </div>\n                  </div>\n                  <div class="item-quantity">\n                    <button onclick="window.nextDebug.updateQuantity(${t.packageId}, ${t.quantity-1})" \n                            class="qty-btn">-</button>\n                    <span class="qty-value">${t.quantity}</span>\n                    <button onclick="window.nextDebug.updateQuantity(${t.packageId}, ${t.quantity+1})" \n                            class="qty-btn">+</button>\n                  </div>\n                  <div class="item-total">$${(t.price*t.quantity).toFixed(2)}</div>\n                  <button onclick="window.nextDebug.removeItem(${t.packageId})" \n                          class="remove-btn">×</button>\n                </div>\n              `).join("")}\n            </div>\n          `}\n        </div>\n      </div>\n    `}getRawDataContent(){const t=Et.getState();return xa.generateRawDataContent(t)}getActions(){return[{label:"Clear Cart",action:()=>Et.getState().clear(),variant:"danger"},{label:"Add Test Items",action:this.addTestItems,variant:"secondary"},{label:"Recalculate",action:()=>Et.getState().calculateTotals(),variant:"primary"},{label:"Export Cart",action:this.exportCart,variant:"secondary"}]}addTestItems(){const t=Et.getState();[{packageId:999,quantity:1,price:19.99,title:"Debug Test Item 1",isUpsell:!1},{packageId:998,quantity:2,price:29.99,title:"Debug Test Item 2",isUpsell:!1},{packageId:997,quantity:1,price:9.99,title:"Debug Test Item 3",isUpsell:!1}].forEach(e=>t.addItem(e))}exportCart(){const t=Et.getState(),e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`cart-state-${(new Date).toISOString()}.json`,s.click(),URL.revokeObjectURL(n)}}class _a{constructor(){this.id="order",this.title="Order State",this.icon="📦"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"lines",label:"Order Lines",icon:"📋",getContent:()=>this.getOrderLinesContent()},{id:"addresses",label:"Addresses",icon:"📍",getContent:()=>this.getAddressesContent()},{id:"raw",label:"Raw Data",icon:"🔧",getContent:()=>this.getRawDataContent()}]}getOverviewContent(){var t,e;const i=Dt.getState(),n=i.order;if(!n)return this.getEmptyState();const s=i.getOrderTotal(),a=i.canAddUpsells(),r=n.currency||"USD",o=this.getCurrencySymbol(r);return`\n      <div class="enhanced-panel">\n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">🔖</div>\n            <div class="metric-content">\n              <div class="metric-value">${n.number||"N/A"}</div>\n              <div class="metric-label">Order Number</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🆔</div>\n            <div class="metric-content">\n              <div class="metric-value" style="font-size: 0.9em; word-break: break-all;">${i.refId||"N/A"}</div>\n              <div class="metric-label">Reference ID</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">📦</div>\n            <div class="metric-content">\n              <div class="metric-value">${(null==(t=n.lines)?void 0:t.length)||0}</div>\n              <div class="metric-label">Total Lines</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🎯</div>\n            <div class="metric-content">\n              <div class="metric-value">${(null==(e=n.lines)?void 0:e.filter(t=>t.is_upsell).length)||0}</div>\n              <div class="metric-label">Upsells</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">💰</div>\n            <div class="metric-content">\n              <div class="metric-value">${o}${s.toFixed(2)}</div>\n              <div class="metric-label">Order Total</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">${a?"✅":"❌"}</div>\n            <div class="metric-content">\n              <div class="metric-value">${a?"Yes":"No"}</div>\n              <div class="metric-label">Can Add Upsells</div>\n            </div>\n          </div>\n        </div>\n        \n        <div class="section">\n          <h4>Order Details</h4>\n          <div class="info-grid">\n            <div class="info-item">\n              <span class="info-label">Status:</span>\n              <span class="info-value">Active</span>\n            </div>\n            <div class="info-item">\n              <span class="info-label">Currency:</span>\n              <span class="info-value">${n.currency||"USD"}</span>\n            </div>\n            <div class="info-item">\n              <span class="info-label">Loaded At:</span>\n              <span class="info-value">${i.orderLoadedAt?new Date(i.orderLoadedAt).toLocaleString():"N/A"}</span>\n            </div>\n            <div class="info-item">\n              <span class="info-label">Shipping Method:</span>\n              <span class="info-value">${n.shipping_method||"N/A"}</span>\n            </div>\n            <div class="info-item">\n              <span class="info-label">Order URL:</span>\n              <span class="info-value" style="font-size: 0.8em; word-break: break-all;">${n.order_status_url?"Available":"N/A"}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="section">\n          <h4>Totals Breakdown</h4>\n          <div class="totals-breakdown">\n            <div class="total-item">\n              <span>Subtotal (excl. tax):</span>\n              <span>${o}${parseFloat(n.total_excl_tax||"0").toFixed(2)}</span>\n            </div>\n            <div class="total-item">\n              <span>Shipping:</span>\n              <span>${o}${parseFloat(n.shipping_excl_tax||"0").toFixed(2)}</span>\n            </div>\n            <div class="total-item">\n              <span>Tax:</span>\n              <span>${o}${parseFloat(n.total_tax||"0").toFixed(2)}</span>\n            </div>\n            <div class="total-item total-final">\n              <span>Total (incl. tax):</span>\n              <span>${o}${parseFloat(n.total_incl_tax||"0").toFixed(2)}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getOrderLinesContent(){const t=Dt.getState().order;if(!t||!t.lines||0===t.lines.length)return this.getEmptyState("No order lines available");const e=t.currency||"USD",i=this.getCurrencySymbol(e);return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <style>\n            .order-table {\n              width: 100%;\n              border-collapse: collapse;\n              font-size: 0.9em;\n            }\n            .order-table th {\n              background: rgba(255, 255, 255, 0.05);\n              padding: 8px;\n              text-align: left;\n              border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n              font-weight: 600;\n            }\n            .order-table td {\n              padding: 8px;\n              border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n            }\n            .order-table tr:hover {\n              background: rgba(255, 255, 255, 0.02);\n            }\n            .order-table .upsell-row {\n              background: rgba(255, 215, 0, 0.05);\n            }\n            .order-table .upsell-badge {\n              background: #ffd700;\n              color: #000;\n              padding: 2px 6px;\n              border-radius: 3px;\n              font-size: 0.75em;\n              font-weight: bold;\n              margin-left: 8px;\n              display: inline-block;\n            }\n            .order-table .text-right {\n              text-align: right;\n            }\n            .order-table .text-center {\n              text-align: center;\n            }\n          </style>\n          \n          <table class="order-table">\n            <thead>\n              <tr>\n                <th style="width: 5%">#</th>\n                <th style="width: 35%">Product</th>\n                <th style="width: 15%">SKU</th>\n                <th style="width: 10%" class="text-center">Qty</th>\n                <th style="width: 12%" class="text-right">Price</th>\n                <th style="width: 11%" class="text-right">Tax</th>\n                <th style="width: 12%" class="text-right">Total</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${t.lines.map((t,e)=>`\n                <tr ${t.is_upsell?'class="upsell-row"':""}>\n                  <td>${e+1}</td>\n                  <td>\n                    ${t.product_title||t.title||"Unknown Product"}\n                    ${t.is_upsell?'<span class="upsell-badge">POST-PURCHASE</span>':""}\n                  </td>\n                  <td>${t.product_sku||"N/A"}</td>\n                  <td class="text-center">${t.quantity||1}</td>\n                  <td class="text-right">${i}${parseFloat(t.price_excl_tax||"0").toFixed(2)}</td>\n                  <td class="text-right">${i}${(parseFloat(t.price_incl_tax||"0")-parseFloat(t.price_excl_tax||"0")).toFixed(2)}</td>\n                  <td class="text-right"><strong>${i}${parseFloat(t.price_incl_tax||"0").toFixed(2)}</strong></td>\n                </tr>\n              `).join("")}\n              \n              <tr style="border-top: 2px solid rgba(255, 255, 255, 0.1);">\n                <td colspan="6" class="text-right"><strong>Order Total:</strong></td>\n                <td class="text-right"><strong>${i}${parseFloat(t.total_incl_tax||"0").toFixed(2)} ${e}</strong></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `}getAddressesContent(){var t,e,i,n;const s=Dt.getState().order;if(!s)return this.getEmptyState();const a=(t,e)=>{const i="shipping"===e?"📦":"💳",n="shipping"===e?"Shipping Address":"Billing Address";return t?`\n        <div class="address-table-container">\n          <div class="address-header">\n            <span class="address-icon">${i}</span>\n            <h4>${n}</h4>\n          </div>\n          <table class="address-table">\n            <tbody>\n              ${t.first_name||t.last_name?`\n                <tr>\n                  <td class="field-label">Name</td>\n                  <td class="field-value">${t.first_name||""} ${t.last_name||""}</td>\n                </tr>\n              `:""}\n              ${t.line1?`\n                <tr>\n                  <td class="field-label">Address 1</td>\n                  <td class="field-value">${t.line1}</td>\n                </tr>\n              `:""}\n              ${t.line2?`\n                <tr>\n                  <td class="field-label">Address 2</td>\n                  <td class="field-value">${t.line2}</td>\n                </tr>\n              `:""}\n              ${t.line4||t.state||t.postcode?`\n                <tr>\n                  <td class="field-label">City/State/Zip</td>\n                  <td class="field-value">${t.line4||""}${t.state?`, ${t.state}`:""} ${t.postcode||""}</td>\n                </tr>\n              `:""}\n              ${t.country?`\n                <tr>\n                  <td class="field-label">Country</td>\n                  <td class="field-value">${t.country}</td>\n                </tr>\n              `:""}\n              ${t.phone_number?`\n                <tr>\n                  <td class="field-label">Phone</td>\n                  <td class="field-value">${t.phone_number}</td>\n                </tr>\n              `:""}\n            </tbody>\n          </table>\n        </div>\n      `:`\n          <div class="address-table-container">\n            <div class="address-header">\n              <span class="address-icon">${i}</span>\n              <h4>${n}</h4>\n            </div>\n            <div class="address-empty">No ${e} address provided</div>\n          </div>\n        `};return`\n      <div class="enhanced-panel">\n        <style>\n          .addresses-container {\n            display: flex;\n            gap: 20px;\n            margin-bottom: 20px;\n          }\n          .address-table-container {\n            flex: 1;\n            background: rgba(255, 255, 255, 0.02);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 8px;\n            overflow: hidden;\n          }\n          .address-header {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            padding: 12px 16px;\n            background: rgba(255, 255, 255, 0.05);\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          }\n          .address-header h4 {\n            margin: 0;\n            font-size: 1em;\n            font-weight: 600;\n          }\n          .address-icon {\n            font-size: 1.2em;\n          }\n          .address-table {\n            width: 100%;\n            border-collapse: collapse;\n          }\n          .address-table td {\n            padding: 10px 16px;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n          }\n          .address-table tr:last-child td {\n            border-bottom: none;\n          }\n          .field-label {\n            width: 40%;\n            color: rgba(255, 255, 255, 0.6);\n            font-size: 0.9em;\n          }\n          .field-value {\n            color: rgba(255, 255, 255, 0.9);\n            font-size: 0.9em;\n          }\n          .address-empty {\n            padding: 30px;\n            text-align: center;\n            color: rgba(255, 255, 255, 0.4);\n            font-style: italic;\n          }\n          .customer-info-section {\n            background: rgba(255, 255, 255, 0.02);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 8px;\n            overflow: hidden;\n          }\n          .customer-header {\n            display: flex;\n            align-items: center;\n            gap: 10px;\n            padding: 12px 16px;\n            background: rgba(255, 255, 255, 0.05);\n            border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n          }\n          .customer-header h4 {\n            margin: 0;\n            font-size: 1em;\n            font-weight: 600;\n          }\n          .customer-table {\n            width: 100%;\n            border-collapse: collapse;\n          }\n          .customer-table td {\n            padding: 10px 16px;\n            border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n          }\n          .customer-table tr:last-child td {\n            border-bottom: none;\n          }\n        </style>\n        \n        <div class="addresses-container">\n          ${a(s.shipping_address,"shipping")}\n          ${a(s.billing_address,"billing")}\n        </div>\n        \n        <div class="customer-info-section">\n          <div class="customer-header">\n            <span class="address-icon">👤</span>\n            <h4>Customer Information</h4>\n          </div>\n          <table class="customer-table">\n            <tbody>\n              <tr>\n                <td class="field-label">Name</td>\n                <td class="field-value">${(null==(t=s.user)?void 0:t.first_name)||""} ${(null==(e=s.user)?void 0:e.last_name)||""}</td>\n              </tr>\n              <tr>\n                <td class="field-label">Email</td>\n                <td class="field-value">${(null==(i=s.user)?void 0:i.email)||"N/A"}</td>\n              </tr>\n              <tr>\n                <td class="field-label">Phone</td>\n                <td class="field-value">${(null==(n=s.user)?void 0:n.phone_number)||"N/A"}</td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `}getRawDataContent(){const t=Dt.getState();return xa.generateRawDataContent({order:t.order,refId:t.refId,orderLoadedAt:t.orderLoadedAt,isLoading:t.isLoading,isProcessingUpsell:t.isProcessingUpsell,error:t.error,upsellError:t.upsellError,pendingUpsells:t.pendingUpsells,completedUpsellPages:t.completedUpsellPages,viewedUpsellPages:t.viewedUpsellPages,upsellJourney:t.upsellJourney})}getEmptyState(t="No order loaded"){return`\n      <div class="enhanced-panel">\n        <div class="empty-state">\n          <div class="empty-icon">📦</div>\n          <div class="empty-text">${t}</div>\n          <div class="empty-hint">Load an order to see details here</div>\n        </div>\n      </div>\n    `}getActions(){const t=Dt.getState(),e=[];return t.order&&(e.push({label:"Clear Order",action:()=>t.clearOrder(),variant:"danger"}),e.push({label:"Reload Order",action:()=>m(null,null,function*(){t.refId&&t.clearOrder()}),variant:"primary"}),t.pendingUpsells.length>0&&e.push({label:"Clear Pending",action:()=>t.clearPendingUpsells(),variant:"secondary"}),e.push({label:"Export Order",action:this.exportOrder,variant:"secondary"})),e.push({label:"Reset Store",action:()=>t.reset(),variant:"danger"}),e}exportOrder(){const t=Dt.getState(),e=JSON.stringify({order:t.order,refId:t.refId,upsellJourney:t.upsellJourney,completedUpsellPages:t.completedUpsellPages,exportedAt:(new Date).toISOString()},null,2),i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`order-state-${t.refId||"unknown"}-${(new Date).toISOString()}.json`,s.click(),URL.revokeObjectURL(n)}getCurrencySymbol(t){return{USD:"$",EUR:"€",GBP:"£",AUD:"$",CAD:"$",JPY:"¥",CNY:"¥",INR:"₹",KRW:"₩",BRL:"R$",MXN:"$",CHF:"Fr",SEK:"kr",NOK:"kr",DKK:"kr",PLN:"zł",RUB:"₽",ZAR:"R",NZD:"$",SGD:"$",HKD:"$",THB:"฿",PHP:"₱",IDR:"Rp",MYR:"RM",VND:"₫",TRY:"₺",AED:"د.إ",SAR:"﷼",ILS:"₪",EGP:"£",COP:"$",CLP:"$",ARS:"$",PEN:"S/"}[t]||t+" "}}const ka=["cart:updated","cart:item-added","cart:item-removed","cart:quantity-changed","cart:package-swapped","campaign:loaded","checkout:started","checkout:form-initialized","checkout:spreedly-ready","checkout:express-started","order:completed","order:redirect-missing","error:occurred","timer:expired","config:updated","coupon:applied","coupon:removed","coupon:validation-failed","selector:item-selected","selector:action-completed","selector:selection-changed","shipping:method-selected","shipping:method-changed","action:success","action:failed","upsell:accepted","upsell-selector:item-selected","upsell:quantity-changed","upsell:option-selected","message:displayed","payment:tokenized","payment:error","checkout:express-completed","checkout:express-failed","express-checkout:initialized","express-checkout:error","express-checkout:started","express-checkout:failed","express-checkout:completed","express-checkout:redirect-missing","address:autocomplete-filled","address:location-fields-shown","checkout:location-fields-shown","checkout:billing-location-fields-shown","upsell:initialized","upsell:adding","upsell:added","upsell:error","accordion:toggled","accordion:opened","accordion:closed","upsell:skipped","upsell:viewed","exit-intent:shown","exit-intent:clicked","exit-intent:dismissed","exit-intent:closed","exit-intent:action","fomo:shown"],Sa=["dataLayer.push","gtm.dom","gtm.js","gtm.load","gtm.click","gtm.linkClick","gtm.scrollDepth","gtm.timer","gtm.historyChange","gtm.video"],Ca=class t{constructor(){this.id="event-timeline",this.title="Events",this.icon="⚡",this.events=[],this.maxEvents=1e3,this.isRecording=!0,this.showInternalEvents=!1,this.updateTimeout=null,this.saveTimeout=null,this.selectedEventId=null,this.eventBus=st.getInstance();const e=new URLSearchParams(window.location.search);("true"===e.get("debugger")||"true"===e.get("debug"))&&(this.loadSavedState(),this.initializeEventWatching(),t.instance=this)}loadSavedState(){this.checkAndCleanExpiredStorage();const e=localStorage.getItem(t.SHOW_INTERNAL_KEY);null!==e&&(this.showInternalEvents="true"===e);try{const e=localStorage.getItem(t.EVENTS_STORAGE_KEY);if(e){const i=JSON.parse(e);if(Array.isArray(i)){const e=Date.now()-36e5;this.events=i.filter(t=>t.timestamp>e).slice(0,t.MAX_STORED_EVENTS).map(t=>u(c({},t),{relativeTime:this.formatRelativeTime(t.timestamp)}))}}}catch(i){localStorage.removeItem(t.EVENTS_STORAGE_KEY)}}checkAndCleanExpiredStorage(){try{const e=localStorage.getItem(t.STORAGE_EXPIRY_KEY),i=Date.now();if(!e||parseInt(e)<i){localStorage.removeItem(t.EVENTS_STORAGE_KEY);const e=i+60*t.STORAGE_EXPIRY_HOURS*60*1e3;localStorage.setItem(t.STORAGE_EXPIRY_KEY,e.toString())}}catch(e){}}saveEvents(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{try{const e=Date.now()-36e5,i=this.events.filter(t=>t.timestamp>e).slice(0,t.MAX_STORED_EVENTS);if(i.length>0){const e=i.map(t=>({id:t.id,timestamp:t.timestamp,type:t.type,name:t.name,data:"string"==typeof t.data&&t.data.length>200?t.data.substring(0,200)+"...":t.data,source:t.source,isInternal:t.isInternal})),n=this.safeStringify(e);if(n.length>5e5){const i=e.slice(0,Math.floor(e.length/2));localStorage.setItem(t.EVENTS_STORAGE_KEY,this.safeStringify(i))}else localStorage.setItem(t.EVENTS_STORAGE_KEY,n)}if(!localStorage.getItem(t.STORAGE_EXPIRY_KEY)){const e=Date.now()+60*t.STORAGE_EXPIRY_HOURS*60*1e3;localStorage.setItem(t.STORAGE_EXPIRY_KEY,e.toString())}}catch(e){e instanceof DOMException&&"QuotaExceededError"===e.name&&localStorage.removeItem(t.EVENTS_STORAGE_KEY)}},500)}safeStringify(t){const e=new WeakSet;return JSON.stringify(t,(t,i)=>{if("object"==typeof i&&null!==i){if(e.has(i))return"[Circular Reference]";e.add(i)}return i instanceof Window?"[Window]":i instanceof Document?"[Document]":i instanceof HTMLElement?"[HTMLElement]":i instanceof Node?"[Node]":i instanceof Event?{type:i.type,target:i.target?"[EventTarget]":void 0,timeStamp:i.timeStamp,bubbles:i.bubbles,cancelable:i.cancelable}:"function"==typeof i?"[Function]":i})}toggleInternalEvents(){this.showInternalEvents=!this.showInternalEvents,localStorage.setItem(t.SHOW_INTERNAL_KEY,String(this.showInternalEvents))}initializeEventWatching(){this.watchDataLayer(),this.watchInternalEvents(),this.watchDOMEvents(),this.watchPerformanceEvents()}watchDataLayer(){if("undefined"==typeof window)return;window.dataLayer=window.dataLayer||[];const t=window.dataLayer.push;window.dataLayer.push=(...e)=>(this.isRecording&&e.forEach(t=>{let e="GTM DataLayer",i=!1;t.event&&t.event.startsWith("gtm_")?(e="GTM Internal",i=!0):(t.timestamp||t.event_context)&&(e="Analytics Manager"),t.event&&ka.includes(t.event)&&(i=!0),this.addEvent({type:"dataLayer",name:t.event||"dataLayer.push",data:t,source:e,isInternal:i})}),t.apply(window.dataLayer,e)),window.dataLayer.length>0&&window.dataLayer.forEach(t=>{"object"==typeof t&&t.event&&this.addEvent({type:"dataLayer",name:t.event,data:t,source:"GTM DataLayer (Historical)",isInternal:ka.includes(t.event)})})}watchInternalEvents(){const t=(t,e)=>{t.includes("error")||t.includes("Error")||this.isRecording&&this.addEvent({type:"internal",name:t,data:e,source:"SDK EventBus",isInternal:!0})},e=this.eventBus.emit.bind(this.eventBus);this.eventBus.emit=(i,n)=>(t(i,n),e(i,n))}watchDOMEvents(){if("undefined"==typeof window)return;const e=["click","submit","change","focus","blur","scroll","resize","load"],i=["debug:event-added","debug:update-content","debug:panel-switched","ix2-animation-started","ix2-animation-stopped","ix2-animation-completed","ix2-animation-paused","ix2-animation-resumed","ix2-animation","ix2-element-hover","ix2-element-unhover","ix2-element-click","ix2-page-start","ix2-page-finish","ix2-scroll","ix2-tabs-change","ix2-slider-change","ix2-dropdown-open","ix2-dropdown-close","w-close","w-open","w-tab-active","w-tab-inactive","w-slider-move","w-dropdown-toggle"],n=EventTarget.prototype.dispatchEvent;EventTarget.prototype.dispatchEvent=function(s){if(!(!(s instanceof CustomEvent)||e.includes(s.type)||i.includes(s.type)||s.type.startsWith("debug:")||s.type.startsWith("ix2-")||s.type.startsWith("w-")||s.type.includes("error")||s.type.includes("Error"))){const e=t.getInstance();if(e&&e.isRecording)try{e.addEvent({type:"dom",name:s.type,data:s.detail||{},source:"DOM CustomEvent",isInternal:ka.includes(s.type)})}catch(a){}}return n.call(this,s)}}static getInstance(){return t.instance}watchPerformanceEvents(){if("undefined"==typeof window||!window.performance)return;const t=this,e=performance.mark;performance.mark=function(i){const n=e.call(performance,i);return t.isRecording&&t.addEvent({type:"performance",name:`mark: ${i}`,data:{markName:i},source:"Performance API",isInternal:!0}),n};const i=performance.measure;performance.measure=function(e,n,s){const a=i.call(performance,e,n,s);return t.isRecording&&t.addEvent({type:"performance",name:`measure: ${e}`,data:{measureName:e,startMark:n,endMark:s},source:"Performance API",isInternal:!0}),a}}addEvent(t){if(Sa.includes(t.name||""))return;const e=Date.now(),i={id:`event_${e}_${Math.random().toString(36).substr(2,9)}`,timestamp:t.timestamp||e,type:t.type||"internal",name:t.name||"unknown",data:t.data||{},source:t.source||"Unknown",relativeTime:this.formatRelativeTime(t.timestamp||e),isInternal:t.isInternal||!1};this.events.unshift(i),this.events.length>this.maxEvents&&(this.events=this.events.slice(0,this.maxEvents)),this.saveEvents(),"undefined"!=typeof document&&(this.updateTimeout&&clearTimeout(this.updateTimeout),this.updateTimeout=setTimeout(()=>{document.dispatchEvent(new CustomEvent("debug:event-added",{detail:{panelId:this.id,event:i}}))},100))}formatRelativeTime(t){const e=Date.now()-t,i=Math.floor(e/1e3),n=Math.floor(i/60),s=Math.floor(n/60);return s>0?`${s}h ${n%60}m ago`:n>0?`${n}m ${i%60}s ago`:i>0?`${i}s ago`:"just now"}formatTimestamp(t){const e=new Date(t);return`${e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}.${e.getMilliseconds().toString().padStart(3,"0")}`}getFilteredEvents(){return this.showInternalEvents?this.events:this.events.filter(t=>!t.isInternal)}getEventTypeColor(t){return{dataLayer:"#4CAF50",internal:"#2196F3",dom:"#FF9800",performance:"#9C27B0"}[t]||"#666"}getEventTypeBadge(t){return{dataLayer:"GTM",internal:"SDK",dom:"DOM",performance:"PERF"}[t]||t.toUpperCase()}showEventModal(t){this.selectedEventId=t,"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("debug:update-content",{detail:{panelId:this.id}}))}closeEventModal(){this.selectedEventId=null,"undefined"!=typeof document&&document.dispatchEvent(new CustomEvent("debug:update-content",{detail:{panelId:this.id}}))}getContent(){const t=this.getFilteredEvents(),e=this.selectedEventId?this.events.find(t=>t.id===this.selectedEventId):null,i=e?`\n      <div class="event-modal-overlay" onclick="window.eventTimelinePanel_closeModal()">\n        <div class="event-modal" onclick="event.stopPropagation()">\n          <div class="event-modal-header">\n            <h3 class="event-modal-title">${e.name}</h3>\n            <button class="event-modal-close" onclick="window.eventTimelinePanel_closeModal()">✕</button>\n          </div>\n          <div class="event-modal-body">\n            <div class="event-modal-meta">\n              <div class="event-modal-meta-item">\n                <span class="event-modal-meta-label">Type:</span>\n                <span class="event-type-badge" style="background: ${this.getEventTypeColor(e.type)}22; color: ${this.getEventTypeColor(e.type)};">\n                  ${this.getEventTypeBadge(e.type)}\n                </span>\n              </div>\n              <div class="event-modal-meta-item">\n                <span class="event-modal-meta-label">Source:</span>\n                <span>${e.source}</span>\n              </div>\n              <div class="event-modal-meta-item">\n                <span class="event-modal-meta-label">Time:</span>\n                <span>${this.formatTimestamp(e.timestamp)}</span>\n              </div>\n              <div class="event-modal-meta-item">\n                <span class="event-modal-meta-label">Relative:</span>\n                <span>${e.relativeTime}</span>\n              </div>\n            </div>\n            <div class="event-modal-data">\n              <div class="event-modal-data-header">\n                <span>Event Data</span>\n                <button class="event-modal-copy" onclick="window.eventTimelinePanel_copyData('${e.id}')">\n                  Copy JSON\n                </button>\n              </div>\n              <pre class="event-modal-data-content">${this.safeStringify(e.data)}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n    `:"";return"undefined"!=typeof window&&(window.eventTimelinePanel_showModal=t=>{this.showEventModal(t)},window.eventTimelinePanel_closeModal=()=>{this.closeEventModal()},window.eventTimelinePanel_copyData=t=>{const e=this.events.find(e=>e.id===t);if(e){navigator.clipboard.writeText(this.safeStringify(e.data));const t=document.querySelector(".event-modal-copy");if(t){const e=t.textContent;t.textContent="Copied!",setTimeout(()=>{t.textContent=e},2e3)}}}),`\n      <style>\n        .events-table-container {\n          height: 100%;\n          display: flex;\n          flex-direction: column;\n          background: #0f0f0f;\n        }\n        /* Modal Styles */\n        .event-modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.8);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 100000;\n          backdrop-filter: blur(4px);\n        }\n        .event-modal {\n          background: #1a1a1a;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          border-radius: 12px;\n          width: 90%;\n          max-width: 800px;\n          max-height: 80vh;\n          display: flex;\n          flex-direction: column;\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);\n        }\n        .event-modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 20px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        .event-modal-title {\n          margin: 0;\n          font-size: 1.2em;\n          color: rgba(255, 255, 255, 0.9);\n          font-weight: 600;\n        }\n        .event-modal-close {\n          background: none;\n          border: none;\n          color: rgba(255, 255, 255, 0.6);\n          font-size: 24px;\n          cursor: pointer;\n          padding: 0;\n          width: 32px;\n          height: 32px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 6px;\n          transition: all 0.2s;\n        }\n        .event-modal-close:hover {\n          background: rgba(255, 255, 255, 0.1);\n          color: rgba(255, 255, 255, 0.9);\n        }\n        .event-modal-body {\n          flex: 1;\n          overflow-y: auto;\n          padding: 20px;\n        }\n        .event-modal-meta {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 12px;\n          margin-bottom: 20px;\n        }\n        .event-modal-meta-item {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        .event-modal-meta-label {\n          color: rgba(255, 255, 255, 0.5);\n          font-size: 0.9em;\n        }\n        .event-modal-data {\n          background: rgba(0, 0, 0, 0.3);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        .event-modal-data-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 12px 16px;\n          background: rgba(255, 255, 255, 0.02);\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        .event-modal-copy {\n          background: rgba(60, 125, 255, 0.2);\n          border: 1px solid #3C7DFF;\n          color: #3C7DFF;\n          padding: 6px 12px;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 0.85em;\n          transition: all 0.2s;\n        }\n        .event-modal-copy:hover {\n          background: rgba(60, 125, 255, 0.3);\n        }\n        .event-modal-data-content {\n          padding: 16px;\n          margin: 0;\n          color: rgba(255, 255, 255, 0.8);\n          font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;\n          font-size: 0.85em;\n          line-height: 1.5;\n          overflow-x: auto;\n          max-height: 400px;\n        }\n        .events-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 12px 20px;\n          background: rgba(255, 255, 255, 0.02);\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n        }\n        .events-stats {\n          display: flex;\n          gap: 20px;\n          align-items: center;\n        }\n        .event-stat {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        .event-stat-value {\n          font-weight: 600;\n          color: #3C7DFF;\n        }\n        .event-stat-label {\n          color: rgba(255, 255, 255, 0.6);\n          font-size: 0.9em;\n        }\n        .events-controls {\n          display: flex;\n          gap: 12px;\n          align-items: center;\n        }\n        .toggle-internal {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 6px 12px;\n          background: rgba(255, 255, 255, 0.05);\n          border: 1px solid rgba(255, 255, 255, 0.1);\n          border-radius: 6px;\n          color: rgba(255, 255, 255, 0.8);\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        .toggle-internal:hover {\n          background: rgba(255, 255, 255, 0.1);\n        }\n        .toggle-internal.active {\n          background: rgba(60, 125, 255, 0.2);\n          border-color: #3C7DFF;\n        }\n        .recording-status {\n          display: flex;\n          align-items: center;\n          gap: 6px;\n          padding: 6px 12px;\n          background: ${this.isRecording?"rgba(239, 68, 68, 0.2)":"rgba(255, 255, 255, 0.05)"};\n          border: 1px solid ${this.isRecording?"#EF4444":"rgba(255, 255, 255, 0.1)"};\n          border-radius: 6px;\n          color: ${this.isRecording?"#EF4444":"rgba(255, 255, 255, 0.6)"};\n        }\n        .recording-dot {\n          width: 8px;\n          height: 8px;\n          border-radius: 50%;\n          background: currentColor;\n          ${this.isRecording?"animation: pulse 1.5s infinite;":""}\n        }\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.5; }\n        }\n        .events-table {\n          width: 100%;\n          border-collapse: collapse;\n          font-size: 0.9em;\n        }\n        .events-table th {\n          background: rgba(255, 255, 255, 0.05);\n          padding: 10px;\n          text-align: left;\n          border-bottom: 2px solid rgba(255, 255, 255, 0.1);\n          font-weight: 600;\n          color: rgba(255, 255, 255, 0.8);\n          position: sticky;\n          top: 0;\n          z-index: 10;\n        }\n        .events-table td {\n          padding: 10px;\n          border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n          color: rgba(255, 255, 255, 0.7);\n        }\n        .events-table tr:hover {\n          background: rgba(255, 255, 255, 0.02);\n        }\n        .event-type-badge {\n          display: inline-block;\n          padding: 2px 8px;\n          border-radius: 4px;\n          font-size: 0.75em;\n          font-weight: 600;\n          text-transform: uppercase;\n        }\n        .event-name {\n          font-weight: 500;\n          color: rgba(255, 255, 255, 0.9);\n        }\n        .event-source {\n          font-size: 0.85em;\n          color: rgba(255, 255, 255, 0.5);\n        }\n        .event-time {\n          font-family: 'SF Mono', monospace;\n          font-size: 0.85em;\n          color: rgba(255, 255, 255, 0.5);\n        }\n        .event-data {\n          max-width: 400px;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          font-family: 'SF Mono', monospace;\n          font-size: 0.85em;\n          color: rgba(255, 255, 255, 0.6);\n          cursor: pointer;\n        }\n        .event-row {\n          cursor: pointer;\n          transition: background 0.2s;\n        }\n        .event-row:hover {\n          background: rgba(255, 255, 255, 0.02);\n        }\n        .internal-badge {\n          display: inline-block;\n          padding: 1px 6px;\n          background: rgba(156, 39, 176, 0.2);\n          color: #9C27B0;\n          border-radius: 3px;\n          font-size: 0.7em;\n          font-weight: 600;\n          margin-left: 6px;\n        }\n        .empty-state {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          height: 300px;\n          color: rgba(255, 255, 255, 0.4);\n        }\n        .empty-state-icon {\n          font-size: 48px;\n          margin-bottom: 16px;\n        }\n        .empty-state-text {\n          font-size: 1.1em;\n        }\n      </style>\n      \n      <div class="events-table-container">\n        <div class="events-header">\n          <div class="events-stats">\n            <div class="event-stat">\n              <span class="event-stat-value">${this.events.length}</span>\n              <span class="event-stat-label">Total Events</span>\n            </div>\n            <div class="event-stat">\n              <span class="event-stat-value">${t.length}</span>\n              <span class="event-stat-label">Visible</span>\n            </div>\n          </div>\n          \n          <div class="events-controls">\n            <button class="toggle-internal ${this.showInternalEvents?"active":""}" \n                    data-action="toggle-internal-events">\n              <span>${this.showInternalEvents?"✓":""}</span>\n              Show Internal Events\n            </button>\n            \n            <div class="recording-status">\n              <span class="recording-dot"></span>\n              <span>${this.isRecording?"Recording":"Paused"}</span>\n            </div>\n          </div>\n        </div>\n        \n        ${0===t.length?'\n          <div class="empty-state">\n            <div class="empty-state-icon">📭</div>\n            <div class="empty-state-text">No events captured yet</div>\n          </div>\n        ':`\n          <div style="flex: 1; overflow-y: auto;">\n            <table class="events-table">\n              <thead>\n                <tr>\n                  <th style="width: 5%">#</th>\n                  <th style="width: 8%">Type</th>\n                  <th style="width: 25%">Event Name</th>\n                  <th style="width: 15%">Source</th>\n                  <th style="width: 12%">Time</th>\n                  <th style="width: 35%">Data</th>\n                </tr>\n              </thead>\n              <tbody>\n                ${t.slice(0,100).map((t,e)=>`\n                  <tr class="event-row" onclick="window.eventTimelinePanel_showModal('${t.id}')">\n                    <td>${e+1}</td>\n                    <td>\n                      <span class="event-type-badge" style="background: ${this.getEventTypeColor(t.type)}22; color: ${this.getEventTypeColor(t.type)};">\n                        ${this.getEventTypeBadge(t.type)}\n                      </span>\n                    </td>\n                    <td>\n                      <span class="event-name">${t.name}</span>\n                      ${t.isInternal?'<span class="internal-badge">INTERNAL</span>':""}\n                    </td>\n                    <td class="event-source">${t.source}</td>\n                    <td class="event-time">${this.formatTimestamp(t.timestamp)}</td>\n                    <td>\n                      <div class="event-data" onclick="event.stopPropagation(); window.eventTimelinePanel_showModal('${t.id}')">\n                        ${this.safeStringify(t.data)}\n                      </div>\n                    </td>\n                  </tr>\n                `).join("")}\n              </tbody>\n            </table>\n          </div>\n        `}\n      </div>\n      ${i}\n    `}getActions(){return[{label:this.isRecording?"Pause":"Resume",variant:this.isRecording?"secondary":"primary",action:()=>{this.isRecording=!this.isRecording}},{label:"Clear Events",variant:"danger",action:()=>{this.events=[],localStorage.removeItem(t.EVENTS_STORAGE_KEY)}},{label:"Export Events",variant:"primary",action:()=>{const t=JSON.stringify(this.events,null,2),e=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download=`events-${Date.now()}.json`,n.click(),URL.revokeObjectURL(i)}}]}};Ca.EVENTS_STORAGE_KEY="debug-events-history",Ca.SHOW_INTERNAL_KEY="debug-events-show-internal",Ca.MAX_STORED_EVENTS=100,Ca.STORAGE_EXPIRY_KEY="debug-events-expiry",Ca.STORAGE_EXPIRY_HOURS=2,Ca.instance=null;let Pa=Ca;class Ea{constructor(){this.id="config",this.title="Configuration",this.icon="⚙️"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"settings",label:"Settings",icon:"⚙️",getContent:()=>this.getSettingsContent()},{id:"raw",label:"Raw Data",icon:"🔧",getContent:()=>this.getRawDataContent()}]}getOverviewContent(){const t=vt.getState(),e="undefined"!=typeof window&&window.__NEXT_SDK_VERSION__?window.__NEXT_SDK_VERSION__:"1.0.0";return`\n      <div class="enhanced-panel">\n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">🔧</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.debug?"ON":"OFF"}</div>\n              <div class="metric-label">Debug Mode</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🌍</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.environment||"production"}</div>\n              <div class="metric-label">Environment</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🔑</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.apiKey?"SET":"MISSING"}</div>\n              <div class="metric-label">API Key</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">📦</div>\n            <div class="metric-content">\n              <div class="metric-value">${e}</div>\n              <div class="metric-label">SDK Version</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getSettingsContent(){var t,e,i,n,s,a,r,o,d,l;const c=vt.getState();return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="config-groups">\n            <div class="config-group">\n              <h4 class="config-group-title">Core Settings</h4>\n              <div class="config-items">\n                <div class="config-item">\n                  <span class="config-key">SDK Version:</span>\n                  <span class="config-value">${"undefined"!=typeof window&&window.__NEXT_SDK_VERSION__?window.__NEXT_SDK_VERSION__:"1.0.0"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">API Key:</span>\n                  <span class="config-value">${c.apiKey?`${c.apiKey.substring(0,8)}...`:"Not set"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Environment:</span>\n                  <span class="config-value">${c.environment||"production"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Base URL:</span>\n                  <span class="config-value">https://campaigns.apps.29next.com</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="config-group">\n              <h4 class="config-group-title">Feature Flags</h4>\n              <div class="config-items">\n                <div class="config-item">\n                  <span class="config-key">Debug Mode:</span>\n                  <span class="config-value ${c.debug?"enabled":"disabled"}">${c.debug?"Enabled":"Disabled"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Test Mode:</span>\n                  <span class="config-value ${null!=(t=c.testMode)&&t?"enabled":"disabled"}">${null!=(e=c.testMode)&&e?"Enabled":"Disabled"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Analytics:</span>\n                  <span class="config-value ${null==(i=c.enableAnalytics)||i?"enabled":"disabled"}">${null==(n=c.enableAnalytics)||n?"Enabled":"Disabled"}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Auto Initialize:</span>\n                  <span class="config-value ${null==(s=c.autoInit)||s?"enabled":"disabled"}">${null==(a=c.autoInit)||a?"Enabled":"Disabled"}</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="config-group">\n              <h4 class="config-group-title">Performance</h4>\n              <div class="config-items">\n                <div class="config-item">\n                  <span class="config-key">Rate Limit:</span>\n                  <span class="config-value">${null!=(r=c.rateLimit)?r:4} req/sec</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Cache TTL:</span>\n                  <span class="config-value">${null!=(o=c.cacheTtl)?o:300}s</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Retry Attempts:</span>\n                  <span class="config-value">${null!=(d=c.retryAttempts)?d:3}</span>\n                </div>\n                <div class="config-item">\n                  <span class="config-key">Timeout:</span>\n                  <span class="config-value">${null!=(l=c.timeout)?l:1e4}ms</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getRawDataContent(){const t=vt.getState();return xa.generateRawDataContent(t)}getActions(){return[{label:"Toggle Debug",action:()=>this.toggleDebug(),variant:"primary"},{label:"Toggle Test Mode",action:()=>this.toggleTestMode(),variant:"secondary"},{label:"Export Config",action:()=>this.exportConfig(),variant:"secondary"},{label:"Reset Config",action:()=>this.resetConfig(),variant:"danger"}]}toggleDebug(){const t=vt.getState();t.updateConfig({debug:!t.debug}),document.dispatchEvent(new CustomEvent("debug:update-content"))}toggleTestMode(){var t;const e=vt.getState();e.updateConfig({testMode:!(null!=(t=e.testMode)&&t)}),document.dispatchEvent(new CustomEvent("debug:update-content"))}exportConfig(){const t=vt.getState(),e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`next-config-${(new Date).toISOString()}.json`,s.click(),URL.revokeObjectURL(n)}resetConfig(){confirm("Are you sure you want to reset the configuration to defaults?")&&(vt.getState().reset(),document.dispatchEvent(new CustomEvent("debug:update-content")))}}class Ia{constructor(){this.id="checkout",this.title="Checkout State",this.icon="💳"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"customer",label:"Customer Info",icon:"👤",getContent:()=>this.getCustomerContent()},{id:"validation",label:"Validation",icon:"✅",getContent:()=>this.getValidationContent()},{id:"raw",label:"Raw Data",icon:"🔧",getContent:()=>this.getRawDataContent()}]}getOverviewContent(){var t;const e=At.getState();return`\n      <div class="enhanced-panel">\n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">📋</div>\n            <div class="metric-content">\n              <div class="metric-value">${e.step||"Not Started"}</div>\n              <div class="metric-label">Current Step</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">${e.isProcessing?"⏳":"✅"}</div>\n            <div class="metric-content">\n              <div class="metric-value">${e.isProcessing?"PROCESSING":"READY"}</div>\n              <div class="metric-label">Form Status</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🔒</div>\n            <div class="metric-content">\n              <div class="metric-value">${e.paymentMethod||"None"}</div>\n              <div class="metric-label">Payment Method</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🚚</div>\n            <div class="metric-content">\n              <div class="metric-value">${(null==(t=e.shippingMethod)?void 0:t.name)||"None"}</div>\n              <div class="metric-label">Shipping Method</div>\n            </div>\n          </div>\n        </div>\n\n        <div class="section">\n          <h3 class="section-title">Form Fields Status</h3>\n          <div class="form-fields-grid">\n            ${this.renderFormFields(e)}\n          </div>\n        </div>\n        \n        <div class="section">\n          <h3 class="section-title">Current Form Data</h3>\n          <div class="form-data-summary">\n            ${Object.keys(e.formData).length>0?Object.entries(e.formData).map(([t,e])=>`\n                <div class="form-field-row">\n                  <span class="field-name">${this.formatFieldName(t)}</span>\n                  <span class="field-value">${e||"Empty"}</span>\n                </div>\n              `).join(""):'<div class="empty-state">No form data yet</div>'}\n          </div>\n        </div>\n      </div>\n    `}getCustomerContent(){const t=At.getState(),e=t.formData;return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="customer-info">\n            ${Object.keys(e).length>0?`\n              <div class="info-card">\n                <h4>Contact Information</h4>\n                <div class="info-row">\n                  <span class="info-label">Email:</span>\n                  <span class="info-value">${e.email||"Not provided"}</span>\n                </div>\n                <div class="info-row">\n                  <span class="info-label">Phone:</span>\n                  <span class="info-value">${e.phone||"Not provided"}</span>\n                </div>\n                <div class="info-row">\n                  <span class="info-label">Name:</span>\n                  <span class="info-value">${e.fname||""} ${e.lname||""}</span>\n                </div>\n              </div>\n              \n              <div class="info-card">\n                <h4>Shipping Address</h4>\n                <div class="address-info">\n                  ${e.address1?`\n                    <div class="info-row">\n                      <span class="info-label">Address:</span>\n                      <span class="info-value">${e.address1}</span>\n                    </div>\n                    ${e.address2?`\n                      <div class="info-row">\n                        <span class="info-label">Address 2:</span>\n                        <span class="info-value">${e.address2}</span>\n                      </div>\n                    `:""}\n                    <div class="info-row">\n                      <span class="info-label">City:</span>\n                      <span class="info-value">${e.city||"Not provided"}</span>\n                    </div>\n                    <div class="info-row">\n                      <span class="info-label">State/Province:</span>\n                      <span class="info-value">${e.province||"Not provided"}</span>\n                    </div>\n                    <div class="info-row">\n                      <span class="info-label">Postal Code:</span>\n                      <span class="info-value">${e.postal||"Not provided"}</span>\n                    </div>\n                    <div class="info-row">\n                      <span class="info-label">Country:</span>\n                      <span class="info-value">${e.country||"Not provided"}</span>\n                    </div>\n                  `:'<div class="info-empty">Not provided</div>'}\n                </div>\n              </div>\n\n              <div class="info-card">\n                <h4>Billing Address</h4>\n                <div class="address-info">\n                  ${t.sameAsShipping?'\n                    <div class="info-same">Same as shipping address</div>\n                  ':t.billingAddress?`\n                    <div class="info-row">\n                      <span class="info-label">Name:</span>\n                      <span class="info-value">${t.billingAddress.first_name} ${t.billingAddress.last_name}</span>\n                    </div>\n                    <div class="info-row">\n                      <span class="info-label">Address:</span>\n                      <span class="info-value">${t.billingAddress.address1}</span>\n                    </div>\n                    <div class="info-row">\n                      <span class="info-label">City:</span>\n                      <span class="info-value">${t.billingAddress.city}, ${t.billingAddress.province} ${t.billingAddress.postal}</span>\n                    </div>\n                  `:'<div class="info-empty">Not provided</div>'}\n                </div>\n              </div>\n            `:'\n              <div class="empty-state">\n                <div class="empty-icon">👤</div>\n                <div class="empty-text">No customer information yet</div>\n                <div class="empty-subtitle">Fill out the checkout form to see data here</div>\n              </div>\n            '}\n          </div>\n        </div>\n      </div>\n    `}getValidationContent(){const t=At.getState();return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="validation-errors">\n            ${t.errors&&Object.keys(t.errors).length>0?`\n              ${Object.entries(t.errors).map(([t,e])=>`\n                <div class="error-item">\n                  <span class="error-field">${t}:</span>\n                  <span class="error-message">${e}</span>\n                </div>\n              `).join("")}\n            `:'\n              <div class="empty-state">\n                <div class="empty-icon">✅</div>\n                <div class="empty-text">No validation errors</div>\n              </div>\n            '}\n          </div>\n        </div>\n      </div>\n    `}getRawDataContent(){const t=At.getState();return xa.generateRawDataContent(t)}getActions(){return[{label:"Fill Test Data",action:()=>this.fillTestData(),variant:"primary"},{label:"Validate Form",action:()=>this.validateForm(),variant:"secondary"},{label:"Clear Errors",action:()=>this.clearErrors(),variant:"secondary"},{label:"Reset Checkout",action:()=>this.resetCheckout(),variant:"danger"},{label:"Export State",action:()=>this.exportState(),variant:"secondary"}]}renderFormFields(t){return["email","fname","lname","address1","city","province","postal","phone","country"].map(e=>{const i=this.hasFieldValue(t,e),n=t.errors&&t.errors[e];return`\n        <div class="field-status-card ${i?"filled":"empty"} ${n?"error":""}">\n          <div class="field-name">${this.formatFieldName(e)}</div>\n          <div class="field-status">\n            ${i?"✅":"⏳"}\n            ${n?" ❌":""}\n          </div>\n        </div>\n      `}).join("")}hasFieldValue(t,e){return t.formData&&t.formData[e]?t.formData[e].toString().trim().length>0:!(!t.billingAddress||!t.billingAddress[e])&&t.billingAddress[e].toString().trim().length>0}formatFieldName(t){return{fname:"First Name",lname:"Last Name",email:"Email",phone:"Phone",address1:"Address",address2:"Address 2",city:"City",province:"State/Province",postal:"Postal Code",country:"Country",accepts_marketing:"Accepts Marketing"}[t]||t.replace(/([A-Z])/g," $1").replace(/^./,t=>t.toUpperCase()).trim()}fillTestData(){const t=At.getState(),e={email:"test@test.com",fname:"Test",lname:"Order",phone:"+14807581224",address1:"Test Address 123",address2:"",city:"Tempe",province:"AZ",postal:"85281",country:"US",accepts_marketing:!0};t.clearAllErrors(),t.updateFormData(e),t.setPaymentMethod("credit-card"),t.setSameAsShipping(!0),t.setShippingMethod({id:1,name:"Standard Shipping",price:0,code:"standard"}),document.dispatchEvent(new CustomEvent("debug:update-content")),setTimeout(()=>{document.dispatchEvent(new CustomEvent("checkout:test-data-filled",{detail:e}))},100)}validateForm(){const t=At.getState(),e=t.formData;let i=!1;t.clearAllErrors(),["email","fname","lname","address1","city","country"].forEach(n=>{e[n]&&""!==e[n].toString().trim()||(t.setError(n,`${this.formatFieldName(n)} is required`),i=!0)}),document.dispatchEvent(new CustomEvent("debug:update-content"))}clearErrors(){At.getState().clearAllErrors(),document.dispatchEvent(new CustomEvent("debug:update-content"))}resetCheckout(){confirm("Are you sure you want to reset the checkout state?")&&(At.getState().reset(),document.dispatchEvent(new CustomEvent("debug:update-content")))}exportState(){const t=At.getState(),e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`checkout-state-${(new Date).toISOString()}.json`,s.click(),URL.revokeObjectURL(n)}}class Ta{constructor(){this.id="storage",this.title="Storage",this.icon="💾"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"next-data",label:"Next Data",icon:"🏷️",getContent:()=>this.getNextContent()},{id:"local-storage",label:"Local Storage",icon:"💾",getContent:()=>this.getLocalStorageContent()},{id:"session-storage",label:"Session Storage",icon:"⏰",getContent:()=>this.getSessionStorageContent()}]}getOverviewContent(){const t=this.getLocalStorageData(),e=this.getSessionStorageData();return`\n      <div class="enhanced-panel">\n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">💾</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.length}</div>\n              <div class="metric-label">LocalStorage Items</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">⏰</div>\n            <div class="metric-content">\n              <div class="metric-value">${e.length}</div>\n              <div class="metric-label">SessionStorage Items</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">📊</div>\n            <div class="metric-content">\n              <div class="metric-value">${this.getStorageSize()}KB</div>\n              <div class="metric-label">Total Size</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🏷️</div>\n            <div class="metric-content">\n              <div class="metric-value">${this.getNextItems().length}</div>\n              <div class="metric-label">Next Items</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getNextContent(){return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="storage-items">\n            ${0===this.getNextItems().length?'\n              <div class="empty-state">\n                <div class="empty-icon">💾</div>\n                <div class="empty-text">No Next storage items found</div>\n              </div>\n            ':`\n              ${this.getNextItems().map(t=>`\n                <div class="storage-item-card next-item">\n                  <div class="storage-item-header">\n                    <span class="storage-key">${t.key}</span>\n                    <span class="storage-type ${t.type}">${t.type}</span>\n                    <button class="storage-delete-btn" onclick="window.nextDebug.deleteStorageItem('${t.key}', '${t.type}')">×</button>\n                  </div>\n                  <div class="storage-item-size">${t.size} bytes</div>\n                  <div class="storage-item-value">\n                    <pre><code>${t.formattedValue}</code></pre>\n                  </div>\n                </div>\n              `).join("")}\n            `}\n          </div>\n        </div>\n      </div>\n    `}getLocalStorageContent(){const t=this.getLocalStorageData();return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="storage-items">\n            ${0===t.length?'\n              <div class="empty-state">\n                <div class="empty-icon">💾</div>\n                <div class="empty-text">No localStorage items</div>\n              </div>\n            ':`\n              ${t.map(t=>`\n                <div class="storage-item-card ${t.key.includes("next")?"next-item":""}">\n                  <div class="storage-item-header">\n                    <span class="storage-key">${t.key}</span>\n                    <span class="storage-type local">local</span>\n                    <button class="storage-delete-btn" onclick="window.nextDebug.deleteStorageItem('${t.key}', 'local')">×</button>\n                  </div>\n                  <div class="storage-item-size">${t.size} bytes</div>\n                  <div class="storage-item-value">\n                    <pre><code>${t.formattedValue}</code></pre>\n                  </div>\n                </div>\n              `).join("")}\n            `}\n          </div>\n        </div>\n      </div>\n    `}getSessionStorageContent(){const t=this.getSessionStorageData();return`\n      <div class="enhanced-panel">\n        <div class="section">\n          <div class="storage-items">\n            ${0===t.length?'\n              <div class="empty-state">\n                <div class="empty-icon">⏰</div>\n                <div class="empty-text">No sessionStorage items</div>\n              </div>\n            ':`\n              ${t.map(t=>`\n                <div class="storage-item-card ${t.key.includes("next")?"next-item":""}">\n                  <div class="storage-item-header">\n                    <span class="storage-key">${t.key}</span>\n                    <span class="storage-type session">session</span>\n                    <button class="storage-delete-btn" onclick="window.nextDebug.deleteStorageItem('${t.key}', 'session')">×</button>\n                  </div>\n                  <div class="storage-item-size">${t.size} bytes</div>\n                  <div class="storage-item-value">\n                    <pre><code>${t.formattedValue}</code></pre>\n                  </div>\n                </div>\n              `).join("")}\n            `}\n          </div>\n        </div>\n      </div>\n    `}getActions(){return[{label:"Clear Next Data",action:()=>this.clearNextStorage(),variant:"danger"},{label:"Clear All Local",action:()=>this.clearLocalStorage(),variant:"danger"},{label:"Clear All Session",action:()=>this.clearSessionStorage(),variant:"danger"},{label:"Export Storage",action:()=>this.exportStorage(),variant:"secondary"}]}getLocalStorageData(){const t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i){const e=localStorage.getItem(i)||"";t.push({key:i,value:e,size:new Blob([e]).size,formattedValue:this.formatValue(e)})}}return t.sort((t,e)=>t.key.localeCompare(e.key))}getSessionStorageData(){const t=[];for(let e=0;e<sessionStorage.length;e++){const i=sessionStorage.key(e);if(i){const e=sessionStorage.getItem(i)||"";t.push({key:i,value:e,size:new Blob([e]).size,formattedValue:this.formatValue(e)})}}return t.sort((t,e)=>t.key.localeCompare(e.key))}getNextItems(){const t=[];for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i&&(i.includes("next")||i.includes("29next")||i.includes("campaign"))){const e=localStorage.getItem(i)||"";t.push({key:i,value:e,size:new Blob([e]).size,formattedValue:this.formatValue(e),type:"local"})}}for(let e=0;e<sessionStorage.length;e++){const i=sessionStorage.key(e);if(i&&(i.includes("next")||i.includes("29next")||i.includes("campaign"))){const e=sessionStorage.getItem(i)||"";t.push({key:i,value:e,size:new Blob([e]).size,formattedValue:this.formatValue(e),type:"session"})}}return t.sort((t,e)=>t.key.localeCompare(e.key))}formatValue(t){try{const e=JSON.parse(t);return JSON.stringify(e,null,2)}catch(e){return t.length>200?t.substring(0,200)+"...":t}}getStorageSize(){let t=0;for(let e=0;e<localStorage.length;e++){const i=localStorage.key(e);if(i){const e=localStorage.getItem(i)||"";t+=new Blob([i+e]).size}}for(let e=0;e<sessionStorage.length;e++){const i=sessionStorage.key(e);if(i){const e=sessionStorage.getItem(i)||"";t+=new Blob([i+e]).size}}return Math.round(t/1024)}clearNextStorage(){confirm("Are you sure you want to clear all Next storage data?")&&(this.getNextItems().forEach(t=>{"local"===t.type?localStorage.removeItem(t.key):sessionStorage.removeItem(t.key)}),document.dispatchEvent(new CustomEvent("debug:update-content")))}clearLocalStorage(){confirm("Are you sure you want to clear ALL localStorage data?")&&(localStorage.clear(),document.dispatchEvent(new CustomEvent("debug:update-content")))}clearSessionStorage(){confirm("Are you sure you want to clear ALL sessionStorage data?")&&(sessionStorage.clear(),document.dispatchEvent(new CustomEvent("debug:update-content")))}exportStorage(){const t={localStorage:this.getLocalStorageData(),sessionStorage:this.getSessionStorageData(),timestamp:(new Date).toISOString()},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(e),n=document.createElement("a");n.href=i,n.download=`storage-data-${(new Date).toISOString()}.json`,n.click(),URL.revokeObjectURL(i)}}class Aa{constructor(){this.id="campaign",this.title="Campaign Data",this.icon="📊"}getContent(){var t;return(null==(t=this.getTabs()[0])?void 0:t.getContent())||""}getTabs(){return[{id:"overview",label:"Overview",icon:"📊",getContent:()=>this.getOverviewContent()},{id:"packages",label:"Packages",icon:"📦",getContent:()=>this.getPackagesContent()},{id:"shipping",label:"Shipping",icon:"🚚",getContent:()=>this.getShippingContent()},{id:"raw",label:"Raw Data",icon:"🔧",getContent:()=>this.getRawDataContent()}]}getOverviewContent(){const t=lt.getState().data;return t?`\n      <div class="enhanced-panel">\n        ${this.getCampaignOverview(t)}\n      </div>\n    `:'\n        <div class="enhanced-panel">\n          <div class="empty-state">\n            <div class="empty-icon">📊</div>\n            <div class="empty-text">No campaign data loaded</div>\n            <button class="empty-action" onclick="window.nextDebug.loadCampaign()">Load Campaign</button>\n          </div>\n        </div>\n      '}getPackagesContent(){const t=lt.getState(),e=Et.getState(),i=t.data;return i?`\n      <div class="enhanced-panel">\n        ${this.getPackagesSection(i.packages,e)}\n      </div>\n    `:'\n        <div class="enhanced-panel">\n          <div class="empty-state">\n            <div class="empty-icon">📦</div>\n            <div class="empty-text">No campaign data loaded</div>\n          </div>\n        </div>\n      '}getShippingContent(){const t=lt.getState().data;return t?`\n      <div class="enhanced-panel">\n        ${this.getShippingMethodsSection(t.shipping_methods)}\n      </div>\n    `:'\n        <div class="enhanced-panel">\n          <div class="empty-state">\n            <div class="empty-icon">🚚</div>\n            <div class="empty-text">No campaign data loaded</div>\n          </div>\n        </div>\n      '}getRawDataContent(){const t=lt.getState().data;return t?xa.generateRawDataContent(t):'\n        <div class="enhanced-panel">\n          <div class="empty-state">\n            <div class="empty-icon">🔧</div>\n            <div class="empty-text">No campaign data loaded</div>\n          </div>\n        </div>\n      '}getCampaignOverview(t){return`\n      <div class="campaign-overview">\n        <div class="campaign-header">\n          <h2 class="campaign-name">${t.name}</h2>\n          <div class="campaign-badges">\n            <span class="campaign-badge currency">${t.currency}</span>\n            <span class="campaign-badge language">${t.language.toUpperCase()}</span>\n          </div>\n        </div>\n        \n        <div class="metrics-grid">\n          <div class="metric-card">\n            <div class="metric-icon">📦</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.packages.length}</div>\n              <div class="metric-label">Total Packages</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🚚</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.shipping_methods.length}</div>\n              <div class="metric-label">Shipping Methods</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">🔄</div>\n            <div class="metric-content">\n              <div class="metric-value">${t.packages.filter(t=>t.is_recurring).length}</div>\n              <div class="metric-label">Recurring Items</div>\n            </div>\n          </div>\n          <div class="metric-card">\n            <div class="metric-icon">💰</div>\n            <div class="metric-content">\n              <div class="metric-value">${this.getPriceRange(t.packages)}</div>\n              <div class="metric-label">Price Range</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}getPackagesSection(t,e){return`\n      <div class="section">\n        <div class="section-header">\n          <h3 class="section-title">Available Packages</h3>\n          <div class="section-controls">\n            <button class="sort-btn" onclick="window.nextDebug.sortPackages('price')">Sort by Price</button>\n            <button class="sort-btn" onclick="window.nextDebug.sortPackages('name')">Sort by Name</button>\n          </div>\n        </div>\n        \n        <div class="packages-grid">\n          ${t.map(t=>this.getPackageCard(t,e)).join("")}\n        </div>\n      </div>\n    `}getPackageCard(t,e){const i=e.items.some(e=>e.packageId===t.ref_id),n=e.items.find(e=>e.packageId===t.ref_id),s=parseFloat(t.price_retail_total)-parseFloat(t.price_total),a=Math.round(s/parseFloat(t.price_retail_total)*100);return`\n      <div class="package-card ${i?"in-cart":""}" data-package-id="${t.ref_id}">\n        <div class="package-image-container">\n          <img src="${t.image}" alt="${t.name}" class="package-image" loading="lazy" />\n          ${t.is_recurring?'<div class="recurring-badge">🔄 Recurring</div>':""}\n          ${i?`<div class="cart-badge">In Cart (${(null==n?void 0:n.quantity)||0})</div>`:""}\n        </div>\n        \n        <div class="package-info">\n          <div class="package-header">\n            <h4 class="package-name">${t.name}</h4>\n            <div class="package-id">ID: ${t.ref_id}</div>\n          </div>\n          \n          <div class="package-details">\n            <div class="package-qty">Quantity: ${t.qty}</div>\n            <div class="package-external-id">External ID: ${t.external_id}</div>\n          </div>\n          \n          <div class="package-pricing">\n            <div class="price-row">\n              <span class="price-label">Sale Price:</span>\n              <span class="price-value sale-price">$${t.price_total}</span>\n            </div>\n            ${t.price_retail_total!==t.price_total?`\n              <div class="price-row">\n                <span class="price-label">Retail Price:</span>\n                <span class="price-value retail-price">$${t.price_retail_total}</span>\n              </div>\n              <div class="savings">\n                Save $${s.toFixed(2)} (${a}%)\n              </div>\n            `:""}\n            \n            ${t.is_recurring&&t.price_recurring?`\n              <div class="recurring-pricing">\n                <div class="price-row recurring">\n                  <span class="price-label">Recurring:</span>\n                  <span class="price-value recurring-price">\n                    $${t.price_recurring_total}/${t.interval}\n                  </span>\n                </div>\n              </div>\n            `:""}\n          </div>\n          \n          <div class="package-actions">\n            ${i?`\n              <button class="package-btn remove-btn" onclick="window.nextDebug.removeFromCart(${t.ref_id})">\n                Remove from Cart\n              </button>\n              <div class="qty-controls">\n                <button onclick="window.nextDebug.updateQuantity(${t.ref_id}, ${((null==n?void 0:n.quantity)||1)-1})">-</button>\n                <span>${(null==n?void 0:n.quantity)||0}</span>\n                <button onclick="window.nextDebug.updateQuantity(${t.ref_id}, ${((null==n?void 0:n.quantity)||1)+1})">+</button>\n              </div>\n            `:`\n              <button class="package-btn add-btn" onclick="window.nextDebug.addToCart(${t.ref_id})">\n                Add to Cart - $${t.price_total}\n              </button>\n            `}\n            <button class="package-btn inspect-btn" onclick="window.nextDebug.inspectPackage(${t.ref_id})">\n              Inspect\n            </button>\n          </div>\n        </div>\n      </div>\n    `}getShippingMethodsSection(t){return`\n      <div class="section">\n        <h3 class="section-title">Shipping Methods</h3>\n        \n        <div class="shipping-methods">\n          ${t.map(t=>`\n            <div class="shipping-method-card">\n              <div class="shipping-info">\n                <div class="shipping-name">${t.code}</div>\n                <div class="shipping-id">ID: ${t.ref_id}</div>\n              </div>\n              <div class="shipping-price">\n                ${0===parseFloat(t.price)?"FREE":`$${t.price}`}\n              </div>\n              <button class="shipping-test-btn" onclick="window.nextDebug.testShippingMethod(${t.ref_id})">\n                Test\n              </button>\n            </div>\n          `).join("")}\n        </div>\n      </div>\n    `}getPriceRange(t){const e=t.map(t=>parseFloat(t.price_total)).filter(t=>t>0);if(0===e.length)return"Free";const i=Math.min(...e),n=Math.max(...e);return i===n?`$${i}`:`$${i} - $${n}`}getActions(){return[{label:"Refresh Campaign",action:()=>{const t=vt.getState(),e=lt.getState();t.apiKey&&e.loadCampaign(t.apiKey)},variant:"primary"},{label:"Export Packages",action:()=>this.exportPackages(),variant:"secondary"},{label:"Test All Packages",action:()=>this.testAllPackages(),variant:"secondary"},{label:"Clear Cart",action:()=>Et.getState().clear(),variant:"danger"}]}exportPackages(){const t=lt.getState().data;if(!t)return;const e={campaign:t.name,packages:t.packages,shipping_methods:t.shipping_methods,export_date:(new Date).toISOString()},i=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`campaign-packages-${t.name.toLowerCase().replace(/\s+/g,"-")}.json`,s.click(),URL.revokeObjectURL(n)}testAllPackages(){const t=lt.getState(),e=Et.getState(),i=t.data;i&&i.packages.slice(0,3).forEach(t=>{e.addItem({packageId:t.ref_id,quantity:1,title:t.name,isUpsell:!1})})}}const Ma=class t{constructor(){this.visible=!1,this.isExpanded=!1,this.container=null,this.shadowRoot=null,this.activePanel="cart",this.updateInterval=null,this.logger=new Q("DebugOverlay"),this.eventManager=null,this.panels=[],this.handleContainerClick=e=>{var i,n,s;const a=e.target,r=a.getAttribute("data-action")||(null==(i=a.closest("[data-action]"))?void 0:i.getAttribute("data-action"));if(r){switch(r){case"toggle-expand":this.isExpanded=!this.isExpanded,localStorage.setItem(t.EXPANDED_STORAGE_KEY,this.isExpanded.toString()),this.updateBodyHeight(),this.updateOverlay(),document.dispatchEvent(new CustomEvent("debug:panel-toggled",{detail:{isExpanded:this.isExpanded}}));break;case"close":this.hide();break;case"clear-cart":this.clearCart();break;case"export-data":this.exportAllData();break;case"toggle-mini-cart":this.toggleMiniCart();break;case"toggle-xray":this.toggleXray();break;case"close-mini-cart":this.closeMiniCart();break;case"toggle-internal-events":const e=this.panels.find(t=>"event-timeline"===t.id);e&&e.toggleInternalEvents&&(e.toggleInternalEvents(),this.updateContent())}return}const o=a.closest(".debug-panel-tab");if(o){const e=o.getAttribute("data-panel");return void(e&&e!==this.activePanel&&(this.activePanel=e,this.activePanelTab=void 0,localStorage.setItem(t.ACTIVE_PANEL_KEY,e),localStorage.removeItem(t.ACTIVE_TAB_KEY),this.updateOverlay()))}const d=a.closest(".horizontal-tab");if(d){const e=d.getAttribute("data-panel-tab");return void(e&&e!==this.activePanelTab&&(this.activePanelTab=e,localStorage.setItem(t.ACTIVE_TAB_KEY,e),this.updateOverlay()))}const l=a.closest(".panel-action-btn");if(l){const t=l.getAttribute("data-panel-action"),e=this.panels.find(t=>t.id===this.activePanel),i=null==(s=null==(n=null==e?void 0:e.getActions)?void 0:n.call(e))?void 0:s.find(e=>e.label===t);return void(i&&(i.action(),setTimeout(()=>this.updateContent(),100)))}};const e=new URLSearchParams(window.location.search);if("true"===e.get("debugger")||"true"===e.get("debug")){this.eventManager=new oa,this.initializePanels(),this.setupEventListeners(),"true"===localStorage.getItem(t.EXPANDED_STORAGE_KEY)&&(this.isExpanded=!0);const e=localStorage.getItem(t.ACTIVE_PANEL_KEY);e&&(this.activePanel=e);const i=localStorage.getItem(t.ACTIVE_TAB_KEY);i&&(this.activePanelTab=i)}}static getInstance(){return t.instance||(t.instance=new t),t.instance}initializePanels(){this.panels=[new wa,new _a,new Ea,new Aa,new Ia,new Pa,new Ta]}setupEventListeners(){document.addEventListener("debug:update-content",()=>{this.updateContent()}),document.addEventListener("debug:event-added",t=>{const e=t,{panelId:i}=e.detail;this.activePanel===i&&this.isExpanded&&this.updateContent()})}initialize(){"true"===new URLSearchParams(window.location.search).get("debugger")&&(this.show(),this.logger.info("Debug overlay initialized"),$a.initialize(),this.logger.info("Selector container initialized"),ba.initialize(),this.logger.info("Upsell selector initialized"))}show(){return m(this,null,function*(){this.visible||(this.visible=!0,yield this.createOverlay(),this.startAutoUpdate(),ca.initialize(),"true"===localStorage.getItem("debug-mini-cart-visible")&&this.toggleMiniCart(!0),this.updateButtonStates())})}hide(){this.visible&&(this.visible=!1,this.stopAutoUpdate(),document.body.classList.remove("debug-body-expanded"),document.documentElement.classList.remove("debug-body-expanded"),$a.destroy(),ba.destroy(),this.container&&(this.container.remove(),this.container=null,this.shadowRoot=null))}toggle(){return m(this,null,function*(){this.visible?this.hide():yield this.show()})}isVisible(){return this.visible}createOverlay(){return m(this,null,function*(){this.container=document.createElement("div"),this.container.id="next-debug-overlay-host",this.container.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      z-index: 2147483647;\n      pointer-events: none;\n    ",this.shadowRoot=this.container.attachShadow({mode:"open"}),yield this.injectShadowStyles();const t=document.createElement("div");t.className="debug-overlay",t.style.pointerEvents="auto",this.shadowRoot.appendChild(t),this.updateOverlay(),this.addEventListeners(),document.body.appendChild(this.container)})}injectShadowStyles(){return m(this,null,function*(){if(!this.shadowRoot)return;const{DebugStyleLoader:t}=yield Promise.resolve().then(()=>Za),e=yield t.getDebugStyles(),i=document.createElement("style");i.textContent=e,this.shadowRoot.appendChild(i);const n=document.createElement("style");n.textContent="\n      :host {\n        all: initial;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        font-size: 14px;\n        line-height: 1.5;\n        color: #e0e0e0;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n      \n      * {\n        box-sizing: border-box;\n      }\n      \n      /* Ensure debug overlay is always on top */\n      .debug-overlay {\n        position: fixed;\n        z-index: 2147483647;\n      }\n    ",this.shadowRoot.appendChild(n)})}updateOverlay(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector(".debug-overlay");t&&(t.innerHTML=da.createOverlayHTML(this.panels,this.activePanel,this.isExpanded,this.activePanelTab),this.addEventListeners(),this.updateButtonStates())}updateContent(){var t,e;if(!this.shadowRoot)return;const i=this.shadowRoot.querySelector(".panel-content");if(i){const n=this.panels.find(t=>t.id===this.activePanel);if(n){const s=(null==(t=n.getTabs)?void 0:t.call(n))||[];if(s.length>0){const t=this.activePanelTab||(null==(e=s[0])?void 0:e.id),n=s.find(e=>e.id===t)||s[0];n&&(i.innerHTML=n.getContent())}else i.innerHTML=n.getContent()}}}addEventListeners(){this.shadowRoot&&(this.shadowRoot.removeEventListener("click",this.handleContainerClick),this.shadowRoot.addEventListener("click",this.handleContainerClick))}updateBodyHeight(){this.isExpanded?(document.body.classList.add("debug-body-expanded"),document.documentElement.classList.add("debug-body-expanded")):(document.body.classList.remove("debug-body-expanded"),document.documentElement.classList.remove("debug-body-expanded"))}startAutoUpdate(){this.updateInterval=window.setInterval(()=>{this.updateQuickStats(),"cart"!==this.activePanel&&"config"!==this.activePanel&&"campaign"!==this.activePanel||"raw"===this.activePanelTab||this.updateContent()},1e3)}stopAutoUpdate(){this.updateInterval&&(clearInterval(this.updateInterval),this.updateInterval=null)}getEventManager(){return this.eventManager||null}getPanels(){return this.panels||[]}setActivePanel(e){this.panels.find(t=>t.id===e)&&(this.activePanel=e,localStorage.setItem(t.ACTIVE_PANEL_KEY,e),this.updateOverlay())}logEvent(t,e,i="Manual"){this.eventManager&&this.eventManager.logEvent(t,e,i)}clearCart(){Et.getState().clear(),this.updateContent()}exportAllData(){const t={timestamp:(new Date).toISOString(),cart:Et.getState(),config:vt.getState(),events:this.eventManager?this.eventManager.getEvents():[],url:window.location.href,userAgent:navigator.userAgent},e=JSON.stringify(t,null,2),i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=`debug-session-${(new Date).toISOString()}.json`,s.click(),URL.revokeObjectURL(n)}closeMiniCart(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector("#debug-mini-cart-display");if(t){t.classList.remove("show"),localStorage.setItem("debug-mini-cart-visible","false");const e=this.shadowRoot.querySelector('[data-action="toggle-mini-cart"]');e&&(e.classList.remove("active"),e.setAttribute("title","Toggle Mini Cart"))}}toggleMiniCart(t){var e;if(!this.shadowRoot)return;let i=this.shadowRoot.querySelector("#debug-mini-cart-display");i?(i.classList.toggle("show"),i.classList.contains("show")&&this.updateMiniCart()):(i=document.createElement("div"),i.id="debug-mini-cart-display",i.className="debug-mini-cart-display",this.shadowRoot.appendChild(i),Et.subscribe(()=>{var t;const e=null==(t=this.shadowRoot)?void 0:t.querySelector("#debug-mini-cart-display");e&&e.classList.contains("show")&&this.updateMiniCart()}),!1!==t&&(i.classList.add("show"),this.updateMiniCart())),localStorage.setItem("debug-mini-cart-visible",i.classList.contains("show").toString());const n=null==(e=this.shadowRoot)?void 0:e.querySelector('[data-action="toggle-mini-cart"]');n&&i&&(i.classList.contains("show")?(n.classList.add("active"),n.setAttribute("title","Hide Mini Cart")):(n.classList.remove("active"),n.setAttribute("title","Toggle Mini Cart")))}updateMiniCart(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector("#debug-mini-cart-display");if(!t||!t.classList.contains("show"))return;const e=Et.getState();if(!e.items||0===e.items.length)return void(t.innerHTML='\n        <div class="debug-mini-cart-header">\n          <span>🛒 Debug Cart</span>\n          <button class="mini-cart-close" data-action="close-mini-cart">×</button>\n        </div>\n        <div class="debug-mini-cart-empty">Cart empty</div>\n      ');let i="";e.items.forEach(t=>{const e=t.is_upsell?'<span class="mini-cart-upsell-badge">UPSELL</span>':"";i+=`\n        <div class="debug-mini-cart-item">\n          <div class="mini-cart-item-info">\n            <span class="mini-cart-item-id">ID: ${t.packageId}</span>\n            ${e}\n            <span class="mini-cart-item-qty">×${t.quantity}</span>\n          </div>\n          <div class="mini-cart-item-title">${t.title||"Unknown"}</div>\n          <div class="mini-cart-item-price">$${(t.price*t.quantity).toFixed(2)}</div>\n        </div>\n      `}),t.innerHTML=`\n      <div class="debug-mini-cart-header">\n        <span>🛒 Debug Cart</span>\n        <button class="mini-cart-close" data-action="close-mini-cart">×</button>\n      </div>\n      <div class="debug-mini-cart-items">${i}</div>\n      <div class="debug-mini-cart-footer">\n        <div class="mini-cart-stat">\n          <span>Items:</span>\n          <span>${e.totalQuantity}</span>\n        </div>\n        <div class="mini-cart-stat">\n          <span>Total:</span>\n          <span class="mini-cart-total">${e.totals.total.formatted}</span>\n        </div>\n      </div>\n    `}toggleXray(){var t;const e=ca.toggle(),i=null==(t=this.shadowRoot)?void 0:t.querySelector('[data-action="toggle-xray"]');i&&(e?(i.classList.add("active"),i.setAttribute("title","Disable X-Ray View")):(i.classList.remove("active"),i.setAttribute("title","Toggle X-Ray View"))),this.eventManager&&this.eventManager.logEvent("debug:xray-toggled",{active:e},"Debug")}updateButtonStates(){if(!this.shadowRoot)return;const t=this.shadowRoot.querySelector('[data-action="toggle-xray"]');t&&(ca.isXrayActive()?(t.classList.add("active"),t.setAttribute("title","Disable X-Ray View")):(t.classList.remove("active"),t.setAttribute("title","Toggle X-Ray View")));const e=this.shadowRoot.querySelector("#debug-mini-cart-display"),i=this.shadowRoot.querySelector('[data-action="toggle-mini-cart"]');i&&(e&&e.classList.contains("show")?(i.classList.add("active"),i.setAttribute("title","Hide Mini Cart")):(i.classList.remove("active"),i.setAttribute("title","Toggle Mini Cart")))}updateQuickStats(){if(!this.shadowRoot)return;const t=Et.getState(),e=this.shadowRoot.querySelector('[data-debug-stat="cart-items"]'),i=this.shadowRoot.querySelector('[data-debug-stat="cart-total"]'),n=this.shadowRoot.querySelector('[data-debug-stat="enhanced-elements"]');e&&(e.textContent=t.totalQuantity.toString()),i&&(i.textContent=t.totals.total.formatted),n&&(n.textContent=document.querySelectorAll("[data-next-]").length.toString())}};Ma.EXPANDED_STORAGE_KEY="debug-overlay-expanded",Ma.ACTIVE_PANEL_KEY="debug-overlay-active-panel",Ma.ACTIVE_TAB_KEY="debug-overlay-active-tab";let La=Ma;const Fa=La.getInstance();"undefined"!=typeof window&&document.addEventListener("DOMContentLoaded",()=>{Fa.initialize()});const Da=Object.freeze(Object.defineProperty({__proto__:null,DebugOverlay:La,debugOverlay:Fa},Symbol.toStringTag,{value:"Module"}));X("Analytics");const Na=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));!function(){var t=this||self;function e(e,i){e=e.split(".");var n,s=t;e[0]in s||void 0===s.execScript||s.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===i?s=s[n]&&s[n]!==Object.prototype[n]?s[n]:s[n]={}:s[n]=i}function i(t,e){function i(){}i.prototype=e.prototype,t.ma=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.sa=function(t,i,n){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(t,s)}}var n=class{constructor(t){if(s!=s)throw Error("SafeUrl is not meant to be built directly");this.g=t}toString(){return this.g.toString()}},s={};function a(t,e){switch(this.g=t,this.l=!!e.aa,this.h=e.i,this.s=e.type,this.o=!1,this.h){case d:case l:case c:case u:case h:case o:case r:this.o=!0}this.j=e.defaultValue}new n("about:invalid#zClosurez"),new n("about:blank"),new class{constructor(){}toString(){return"".toString()}},new class{constructor(){}toString(){return"".toString()}},new class{constructor(){var e=t.trustedTypes&&t.trustedTypes.emptyHTML||"";this.g=e}toString(){return this.g.toString()}};var r=1,o=2,d=3,l=4,c=6,u=16,h=18;function p(t,e){for(this.h=t,this.g={},t=0;t<e.length;t++){var i=e[t];this.g[i.g]=i}}function m(){this.h={},this.j=this.m().g,this.g=this.l=null}function f(t,e){for(var i=function(t){return(t=function(t){const e=[];let i=0;for(const n in t)e[i++]=t[n];return e}(t.g)).sort(function(t,e){return t.g-e.g}),t}(t.m()),n=0;n<i.length;n++){var s=i[n],a=s.g;if(g(e,a)){t.g&&delete t.g[s.g];var r=11==s.h||10==s.h;if(s.l){s=b(e,a);for(var o=0;o<s.length;o++)_(t,a,r?s[o].clone():s[o])}else s=v(e,a),r?(r=v(t,a))?f(r,s):w(t,a,s.clone()):w(t,a,s)}}}function g(t,e){return null!=t.h[e]}function v(t,e){var i=t.h[e];if(null==i)return null;if(t.l){if(!(e in t.g)){var n=t.l,s=t.j[e];if(null!=i)if(s.l){for(var a=[],r=0;r<i.length;r++)a[r]=n.h(s,i[r]);i=a}else i=n.h(s,i);return t.g[e]=i}return t.g[e]}return i}function $(t,e,i){var n=v(t,e);return t.j[e].l?n[i||0]:n}function y(t,e){if(g(t,e))t=$(t,e);else t:{if(void 0===(t=t.j[e]).j)if((e=t.s)===Boolean)t.j=!1;else if(e===Number)t.j=0;else{if(e!==String){t=new e;break t}t.j=t.o?"0":""}t=t.j}return t}function b(t,e){return v(t,e)||[]}function x(t,e){return t.j[e].l?g(t,e)?t.h[e].length:0:g(t,e)?1:0}function w(t,e,i){t.h[e]=i,t.g&&(t.g[e]=i)}function _(t,e,i){t.h[e]||(t.h[e]=[]),t.h[e].push(i),t.g&&delete t.g[e]}function k(t,e){var i,n=[];for(i in e)0!=i&&n.push(new a(i,e[i]));return new p(t,n)}function S(){}m.prototype.has=function(t){return g(this,t.g)},m.prototype.get=function(t,e){return $(this,t.g,e)},m.prototype.set=function(t,e){w(this,t.g,e)},m.prototype.add=function(t,e){_(this,t.g,e)},m.prototype.clone=function(){var t=new this.constructor;return t!=this&&(t.h={},t.g&&(t.g={}),f(t,this)),t},S.prototype.g=function(t){throw new t.h,Error("Unimplemented")},S.prototype.h=function(t,e){if(11==t.h||10==t.h)return e instanceof m?e:this.g(t.s.prototype.m(),e);if(14==t.h)return"string"==typeof e&&C.test(e)&&0<(t=Number(e))?t:e;if(!t.o)return e;if((t=t.s)===String){if("number"==typeof e)return String(e)}else if(t===Number&&"string"==typeof e&&("Infinity"===e||"-Infinity"===e||"NaN"===e||C.test(e)))return Number(e);return e};var C=/^-?[0-9]+$/;function P(){}function E(){}function I(t,e){null!=t&&this.g.apply(this,arguments)}function T(t){t.h=""}function A(){m.call(this)}i(P,S),P.prototype.g=function(t,e){return(t=new t.h).l=this,t.h=e,t.g={},t},i(E,P),E.prototype.h=function(t,e){return 8==t.h?!!e:S.prototype.h.apply(this,arguments)},E.prototype.g=function(t,e){return E.ma.g.call(this,t,e)},I.prototype.h="",I.prototype.set=function(t){this.h=""+t},I.prototype.g=function(t,e,i){if(this.h+=String(t),null!=e)for(let n=1;n<arguments.length;n++)this.h+=arguments[n];return this},I.prototype.toString=function(){return this.h},i(A,m);var M=null;function L(){m.call(this)}i(L,m);var F=null;function D(){m.call(this)}i(D,m);var N=null;function U(){m.call(this)}A.prototype.m=function(){var t=M;return t||(M=t=k(A,{0:{name:"NumberFormat",ia:"i18n.phonenumbers.NumberFormat"},1:{name:"pattern",required:!0,i:9,type:String},2:{name:"format",required:!0,i:9,type:String},3:{name:"leading_digits_pattern",aa:!0,i:9,type:String},4:{name:"national_prefix_formatting_rule",i:9,type:String},6:{name:"national_prefix_optional_when_formatting",i:8,defaultValue:!1,type:Boolean},5:{name:"domestic_carrier_code_formatting_rule",i:9,type:String}})),t},A.m=A.prototype.m,L.prototype.m=function(){var t=F;return t||(F=t=k(L,{0:{name:"PhoneNumberDesc",ia:"i18n.phonenumbers.PhoneNumberDesc"},2:{name:"national_number_pattern",i:9,type:String},9:{name:"possible_length",aa:!0,i:5,type:Number},10:{name:"possible_length_local_only",aa:!0,i:5,type:Number},6:{name:"example_number",i:9,type:String}})),t},L.m=L.prototype.m,D.prototype.m=function(){var t=N;return t||(N=t=k(D,{0:{name:"PhoneMetadata",ia:"i18n.phonenumbers.PhoneMetadata"},1:{name:"general_desc",i:11,type:L},2:{name:"fixed_line",i:11,type:L},3:{name:"mobile",i:11,type:L},4:{name:"toll_free",i:11,type:L},5:{name:"premium_rate",i:11,type:L},6:{name:"shared_cost",i:11,type:L},7:{name:"personal_number",i:11,type:L},8:{name:"voip",i:11,type:L},21:{name:"pager",i:11,type:L},25:{name:"uan",i:11,type:L},27:{name:"emergency",i:11,type:L},28:{name:"voicemail",i:11,type:L},29:{name:"short_code",i:11,type:L},30:{name:"standard_rate",i:11,type:L},31:{name:"carrier_specific",i:11,type:L},33:{name:"sms_services",i:11,type:L},24:{name:"no_international_dialling",i:11,type:L},9:{name:"id",required:!0,i:9,type:String},10:{name:"country_code",i:5,type:Number},11:{name:"international_prefix",i:9,type:String},17:{name:"preferred_international_prefix",i:9,type:String},12:{name:"national_prefix",i:9,type:String},13:{name:"preferred_extn_prefix",i:9,type:String},15:{name:"national_prefix_for_parsing",i:9,type:String},16:{name:"national_prefix_transform_rule",i:9,type:String},18:{name:"same_mobile_and_fixed_line_pattern",i:8,defaultValue:!1,type:Boolean},19:{name:"number_format",aa:!0,i:11,type:A},20:{name:"intl_number_format",aa:!0,i:11,type:A},22:{name:"main_country_for_code",i:8,defaultValue:!1,type:Boolean},23:{name:"leading_digits",i:9,type:String}})),t},D.m=D.prototype.m,i(U,m);var O=null,z={ra:0,qa:1,pa:5,oa:10,na:20};U.prototype.m=function(){var t=O;return t||(O=t=k(U,{0:{name:"PhoneNumber",ia:"i18n.phonenumbers.PhoneNumber"},1:{name:"country_code",required:!0,i:5,type:Number},2:{name:"national_number",required:!0,i:4,type:Number},3:{name:"extension",i:9,type:String},4:{name:"italian_leading_zero",i:8,type:Boolean},8:{name:"number_of_leading_zeros",i:5,defaultValue:1,type:Number},5:{name:"raw_input",i:9,type:String},6:{name:"country_code_source",i:14,defaultValue:0,type:z},7:{name:"preferred_domestic_carrier_code",i:9,type:String}})),t},U.ctor=U,U.ctor.m=U.prototype.m;var R={1:"US AG AI AS BB BM BS CA DM DO GD GU JM KN KY LC MP MS PR SX TC TT VC VG VI".split(" "),7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],800:["001"],808:["001"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],870:["001"],878:["001"],880:["BD"],881:["001"],882:["001"],883:["001"],886:["TW"],888:["001"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],979:["001"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},q={AC:[,[,,"(?:[01589]\\d|[46])\\d{4}",,,,,,,[5,6]],[,,"6[2-467]\\d{3}",,,,"62889",,,[5]],[,,"4\\d{4}",,,,"40123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AC",247,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:0[1-9]|[1589]\\d)\\d{4}",,,,"542011",,,[6]],,,[,,,,,,,,,[-1]]],AD:[,[,,"(?:1|6\\d)\\d{7}|[135-9]\\d{5}",,,,,,,[6,8,9]],[,,"[78]\\d{5}",,,,"712345",,,[6]],[,,"690\\d{6}|[356]\\d{5}",,,,"312345",,,[6,9]],[,,"180[02]\\d{4}",,,,"18001234",,,[8]],[,,"[19]\\d{5}",,,,"912345",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AD",376,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],[,"(\\d{4})(\\d{4})","$1 $2",["1"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,"1800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AE:[,[,,"(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"[2-4679][2-8]\\d{6}",,,,"22345678",,,[8],[7]],[,,"5[024-68]\\d{7}",,,,"501234567",,,[9]],[,,"400\\d{6}|800\\d{2,9}",,,,"800123456"],[,,"900[02]\\d{5}",,,,"900234567",,,[9]],[,,"700[05]\\d{5}",,,,"700012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AE",971,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],[,"(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"600[25]\\d{5}",,,,"600212345",,,[9]],,,[,,,,,,,,,[-1]]],AF:[,[,,"[2-7]\\d{8}",,,,,,,[9],[7]],[,,"(?:[25][0-8]|[34][0-4]|6[0-5])[2-9]\\d{6}",,,,"234567890",,,,[7]],[,,"7\\d{8}",,,,"701234567",,,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AF",93,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AG:[,[,,"(?:268|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"268(?:4(?:6[0-38]|84)|56[0-2])\\d{4}",,,,"2684601234",,,,[7]],[,,"268(?:464|7(?:1[3-9]|[28]\\d|3[0246]|64|7[0-689]))\\d{4}",,,,"2684641234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"26848[01]\\d{4}",,,,"2684801234",,,,[7]],"AG",1,"011","1",,,"([457]\\d{6})$|1","268$1",,,,,[,,"26840[69]\\d{4}",,,,"2684061234",,,,[7]],,"268",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AI:[,[,,"(?:264|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"264(?:292|4(?:6[12]|9[78]))\\d{4}",,,,"2644612345",,,,[7]],[,,"264(?:235|4(?:69|76)|5(?:3[6-9]|8[1-4])|7(?:29|72))\\d{4}",,,,"2642351234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AI",1,"011","1",,,"([2457]\\d{6})$|1","264$1",,,,,[,,"264724\\d{4}",,,,"2647241234",,,,[7]],,"264",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AL:[,[,,"(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",,,,,,,[6,7,8,9],[5]],[,,"4505[0-2]\\d{3}|(?:[2358][16-9]\\d[2-9]|4410)\\d{4}|(?:[2358][2-5][2-9]|4(?:[2-57-9][2-9]|6\\d))\\d{5}",,,,"22345678",,,[8],[5,6,7]],[,,"6(?:[78][2-9]|9\\d)\\d{6}",,,,"672123456",,,[9]],[,,"800\\d{4}",,,,"8001234",,,[7]],[,,"900[1-9]\\d\\d",,,,"900123",,,[6]],[,,"808[1-9]\\d\\d",,,,"808123",,,[6]],[,,"700[2-9]\\d{4}",,,,"70021234",,,[8]],[,,,,,,,,,[-1]],"AL",355,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AM:[,[,,"(?:[1-489]\\d|55|60|77)\\d{6}",,,,,,,[8],[5,6]],[,,"(?:(?:1[0-25]|47)\\d|2(?:2[2-46]|3[1-8]|4[2-69]|5[2-7]|6[1-9]|8[1-7])|3[12]2)\\d{5}",,,,"10123456",,,,[5,6]],[,,"(?:33|4[1349]|55|77|88|9[13-9])\\d{6}",,,,"77123456"],[,,"800\\d{5}",,,,"80012345"],[,,"90[016]\\d{5}",,,,"90012345"],[,,"80[1-4]\\d{5}",,,,"80112345"],[,,,,,,,,,[-1]],[,,"60(?:2[78]|3[5-9]|4[02-9]|5[0-46-9]|[6-8]\\d|9[0-2])\\d{4}",,,,"60271234"],"AM",374,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],[,"(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AO:[,[,,"[29]\\d{8}",,,,,,,[9]],[,,"2\\d(?:[0134][25-9]|[25-9]\\d)\\d{5}",,,,"222123456"],[,,"9[1-79]\\d{7}",,,,"923123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AO",244,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AR:[,[,,"(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",,,,,,,[10,11],[6,7,8]],[,,"3(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|47[35]|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|(?:2(?:657|9(?:54|66))|3(?:48[27]|7(?:55|77)|8(?:65|78)))[2-8]\\d{5}|(?:2(?:284|3(?:02|23)|477|622|920)|3(?:4(?:46|89|92)|541))[2-7]\\d{5}|(?:(?:11[1-8]|670)\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[25][4-6]|3[3-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|1[2-7]|3[4-6]|5[3-6]|7[2-6]|8[3-68])))\\d{6}|(?:2(?:2(?:62|81)|320|9(?:42|83))|3(?:329|4(?:62|7[16])|5(?:43|64)|7(?:18|5[17])))[2-6]\\d{5}|2(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|(?:2(?:257|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|64)|5(?:25|37|4[47]|71)|7(?:35|72)|825))[3-6]\\d{5}|(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[035-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[14]|4[13]|5[468]|7[3-5]|8[26])|8(?:2[67]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"1123456789",,,[10],[6,7,8]],[,,"93(?:7(?:1[15]|81)|8(?:21|4[16]|69|9[12]))[46]\\d{5}|9(?:2(?:2(?:2[59]|44|52)|3(?:26|44)|47[35]|9(?:[07]2|2[26]|34|46))|3327)[45]\\d{5}|9(?:2(?:657|9(?:54|66))|3(?:48[27]|7(?:55|77)|8(?:65|78)))[2-8]\\d{5}|9(?:2(?:284|3(?:02|23)|477|622|920)|3(?:4(?:46|89|92)|541))[2-7]\\d{5}|(?:675\\d|9(?:11[1-8]\\d|2(?:2(?:0[45]|1[2-6]|3[3-6])|3(?:[06]4|7[45])|494|6(?:04|1[2-8]|[36][45]|4[3-6])|80[45]|9(?:[17][4-6]|[48][45]|9[3-6]))|3(?:364|4(?:1[2-8]|[25][4-6]|3[3-6]|84)|5(?:1[2-9]|[38][4-6])|6(?:2[45]|44)|7[069][45]|8(?:0[45]|1[2-7]|3[4-6]|5[3-6]|7[2-6]|8[3-68]))))\\d{6}|9(?:2(?:2(?:62|81)|320|9(?:42|83))|3(?:329|4(?:62|7[16])|5(?:43|64)|7(?:18|5[17])))[2-6]\\d{5}|92(?:2(?:21|4[23]|6[145]|7[1-4]|8[356]|9[267])|3(?:16|3[13-8]|43|5[346-8]|9[3-5])|6(?:2[46]|4[78]|5[1568])|9(?:03|2[1457-9]|3[1356]|4[08]|[56][23]|82))4\\d{5}|9(?:2(?:257|3(?:24|46|92)|9(?:01|23|64))|3(?:4(?:42|64)|5(?:25|37|4[47]|71)|7(?:35|72)|825))[3-6]\\d{5}|9(?:2(?:2(?:02|2[3467]|4[156]|5[45]|6[6-8]|91)|3(?:1[47]|25|[45][25]|96)|47[48]|625|932)|3(?:38[2578]|4(?:0[0-24-9]|3[78]|4[457]|58|6[035-9]|72|83|9[136-8])|5(?:2[124]|[368][23]|4[2689]|7[2-6])|7(?:16|2[15]|3[14]|4[13]|5[468]|7[3-5]|8[26])|8(?:2[67]|3[278]|4[3-5]|5[78]|6[1-378]|[78]7|94)))[4-6]\\d{5}",,,,"91123456789",,,,[6,7,8]],[,,"800\\d{7,8}",,,,"8001234567"],[,,"60[04579]\\d{7}",,,,"6001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AR",54,"00","0",,,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1",,,[[,"(\\d{3})","$1",["0|1(?:0[0-35-7]|1[02-5]|2[015]|3[47]|4[478])|911"]],[,"(\\d{2})(\\d{4})","$1-$2",["[1-9]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[2-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[1-8]"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1"],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1"]],[[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",,1],[,"(\\d)(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"]],[,"(\\d)(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3-$4",["91"]],[,"(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3-$4",["9"]]],[,,,,,,,,,[-1]],,,[,,"810\\d{7}",,,,,,,[10]],[,,"810\\d{7}",,,,"8101234567",,,[10]],,,[,,,,,,,,,[-1]]],AS:[,[,,"(?:[58]\\d\\d|684|900)\\d{7}",,,,,,,[10],[7]],[,,"6846(?:22|33|44|55|77|88|9[19])\\d{4}",,,,"6846221234",,,,[7]],[,,"684(?:2(?:48|5[2468]|7[26])|7(?:3[13]|70|82))\\d{4}",,,,"6847331234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"AS",1,"011","1",,,"([267]\\d{6})$|1","684$1",,,,,[,,,,,,,,,[-1]],,"684",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AT:[,[,,"1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",,,,,,,[4,5,6,7,8,9,10,11,12,13],[3]],[,,"1(?:11\\d|[2-9]\\d{3,11})|(?:316|463)\\d{3,10}|648[34]\\d{3,9}|(?:51|66|73)2\\d{3,10}|(?:2(?:1[467]|2[13-8]|5[2357]|6[1-46-8]|7[1-8]|8[124-7]|9[1458])|3(?:1[1-578]|3[23568]|4[5-7]|5[1378]|6[1-38]|8[3-68])|4(?:2[1-8]|35|7[1368]|8[2457])|5(?:2[1-8]|3[357]|4[147]|5[12578]|6[37])|6(?:13|2[1-47]|4[135-7]|5[468])|7(?:2[1-8]|35|4[13478]|5[68]|6[16-8]|7[1-6]|9[45]))\\d{4,10}",,,,"1234567890",,,,[3]],[,,"6(?:485|(?:5[0-3579]|6[013-9]|[7-9]\\d)\\d)\\d{3,9}",,,,"664123456",,,[7,8,9,10,11,12,13]],[,,"800\\d{6,10}",,,,"800123456",,,[9,10,11,12,13]],[,,"(?:8[69][2-68]|9(?:0[01]|3[019]))\\d{6,10}",,,,"900123456",,,[9,10,11,12,13]],[,,"8(?:10|2[018])\\d{6,10}|828\\d{5}",,,,"810123456",,,[8,9,10,11,12,13]],[,,,,,,,,,[-1]],[,,"5(?:0[1-9]|17|[79]\\d)\\d{2,10}|7[28]0\\d{6,10}",,,,"780123456",,,[5,6,7,8,9,10,11,12,13]],"AT",43,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["14"]],[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{6})","$1",["[18]"]],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[[,"(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],[,"(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],[,"(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],[,"(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AU:[,[,,"1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",,,,,,,[5,6,7,8,9,10,12]],[,,"(?:(?:2(?:(?:[0-26-9]\\d|3[0-8]|5[0135-9])\\d|4(?:[02-9]\\d|10))|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90))|7(?:[013-57-9]\\d|2[0-8])\\d)\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",,,,"212345678",,,[9],[8]],[,,"4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"AU",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"(183[12])|0",,"0011",,[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["13"]],[,"(\\d{3})(\\d{3})","$1 $2",["19"]],[,"(\\d{3})(\\d{4})","$1 $2",["180","1802"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["19"]],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["130"]]],[[,"(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)","$CC ($1)"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],[,,"163\\d{2,6}",,,,"1631234",,,[5,6,7,8,9]],1,,[,,"1(?:3(?:00\\d{5}|45[0-4])|802)\\d{3}|1[38]00\\d{6}|13\\d{4}",,,,,,,[6,7,8,10,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AW:[,[,,"(?:[25-79]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"5(?:2\\d|8[1-9])\\d{4}",,,,"5212345"],[,,"(?:290|5[69]\\d|6(?:[03]0|22|4[0-2]|[69]\\d)|7(?:[34]\\d|7[07])|9(?:6[45]|9[4-8]))\\d{4}",,,,"5601234"],[,,"800\\d{4}",,,,"8001234"],[,,"900\\d{4}",,,,"9001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:28\\d|501)\\d{4}",,,,"5011234"],"AW",297,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],AX:[,[,,"2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"18[1-8]\\d{3,6}",,,,"181234567",,,[6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AX",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,,,[,,,,,,,,,[-1]],,"18",[,,,,,,,,,[-1]],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],AZ:[,[,,"365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",,,,,,,[9],[7]],[,,"(?:2[12]428|3655[02])\\d{4}|(?:2(?:22[0-79]|63[0-28])|3654)\\d{5}|(?:(?:1[28]|46)\\d|2(?:[014-6]2|[23]3))\\d{6}",,,,"123123456",,,,[7]],[,,"36554\\d{4}|(?:[16]0|4[04]|5[015]|7[07]|99)\\d{7}",,,,"401234567"],[,,"88\\d{7}",,,,"881234567"],[,,"900200\\d{3}",,,,"900200123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"AZ",994,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[1-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BA:[,[,,"6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",,,,,,,[8,9],[6]],[,,"(?:3(?:[05-79][2-9]|1[4579]|[23][24-9]|4[2-4689]|8[2457-9])|49[2-579]|5(?:0[2-49]|[13][2-9]|[268][2-4679]|4[4689]|5[2-79]|7[2-69]|9[2-4689]))\\d{5}",,,,"30212345",,,[8],[6]],[,,"6040\\d{5}|6(?:03|[1-356]|44|7\\d)\\d{6}",,,,"61123456"],[,,"8[08]\\d{6}",,,,"80123456",,,[8]],[,,"9[0246]\\d{6}",,,,"90123456",,,[8]],[,,"8[12]\\d{6}",,,,"82123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BA",387,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1-$2",["[2-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"703[235]0\\d{3}|70(?:2[0-5]|3[0146]|[56]0)\\d{4}",,,,"70341234",,,[8]],,,[,,,,,,,,,[-1]]],BB:[,[,,"(?:246|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"246521[0369]\\d{3}|246(?:2(?:2[78]|7[0-4])|4(?:1[024-6]|2\\d|3[2-9])|5(?:20|[34]\\d|54|7[1-3])|6(?:2\\d|38)|7[35]7|9(?:1[89]|63))\\d{4}",,,,"2464123456",,,,[7]],[,,"246(?:(?:2(?:[3568]\\d|4[0-57-9])|3(?:5[2-9]|6[0-6])|4(?:46|5\\d)|69[5-7]|8(?:[2-5]\\d|83))\\d|52(?:1[147]|20))\\d{3}",,,,"2462501234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"(?:246976|900[2-9]\\d\\d)\\d{4}",,,,"9002123456",,,,[7]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"24631\\d{5}",,,,"2463101234",,,,[7]],"BB",1,"011","1",,,"([2-9]\\d{6})$|1","246$1",,,,,[,,,,,,,,,[-1]],,"246",[,,,,,,,,,[-1]],[,,"246(?:292|367|4(?:1[7-9]|3[01]|4[47-9]|67)|7(?:1[2-9]|2\\d|3[016]|53))\\d{4}",,,,"2464301234",,,,[7]],,,[,,,,,,,,,[-1]]],BD:[,[,,"[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",,,,,,,[6,7,8,9,10]],[,,"(?:4(?:31\\d\\d|423)|5222)\\d{3}(?:\\d{2})?|8332[6-9]\\d\\d|(?:3(?:03[56]|224)|4(?:22[25]|653))\\d{3,4}|(?:3(?:42[47]|529|823)|4(?:027|525|65(?:28|8))|562|6257|7(?:1(?:5[3-5]|6[12]|7[156]|89)|22[589]56|32|42675|52(?:[25689](?:56|8)|[347]8)|71(?:6[1267]|75|89)|92374)|82(?:2[59]|32)56|9(?:03[23]56|23(?:256|373)|31|5(?:1|2[4589]56)))\\d{3}|(?:3(?:02[348]|22[35]|324|422)|4(?:22[67]|32[236-9]|6(?:2[46]|5[57])|953)|5526|6(?:024|6655)|81)\\d{4,5}|(?:2(?:7(?:1[0-267]|2[0-289]|3[0-29]|4[01]|5[1-3]|6[013]|7[0178]|91)|8(?:0[125]|1[1-6]|2[0157-9]|3[1-69]|41|6[1-35]|7[1-5]|8[1-8]|9[0-6])|9(?:0[0-2]|1[0-4]|2[568]|3[3-6]|5[5-7]|6[0136-9]|7[0-7]|8[014-9]))|3(?:0(?:2[025-79]|3[2-4])|181|22[12]|32[2356]|824)|4(?:02[09]|22[348]|32[045]|523|6(?:27|54))|666(?:22|53)|7(?:22[57-9]|42[56]|82[35])8|8(?:0[124-9]|2(?:181|2[02-4679]8)|4[12]|[5-7]2)|9(?:[04]2|2(?:2|328)|81))\\d{4}|(?:2(?:[23]\\d|[45])\\d\\d|3(?:1(?:2[5-7]|[5-7])|425|822)|4(?:033|1\\d|[257]1|332|4(?:2[246]|5[25])|6(?:2[35]|56|62)|8(?:23|54)|92[2-5])|5(?:02[03489]|22[457]|32[35-79]|42[46]|6(?:[18]|53)|724|826)|6(?:023|2(?:2[2-5]|5[3-5]|8)|32[3478]|42[34]|52[47]|6(?:[18]|6(?:2[34]|5[24]))|[78]2[2-5]|92[2-6])|7(?:02|21\\d|[3-589]1|6[12]|72[24])|8(?:217|3[12]|[5-7]1)|9[24]1)\\d{5}|(?:(?:3[2-8]|5[2-57-9]|6[03-589])1|4[4689][18])\\d{5}|[59]1\\d{5}",,,,"27111234"],[,,"(?:1[13-9]\\d|644)\\d{7}|(?:3[78]|44|66)[02-9]\\d{7}",,,,"1812345678",,,[10]],[,,"80[03]\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"96(?:0[469]|1[0-47]|3[389]|43|6[69]|7[78])\\d{6}",,,,"9604123456",,,[10]],"BD",880,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],[,"(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],[,"(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BE:[,[,,"4\\d{8}|[1-9]\\d{7}",,,,,,,[8,9]],[,,"80[2-8]\\d{5}|(?:1[0-69]|[23][2-8]|4[23]|5\\d|6[013-57-9]|71|8[1-79]|9[2-4])\\d{6}",,,,"12345678",,,[8]],[,,"4[5-9]\\d{7}",,,,"470123456",,,[9]],[,,"800[1-9]\\d{4}",,,,"80012345",,,[8]],[,,"(?:70(?:2[0-57]|3[04-7]|44|6[04-69]|7[0579])|90\\d\\d)\\d{4}",,,,"90012345",,,[8]],[,,"7879\\d{4}",,,,"78791234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BE",32,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"78(?:0[578]|1[014-8]|2[25]|3[15-8]|48|5[05]|60|7[06-8]|9\\d)\\d{4}",,,,"78102345",,,[8]],,,[,,,,,,,,,[-1]]],BF:[,[,,"(?:[025-7]\\d|44)\\d{6}",,,,,,,[8]],[,,"2(?:0(?:49|5[23]|6[5-7]|9[016-9])|4(?:4[569]|5[4-6]|6[5-7]|7[0179])|5(?:[34]\\d|50|6[5-7]))\\d{4}",,,,"20491234"],[,,"(?:0[1-7]|44|5[0-8]|[67]\\d)\\d{6}",,,,"70123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BF",226,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BG:[,[,,"00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",,,,,,,[6,7,8,9,12],[4,5]],[,,"2\\d{5,7}|(?:43[1-6]|70[1-9])\\d{4,5}|(?:[36]\\d|4[124-7]|[57][1-9]|8[1-6]|9[1-7])\\d{5,6}",,,,"2123456",,,[6,7,8],[4,5]],[,,"(?:43[07-9]|99[69]\\d)\\d{5}|(?:8[7-9]|98)\\d{7}",,,,"43012345",,,[8,9]],[,,"(?:00800\\d\\d|800)\\d{5}",,,,"80012345",,,[8,12]],[,,"90\\d{6}",,,,"90123456",,,[8]],[,,"700\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BG",359,"00","0",,,"0",,,,[[,"(\\d{6})","$1",["1"]],[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BH:[,[,,"[136-9]\\d{7}",,,,,,,[8]],[,,"(?:1(?:3[1356]|6[0156]|7\\d)\\d|6(?:1[16]\\d|500|6(?:0\\d|3[12]|44|55|7[7-9]|88)|9[69][69])|7(?:[07]\\d\\d|1(?:11|78)))\\d{4}",,,,"17001234"],[,,"(?:3(?:[0-79]\\d|8[0-57-9])\\d|6(?:3(?:00|33|6[16])|441|6(?:3[03-9]|[69]\\d|7[0-689])))\\d{4}",,,,"36001234"],[,,"8[02369]\\d{6}",,,,"80123456"],[,,"(?:87|9[0-8])\\d{6}",,,,"90123456"],[,,"84\\d{6}",,,,"84123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BH",973,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BI:[,[,,"(?:[267]\\d|31)\\d{6}",,,,,,,[8]],[,,"(?:22|31)\\d{6}",,,,"22201234"],[,,"(?:29|6[124-9]|7[125-9])\\d{6}",,,,"79561234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BI",257,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BJ:[,[,,"(?:01\\d|[24-689])\\d{7}",,,,,,,[8,10]],[,,"2090\\d{4}|(?:012\\d\\d|2(?:02|1[037]|2[45]|3[68]|4\\d))\\d{5}",,,,"0120211234"],[,,"(?:01(?:2[5-9]|[4-69]\\d)|4[0-8]|[56]\\d|9[013-9])\\d{6}",,,,"0195123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"857[58]\\d{4}",,,,"85751234",,,[8]],"BJ",229,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"81\\d{6}",,,,"81123456",,,[8]],,,[,,,,,,,,,[-1]]],BL:[,[,,"(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}",,,,"590271234"],[,,"(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}",,,,"976012345"],"BL",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BM:[,[,,"(?:441|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"441(?:[46]\\d\\d|5(?:4\\d|60|89))\\d{4}",,,,"4414123456",,,,[7]],[,,"441(?:[2378]\\d|5[0-39]|9[02])\\d{5}",,,,"4413701234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BM",1,"011","1",,,"([2-9]\\d{6})$|1","441$1",,,,,[,,,,,,,,,[-1]],,"441",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BN:[,[,,"[2-578]\\d{6}",,,,,,,[7]],[,,"22[0-7]\\d{4}|(?:2[013-9]|[34]\\d|5[0-25-9])\\d{5}",,,,"2345678"],[,,"(?:22[89]|[78]\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[34]\\d{5}",,,,"5345678"],"BN",673,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BO:[,[,,"8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",,,,,,,[8,9],[7]],[,,"(?:2(?:2\\d\\d|5(?:11|[258]\\d|9[67])|6(?:12|2\\d|9[34])|8(?:2[34]|39|62))|3(?:3\\d\\d|4(?:6\\d|8[24])|8(?:25|42|5[257]|86|9[25])|9(?:[27]\\d|3[2-4]|4[248]|5[24]|6[2-6]))|4(?:4\\d\\d|6(?:11|[24689]\\d|72)))\\d{4}",,,,"22123456",,,[8],[7]],[,,"[67]\\d{7}",,,,"71234567",,,[8]],[,,"8001[07]\\d{4}",,,,"800171234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"50\\d{6}",,,,"50123456",,,[8],[7]],"BO",591,"00(?:1\\d)?","0",,,"0(1\\d)?",,,,[[,"(\\d)(\\d{7})","$1 $2",["[235]|4[46]"],,"0$CC $1"],[,"(\\d{8})","$1",["[67]"],,"0$CC $1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"],,"0$CC $1"]],,[,,,,,,,,,[-1]],,,[,,"8001[07]\\d{4}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BQ:[,[,,"(?:[34]1|7\\d)\\d{5}",,,,,,,[7]],[,,"(?:318[023]|41(?:6[023]|70)|7(?:1[578]|2[05]|50)\\d)\\d{3}",,,,"7151234"],[,,"(?:31(?:8[14-8]|9[14578])|416[14-9]|7(?:0[01]|7[07]|8\\d|9[056])\\d)\\d{3}",,,,"3181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BQ",599,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"[347]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BR:[,[,,"[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",,,,,,,[8,9,10,11]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-5]\\d{7}",,,,"1123456789",,,[10],[8]],[,,"(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])(?:7|9\\d)\\d{7}",,,,"11961234567",,,[10,11],[8,9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"[59]00\\d{6,7}",,,,"500123456",,,[9,10]],[,,"(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|370|864))\\d{4}|300\\d{5}",,,,"40041234",,,[8,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BR",55,"00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","0",,,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2",,,[[,"(\\d{3,6})","$1",["1(?:1[25-8]|2[357-9]|3[02-68]|4[12568]|5|6[0-8]|8[015]|9[0-47-9])|321|610"]],[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],[,"(\\d{4})(\\d{4})","$1-$2",["[2-57]","[2357]|4(?:[0-24-9]|3(?:[0-689]|7[1-9]))"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{5})(\\d{4})","$1-$2",["9"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[[,"(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],[,"(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)","0 $CC ($1)"],[,"(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)","0 $CC ($1)"]],[,,,,,,,,,[-1]],,,[,,"(?:30[03]\\d{3}|4(?:0(?:0\\d|20)|864))\\d{4}|800\\d{6,7}|300\\d{5}",,,,,,,[8,9,10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BS:[,[,,"(?:242|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"242(?:3(?:02|[236][1-9]|4[0-24-9]|5[0-68]|7[347]|8[0-4]|9[2-467])|461|502|6(?:0[1-5]|12|2[013]|[45]0|7[67]|8[78]|9[89])|7(?:02|88))\\d{4}",,,,"2423456789",,,,[7]],[,,"242(?:3(?:5[79]|7[56]|95)|4(?:[23][1-9]|4[1-35-9]|5[1-8]|6[2-8]|7\\d|81)|5(?:2[45]|3[35]|44|5[1-46-9]|65|77)|6[34]6|7(?:27|38)|8(?:0[1-9]|1[02-9]|2\\d|3[0-4]|[89]9))\\d{4}",,,,"2423591234",,,,[7]],[,,"242300\\d{4}|8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,,[7]],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"BS",1,"011","1",,,"([3-8]\\d{6})$|1","242$1",,,,,[,,,,,,,,,[-1]],,"242",[,,,,,,,,,[-1]],[,,"242225\\d{4}",,,,"2422250123"],,,[,,,,,,,,,[-1]]],BT:[,[,,"[178]\\d{7}|[2-8]\\d{6}",,,,,,,[7,8],[6]],[,,"(?:2[3-6]|[34][5-7]|5[236]|6[2-46]|7[246]|8[2-4])\\d{5}",,,,"2345678",,,[7],[6]],[,,"(?:1[67]|[78]7)\\d{6}",,,,"17123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BT",975,"00",,,,,,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BW:[,[,,"(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:2(?:4[0-48]|6[0-24]|9[0578])|3(?:1[0-35-9]|55|[69]\\d|7[013]|81)|4(?:6[03]|7[1267]|9[0-5])|5(?:3[03489]|4[0489]|7[1-47]|88|9[0-49])|6(?:2[1-35]|5[149]|8[013467]))\\d{4}",,,,"2401234",,,[7]],[,,"(?:321|7[1-8]\\d)\\d{5}",,,,"71123456",,,[8]],[,,"(?:0800|800\\d)\\d{6}",,,,"0800012345",,,[10]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"79(?:1(?:[0-2]\\d|3[0-8])|2[0-7]\\d)\\d{3}",,,,"79101234",,,[8]],"BW",267,"00",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["90"]],[,"(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BY:[,[,,"(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:1(?:5(?:1[1-5]|[24]\\d|6[2-4]|9[1-7])|6(?:[235]\\d|4[1-7])|7\\d\\d)|2(?:1(?:[246]\\d|3[0-35-9]|5[1-9])|2(?:[235]\\d|4[0-8])|3(?:[26]\\d|3[02-79]|4[024-7]|5[03-7])))\\d{5}",,,,"152450911",,,[9],[5,6,7]],[,,"(?:2(?:5[5-79]|9[1-9])|(?:33|44)\\d)\\d{6}",,,,"294911911",,,[9]],[,,"800\\d{3,7}|8(?:0[13]|20\\d)\\d{7}",,,,"8011234567"],[,,"(?:810|902)\\d{7}",,,,"9021234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"249\\d{6}",,,,"249123456",,,[9]],"BY",375,"810","8",,,"0|80?",,"8~10",,[[,"(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],[,"(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],[,"(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,"800\\d{3,7}|(?:8(?:0[13]|10|20\\d)|902)\\d{7}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],BZ:[,[,,"(?:0800\\d|[2-8])\\d{6}",,,,,,,[7,11]],[,,"(?:2(?:[02]\\d|36|[68]0)|[3-58](?:[02]\\d|[68]0)|7(?:[02]\\d|32|[68]0))\\d{4}",,,,"2221234",,,[7]],[,,"6[0-35-7]\\d{5}",,,,"6221234",,,[7]],[,,"0800\\d{7}",,,,"08001234123",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"BZ",501,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],[,"(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CA:[,[,,"[2-9]\\d{9}|3\\d{6}",,,,,,,[7,10]],[,,"(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",,,,"5062345678",,,[10],[7]],[,,"(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",,,,"5062345678",,,[10],[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456",,,[10]],[,,"900[2-9]\\d{6}",,,,"9002123456",,,[10]],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",,,,"5219023456",,,[10]],[,,"600[2-9]\\d{6}",,,,"6002012345",,,[10]],"CA",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"310\\d{4}",,,,"3101234",,,[7]],,,[,,,,,,,,,[-1]]],CC:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",,,,"891621234",,,[9],[8]],[,,"4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CC",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"([59]\\d{7})$|0","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CD:[,[,,"(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",,,,,,,[7,8,9,10]],[,,"(?:(?:12|573)\\d\\d|276)\\d{5}|[1-6]\\d{6}",,,,"1234567"],[,,"88\\d{5}|(?:8[0-69]|9[017-9])\\d{7}",,,,"991234567",,,[7,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CD",243,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CF:[,[,,"(?:[27]\\d{3}|8776)\\d{4}",,,,,,,[8]],[,,"2[12]\\d{6}",,,,"21612345"],[,,"7[024-7]\\d{6}",,,,"70012345"],[,,,,,,,,,[-1]],[,,"8776\\d{4}",,,,"87761234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CF",236,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CG:[,[,,"222\\d{6}|(?:0\\d|80)\\d{7}",,,,,,,[9]],[,,"222[1-589]\\d{5}",,,,"222123456"],[,,"026(?:1[0-5]|6[6-9])\\d{4}|0(?:[14-6]\\d\\d|2(?:40|5[5-8]|6[07-9]))\\d{5}",,,,"061234567"],[,,,,,,,,,[-1]],[,,"80[0-2]\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CG",242,"00",,,,,,,,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CH:[,[,,"8\\d{11}|[2-9]\\d{8}",,,,,,,[9,12]],[,,"(?:2[12467]|3[1-4]|4[134]|5[256]|6[12]|[7-9]1)\\d{7}",,,,"212345678",,,[9]],[,,"(?:6[89]|7[235-9])\\d{7}",,,,"781234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[016]\\d{6}",,,,"900123456",,,[9]],[,,"84[0248]\\d{6}",,,,"840123456",,,[9]],[,,"878\\d{6}",,,,"878123456",,,[9]],[,,,,,,,,,[-1]],"CH",41,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],,[,,"74[0248]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"5[18]\\d{7}",,,,"581234567",,,[9]],,,[,,"860\\d{9}",,,,"860123456789",,,[12]]],CI:[,[,,"[02]\\d{9}",,,,,,,[10]],[,,"2(?:[15]\\d{3}|7(?:2(?:0[23]|1[2357]|2[245]|3[45]|4[3-5])|3(?:06|1[69]|[2-6]7)))\\d{5}",,,,"2123456789"],[,,"0[157]\\d{8}",,,,"0123456789"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CI",225,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CK:[,[,,"[2-578]\\d{4}",,,,,,,[5]],[,,"(?:2\\d|3[13-7]|4[1-5])\\d{3}",,,,"21234"],[,,"[578]\\d{4}",,,,"71234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CK",682,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CL:[,[,,"12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",,,,,,,[9,10,11]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|2\\d{3}|3(?:(?:2\\d|50)\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-389]|9[0-8])|600)|646[59])|(?:(?:3[2-5]|[47][1-35]|5[1-3578])\\d|6(?:00|[13-57]\\d)|8(?:0[1-9]|[1-9]\\d))\\d\\d|9(?:(?:10[01]|(?:[2458]\\d|7[1-9])\\d)\\d|3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}",,,,"600123456",,,[9]],[,,"2(?:1982[0-6]|3314[05-9])\\d{3}|(?:2(?:1(?:160|962)|2\\d{3}|3(?:(?:2\\d|50)\\d|3(?:[03467]\\d|1[0-35-9]|2[1-9]|5[0-24-9]|8[0-389]|9[0-8])|600)|646[59])|(?:(?:3[2-5]|[47][1-35]|5[1-3578]|6[13-57])\\d|8(?:0[1-8]|[1-9]\\d))\\d\\d|9(?:(?:10[01]|(?:[2458]\\d|7[1-9])\\d)\\d|3(?:[0-57-9]\\d\\d|6(?:0[02-9]|[1-9]\\d))|6(?:[0-8]\\d\\d|9(?:[02-79]\\d|1[05-9]))|9(?:[03-9]\\d\\d|1(?:[0235-9]\\d|4[0-24-9])|2(?:[0-79]\\d|8[0-46-9]))))\\d{4}",,,,"221234567",,,[9]],[,,"(?:123|8)00\\d{6}",,,,"800123456",,,[9,11]],[,,,,,,,,,[-1]],[,,"600\\d{7,8}",,,,"6001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,"44\\d{7}",,,,"441234567",,,[9]],"CL",56,"(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0",,,,,,,,[[,"(\\d{4})","$1",["1(?:[03-589]|21)|[29]0|78"]],[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[[,"(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]],[,,,,,,,,,[-1]],,,[,,"600\\d{7,8}",,,,,,,[10,11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CM:[,[,,"[26]\\d{8}|88\\d{6,7}",,,,,,,[8,9]],[,,"2(?:22|33)\\d{6}",,,,"222123456",,,[9]],[,,"(?:24[23]|6(?:[25-9]\\d|40))\\d{6}",,,,"671234567",,,[9]],[,,"88\\d{6,7}",,,,"88012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CM",237,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CN:[,[,,"(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",,,,,,,[7,8,9,10,11,12],[5,6]],[,,"(?:10(?:[02-79]\\d\\d|[18](?:0[1-9]|[1-9]\\d))|2(?:[02-57-9]\\d{3}|1(?:[18](?:0[1-9]|[1-9]\\d)|[2-79]\\d\\d))|(?:41[03]|8078|9(?:78|94))\\d\\d)\\d{5}|(?:10|2[0-57-9])(?:1(?:00|23)\\d\\d|95\\d{3,4})|(?:41[03]|9(?:78|94))(?:100\\d\\d|95\\d{3,4})|8078123|(?:43[35]|754|851)\\d{7,8}|(?:43[35]|754|851)(?:1(?:00\\d|23)\\d|95\\d{3,4})|(?:3(?:11|7[179])|4(?:[15]1|3[12])|5(?:1\\d|2[37]|3[12]|51|7[13-79]|9[15])|7(?:[39]1|5[57]|6[09])|8(?:71|98))(?:[02-8]\\d{7}|1(?:0(?:0\\d\\d(?:\\d{3})?|[1-9]\\d{5})|[13-9]\\d{6}|2(?:[0-24-9]\\d{5}|3\\d(?:\\d{4})?))|9(?:[0-46-9]\\d{6}|5\\d{3}(?:\\d(?:\\d{2})?)?))|(?:3(?:1[02-9]|35|49|5\\d|7[02-68]|9[1-68])|4(?:1[24-9]|2[179]|3[46-9]|5[2-9]|6[47-9]|7\\d|8[23])|5(?:3[03-9]|4[36]|5[02-9]|6[1-46]|7[028]|80|9[2-46-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[17]\\d|2[248]|3[04-9]|4[3-6]|5[0-3689]|6[2368]|9[02-9])|8(?:1[236-8]|2[5-7]|3\\d|5[2-9]|7[02-9]|8[36-8]|9[1-7])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))(?:[02-8]\\d{6}|1(?:0(?:0\\d\\d(?:\\d{2})?|[1-9]\\d{4})|[13-9]\\d{5}|2(?:[0-24-9]\\d{4}|3\\d(?:\\d{3})?))|9(?:[0-46-9]\\d{5}|5\\d{3,5}))",,,,"1012345678",,,[7,8,9,10,11],[5,6]],[,,"1740[0-5]\\d{6}|1(?:[38]\\d|4[57]|[59][0-35-9]|6[25-7]|7[0-35-8])\\d{8}",,,,"13123456789",,,[11]],[,,"(?:(?:10|21)8|8)00\\d{7}",,,,"8001234567",,,[10,12]],[,,"16[08]\\d{5}",,,,"16812345",,,[8]],[,,"10(?:10\\d{4}|96\\d{3,4})|400\\d{7}|950\\d{7,8}|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))96\\d{3,4}",,,,"4001234567",,,[7,8,9,10,11],[5,6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CN",86,"00|1(?:[12]\\d|79)\\d\\d00","0",,,"(1(?:[12]\\d|79)\\d\\d)|0",,"00",,[[,"(\\d{5,6})","$1",["1(?:00|2[13])|9[56]","1(?:00|2(?:1|39))|9[56]","1(?:00|2(?:1|395))|9[56]"]],[,"(\\d{5,6})","$1",["1(?:0|23)|781|[1-9]12","1(?:0|23)|7812|[1-9]123","1(?:0|23(?:[0-8]|9[0-46-9]))|78123|[1-9]123"]],[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1","$CC $1"],[,"(\\d{3})(\\d{4})","$1 $2",["[1-9]","1[1-9]|26|[3-9]|(?:10|2[0-57-9])(?:[0-8]|9[0-47-9])","1(?:0(?:[02-8]|1(?:[013-9]|2[0-24-9])|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[02-8]|1(?:0[1-9]|[13-9]|2[0-24-9])|9[0-47-9])|6)|[3-9]","1(?:0(?:[02-8]|1(?:[013-9]|2[0-24-9])|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[02-8]|1(?:0[1-9]|[13-9]|2[0-24-9])|9[0-47-9])|6)|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|1[03]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|8[1-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9]|78|94)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))(?:[02-9]|1(?:[013-9]|2[0-24-9]))","1(?:0(?:[02-8]|1(?:[013-9]|2[0-24-9])|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[02-8]|1(?:0[1-9]|[13-9]|2[0-24-9])|9[0-47-9])|6)|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|1[03]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|8[1-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:0(?:[0-689]|7[0-79])|1[01459]|2[0-489]|[46]|50|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9]|78|94)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))(?:[02-9]|1(?:[013-9]|2[0-24-9]))"]],[,"(\\d{4})(\\d{4})","$1 $2",["16[08]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]","1(?:0(?:[02-8]|1[1-9]|9[0-47-9])|[1-9])|2(?:[0-57-9](?:[0-8]|9[0-47-9])|6)|[3-9]","1(?:0(?:[02-8]|1[1-9]|9[0-47-9])|[1-9])|26|3(?:[0268]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|8[1-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23][0-8])|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:33|85[23]9)[0-46-9]|(?:2[0-57-9]|3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[0-8]|9[0-47-9])","1(?:0[02-8]|[1-9])|2(?:[0-57-9][0-8]|6)|3(?:[0268]|3[0-46-9]|4[0-8]|9[079])|4(?:[049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(?:0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6(?:[0-24578]|3[06-9]|6[14-79]|9[03-9])|7(?:0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8(?:[046]|1[01459]|2[0-489]|5(?:0|[23](?:[02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(?:0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(?:10|2[0-57-9])9[0-47-9]|(?:101|58|85[23]10)[1-9]|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:[02-8]|1(?:0[1-9]|[1-9])|9[0-47-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[[,"(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1","$CC $1"],[,"(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1","$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{7,8})","$1 $2",["9"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1","$CC $1",1],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"],,"$CC $1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"(?:(?:10|21)8|[48])00\\d{7}|950\\d{7,8}",,,,,,,[10,11,12]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CO:[,[,,"(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",,,,,,,[8,10,11],[4,7]],[,,"601055(?:[0-4]\\d|50)\\d\\d|6010(?:[0-4]\\d|5[0-4])\\d{4}|(?:46|60(?:[18][1-9]|[24-7][2-9]))\\d{6}",,,,"6012345678",,,[8,10],[4,7]],[,,"333301[0-5]\\d{3}|3333(?:00|2[5-9]|[3-9]\\d)\\d{4}|(?:3(?:(?:0[0-5]|1\\d|5[01]|70)\\d|2(?:[0-3]\\d|4[1-9])|3(?:00|3[0-24-9]))|9(?:101|408))\\d{6}",,,,"3211234567",,,[10]],[,,"1800\\d{7}",,,,"18001234567",,,[11]],[,,"(?:19(?:0[01]|4[78])|901)\\d{7}",,,,"19001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CO",57,"00(?:4(?:[14]4|56)|[579])","0",,,"0([3579]|4(?:[14]4|56))?",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["46"]],[,"(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1"]],[[,"(\\d{4})(\\d{4})","$1 $2",["46"]],[,"(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)","0$CC $1"],[,"(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"],,"0$CC $1"],[,"(\\d)(\\d{3})(\\d{7})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CR:[,[,,"(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",,,,,,,[8,10]],[,,"210[7-9]\\d{4}|2(?:[024-7]\\d|1[1-9])\\d{5}",,,,"22123456",,,[8]],[,,"(?:3005\\d|6500[01])\\d{3}|(?:5[07]|6[0-4]|7[0-3]|8[3-9])\\d{6}",,,,"83123456",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"90[059]\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:210[0-6]|4\\d{3}|5100)\\d{4}",,,,"40001234",,,[8]],"CR",506,"00",,,,"(19(?:0[0-2468]|1[09]|20|66|77|99))",,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CU:[,[,,"(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",,,,,,,[6,7,8,10],[4,5]],[,,"(?:3[23]|4[89])\\d{4,6}|(?:31|4[36]|8(?:0[25]|78)\\d)\\d{6}|(?:2[1-4]|4[1257]|7\\d)\\d{5,6}",,,,"71234567",,,,[4,5]],[,,"(?:5\\d|6[2-4])\\d{6}",,,,"51234567",,,[8]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,,,,,,,,[-1]],[,,"807\\d{7}",,,,"8071234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CU",53,"119","0",,,"0",,,,[[,"(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],[,"(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],[,"(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CV:[,[,,"(?:[2-59]\\d\\d|800)\\d{4}",,,,,,,[7]],[,,"2(?:2[1-7]|3[0-8]|4[12]|5[1256]|6\\d|7[1-3]|8[1-5])\\d{4}",,,,"2211234"],[,,"(?:36|5[1-389]|9\\d)\\d{5}",,,,"9911234"],[,,"800\\d{4}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[3-5]|4[356])\\d{5}",,,,"3401234"],"CV",238,"0",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CW:[,[,,"(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",,,,,,,[7,8]],[,,"9(?:4(?:3[0-5]|4[14]|6\\d)|50\\d|7(?:2[014]|3[02-9]|4[4-9]|6[357]|77|8[7-9])|8(?:3[39]|[46]\\d|7[01]|8[57-9]))\\d{4}",,,,"94351234"],[,,"953[01]\\d{4}|9(?:5[12467]|6[5-9])\\d{5}",,,,"95181234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"60[0-2]\\d{4}",,,,"6001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"CW",599,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[3467]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],,[,,"955\\d{5}",,,,"95581234",,,[8]],1,"[69]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CX:[,[,,"1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",,,,,,,[6,7,8,9,10,12]],[,,"8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",,,,"891641234",,,[9],[8]],[,,"4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",,,,"412345678",,,[9]],[,,"180(?:0\\d{3}|2)\\d{3}",,,,"1800123456",,,[7,10]],[,,"190[0-26]\\d{6}",,,,"1900123456",,,[10]],[,,"13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",,,,"1300123456",,,[6,8,10,12]],[,,,,,,,,,[-1]],[,,"14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",,,,"147101234",,,[9]],"CX",61,"001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","0",,,"([59]\\d{7})$|0","8$1","0011",,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],CY:[,[,,"(?:[279]\\d|[58]0)\\d{6}",,,,,,,[8]],[,,"2[2-6]\\d{6}",,,,"22345678"],[,,"9(?:10|[4-79]\\d)\\d{5}",,,,"96123456"],[,,"800\\d{5}",,,,"80001234"],[,,"90[09]\\d{5}",,,,"90012345"],[,,"80[1-9]\\d{5}",,,,"80112345"],[,,"700\\d{5}",,,,"70012345"],[,,,,,,,,,[-1]],"CY",357,"00",,,,,,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:50|77)\\d{6}",,,,"77123456"],,,[,,,,,,,,,[-1]]],CZ:[,[,,"(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",,,,,,,[9,10,11,12]],[,,"(?:2\\d|3[1257-9]|4[16-9]|5[13-9])\\d{7}",,,,"212345678",,,[9]],[,,"7(?:060\\d|19(?:[0-5]\\d|6[0-6]))\\d{4}|(?:60[1-8]|7(?:0[2-5]|[2379]\\d))\\d{6}",,,,"601123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:0[05689]|76)\\d{6}",,,,"900123456",,,[9]],[,,"8[134]\\d{7}",,,,"811234567",,,[9]],[,,"70[01]\\d{6}",,,,"700123456",,,[9]],[,,"9[17]0\\d{6}",,,,"910123456",,,[9]],"CZ",420,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"9(?:5\\d|7[2-4])\\d{6}",,,,"972123456",,,[9]],,,[,,"9(?:3\\d{9}|6\\d{7,10})",,,,"93123456789"]],DE:[,[,,"[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",,,,,,,[4,5,6,7,8,9,10,11,12,13,14,15],[2,3]],[,,"32\\d{9,11}|49[1-6]\\d{10}|322\\d{6}|49[0-7]\\d{3,9}|(?:[34]0|[68]9)\\d{3,13}|(?:2(?:0[1-689]|[1-3569]\\d|4[0-8]|7[1-7]|8[0-7])|3(?:[3569]\\d|4[0-79]|7[1-7]|8[1-8])|4(?:1[02-9]|[2-48]\\d|5[0-6]|6[0-8]|7[0-79])|5(?:0[2-8]|[124-6]\\d|[38][0-8]|[79][0-7])|6(?:0[02-9]|[1-358]\\d|[47][0-8]|6[1-9])|7(?:0[2-8]|1[1-9]|[27][0-7]|3\\d|[4-6][0-8]|8[0-5]|9[013-7])|8(?:0[2-9]|1[0-79]|2\\d|3[0-46-9]|4[0-6]|5[013-9]|6[1-8]|7[0-8]|8[0-24-6])|9(?:0[6-9]|[1-4]\\d|[589][0-7]|6[0-8]|7[0-467]))\\d{3,12}",,,,"30123456",,,[5,6,7,8,9,10,11,12,13,14,15],[2,3,4]],[,,"1(?:(?:5(?:[0-25-9]\\d\\d|3(?:10|33))|7[26-9]\\d\\d)\\d{6}|6[023]\\d{7,8})|17\\d{8}",,,,"15123456789",,,[10,11]],[,,"800\\d{7,12}",,,,"8001234567890",,,[10,11,12,13,14,15]],[,,"(?:137[7-9]|900(?:[135]|9\\d))\\d{6}",,,,"9001234567",,,[10,11]],[,,"180\\d{5,11}|13(?:7[1-6]\\d\\d|8)\\d{4}",,,,"18012345",,,[7,8,9,10,11,12,13,14]],[,,"700\\d{8}",,,,"70012345678",,,[11]],[,,,,,,,,,[-1]],"DE",49,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{6})","$1",["227","2277"]],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],[[,"(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],[,"(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],[,"(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],[,"(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],[,"(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],[,"(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],[,"(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],[,"(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],[,"(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],[,"(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],[,"(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],[,,"16(?:4\\d{1,10}|[89]\\d{1,11})",,,,"16412345",,,[4,5,6,7,8,9,10,11,12,13,14]],,,[,,,,,,,,,[-1]],[,,"18(?:1\\d{5,11}|[2-9]\\d{8})",,,,"18500123456",,,[8,9,10,11,12,13,14]],,,[,,"1(?:6(?:013|255|399)|7(?:(?:[015]1|[69]3)3|[2-4]55|[78]99))\\d{7,8}|15(?:(?:[03-68]00|113)\\d|2\\d55|7\\d99|9\\d33)\\d{7}",,,,"177991234567",,,[12,13]]],DJ:[,[,,"(?:2\\d|77)\\d{6}",,,,,,,[8]],[,,"2(?:1[2-5]|7[45])\\d{5}",,,,"21360003"],[,,"77\\d{6}",,,,"77831001"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DJ",253,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DK:[,[,,"[2-9]\\d{7}",,,,,,,[8]],[,,"(?:2(?:[0-59][1-9]|[6-8]\\d)|3(?:[0-3][1-9]|4[13]|5[1-58]|6[1347-9]|7\\d|8[1-8]|9[1-79])|4(?:[0-25][1-9]|[34][2-9]|6[13-579]|7[13579]|8[1-47]|9[127])|5(?:[0-36][1-9]|4[146-9]|5[3-57-9]|7[568]|8[1-358]|9[1-69])|6(?:[0135][1-9]|2[1-68]|4[2-8]|6[1689]|[78]\\d|9[15689])|7(?:[0-69][1-9]|7[3-9]|8[147])|8(?:[16-9][1-9]|2[1-58])|9(?:[1-47-9][1-9]|6\\d))\\d{5}",,,,"32123456"],[,,"(?:2[6-8]|37|6[78]|96)\\d{6}|(?:2[0-59]|3[0-689]|[457]\\d|6[0-69]|8[126-9]|9[1-47-9])[1-9]\\d{5}",,,,"34412345"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"DK",45,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DM:[,[,,"(?:[58]\\d\\d|767|900)\\d{7}",,,,,,,[10],[7]],[,,"767(?:2(?:55|66)|4(?:2[01]|4[0-25-9])|50[0-4])\\d{4}",,,,"7674201234",,,,[7]],[,,"767(?:2(?:[2-4689]5|7[5-7])|31[5-7]|61[1-8]|70[1-6])\\d{4}",,,,"7672251234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DM",1,"011","1",,,"([2-7]\\d{6})$|1","767$1",,,,,[,,,,,,,,,[-1]],,"767",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DO:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"8(?:[04]9[2-9]\\d\\d|29(?:2(?:[0-59]\\d|6[04-9]|7[0-27]|8[0237-9])|3(?:[0-35-9]\\d|4[7-9])|[45]\\d\\d|6(?:[0-27-9]\\d|[3-5][1-9]|6[0135-8])|7(?:0[013-9]|[1-37]\\d|4[1-35689]|5[1-4689]|6[1-57-9]|8[1-79]|9[1-8])|8(?:0[146-9]|1[0-48]|[248]\\d|3[1-79]|5[01589]|6[013-68]|7[124-8]|9[0-8])|9(?:[0-24]\\d|3[02-46-9]|5[0-79]|60|7[0169]|8[57-9]|9[02-9])))\\d{4}",,,,"8092345678",,,,[7]],[,,"8[024]9[2-9]\\d{6}",,,,"8092345678",,,,[7]],[,,"800(?:14|[2-9]\\d)\\d{5}|8[024]9[01]\\d{6}|8(?:33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"DO",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"8001|8[024]9",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],DZ:[,[,,"(?:[1-4]|[5-79]\\d|80)\\d{7}",,,,,,,[8,9]],[,,"9619\\d{5}|(?:1\\d|2[013-79]|3[0-8]|4[013-689])\\d{6}",,,,"12345678"],[,,"(?:5(?:4[0-29]|5\\d|6[0-3])|6(?:[569]\\d|7[0-6])|7[7-9]\\d)\\d{6}",,,,"551234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"80[3-689]1\\d{5}",,,,"808123456",,,[9]],[,,"80[12]1\\d{5}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,"98[23]\\d{6}",,,,"983123456",,,[9]],"DZ",213,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EC:[,[,,"1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",,,,,,,[8,9,10,11],[7]],[,,"[2-7][2-7]\\d{6}",,,,"22123456",,,[8],[7]],[,,"964[0-2]\\d{5}|9(?:39|[57][89]|6[0-36-9]|[89]\\d)\\d{6}",,,,"991234567",,,[9]],[,,"1800\\d{7}|1[78]00\\d{6}",,,,"18001234567",,,[10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[2-7]890\\d{4}",,,,"28901234",,,[8]],"EC",593,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-7]"]],[,"(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-7]"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EE:[,[,,"8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",,,,,,,[7,8,10]],[,,"(?:3[23589]|4[3-8]|6\\d|7[1-9]|88)\\d{5}",,,,"3212345",,,[7]],[,,"(?:5\\d{5}|8(?:1(?:0(?:0(?:00|[178]\\d)|[3-9]\\d\\d)|(?:1(?:0[2-6]|1\\d)|(?:2[0-59]|[3-79]\\d)\\d)\\d)|2(?:0(?:0(?:00|4\\d)|(?:19|[2-7]\\d)\\d)|(?:(?:[124-69]\\d|3[5-9])\\d|7(?:[0-79]\\d|8[13-9])|8(?:[2-6]\\d|7[01]))\\d)|[349]\\d{4}))\\d\\d|5(?:(?:[02]\\d|5[0-478])\\d|1(?:[0-8]\\d|95)|6(?:4[0-4]|5[1-589]))\\d{3}",,,,"51234567",,,[7,8]],[,,"800(?:(?:0\\d\\d|1)\\d|[2-9])\\d{3}",,,,"80012345"],[,,"(?:40\\d\\d|900)\\d{4}",,,,"9001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"70[0-2]\\d{5}",,,,"70012345",,,[8]],[,,,,,,,,,[-1]],"EE",372,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],[,"(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,"800[2-9]\\d{3}",,,,,,,[7]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EG:[,[,,"[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"13[23]\\d{6}|(?:15|57)\\d{6,7}|(?:2\\d|3|4[05-8]|5[05]|6[24-689]|8[2468]|9[235-7])\\d{7}",,,,"234567890",,,[8,9],[6,7]],[,,"1[0-25]\\d{8}",,,,"1001234567",,,[10]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"EG",20,"00","0",,,"0",,,,[[,"(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],[,"(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],EH:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"528[89]\\d{5}",,,,"528812345"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-5]|8[0-7]))\\d{6}",,,,"650123456"],[,,"80[0-7]\\d{6}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}",,,,"592401234"],"EH",212,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,"528[89]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ER:[,[,,"[178]\\d{6}",,,,,,,[7],[6]],[,,"(?:1(?:1[12568]|[24]0|55|6[146])|8\\d\\d)\\d{4}",,,,"8370362",,,,[6]],[,,"(?:17[1-3]|7\\d\\d)\\d{4}",,,,"7123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ER",291,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ES:[,[,,"[5-9]\\d{8}",,,,,,,[9]],[,,"96906(?:0[0-8]|1[1-9]|[2-9]\\d)\\d\\d|9(?:69(?:0[0-57-9]|[1-9]\\d)|73(?:[0-8]\\d|9[1-9]))\\d{4}|(?:8(?:[1356]\\d|[28][0-8]|[47][1-9])|9(?:[135]\\d|[268][0-8]|4[1-9]|7[124-9]))\\d{6}",,,,"810123456"],[,,"96906(?:09|10)\\d\\d|(?:590(?:10[0-2]|600)|97390\\d)\\d{3}|(?:6\\d|7[1-48])\\d{7}",,,,"612345678"],[,,"[89]00\\d{6}",,,,"800123456"],[,,"80[367]\\d{6}",,,,"803123456"],[,,"90[12]\\d{6}",,,,"901123456"],[,,"70\\d{7}",,,,"701234567"],[,,,,,,,,,[-1]],"ES",34,"00",,,,,,,,[[,"(\\d{4})","$1",["905"]],[,"(\\d{6})","$1",["[79]9"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"51\\d{7}",,,,"511234567"],,,[,,,,,,,,,[-1]]],ET:[,[,,"(?:11|[2-579]\\d)\\d{7}",,,,,,,[9],[7]],[,,"11667[01]\\d{3}|(?:11(?:1(?:1[1-468]|2[2-7]|3[1-5]|5[5-8]|8[6-8])|2(?:13|3[6-8]|5[89]|7[05-9]|8[2-6])|3(?:2[01]|3[0-289]|4[1289]|7[1-4]|87)|4(?:1[69]|3[2-49]|4[0-3]|6[5-8]|7\\d)|5(?:1[578]|44|5[0-4])|6(?:1[578]|2[69]|39|4[5-7]|5[0-5]|6[0-59]|8[015-8]))|2(?:2(?:11[1-9]|22[0-7]|33\\d|44[1467]|66[1-68])|5(?:11[124-6]|33[2-8]|44[1467]|55[14]|66[1-3679]|77[124-79]|880))|3(?:3(?:11[0-46-8]|(?:22|55)[0-6]|33[0134689]|44[04]|66[01467])|4(?:44[0-8]|55[0-69]|66[0-3]|77[1-5]))|4(?:6(?:119|22[0-24-7]|33[1-5]|44[13-69]|55[14-689]|660|88[1-4])|7(?:(?:11|22)[1-9]|33[13-7]|44[13-6]|55[1-689]))|5(?:7(?:227|55[05]|(?:66|77)[14-8])|8(?:11[149]|22[013-79]|33[0-68]|44[013-8]|550|66[1-5]|77\\d)))\\d{4}",,,,"111112345",,,,[7]],[,,"700[1-9]\\d{5}|(?:7(?:0[1-9]|1[0-8]|22|77|86|99)|9\\d\\d)\\d{6}",,,,"911234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ET",251,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FI:[,[,,"[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",,,,,,,[5,6,7,8,9,10,11,12]],[,,"1[3-7][1-8]\\d{3,6}|(?:19[1-8]|[23568][1-8]\\d|9(?:00|[1-8]\\d))\\d{2,6}",,,,"131234567",,,[5,6,7,8,9]],[,,"4946\\d{2,6}|(?:4[0-8]|50)\\d{4,8}",,,,"412345678",,,[6,7,8,9,10]],[,,"800\\d{4,6}",,,,"800123456",,,[7,8,9]],[,,"[67]00\\d{5,6}",,,,"600123456",,,[8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FI",358,"00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","0",,,"0",,"00",,[[,"(\\d{5})","$1",["75[12]"],"0$1"],[,"(\\d{5})","$1",["20[2-59]"],"0$1"],[,"(\\d{6})","$1",["11"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],[[,"(\\d{5})","$1",["20[2-59]"],"0$1"],[,"(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],[,"(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],[,"(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],[,"(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],[,,,,,,,,,[-1]],1,"1[03-79]|[2-9]",[,,"20(?:2[023]|9[89])\\d{1,6}|(?:60[12]\\d|7099)\\d{4,5}|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:[1-3]00|7(?:0[1-5]\\d\\d|5[03-9]))\\d{3,7}"],[,,"20\\d{4,8}|60[12]\\d{5,6}|7(?:099\\d{4,5}|5[03-9]\\d{3,7})|20[2-59]\\d\\d|(?:606|7(?:0[78]|1|3\\d))\\d{7}|(?:10|29|3[09]|70[1-5]\\d)\\d{4,8}",,,,"10112345"],,,[,,,,,,,,,[-1]]],FJ:[,[,,"45\\d{5}|(?:0800\\d|[235-9])\\d{6}",,,,,,,[7,11]],[,,"603\\d{4}|(?:3[0-5]|6[25-7]|8[58])\\d{5}",,,,"3212345",,,[7]],[,,"(?:[279]\\d|45|5[01568]|8[034679])\\d{5}",,,,"7012345",,,[7]],[,,"0800\\d{7}",,,,"08001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FJ",679,"0(?:0|52)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FK:[,[,,"[2-7]\\d{4}",,,,,,,[5]],[,,"[2-47]\\d{4}",,,,"31234"],[,,"[56]\\d{4}",,,,"51234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FK",500,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FM:[,[,,"(?:[39]\\d\\d|820)\\d{4}",,,,,,,[7]],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-6]\\d)\\d)\\d{3}",,,,"3201234"],[,,"31(?:00[67]|208|309)\\d\\d|(?:3(?:[2357]0[1-9]|602|804|905)|(?:820|9[2-7]\\d)\\d)\\d{3}",,,,"3501234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"FM",691,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[389]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FO:[,[,,"[2-9]\\d{5}",,,,,,,[6]],[,,"(?:20|[34]\\d|8[19])\\d{4}",,,,"201234"],[,,"(?:[27][1-9]|5\\d|9[16])\\d{4}",,,,"211234"],[,,"80[257-9]\\d{3}",,,,"802123"],[,,"90(?:[13-5][15-7]|2[125-7]|9\\d)\\d\\d",,,,"901123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:6[0-36]|88)\\d{4}",,,,"601234"],"FO",298,"00",,,,"(10(?:01|[12]0|88))",,,,[[,"(\\d{6})","$1",["[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],FR:[,[,,"[1-9]\\d{8}",,,,,,,[9]],[,,"(?:26[013-9]|59[1-35-9])\\d{6}|(?:[13]\\d|2[0-57-9]|4[1-9]|5[0-8])\\d{7}",,,,"123456789"],[,,"(?:6(?:[0-24-8]\\d|3[0-8]|9[589])|7[3-9]\\d)\\d{6}",,,,"612345678"],[,,"80[0-5]\\d{6}",,,,"801234567"],[,,"836(?:0[0-36-9]|[1-9]\\d)\\d{4}|8(?:1[2-9]|2[2-47-9]|3[0-57-9]|[569]\\d|8[0-35-9])\\d{6}",,,,"891123456"],[,,"8(?:1[01]|2[0156]|4[024]|84)\\d{6}",,,,"884012345"],[,,,,,,,,,[-1]],[,,"9\\d{8}",,,,"912345678"],"FR",33,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["10"]],[,"(\\d{3})(\\d{3})","$1 $2",["1"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"80[6-9]\\d{6}",,,,"806123456"],,,[,,,,,,,,,[-1]]],GA:[,[,,"(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",,,,,,,[7,8]],[,,"[01]1\\d{6}",,,,"01441234",,,[8]],[,,"(?:(?:0[2-7]|7[467])\\d|6(?:0[0-4]|10|[256]\\d))\\d{5}|[2-7]\\d{6}",,,,"06031234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GA",241,"00",,,,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1",,,[[,"(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GB:[,[,,"[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",,,,,,,[7,9,10],[4,5,6,8]],[,,"(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",,,,"1212345678",,,[9,10],[4,5,6,7,8]],[,,"7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",,,,"7400123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GB",44,"00","0"," x",,"0|180020",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],1,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GD:[,[,,"(?:473|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"473(?:2(?:3[0-2]|69)|3(?:2[89]|86)|4(?:[06]8|3[5-9]|4[0-4]|5[59]|73|90)|63[68]|7(?:58|84)|800|938)\\d{4}",,,,"4732691234",,,,[7]],[,,"473(?:4(?:0[2-79]|1[04-9]|2[0-5]|49|5[6-8])|5(?:2[01]|3[3-8])|901)\\d{4}",,,,"4734031234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GD",1,"011","1",,,"([2-9]\\d{6})$|1","473$1",,,,,[,,,,,,,,,[-1]],,"473",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GE:[,[,,"(?:[3-57]\\d\\d|800)\\d{6}",,,,,,,[9],[6,7]],[,,"(?:3(?:[256]\\d|4[124-9]|7[0-4])|4(?:1\\d|2[2-7]|3[1-79]|4[2-8]|7[239]|9[1-7]))\\d{6}",,,,"322123456",,,,[6,7]],[,,"5(?:(?:(?:0555|1(?:[17]77|555))[5-9]|757(?:7[7-9]|8[01]))\\d|22252[0-4])\\d\\d|5(?:0(?:0[17]0|505)|1(?:0[01]0|1(?:07|33|51))|2(?:0[02]0|2[25]2)|3(?:0[03]0|3[35]3)|(?:40[04]|900)0|5222)[0-4]\\d{3}|(?:5(?:0(?:0(?:0\\d|1[12]|22|3[0-6]|44|5[05]|77|88|9[09])|(?:[14]\\d|77)\\d|22[02])|1(?:1(?:[03][01]|[124]\\d|5[2-6]|7[0-4])|4\\d\\d)|[23]555|4(?:4\\d\\d|555)|5(?:[0157-9]\\d\\d|200|333|444)|6[89]\\d\\d|7(?:(?:[0147-9]\\d|22)\\d|5(?:00|[57]5))|8(?:0(?:[018]\\d|2[0-4])|5(?:55|8[89])|8(?:55|88))|9(?:090|[1-35-9]\\d\\d))|790\\d\\d)\\d{4}",,,,"555123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70[67]\\d{6}",,,,"706123456"],"GE",995,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"70[67]\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GF:[,[,,"(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",,,,,,,[9]],[,,"594(?:[02-49]\\d|1[0-5]|5[6-9]|6[0-3]|80)\\d{4}",,,,"594101234"],[,,"(?:694(?:[0-249]\\d|3[0-8])|7093[0-3])\\d{4}",,,,"694201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:396|76\\d)\\d|476[0-6])\\d{4}",,,,"976012345"],"GF",594,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GG:[,[,,"(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",,,,,,,[7,9,10],[6]],[,,"1481[25-9]\\d{5}",,,,"1481256789",,,[10],[6]],[,,"7(?:(?:781|839)\\d|911[17])\\d{5}",,,,"7781123456",,,[10]],[,,"80[08]\\d{7}|800\\d{6}|8001111",,,,"8001234567"],[,,"(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",,,,"9012345678",,,[7,10]],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,"56\\d{8}",,,,"5612345678",,,[10]],"GG",44,"00","0",,,"([25-9]\\d{5})$|0|180020","1481$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456",,,[10]],,,[,,,,,,,,,[-1]],[,,"(?:3[0347]|55)\\d{8}",,,,"5512345678",,,[10]],,,[,,,,,,,,,[-1]]],GH:[,[,,"(?:[235]\\d{3}|800)\\d{5}",,,,,,,[8,9],[7]],[,,"3082[0-5]\\d{4}|3(?:0(?:[237]\\d|8[01])|[167](?:2[0-6]|7\\d|80)|2(?:2[0-5]|7\\d|80)|3(?:2[0-3]|7\\d|80)|4(?:2[013-9]|3[01]|7\\d|80)|5(?:2[0-7]|7\\d|80)|8(?:2[0-2]|7\\d|80)|9(?:[28]0|7\\d))\\d{5}",,,,"302345678",,,[9],[7]],[,,"(?:2(?:[0346-9]\\d|5[67])|5(?:[03-7]\\d|9[1-9]))\\d{6}",,,,"231234567",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GH",233,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[237]|8[0-2]"]],[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[[,"(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"800\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GI:[,[,,"(?:[25]\\d|60)\\d{6}",,,,,,,[8]],[,,"2190[0-2]\\d{3}|2(?:0(?:[02]\\d|3[01])|16[24-9]|2[2-5]\\d)\\d{4}",,,,"20012345"],[,,"5251[0-4]\\d{3}|(?:5(?:[146-8]\\d\\d|250)|60(?:1[01]|6\\d))\\d{4}",,,,"57123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GI",350,"00",,,,,,,,[[,"(\\d{3})(\\d{5})","$1 $2",["2"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GL:[,[,,"(?:19|[2-689]\\d|70)\\d{4}",,,,,,,[6]],[,,"(?:19|3[1-7]|[68][1-9]|70|9\\d)\\d{4}",,,,"321000"],[,,"[245]\\d{5}",,,,"221234"],[,,"80\\d{4}",,,,"801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3[89]\\d{4}",,,,"381234"],"GL",299,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GM:[,[,,"[2-9]\\d{6}",,,,,,,[7]],[,,"(?:4(?:[23]\\d\\d|4(?:1[024679]|[6-9]\\d))|5(?:5(?:3\\d|4[0-7])|6[67]\\d|7(?:1[04]|2[035]|3[58]|48))|8[0-589]\\d\\d)\\d{3}",,,,"5661234"],[,,"556\\d{4}|(?:[23679]\\d|4[015]|5[0-489]|8[67])\\d{5}",,,,"3012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GM",220,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GN:[,[,,"722\\d{6}|(?:3|6\\d)\\d{7}",,,,,,,[8,9]],[,,"3(?:0(?:24|3[12]|4[1-35-7]|5[13]|6[189]|[78]1|9[1478])|1\\d\\d)\\d{4}",,,,"30241234",,,[8]],[,,"6[0-356]\\d{7}",,,,"601123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"722\\d{6}",,,,"722123456",,,[9]],"GN",224,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GP:[,[,,"(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}",,,,"590201234"],[,,"(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}",,,,"976012345"],"GP",590,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GQ:[,[,,"222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",,,,,,,[9]],[,,"33[0-24-9]\\d[46]\\d{4}|3(?:33|5\\d)\\d[7-9]\\d{4}",,,,"333091234"],[,,"(?:222|55\\d)\\d{6}",,,,"222123456"],[,,"80\\d[1-9]\\d{5}",,,,"800123456"],[,,"90\\d[1-9]\\d{5}",,,,"900123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GQ",240,"00",,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],[,"(\\d{3})(\\d{6})","$1 $2",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GR:[,[,,"5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",,,,,,,[10,11,12]],[,,"2(?:1\\d\\d|2(?:2[1-46-9]|[36][1-8]|4[1-7]|5[1-4]|7[1-5]|[89][1-9])|3(?:1\\d|2[1-57]|[35][1-3]|4[13]|7[1-7]|8[124-6]|9[1-79])|4(?:1\\d|2[1-8]|3[1-4]|4[13-5]|6[1-578]|9[1-5])|5(?:1\\d|[29][1-4]|3[1-5]|4[124]|5[1-6])|6(?:1\\d|[269][1-6]|3[1245]|4[1-7]|5[13-9]|7[14]|8[1-5])|7(?:1\\d|2[1-5]|3[1-6]|4[1-7]|5[1-57]|6[135]|9[125-7])|8(?:1\\d|2[1-5]|[34][1-4]|9[1-57]))\\d{6}",,,,"2123456789",,,[10]],[,,"68[57-9]\\d{7}|(?:69|94)\\d{8}",,,,"6912345678",,,[10]],[,,"800\\d{7,9}",,,,"8001234567"],[,,"90[19]\\d{7}",,,,"9091234567",,,[10]],[,,"8(?:0[16]|12|[27]5|50)\\d{7}",,,,"8011234567",,,[10]],[,,"70\\d{8}",,,,"7012345678",,,[10]],[,,,,,,,,,[-1]],"GR",30,"00",,,,,,,,[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],[,"(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],[,"(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"5005000\\d{3}",,,,"5005000123",,,[10]],,,[,,,,,,,,,[-1]]],GT:[,[,,"80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",,,,,,,[8,11]],[,,"[267][2-9]\\d{6}",,,,"22456789",,,[8]],[,,"(?:[3-5]\\d\\d|80[0-4])\\d{5}",,,,"51234567",,,[8]],[,,"18[01]\\d{8}",,,,"18001112222",,,[11]],[,,"19\\d{9}",,,,"19001112222",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"GT",502,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GU:[,[,,"(?:[58]\\d\\d|671|900)\\d{7}",,,,,,,[10],[7]],[,,"671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[478])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"671(?:2\\d\\d|3(?:00|3[39]|4[349]|55|6[26])|4(?:00|56|7[1-9]|8[02-9])|5(?:55|6[2-5]|88)|6(?:3[2-578]|4[24-9]|5[34]|78|8[235-9])|7(?:[0479]7|2[0167]|3[45]|8[7-9])|8(?:[2-57-9]8|6[478])|9(?:2[29]|6[79]|7[1279]|8[7-9]|9[78]))\\d{4}",,,,"6713001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"GU",1,"011","1",,,"([2-9]\\d{6})$|1","671$1",,1,,,[,,,,,,,,,[-1]],,"671",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GW:[,[,,"[49]\\d{8}|4\\d{6}",,,,,,,[7,9]],[,,"443\\d{6}",,,,"443201234",,,[9]],[,,"9(?:5\\d|6[569]|77)\\d{6}",,,,"955012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"40\\d{5}",,,,"4012345",,,[7]],"GW",245,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["40"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],GY:[,[,,"(?:[2-8]\\d{3}|9008)\\d{3}",,,,,,,[7]],[,,"(?:2(?:1[6-9]|2[0-35-9]|3[1-4]|5[3-9]|6\\d|7[0-79])|3(?:2[25-9]|3\\d)|4(?:4[0-24]|5[56])|50[0-6]|77[1-57])\\d{4}",,,,"2201234"],[,,"(?:51[01]|6\\d\\d|7(?:[0-5]\\d|6[0-39]|70))\\d{4}",,,,"6091234"],[,,"(?:289|8(?:00|6[28]|88|99))\\d{4}",,,,"2891234"],[,,"9008\\d{3}",,,,"9008123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"515\\d{4}",,,,"5151234"],"GY",592,"001",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HK:[,[,,"8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",,,,,,,[5,6,7,8,9,11]],[,,"(?:2(?:[13-9]\\d|2[013-9])\\d|3(?:(?:[1569][0-24-9]|4[0-246-9]|7[0-24-69])\\d|8(?:4[0-8]|[579]\\d|6[0-5]))|58(?:0[1-9]|1[2-9]))\\d{4}",,,,"21234567",,,[8]],[,,"(?:4(?:44[0-35-9]|6(?:4[0-57-9]|6[0-6])|7(?:3[0-4]|4[0-48]|6[0-5]))|5(?:35[4-8]|73[0-6]|95[0-8])|6(?:26[013-8]|(?:66|78)[0-5])|70(?:7[1-8]|8[0-8])|84(?:4[0-2]|8[0-35-9])|9(?:29[013-9]|39[014-9]|59[0-467]|899))\\d{4}|(?:4(?:4[0-35-9]|6[0-357-9]|7[0-25])|5(?:[1-59][0-46-9]|6[0-4689]|7[0-246-9])|6(?:0[1-9]|[13-59]\\d|[268][0-57-9]|7[0-79])|70[1-59]|84[0-39]|9(?:0[1-9]|1[02-9]|[2358][0-8]|[467]\\d))\\d{5}",,,,"51234567",,,[8]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900(?:[0-24-9]\\d{7}|3\\d{1,4})",,,,"90012345678",,,[5,6,7,8,11]],[,,,,,,,,,[-1]],[,,"8(?:1[0-4679]\\d|2(?:[0-36]\\d|7[0-4])|3(?:[034]\\d|2[09]|70))\\d{4}",,,,"81123456",,,[8]],[,,,,,,,,,[-1]],"HK",852,"00(?:30|5[09]|[126-9]?)",,,,,,"00",,[[,"(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],[,"(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],,[,,"7(?:1(?:0[0-38]|1[0-3679]|3[013]|69|9[0136])|2(?:[02389]\\d|1[18]|7[27-9])|3(?:[0-38]\\d|7[0-369]|9[2357-9])|47\\d|5(?:[178]\\d|5[0-5])|6(?:0[0-7]|2[236-9]|[35]\\d)|7(?:[27]\\d|8[7-9])|8(?:[23689]\\d|7[1-9])|9(?:[025]\\d|6[0-246-8]|7[0-36-9]|8[238]))\\d{4}",,,,"71123456",,,[8]],,,[,,,,,,,,,[-1]],[,,"30(?:0[1-9]|[15-7]\\d|2[047]|89)\\d{4}",,,,"30161234",,,[8]],,,[,,,,,,,,,[-1]]],HN:[,[,,"8\\d{10}|[237-9]\\d{7}",,,,,,,[8,11]],[,,"2(?:2(?:0[0-59]|1[1-9]|[23]\\d|4[02-7]|5[57]|6[245]|7[0135689]|8[01346-9]|9[0-2])|4(?:0[578]|2[3-59]|3[13-9]|4[0-68]|5[1-3589])|5(?:0[2357-9]|1[1-356]|4[03-5]|5\\d|6[014-69]|7[04]|80)|6(?:[056]\\d|17|2[067]|3[047]|4[0-378]|[78][0-8]|9[01])|7(?:0[5-79]|6[46-9]|7[02-9]|8[034]|91)|8(?:79|8[0-357-9]|9[1-57-9]))\\d{4}",,,,"22123456",,,[8]],[,,"[37-9]\\d{7}",,,,"91234567",,,[8]],[,,"8002\\d{7}",,,,"80021234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"HN",504,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["8"]]],[[,"(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]],[,,,,,,,,,[-1]],,,[,,"8002\\d{7}",,,,,,,[11]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HR:[,[,,"[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",,,,,,,[7,8,9],[6]],[,,"1\\d{7}|(?:2[0-3]|3[1-5]|4[02-47-9]|5[1-3])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"9(?:(?:0[1-9]|[12589]\\d)\\d\\d|7(?:[0679]\\d\\d|5(?:[01]\\d|44|55|77|9[5-79])))\\d{4}|98\\d{6}",,,,"921234567",,,[8,9]],[,,"80\\d{5,7}",,,,"800123456"],[,,"6[01459]\\d{6}|6[01]\\d{5}",,,,"6001234",,,[7,8]],[,,,,,,,,,[-1]],[,,"7[45]\\d{6}",,,,"74123456",,,[8]],[,,,,,,,,,[-1]],"HR",385,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"62\\d{6,7}|72\\d{6}",,,,"62123456",,,[8,9]],,,[,,,,,,,,,[-1]]],HT:[,[,,"[2-589]\\d{7}",,,,,,,[8]],[,,"2(?:2\\d|5[1-5]|81|9[149])\\d{5}",,,,"22453300"],[,,"(?:[34]\\d|5[56])\\d{6}",,,,"34101234"],[,,"8\\d{7}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:[67][0-4]|8[0-3589]|9\\d)\\d{5}",,,,"98901234"],"HT",509,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],HU:[,[,,"[235-7]\\d{8}|[1-9]\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:1\\d|[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6[23689]|8[2-57-9]|9[2-69])\\d{6}",,,,"12345678",,,[8],[6,7]],[,,"(?:[257]0|3[01])\\d{7}",,,,"201234567",,,[9]],[,,"(?:[48]0\\d|680[29])\\d{5}",,,,"80123456"],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"21\\d{7}",,,,"211234567",,,[9]],"HU",36,"00","06",,,"06",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],,[,,,,,,,,,[-1]],,,[,,"(?:[48]0\\d|680[29])\\d{5}"],[,,"38\\d{7}",,,,"381234567",,,[9]],,,[,,,,,,,,,[-1]]],ID:[,[,,"00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",,,,,,,[7,8,9,10,11,12,13,14,15,16,17],[5,6]],[,,"2[124]\\d{7,8}|619\\d{8}|2(?:1(?:14|500)|2\\d{3})\\d{3}|61\\d{5,8}|(?:2(?:[35][1-4]|6[0-8]|7[1-6]|8\\d|9[1-8])|3(?:1|[25][1-8]|3[1-68]|4[1-3]|6[1-3568]|7[0-469]|8\\d)|4(?:0[1-589]|1[01347-9]|2[0-36-8]|3[0-24-68]|43|5[1-378]|6[1-5]|7[134]|8[1245])|5(?:1[1-35-9]|2[25-8]|3[124-9]|4[1-3589]|5[1-46]|6[1-8])|6(?:[25]\\d|3[1-69]|4[1-6])|7(?:02|[125][1-9]|[36]\\d|4[1-8]|7[0-36-9])|9(?:0[12]|1[013-8]|2[0-479]|5[125-8]|6[23679]|7[159]|8[01346]))\\d{5,8}",,,,"218350123",,,[7,8,9,10,11],[5,6]],[,,"8[1-35-9]\\d{7,10}",,,,"812345678",,,[9,10,11,12]],[,,"00(?:1803\\d{5,11}|7803\\d{7})|(?:177\\d|800)\\d{5,7}",,,,"8001234567",,,[8,9,10,11,12,13,14,15,16,17]],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,"804\\d{7}",,,,"8041234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ID",62,"00[89]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3 $4",["001"]],[,"(\\d{2})(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],[,"(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],[,"(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],[,"(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],[,"(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],[,"(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],[,"(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"001803\\d{5,11}|(?:007803\\d|8071)\\d{6}",,,,,,,[10,11,12,13,14,15,16,17]],[,,"(?:1500|8071\\d{3})\\d{3}",,,,"8071123456",,,[7,10]],,,[,,,,,,,,,[-1]]],IE:[,[,,"(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",,,,,,,[7,8,9,10],[5,6]],[,,"(?:1\\d|21)\\d{6,7}|(?:2[24-9]|4(?:0[24]|5\\d|7)|5(?:0[45]|1\\d|8)|6(?:1\\d|[237-9])|9(?:1\\d|[35-9]))\\d{5}|(?:23|4(?:[1-469]|8\\d)|5[23679]|6[4-6]|7[14]|9[04])\\d{7}",,,,"2212345",,,,[5,6]],[,,"8(?:22|[35-9]\\d)\\d{6}",,,,"850123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,"15(?:1[2-8]|[2-8]0|9[089])\\d{6}",,,,"1520123456",,,[10]],[,,"18[59]0\\d{6}",,,,"1850123456",,,[10]],[,,"700\\d{6}",,,,"700123456",,,[9]],[,,"76\\d{7}",,,,"761234567",,,[9]],"IE",353,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],[,"(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],[,"(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"18[59]0\\d{6}",,,,,,,[10]],[,,"818\\d{6}",,,,"818123456",,,[9]],,,[,,"88210[1-9]\\d{4}|8(?:[35-79]5\\d\\d|8(?:[013-9]\\d\\d|2(?:[01][1-9]|[2-9]\\d)))\\d{5}",,,,"8551234567",,,[10]]],IL:[,[,,"1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",,,,,,,[7,8,9,10,11,12]],[,,"153\\d{8,9}|29[1-9]\\d{5}|(?:2[0-8]|[3489]\\d)\\d{6}",,,,"21234567",,,[8,11,12],[7]],[,,"55(?:4(?:0[01]|10|5[0-7])|57[0-289])\\d{4}|5(?:(?:[0-2][02-9]|[36]\\d|[49][2-9]|8[3-7])\\d|5(?:01|2\\d|3[0-3]|4[34]|5[0-25689]|6[6-8]|7[0-267]|8[7-9]|9[1-9]))\\d{5}",,,,"502345678",,,[9]],[,,"1(?:255|80[019]\\d{3})\\d{3}",,,,"1800123456",,,[7,10]],[,,"1212\\d{4}|1(?:200|9(?:0[0-2]|19))\\d{6}",,,,"1919123456",,,[8,10]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,"7(?:38(?:[05]\\d|8[018])|8(?:33|55|77|81)\\d)\\d{4}|7(?:18|2[23]|3[237]|47|6[258]|7\\d|82|9[2-9])\\d{6}",,,,"771234567",,,[9]],"IL",972,"0(?:0|1[2-9])","0",,,"0",,,,[[,"(\\d{4})(\\d{3})","$1-$2",["125"]],[,"(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],[,"(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],[,"(\\d{4})(\\d{6})","$1-$2",["159"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],[,"(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],,[,,,,,,,,,[-1]],,,[,,"1700\\d{6}",,,,,,,[10]],[,,"1599\\d{6}",,,,"1599123456",,,[10]],,,[,,"151\\d{8,9}",,,,"15112340000",,,[11,12]]],IM:[,[,,"1624\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1624(?:230|[5-8]\\d\\d)\\d{3}",,,,"1624756789",,,,[6]],[,,"76245[06]\\d{4}|7(?:4576|[59]24\\d|624[0-4689])\\d{5}",,,,"7924123456"],[,,"808162\\d{4}",,,,"8081624567"],[,,"8(?:440[49]06|72299\\d)\\d{3}|(?:8(?:45|70)|90[0167])624\\d{4}",,,,"9016247890"],[,,,,,,,,,[-1]],[,,"70\\d{8}",,,,"7012345678"],[,,"56\\d{8}",,,,"5612345678"],"IM",44,"00","0",,,"([25-8]\\d{5})$|0|180020","1624$1",,,,,[,,,,,,,,,[-1]],,"74576|(?:16|7[56])24",[,,,,,,,,,[-1]],[,,"3440[49]06\\d{3}|(?:3(?:08162|3\\d{4}|45624|7(?:0624|2299))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],IN:[,[,,"(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",,,,,,,[8,9,10,11,12,13],[6,7]],[,,"2717(?:[2-7]\\d|95)\\d{4}|(?:271[0-689]|782[0-6])[2-7]\\d{5}|(?:170[24]|2(?:(?:[02][2-79]|90)\\d|80[13468])|(?:3(?:23|80)|683|79[1-7])\\d|4(?:20[24]|72[2-8])|552[1-7])\\d{6}|(?:11|33|4[04]|80)[2-7]\\d{7}|(?:342|674|788)(?:[0189][2-7]|[2-7]\\d)\\d{5}|(?:1(?:2[0-249]|3[0-25]|4[145]|[59][14]|6[014]|7[1257]|8[01346])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568]|9[14])|3(?:26|4[13]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[014-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|2[14]|3[134]|4[47]|5[15]|[67]1)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91))[2-7]\\d{6}|(?:1(?:2[35-8]|3[346-9]|4[236-9]|[59][0235-9]|6[235-9]|7[34689]|8[257-9])|2(?:1[134689]|3[24-8]|4[2-8]|5[25689]|6[2-4679]|7[3-79]|8[2-479]|9[235-9])|3(?:01|1[79]|2[1245]|4[5-8]|5[125689]|6[235-7]|7[157-9]|8[2-46-8])|4(?:1[14578]|2[5689]|3[2-467]|5[4-7]|6[35]|73|8[2689]|9[2389])|5(?:[16][146-9]|2[14-8]|3[1346]|4[14-69]|5[46]|7[2-4]|8[2-8]|9[246])|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])|7(?:1[013-9]|2[0235-9]|3[2679]|4[1-35689]|5[2-46-9]|[67][02-9]|8[013-7]|9[089])|8(?:1[1357-9]|2[235-8]|3[03-57-9]|4[0-24-9]|5\\d|6[2457-9]|7[1-6]|8[1256]|9[2-4]))\\d[2-7]\\d{5}",,,,"7410410123",,,[10],[6,7,8]],[,,"(?:61279|7(?:887[02-9]|9(?:313|79[07-9]))|8(?:079[04-9]|(?:84|91)7[02-8]))\\d{5}|(?:6(?:12|[2-47]1|5[17]|6[13]|80)[0189]|7(?:1(?:2[0189]|9[0-5])|2(?:[14][017-9]|8[0-59])|3(?:2[5-8]|[34][017-9]|9[016-9])|4(?:1[015-9]|[29][89]|39|8[389])|5(?:[15][017-9]|2[04-9]|9[7-9])|6(?:0[0-47]|1[0-257-9]|2[0-4]|3[19]|5[4589])|70[0289]|88[089]|97[02-8])|8(?:0(?:6[67]|7[02-8])|70[017-9]|84[01489]|91[0-289]))\\d{6}|(?:7(?:31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[0189]\\d|7[02-8])\\d{5}|(?:6(?:[09]\\d|1[04679]|2[03689]|3[05-9]|4[0489]|50|6[069]|7[07]|8[7-9])|7(?:0\\d|2[0235-79]|3[05-8]|40|5[0346-8]|6[6-9]|7[1-9]|8[0-79]|9[089])|8(?:0[01589]|1[0-57-9]|2[235-9]|3[03-57-9]|[45]\\d|6[02457-9]|7[1-69]|8[0-25-9]|9[02-9])|9\\d\\d)\\d{7}|(?:6(?:(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|8[124-6])\\d|7(?:[235689]\\d|4[0189]))|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-5])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]|881))[0189]\\d{5}",,,,"8123456789",,,[10]],[,,"000800\\d{7}|1(?:600\\d{6}|80(?:0\\d{4,9}|3\\d{9}))",,,,"1800123456"],[,,"186[12]\\d{9}",,,,"1861123456789",,,[13]],[,,"1860\\d{7}",,,,"18603451234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IN",91,"00","0",,,"0",,,,[[,"(\\d{7})","$1",["575"]],[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[[,"(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],,,1],[,"(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],,,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",,1],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",,1],[,"(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",,1],[,"(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],,,1],[,"(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],,,1]],[,,,,,,,,,[-1]],,,[,,"1(?:600\\d{6}|800\\d{4,9})|(?:000800|18(?:03\\d\\d|6(?:0|[12]\\d\\d)))\\d{7}"],[,,"140\\d{7}",,,,"1409305260",,,[10]],,,[,,,,,,,,,[-1]]],IO:[,[,,"3\\d{6}",,,,,,,[7]],[,,"37\\d{5}",,,,"3709100"],[,,"38\\d{5}",,,,"3801234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IO",246,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IQ:[,[,,"(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"1\\d{7}|(?:2[13-5]|3[02367]|4[023]|5[03]|6[026])\\d{6,7}",,,,"12345678",,,[8,9],[6,7]],[,,"7[3-9]\\d{8}",,,,"7912345678",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IQ",964,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],IR:[,[,,"[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",,,,,,,[4,5,6,7,10],[8]],[,,"(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])(?:[03-57]\\d{7}|[16]\\d{3}(?:\\d{4})?|[289]\\d{3}(?:\\d(?:\\d{3})?)?)|94(?:000[09]|(?:12\\d|30[0-2])\\d|2(?:121|[2689]0\\d)|4(?:111|40\\d))\\d{4}",,,,"2123456789",,,[6,7,10],[4,5,8]],[,,"9(?:(?:0[0-5]|[13]\\d|2[0-3])\\d\\d|9(?:[0-46]\\d\\d|5(?:10|5\\d)|8(?:[12]\\d|88)|9(?:0[0-3]|[19]\\d|21|69|77|8[7-9])))\\d{5}",,,,"9123456789",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"IR",98,"00","0",,,"0",,,,[[,"(\\d{4,5})","$1",["96"],"0$1"],[,"(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"9(?:4440\\d{5}|6(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19]))",,,,,,,[4,5,10]],[,,"96(?:0[12]|2[16-8]|3(?:08|[14]5|[23]|66)|4(?:0|80)|5[01]|6[89]|86|9[19])",,,,"9601",,,[4,5]],,,[,,,,,,,,,[-1]]],IS:[,[,,"(?:38\\d|[4-9])\\d{6}",,,,,,,[7,9]],[,,"(?:4(?:1[0-24-69]|2[0-7]|[37][0-8]|4[0-24589]|5[0-68]|6\\d|8[0-36-8])|5(?:05|[156]\\d|2[02578]|3[0-579]|4[03-7]|7[0-2578]|8[0-35-9]|9[013-689])|872)\\d{4}",,,,"4101234",,,[7]],[,,"(?:38[589]\\d\\d|6(?:1[1-8]|2[0-6]|3[026-9]|4[014679]|5[0159]|6[0-69]|70|8[06-8]|9\\d)|7(?:5[057]|[6-9]\\d)|8(?:2[0-59]|[3-69]\\d|8[238]))\\d{4}",,,,"6111234"],[,,"80[0-8]\\d{4}",,,,"8001234",,,[7]],[,,"90(?:0\\d|1[5-79]|2[015-79]|3[135-79]|4[125-7]|5[25-79]|7[1-37]|8[0-35-7])\\d{3}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"49[0-24-79]\\d{4}",,,,"4921234",,,[7]],"IS",354,"00|1(?:0(?:01|[12]0)|100)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"809\\d{4}",,,,"8091234",,,[7]],,,[,,"(?:689|8(?:7[18]|80)|95[48])\\d{4}",,,,"6891234",,,[7]]],IT:[,[,,"0\\d{5,11}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",,,,,,,[6,7,8,9,10,11,12]],[,,"0(?:669[0-79]\\d{1,6}|831\\d{2,8})|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[2356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",,,,"0212345678"],[,,"3[2-9]\\d{7,8}|(?:31|43)\\d{8}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"IT",39,"00",,,,,,,,[[,"(\\d{4,5})","$1",["1(?:0|9[246])","1(?:0|9(?:2[2-9]|[46]))"]],[,"(\\d{6})","$1",["1(?:1|92)"]],[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[03]"]]],[[,"(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],[,"(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],[,"(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],[,"(\\d{4})(\\d{4})","$1 $2",["894"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],[,"(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],[,"(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[03]"]]],[,,,,,,,,,[-1]],1,,[,,"848\\d{6}",,,,,,,[9]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],JE:[,[,,"1534\\d{6}|(?:[3578]\\d|90)\\d{8}",,,,,,,[10],[6]],[,,"1534[0-24-8]\\d{5}",,,,"1534456789",,,,[6]],[,,"7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}",,,,"7797712345"],[,,"80(?:07(?:35|81)|8901)\\d{4}",,,,"8007354567"],[,,"(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}",,,,"9018105678"],[,,,,,,,,,[-1]],[,,"701511\\d{4}",,,,"7015115678"],[,,"56\\d{8}",,,,"5612345678"],"JE",44,"00","0",,,"([0-24-8]\\d{5})$|0|180020","1534$1",,,,,[,,"76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",,,,"7640123456"],,,[,,,,,,,,,[-1]],[,,"(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}",,,,"5512345678"],,,[,,,,,,,,,[-1]]],JM:[,[,,"(?:[58]\\d\\d|658|900)\\d{7}",,,,,,,[10],[7]],[,,"8766060\\d{3}|(?:658(?:2(?:[0-8]\\d|9[0-46-9])|[3-9]\\d\\d)|876(?:52[35]|6(?:0[1-3579]|1[0235-9]|[23]\\d|40|5[06]|6[2-589]|7[0-25-9]|8[04]|9[4-9])|7(?:0[2-689]|[1-6]\\d|8[056]|9[45])|9(?:0[1-8]|1[02378]|[2-8]\\d|9[2-468])))\\d{4}",,,,"8765230123",,,,[7]],[,,"(?:658295|876(?:2(?:0[1-9]|[13-9]\\d|2[013-9])|[348]\\d\\d|5(?:0[1-9]|[1-9]\\d)|6(?:4[89]|6[67])|7(?:0[07]|7\\d|8[1-47-9]|9[0-36-9])|9(?:[01]9|9[0579])))\\d{4}",,,,"8762101234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"JM",1,"011","1",,,"1",,,,,,[,,,,,,,,,[-1]],,"658|876",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],JO:[,[,,"(?:(?:[2689]|7\\d)\\d|32|427|53)\\d{6}",,,,,,,[8,9]],[,,"87(?:000|90[01])\\d{3}|(?:2(?:6(?:2[0-35-9]|3[0-578]|4[24-7]|5[0-24-8]|[6-8][023]|9[0-3])|7(?:0[1-79]|10|2[014-7]|3[0-689]|4[019]|5[0-3578]))|32(?:0[1-69]|1[1-35-7]|2[024-7]|3\\d|4[0-3]|[5-7][023])|53(?:0[0-3]|[13][023]|2[0-59]|49|5[0-35-9]|6[15]|7[45]|8[1-6]|9[0-36-9])|6(?:2(?:[05]0|22)|3(?:00|33)|4(?:0[0-25]|1[2-7]|2[0569]|[38][07-9]|4[025689]|6[0-589]|7\\d|9[0-2])|5(?:[01][056]|2[034]|3[0-57-9]|4[178]|5[0-69]|6[0-35-9]|7[1-379]|8[0-68]|9[0239]))|87(?:20|7[078]|99))\\d{4}",,,,"62001234",,,[8]],[,,"(?:427|7(?:[78][0-25-9]|9\\d))\\d{6}",,,,"790123456",,,[9]],[,,"80\\d{6}",,,,"80012345",,,[8]],[,,"9\\d{7}",,,,"90012345",,,[8]],[,,"85\\d{6}",,,,"85012345",,,[8]],[,,"70\\d{7}",,,,"700123456",,,[9]],[,,,,,,,,,[-1]],"JO",962,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],[,"(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[47]"],"0$1"]],,[,,"74(?:66|77)\\d{5}",,,,"746612345",,,[9]],,,[,,,,,,,,,[-1]],[,,"8(?:10|8\\d)\\d{5}",,,,"88101234",,,[8]],,,[,,,,,,,,,[-1]]],JP:[,[,,"00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",,,,,,,[8,9,10,11,12,13,14,15,16,17]],[,,"(?:1(?:1[235-8]|2[3-6]|3[3-9]|4[2-6]|[58][2-8]|6[2-7]|7[2-9]|9[1-9])|(?:2[2-9]|[36][1-9])\\d|4(?:[2-578]\\d|6[02-8]|9[2-59])|5(?:[2-589]\\d|6[1-9]|7[2-8])|7(?:[25-9]\\d|3[4-9]|4[02-9])|8(?:[2679]\\d|3[2-9]|4[5-9]|5[1-9]|8[03-9])|9(?:[2-58]\\d|[679][1-9]))\\d{6}",,,,"312345678",,,[9]],[,,"(?:601[0-4]0|[7-9]0[1-9]\\d\\d)\\d{5}",,,,"9012345678",,,[10]],[,,"00777(?:[01]|5\\d)\\d\\d|(?:00(?:7778|882[1245])|(?:120|800\\d)\\d\\d)\\d{4}|00(?:37|66|78)\\d{6,13}",,,,"120123456"],[,,"990\\d{6}",,,,"990123456",,,[9]],[,,,,,,,,,[-1]],[,,"60\\d{7}",,,,"601234567",,,[9]],[,,"50[1-9]\\d{7}",,,,"5012345678",,,[10]],"JP",81,"010","0",,,"(000[2569]\\d{4,6})$|(?:(?:003768)0?)|0","$1",,,[[,"(\\d{4})(\\d{4})","$1-$2",["007","0077","00777","00777[01]"]],[,"(\\d{8,10})","$1",["000"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{3,4})","$1-$2-$3",["007","0077"]],[,"(\\d{4})(\\d{2})(\\d{4})","$1-$2-$3",["008"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3,4})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{4})(\\d{4,5})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{5})(\\d{5,6})","$1-$2-$3",["0"]],[,"(\\d{4})(\\d{6})(\\d{6,7})","$1-$2-$3",["0"]]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],[,"(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],[,,"20\\d{8}",,,,"2012345678",,,[10]],,,[,,"00(?:777(?:[01]|(?:5|8\\d)\\d)|882[1245]\\d\\d)\\d\\d|00(?:37|66|78)\\d{6,13}"],[,,"570\\d{6}",,,,"570123456",,,[9]],,,[,,,,,,,,,[-1]]],KE:[,[,,"(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",,,,,,,[7,8,9,10]],[,,"(?:4[245]|5[1-79]|6[01457-9])\\d{5,7}|(?:4[136]|5[08]|62)\\d{7}|(?:[24]0|66)\\d{6,7}",,,,"202012345",,,[7,8,9]],[,,"(?:1(?:0[0-8]|1\\d|2[014]|[34]0)|7\\d\\d)\\d{6}",,,,"712123456",,,[9]],[,,"800[02-8]\\d{5,6}",,,,"800223456",,,[9,10]],[,,"900[02-9]\\d{5}",,,,"900223456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KE",254,"000","0",,,"0",,,,[[,"(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KG:[,[,,"8\\d{9}|[235-9]\\d{8}",,,,,,,[9,10],[5,6]],[,,"312(?:5[0-79]\\d|9(?:[0-689]\\d|7[0-24-9]))\\d{3}|(?:3(?:1(?:2[0-46-8]|3[1-9]|47|[56]\\d)|2(?:22|3[0-479]|6[0-7])|4(?:22|5[6-9]|6\\d)|5(?:22|3[4-7]|59|6\\d)|6(?:22|5[35-7]|6\\d)|7(?:22|3[468]|4[1-9]|59|[67]\\d)|9(?:22|4[1-8]|6\\d))|6(?:09|12|2[2-4])\\d)\\d{5}",,,,"312123456",,,[9],[5,6]],[,,"312(?:58\\d|973)\\d{3}|(?:2(?:0[0-35]|2\\d)|5[0-24-7]\\d|600|7(?:[07]\\d|55)|88[08]|9(?:12|9[05-9]))\\d{6}",,,,"700123456",,,[9]],[,,"800\\d{6,7}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KG",996,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],[,"(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KH:[,[,,"1\\d{9}|[1-9]\\d{7,8}",,,,,,,[8,9,10],[6,7]],[,,"23(?:4(?:[2-4]|[56]\\d)|[568]\\d\\d)\\d{4}|23[236-9]\\d{5}|(?:2[4-6]|3[2-6]|4[2-4]|[5-7][2-5])(?:(?:[237-9]|4[56]|5\\d)\\d{5}|6\\d{5,6})",,,,"23756789",,,[8,9],[6,7]],[,,"(?:(?:1[28]|3[18]|9[67])\\d|6[016-9]|7(?:[07-9]|[16]\\d)|8(?:[013-79]|8\\d))\\d{6}|(?:1\\d|9[0-57-9])\\d{6}|(?:2[3-6]|3[2-6]|4[2-4]|[5-7][2-5])48\\d{5}",,,,"91234567",,,[8,9]],[,,"1800(?:1\\d|2[019])\\d{4}",,,,"1800123456",,,[10]],[,,"1900(?:1\\d|2[09])\\d{4}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KH",855,"00[14-9]","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KI:[,[,,"(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",,,,,,,[5,8]],[,,"(?:[24]\\d|3[1-9]|50|65(?:02[12]|12[56]|22[89]|[3-5]00)|7(?:27\\d\\d|3100|5(?:02[12]|12[56]|22[89]|[34](?:00|81)|500))|8[0-5])\\d{3}",,,,"31234"],[,,"(?:6200[01]|7(?:310[1-9]|5(?:02[03-9]|12[0-47-9]|22[0-7]|[34](?:0[1-9]|8[02-9])|50[1-9])))\\d{3}|(?:63\\d\\d|7(?:(?:[0146-9]\\d|2[0-689])\\d|3(?:[02-9]\\d|1[1-9])|5(?:[0-2][013-9]|[34][1-79]|5[1-9]|[6-9]\\d)))\\d{4}",,,,"72001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"30(?:0[01]\\d\\d|12(?:11|20))\\d\\d",,,,"30010000",,,[8]],"KI",686,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KM:[,[,,"[3478]\\d{6}",,,,,,,[7],[4]],[,,"7[4-7]\\d{5}",,,,"7712345",,,,[4]],[,,"[34]\\d{6}",,,,"3212345"],[,,,,,,,,,[-1]],[,,"8\\d{6}",,,,"8001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KM",269,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KN:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"869(?:2(?:29|36)|302|4(?:6[015-9]|70)|56[5-7])\\d{4}",,,,"8692361234",,,,[7]],[,,"869(?:48[89]|55[6-8]|66\\d|76[02-7])\\d{4}",,,,"8697652917",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KN",1,"011","1",,,"([2-7]\\d{6})$|1","869$1",,,,,[,,,,,,,,,[-1]],,"869",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KP:[,[,,"85\\d{6}|(?:19\\d|[2-7])\\d{7}",,,,,,,[8,10],[6,7]],[,,"(?:(?:195|2)\\d|3[19]|4[159]|5[37]|6[17]|7[39]|85)\\d{6}",,,,"21234567",,,,[6,7]],[,,"19[1-3]\\d{7}",,,,"1921234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KP",850,"00|99","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"238[02-9]\\d{4}|2(?:[0-24-9]\\d|3[0-79])\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KR:[,[,,"00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",,,,,,,[5,6,8,9,10,11,12,13,14],[3,4,7]],[,,"(?:2|3[1-3]|[46][1-4]|5[1-5])[1-9]\\d{6,7}|(?:3[1-3]|[46][1-4]|5[1-5])1\\d{2,3}",,,,"22123456",,,[5,6,8,9,10],[3,4,7]],[,,"1(?:05(?:[0-8]\\d|9[0-6])|22[13]\\d)\\d{4,5}|1(?:0[0-46-9]|[16-9]\\d|2[013-9])\\d{6,7}",,,,"1020000000",,,[9,10]],[,,"00(?:308\\d{6,7}|798\\d{7,9})|(?:00368|[38]0)\\d{7}",,,,"801234567",,,[9,11,12,13,14]],[,,"60[2-9]\\d{6}",,,,"602345678",,,[9]],[,,,,,,,,,[-1]],[,,"50\\d{8,9}",,,,"5012345678",,,[10,11]],[,,"70\\d{8}",,,,"7012345678",,,[10]],"KR",82,"00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","0",,,"0(8(?:[1-46-8]|5\\d\\d))?",,,,[[,"(\\d{5})","$1",["1[016-9]1","1[016-9]11","1[016-9]114"],"0$1"],[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3})(\\d{3})","$1 $2 $3",["003","0030"]],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"],[,"(\\d{5})(\\d{3,4})(\\d{4})","$1 $2 $3",["0"]],[,"(\\d{5})(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["0"]]],[[,"(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1","0$CC-$1"],[,"(\\d{4})(\\d{4})","$1-$2",["1"]],[,"(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1","0$CC-$1"],[,"(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1","0$CC-$1"]],[,,"15\\d{7,8}",,,,"1523456789",,,[9,10]],,,[,,"00(?:3(?:08\\d{6,7}|68\\d{7})|798\\d{7,9})",,,,,,,[11,12,13,14]],[,,"1(?:5(?:22|33|44|66|77|88|99)|6(?:[07]0|44|6[0168]|88)|8(?:00|33|55|77|99))\\d{4}",,,,"15441234",,,[8]],,,[,,,,,,,,,[-1]]],KW:[,[,,"18\\d{5}|(?:[2569]\\d|41)\\d{6}",,,,,,,[7,8]],[,,"2(?:[23]\\d\\d|4(?:[1-35-9]\\d|44)|5(?:0[034]|[2-46]\\d|5[1-3]|7[1-7]))\\d{4}",,,,"22345678",,,[8]],[,,"(?:41\\d\\d|5(?:(?:[05]\\d|1[0-7]|6[56])\\d|2(?:22|5[25])|7(?:55|77)|88[58])|6(?:(?:0[034679]|5[015-9]|6\\d)\\d|1(?:00|11|6[16])|2[26]2|3[36]3|4[46]4|7(?:0[013-9]|[67]\\d)|8[68]8|9(?:[069]\\d|3[039]))|9(?:(?:[04679]\\d|8[057-9])\\d|1(?:00|1[01]|99)|2(?:00|2\\d)|3(?:00|3[03])|5(?:00|5\\d)))\\d{4}",,,,"50012345",,,[8]],[,,"18\\d{5}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"KW",965,"00",,,,,,,,[[,"(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],[,"(\\d{3})(\\d{5})","$1 $2",["[245]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KY:[,[,,"(?:345|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"345(?:2(?:22|3[23]|44|66)|333|444|6(?:23|38|40)|7(?:30|4[35-79]|6[6-9]|77)|8(?:00|1[45]|4[89]|88)|9(?:14|4[035-9]))\\d{4}",,,,"3452221234",,,,[7]],[,,"345(?:32[1-9]|42[0-4]|5(?:1[67]|2[5-79]|4[6-9]|50|76)|649|82[56]|9(?:1[679]|2[2-9]|3[06-9]|90))\\d{4}",,,,"3453231234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"(?:345976|900[2-9]\\d\\d)\\d{4}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"KY",1,"011","1",,,"([2-9]\\d{6})$|1","345$1",,,,,[,,,,,,,,,[-1]],,"345",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],KZ:[,[,,"(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",,,,,,,[10,14],[5,6,7]],[,,"(?:33622|7(?:1(?:0(?:[23]\\d|4[0-3]|59|63)|1(?:[23]\\d|4[0-79]|59)|2(?:[23]\\d|59)|3(?:2\\d|3[0-79]|4[0-35-9]|59)|4(?:[24]\\d|3[013-9]|5[1-9]|97)|5(?:2\\d|3[1-9]|4[0-7]|59)|6(?:[2-4]\\d|5[19]|61)|72\\d|8(?:[27]\\d|3[1-46-9]|4[0-5]|59))|2(?:1(?:[23]\\d|4[46-9]|5[3469])|2(?:2\\d|3[0679]|46|5[12679])|3(?:[2-4]\\d|5[139])|4(?:2\\d|3[1-35-9]|59)|5(?:[23]\\d|4[0-8]|59|61)|6(?:2\\d|3[1-9]|4[0-4]|59)|7(?:[2379]\\d|40|5[279])|8(?:[23]\\d|4[0-3]|59)|9(?:2\\d|3[124578]|59))))\\d{5}",,,,"7123456789",,,[10],[5,6,7]],[,,"7(?:0[0-25-8]|47|6[0-4]|7[15-8]|85)\\d{7}",,,,"7710009998",,,[10]],[,,"8(?:00|108\\d{3})\\d{7}",,,,"8001234567"],[,,"809\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,"751\\d{7}",,,,"7511234567",,,[10]],"KZ",7,"810","8",,,"8",,"8~10",,,,[,,,,,,,,,[-1]],,"33622|7",[,,"751\\d{7}",,,,,,,[10]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LA:[,[,,"[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",,,,,,,[8,9,10],[6]],[,,"(?:2[13]|[35-7][14]|41|8[1468])\\d{6}",,,,"21212862",,,[8],[6]],[,,"(?:20(?:[23579]\\d|8[78])|30[24]\\d)\\d{6}|30\\d{7}",,,,"2023123456",,,[9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LA",856,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LB:[,[,,"[27-9]\\d{7}|[13-9]\\d{6}",,,,,,,[7,8]],[,,"7(?:62|8[0-6]|9[04-9])\\d{4}|(?:[14-69]\\d|2(?:[14-69]\\d|[78][1-9])|7[2-57]|8[02-9])\\d{5}",,,,"1123456"],[,,"(?:(?:3|81)\\d|7(?:[01]\\d|6[013-9]|8[7-9]|9[1-3]))\\d{5}",,,,"71123456"],[,,,,,,,,,[-1]],[,,"9[01]\\d{6}",,,,"90123456",,,[8]],[,,"80\\d{6}",,,,"80123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LB",961,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LC:[,[,,"(?:[58]\\d\\d|758|900)\\d{7}",,,,,,,[10],[7]],[,,"758(?:234|4(?:30|5\\d|6[2-9]|8[0-2])|57[0-2]|(?:63|75)8)\\d{4}",,,,"7584305678",,,,[7]],[,,"758(?:28[4-7]|384|4(?:6[01]|8[4-9])|5(?:1[89]|20|84)|7(?:1[2-9]|2\\d|3[0-3])|812)\\d{4}",,,,"7582845678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"LC",1,"011","1",,,"([2-8]\\d{6})$|1","758$1",,,,,[,,,,,,,,,[-1]],,"758",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LI:[,[,,"[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",,,,,,,[7,9]],[,,"(?:2(?:01|1[27]|2[024]|3\\d|6[02-578]|96)|3(?:[24]0|33|7[0135-7]|8[048]|9[0269]))\\d{4}",,,,"2345678",,,[7]],[,,"(?:6(?:(?:4[5-9]|5\\d)\\d|6(?:[024-68]\\d|1[01]|3[7-9]|70))\\d|7(?:[37-9]\\d|42|56))\\d{4}",,,,"660234567"],[,,"8002[28]\\d\\d|80(?:05\\d|9)\\d{4}",,,,"8002222"],[,,"90(?:02[258]|1(?:23|3[14])|66[136])\\d\\d",,,,"9002222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LI",423,"00","0",,,"(1001)|0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"870(?:28|87)\\d\\d",,,,"8702812",,,[7]],,,[,,"697(?:42|56|[78]\\d)\\d{4}",,,,"697861234",,,[9]]],LK:[,[,,"[1-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:12[2-9]|602|8[12]\\d|9(?:1\\d|22|9[245]))\\d{6}|(?:11|2[13-7]|3[1-8]|4[157]|5[12457]|6[35-7])[2-57]\\d{6}",,,,"112345678",,,,[7]],[,,"7(?:[0-25-8]\\d|4[0-4])\\d{6}",,,,"712345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LK",94,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"1973\\d{5}",,,,"197312345"],,,[,,,,,,,,,[-1]]],LR:[,[,,"(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",,,,,,,[7,8,9]],[,,"2\\d{7}",,,,"21234567",,,[8]],[,,"(?:(?:(?:22|33)0|555|7(?:6[01]|7\\d)|88\\d)\\d|4(?:240|[67]))\\d{5}|[56]\\d{6}",,,,"770123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"332(?:02|[34]\\d)\\d{4}",,,,"332021234",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LR",231,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LS:[,[,,"(?:[256]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"2\\d{7}",,,,"22123456"],[,,"[56]\\d{7}",,,,"50123456"],[,,"800[1256]\\d{4}",,,,"80021234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LS",266,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2568]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LT:[,[,,"(?:[3469]\\d|52|[78]0)\\d{6}",,,,,,,[8]],[,,"(?:3[1478]|4[124-6]|52)\\d{6}",,,,"31234567"],[,,"6\\d{7}",,,,"61234567"],[,,"80[02]\\d{5}",,,,"80012345"],[,,"9(?:0[0239]|10)\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,"70[05]\\d{5}",,,,"70012345"],[,,"[89]01\\d{5}",,,,"80123456"],"LT",370,"00","0",,,"[08]",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",,1],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",,1],[,"(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",,1],[,"(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"70[67]\\d{5}",,,,"70712345"],,,[,,,,,,,,,[-1]]],LU:[,[,,"35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",,,,,,,[4,5,6,7,8,9,10,11]],[,,"(?:35[013-9]|80[2-9]|90[89])\\d{1,8}|(?:2[2-9]|3[0-46-9]|[457]\\d|8[13-9]|9[2-579])\\d{2,9}",,,,"27123456"],[,,"6(?:[269][18]|5[1568]|7[189]|81)\\d{6}",,,,"628123456",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"90[015]\\d{5}",,,,"90012345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,,,,,,,,[-1]],[,,"20(?:1\\d{5}|[2-689]\\d{1,7})",,,,"20201234",,,[4,5,6,7,8,9,10]],"LU",352,"00",,,,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)",,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"],,"$CC $1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"],,"$CC $1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"],,"$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LV:[,[,,"(?:[268]\\d|78|90)\\d{6}",,,,,,,[8]],[,,"6\\d{7}",,,,"63123456"],[,,"2333[0-8]\\d{3}|2(?:[0-24-9]\\d\\d|3(?:0[07]|[14-9]\\d|2[02-9]|3[0-24-9]))\\d{4}",,,,"21234567"],[,,"80\\d{6}",,,,"80123456"],[,,"90\\d{6}",,,,"90123456"],[,,"81\\d{6}",,,,"81123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LV",371,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2679]|8[01]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],LY:[,[,,"[2-9]\\d{8}",,,,,,,[9],[7]],[,,"(?:2(?:0[56]|[1-6]\\d|7[124579]|8[124])|3(?:1\\d|2[2356])|4(?:[17]\\d|2[1-357]|5[2-4]|8[124])|5(?:[1347]\\d|2[1-469]|5[13-5]|8[1-4])|6(?:[1-479]\\d|5[2-57]|8[1-5])|7(?:[13]\\d|2[13-79])|8(?:[124]\\d|5[124]|84))\\d{6}",,,,"212345678",,,,[7]],[,,"9[1-6]\\d{7}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"LY",218,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MA:[,[,,"[5-8]\\d{8}",,,,,,,[9]],[,,"5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}",,,,"520123456"],[,,"(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-5]|8[0-7]))\\d{6}",,,,"650123456"],[,,"80[0-7]\\d{6}",,,,"801234567"],[,,"89\\d{7}",,,,"891234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}",,,,"592401234"],"MA",212,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],[,"(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],[,"(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],[,"(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MC:[,[,,"(?:[3489]|6\\d)\\d{7}",,,,,,,[8,9]],[,,"(?:870|9[2-47-9]\\d)\\d{5}",,,,"99123456",,,[8]],[,,"4(?:[469]\\d|5[1-9])\\d{5}|(?:3|6\\d)\\d{7}",,,,"612345678"],[,,"(?:800|90\\d)\\d{5}",,,,"90123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MC",377,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["87"]],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],[,"(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],[,,,,,,,,,[-1]],,,[,,"8[07]0\\d{5}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MD:[,[,,"(?:[235-7]\\d|[89]0)\\d{6}",,,,,,,[8]],[,,"(?:(?:2[1-9]|3[1-79])\\d|5(?:33|5[257]))\\d{5}",,,,"22212345"],[,,"562\\d{5}|(?:6\\d|7[16-9])\\d{6}",,,,"62112345"],[,,"800\\d{5}",,,,"80012345"],[,,"90[056]\\d{5}",,,,"90012345"],[,,"808\\d{5}",,,,"80812345"],[,,,,,,,,,[-1]],[,,"3[08]\\d{6}",,,,"30123456"],"MD",373,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"803\\d{5}",,,,"80312345"],,,[,,,,,,,,,[-1]]],ME:[,[,,"(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",,,,,,,[8,9],[6]],[,,"(?:20[2-8]|3(?:[0-2][2-7]|3[24-7])|4(?:0[2-467]|1[2467])|5(?:0[2467]|1[24-7]|2[2-467]))\\d{5}",,,,"30234567",,,[8],[6]],[,,"6(?:[07-9]\\d|3[024]|6[0-25])\\d{5}",,,,"60123456",,,[8]],[,,"80(?:[0-2578]|9\\d)\\d{5}",,,,"80080002"],[,,"9(?:4[1568]|5[178])\\d{5}",,,,"94515151",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"78[1-49]\\d{5}",,,,"78108780",,,[8]],"ME",382,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"77[1-9]\\d{5}",,,,"77273012",,,[8]],,,[,,,,,,,,,[-1]]],MF:[,[,,"(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",,,,,,,[9]],[,,"590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}",,,,"590271234"],[,,"(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}",,,,"690001234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}",,,,"976012345"],"MF",590,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MG:[,[,,"[23]\\d{8}",,,,,,,[9],[7]],[,,"2072[29]\\d{4}|20(?:2\\d|4[47]|5[3467]|6[279]|7[356]|8[268]|9[2457])\\d{5}",,,,"202123456",,,,[7]],[,,"3[2-47-9]\\d{7}",,,,"321234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"22\\d{7}",,,,"221234567"],"MG",261,"00","0",,,"([24-9]\\d{6})$|0","20$1",,,[[,"(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MH:[,[,,"329\\d{4}|(?:[256]\\d|45)\\d{5}",,,,,,,[7]],[,,"(?:247|528|625)\\d{4}",,,,"2471234"],[,,"(?:(?:23|54)5|329|45[35-8])\\d{4}",,,,"2351234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"635\\d{4}",,,,"6351234"],"MH",692,"011","1",,,"1",,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MK:[,[,,"[2-578]\\d{7}",,,,,,,[8],[6,7]],[,,"(?:(?:2(?:62|77)0|3444)\\d|4[56]440)\\d{3}|(?:34|4[357])700\\d{3}|(?:2(?:[0-3]\\d|5[0-578]|6[01]|82)|3(?:1[3-68]|[23][2-68]|4[23568])|4(?:[23][2-68]|4[3-68]|5[2568]|6[25-8]|7[24-68]|8[4-68]))\\d{5}",,,,"22012345",,,,[6,7]],[,,"7(?:3555|(?:474|9[019]7)7)\\d{3}|7(?:[0-25-8]\\d\\d|3(?:[1-478]\\d|6[01])|4(?:2\\d|60|7[01578])|9(?:[2-4]\\d|5[01]|7[015]))\\d{4}",,,,"72345678"],[,,"800\\d{5}",,,,"80012345"],[,,"5\\d{7}",,,,"50012345"],[,,"8(?:0[1-9]|[1-9]\\d)\\d{5}",,,,"80123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MK",389,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ML:[,[,,"[24-9]\\d{7}",,,,,,,[8]],[,,"2(?:07[0-8]|12[67])\\d{4}|(?:2(?:02|1[4-689])|4(?:0[0-4]|4[1-59]))\\d{5}",,,,"20212345"],[,,"2(?:0(?:01|79)|17\\d)\\d{4}|(?:5[0-3]|[679]\\d|8[2-59])\\d{6}",,,,"65012345"],[,,"80\\d{6}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ML",223,"00",,,,,,,,[[,"(\\d{4})","$1",["67[057-9]|74[045]","67(?:0[09]|[59]9|77|8[89])|74(?:0[02]|44|55)"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]],[,,,,,,,,,[-1]],,,[,,"80\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MM:[,[,,"1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",,,,,,,[6,7,8,9,10],[5]],[,,"(?:1(?:(?:12|[28]\\d|3[56]|7[3-6]|9[0-6])\\d|4(?:2[29]|7[0-2]|83)|6)|2(?:2(?:00|8[34])|4(?:0\\d|22|7[0-2]|83)|51\\d\\d)|4(?:2(?:2\\d\\d|48[013])|3(?:20\\d|4(?:70|83)|56)|420\\d|5(?:2\\d|470))|6(?:0(?:[23]|88\\d)|(?:124|[56]2\\d)\\d|2472|3(?:20\\d|470)|4(?:2[04]\\d|472)|7(?:3\\d\\d|4[67]0|8(?:[01459]\\d|8))))\\d{4}|5(?:2(?:2\\d{5,6}|47[02]\\d{4})|(?:3472|4(?:2(?:1|86)|470)|522\\d|6(?:20\\d|483)|7(?:20\\d|48[01])|8(?:20\\d|47[02])|9(?:20\\d|470))\\d{4})|7(?:(?:0470|4(?:25\\d|470)|5(?:202|470|96\\d))\\d{4}|1(?:20\\d{4,5}|4(?:70|83)\\d{4}))|8(?:1(?:2\\d{5,6}|4(?:10|7[01]\\d)\\d{3})|2(?:2\\d{5,6}|(?:320|490\\d)\\d{3})|(?:3(?:2\\d\\d|470)|4[24-7]|5(?:(?:2\\d|51)\\d|4(?:[1-35-9]\\d|4[0-57-9]))|6[23])\\d{4})|(?:1[2-6]\\d|4(?:2[24-8]|3[2-7]|[46][2-6]|5[3-5])|5(?:[27][2-8]|3[2-68]|4[24-8]|5[23]|6[2-4]|8[24-7]|9[2-7])|6(?:[19]20|42[03-6]|(?:52|7[45])\\d)|7(?:[04][24-8]|[15][2-7]|22|3[2-4])|8(?:1[2-689]|2[2-8]|(?:[35]2|64)\\d))\\d{4}|25\\d{5,6}|(?:2[2-9]|6(?:1[2356]|[24][2-6]|3[24-6]|5[2-4]|6[2-8]|7[235-7]|8[245]|9[24])|8(?:3[24]|5[245]))\\d{4}",,,,"1234567",,,[6,7,8,9],[5]],[,,"(?:17[01]|9(?:2(?:[0-4]|[56]\\d\\d)|(?:3(?:[0-36]|4\\d)|(?:6\\d|8[89]|9[4-8])\\d|7(?:3|40|[5-9]\\d))\\d|4(?:(?:[0245]\\d|[1379])\\d|88)|5[0-6])\\d)\\d{4}|9[69]1\\d{6}|9(?:[68]\\d|9[089])\\d{5}",,,,"92123456",,,[7,8,9,10]],[,,"80080(?:0[1-9]|2\\d)\\d{3}",,,,"8008001234",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1333\\d{4}",,,,"13331234",,,[8]],"MM",95,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],[,"(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],[,"(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MN:[,[,,"[12]\\d{7,9}|[5-9]\\d{7}",,,,,,,[8,9,10],[4,5,6]],[,,"[12]2[1-3]\\d{5,6}|(?:(?:[12](?:1|27)|5[368])\\d\\d|7(?:0(?:[0-5]\\d|7[078]|80)|128))\\d{4}|[12](?:3[2-8]|4[2-68]|5[1-4689])\\d{6,7}",,,,"53123456",,,,[4,5,6]],[,,"92[0139]\\d{5}|(?:5[05]|6[069]|7[28]|8[0135689]|9[013-9])\\d{6}",,,,"88123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"712[0-79]\\d{4}|7(?:1[013-9]|[5-79]\\d)\\d{5}",,,,"75123456",,,[8]],"MN",976,"001","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],[,"(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],[,"(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],[,"(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MO:[,[,,"0800\\d{3}|(?:28|[68]\\d)\\d{6}",,,,,,,[7,8]],[,,"(?:28[2-9]|8(?:11|[2-57-9]\\d))\\d{5}",,,,"28212345",,,[8]],[,,"6800[0-79]\\d{3}|6(?:[235]\\d\\d|6(?:0[0-5]|[1-9]\\d)|8(?:0[1-9]|[14-8]\\d|2[5-9]|[39][0-4]))\\d{4}",,,,"66123456",,,[8]],[,,"0800\\d{3}",,,,"0800501",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MO",853,"00",,,,,,,,[[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{4})(\\d{4})","$1 $2",["[268]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MP:[,[,,"[58]\\d{9}|(?:67|90)0\\d{7}",,,,,,,[10],[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"670(?:2(?:3[3-7]|56|8[4-8])|32[1-38]|4(?:33|8[348])|5(?:32|55|88)|6(?:64|70|82)|78[3589]|8[3-9]8|989)\\d{4}",,,,"6702345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MP",1,"011","1",,,"([2-9]\\d{6})$|1","670$1",,1,,,[,,,,,,,,,[-1]],,"670",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MQ:[,[,,"(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",,,,,,,[9]],[,,"(?:596(?:[03-7]\\d|1[05]|2[7-9]|8[0-39]|9[04-9])|80[6-9]\\d\\d|9(?:477[6-9]|767[4589]))\\d{4}",,,,"596301234"],[,,"(?:69[67]\\d\\d|7091[0-3])\\d{4}",,,,"696201234"],[,,"80[0-5]\\d{6}",,,,"800012345"],[,,"8[129]\\d{7}",,,,"810123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:397[0-3]|477[0-5]|76(?:6\\d|7[0-367]))\\d{4}",,,,"976612345"],"MQ",596,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MR:[,[,,"(?:[2-4]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"(?:25[08]|35\\d|45[1-7])\\d{5}",,,,"35123456"],[,,"[2-4][0-46-9]\\d{6}",,,,"22123456"],[,,"800\\d{5}",,,,"80012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MR",222,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MS:[,[,,"(?:[58]\\d\\d|664|900)\\d{7}",,,,,,,[10],[7]],[,,"6644(?:1[0-3]|91)\\d{4}",,,,"6644912345",,,,[7]],[,,"664(?:3(?:49|9[1-6])|49[2-6])\\d{4}",,,,"6644923456",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"MS",1,"011","1",,,"([34]\\d{6})$|1","664$1",,,,,[,,,,,,,,,[-1]],,"664",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MT:[,[,,"3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",,,,,,,[8]],[,,"20(?:3[1-4]|6[059])\\d{4}|2(?:0[19]|[1-357]\\d|60)\\d{5}",,,,"21001234"],[,,"(?:7(?:210|[79]\\d\\d)|9(?:[29]\\d\\d|69[67]|8(?:1[1-3]|89|97)))\\d{4}",,,,"96961234"],[,,"800(?:02|[3467]\\d)\\d{3}",,,,"80071234"],[,,"5(?:0(?:0(?:37|43)|(?:6\\d|70|9[0168])\\d)|[12]\\d0[1-5])\\d{3}",,,,"50037123"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3550\\d{4}",,,,"35501234"],"MT",356,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]],,[,,"7117\\d{4}",,,,"71171234"],,,[,,,,,,,,,[-1]],[,,"501\\d{5}",,,,"50112345"],,,[,,,,,,,,,[-1]]],MU:[,[,,"(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",,,,,,,[7,8,10]],[,,"(?:2(?:[0346-8]\\d|1[0-8])|4(?:[013568]\\d|2[4-8]|71|90)|54(?:[3-5]\\d|71)|6\\d\\d|8(?:14|3[129]))\\d{4}",,,,"54480123",,,[7,8]],[,,"5(?:4(?:2[1-389]|7[1-9])|87[15-8])\\d{4}|(?:5(?:2[5-9]|4[3-689]|[57]\\d|8[0-689]|9[0-8])|7(?:0[0-6]|3[013]))\\d{5}",,,,"52512345",,,[8]],[,,"802\\d{7}|80[0-2]\\d{4}",,,,"8001234",,,[7,10]],[,,"30\\d{5}",,,,"3012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"3(?:20|9\\d)\\d{4}",,,,"3201234",,,[7]],"MU",230,"0(?:0|[24-7]0|3[03])",,,,,,"020",,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[57]"]],[,"(\\d{5})(\\d{5})","$1 $2",["8"]]],,[,,"219\\d{4}",,,,"2190123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MV:[,[,,"(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",,,,,,,[7,10]],[,,"(?:3(?:0[0-4]|3[0-59])|6(?:[58][024689]|6[024-68]|7[02468]))\\d{4}",,,,"6701234",,,[7]],[,,"(?:46[46]|[79]\\d\\d)\\d{4}",,,,"7712345",,,[7]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"900\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MV",960,"0(?:0|19)",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1-$2",["[34679]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"4(?:0[01]|50)\\d{4}",,,,"4001234",,,[7]],,,[,,,,,,,,,[-1]]],MW:[,[,,"(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",,,,,,,[7,9]],[,,"(?:1[2-9]|2[12]\\d\\d)\\d{5}",,,,"1234567"],[,,"111\\d{6}|(?:31|77|[89][89])\\d{7}",,,,"991234567",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MW",265,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MX:[,[,,"[2-9]\\d{9}",,,,,,,[10],[7,8]],[,,"(?:2(?:0[01]|2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[267][1-9]|3[1-8]|[45]\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-36-9]|6[0-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}",,,,"2001234567",,,,[7,8]],[,,"(?:2(?:2\\d|3[1-35-8]|4[13-9]|7[1-689]|8[1-578]|9[467])|3(?:1[1-79]|[2458][1-9]|3\\d|7[1-8]|9[1-5])|4(?:1[1-57-9]|[267][1-9]|3[1-8]|[45]\\d|8[1-35-9]|9[2-689])|5(?:[56]\\d|88|9[1-79])|6(?:1[2-68]|[2-4][1-9]|5[1-36-9]|6[0-57-9]|7[1-7]|8[67]|9[4-8])|7(?:[1346][1-9]|[27]\\d|5[13-9]|8[1-69]|9[17])|8(?:1\\d|2[13-689]|3[1-6]|4[124-6]|6[1246-9]|7[0-378]|9[12479])|9(?:1[346-9]|2[1-4]|3[2-46-8]|5[1348]|[69]\\d|7[12]|8[1-8]))\\d{7}",,,,"2221234567",,,,[7,8]],[,,"8(?:00|88)\\d{7}",,,,"8001234567"],[,,"900\\d{7}",,,,"9001234567"],[,,"300\\d{7}",,,,"3001234567"],[,,"500\\d{7}",,,,"5001234567"],[,,,,,,,,,[-1]],"MX",52,"0[09]",,,,,,"00",,[[,"(\\d{5})","$1",["53"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],[[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MY:[,[,,"1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",,,,,,,[8,9,10],[6,7]],[,,"427[01]\\d{4}|(?:3(?:2[0-36-9]|3[0-368]|4[0-278]|5[0-24-8]|6[0-467]|7[1246-9]|8\\d|9[0-57])\\d|4(?:2[0-689]|[3-79]\\d|8[1-35689])|5(?:2[0-589]|[3468]\\d|5[0-489]|7[1-9]|9[23])|6(?:2[2-9]|3[1357-9]|[46]\\d|5[0-6]|7[0-35-9]|85|9[015-8])|7(?:[2579]\\d|3[03-68]|4[0-8]|6[5-9]|8[0-35-9])|8(?:[24][2-8]|3[2-5]|5[2-7]|6[2-589]|7[2-578]|[89][2-9])|9(?:0[57]|13|[25-7]\\d|[3489][0-8]))\\d{5}",,,,"323856789",,,[8,9],[6,7]],[,,"1(?:1888[689]|4400|8(?:47|8[27])[0-4])\\d{4}|1(?:0(?:[23568]\\d|4[0-6]|7[016-9]|9[0-8])|1(?:[1-5]\\d\\d|6(?:0[5-9]|[1-9]\\d)|7(?:[0-4]\\d|5[0-7]))|(?:[269]\\d|[37][1-9]|4[235-9])\\d|5(?:31|9\\d\\d)|8(?:1[23]|[236]\\d|4[06]|5(?:46|[7-9])|7[016-9]|8[01]|9[0-8]))\\d{5}",,,,"123456789",,,[9,10]],[,,"1[378]00\\d{6}",,,,"1300123456",,,[10]],[,,"1600\\d{6}",,,,"1600123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"15(?:4(?:6[0-4]\\d|8(?:0[125]|[17]\\d|21|3[01]|4[01589]|5[014]|6[02]))|6(?:32[0-6]|78\\d))\\d{4}",,,,"1546012345",,,[10]],"MY",60,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],[,"(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],MZ:[,[,,"(?:2|8\\d)\\d{7}",,,,,,,[8,9]],[,,"2(?:[1346]\\d|5[0-2]|[78][12]|93)\\d{5}",,,,"21123456",,,[8]],[,,"8[2-79]\\d{7}",,,,"821234567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"MZ",258,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NA:[,[,,"[68]\\d{7,8}",,,,,,,[8,9]],[,,"64426\\d{3}|6(?:1(?:2[2-7]|3[01378]|4[0-4])|254|32[0237]|4(?:27|41|5[25])|52[236-8]|626|7(?:2[2-4]|30))\\d{4,5}|6(?:1(?:(?:0\\d|2[0189]|3[24-69]|4[5-9])\\d|17|69|7[014])|2(?:17|5[0-36-8]|69|70)|3(?:17|2[14-689]|34|6[289]|7[01]|81)|4(?:17|2[0-2]|4[06]|5[0137]|69|7[01])|5(?:17|2[0459]|69|7[01])|6(?:17|25|38|42|69|7[01])|7(?:17|2[569]|3[13]|6[89]|7[01]))\\d{4}",,,,"61221234"],[,,"(?:60|8[1245])\\d{7}",,,,"811234567",,,[9]],[,,"80\\d{7}",,,,"800123456",,,[9]],[,,"8701\\d{5}",,,,"870123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8(?:3\\d\\d|86)\\d{5}",,,,"88612345"],"NA",264,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NC:[,[,,"(?:050|[2-57-9]\\d\\d)\\d{3}",,,,,,,[6]],[,,"(?:2[03-9]|3[0-5]|4[1-7]|88)\\d{4}",,,,"201234"],[,,"(?:[579]\\d|8[0-79])\\d{4}",,,,"751234"],[,,"050\\d{3}",,,,"050012"],[,,"36\\d{4}",,,,"366711"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NC",687,"00",,,,,,,,[[,"(\\d{3})","$1",["5[6-8]"]],[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[[,"(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NE:[,[,,"[027-9]\\d{7}",,,,,,,[8]],[,,"2(?:0(?:20|3[1-8]|4[13-5]|5[14]|6[14578]|7[1-578])|1(?:4[145]|5[14]|6[14-68]|7[169]|88))\\d{4}",,,,"20201234"],[,,"(?:23|7[0467]|[89]\\d)\\d{6}",,,,"93123456"],[,,"08\\d{6}",,,,"08123456"],[,,"09\\d{6}",,,,"09123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NE",227,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NF:[,[,,"[13]\\d{5}",,,,,,,[6],[5]],[,,"(?:1(?:06|17|28|39)|3[0-2]\\d)\\d{3}",,,,"106609",,,,[5]],[,,"(?:14|3[58])\\d{4}",,,,"381234",,,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NF",672,"00",,,,"([0-258]\\d{4})$","3$1",,,[[,"(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],[,"(\\d)(\\d{5})","$1 $2",["[13]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NG:[,[,,"(?:20|9\\d)\\d{8}|[78]\\d{9,13}",,,,,,,[10,11,12,13,14],[6,7]],[,,"20(?:[1259]\\d|3[013-9]|4[1-8]|6[024-689]|7[1-79]|8[2-9])\\d{6}",,,,"2033123456",,,[10],[6,7]],[,,"(?:702[0-24-9]|819[01])\\d{6}|(?:7(?:0[13-9]|[12]\\d)|8(?:0[1-9]|1[0-8])|9(?:0[1-9]|1[1-6]))\\d{7}",,,,"8021234567",,,[10]],[,,"800\\d{7,11}",,,,"80017591759"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NG",234,"009","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],[,"(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],[,"(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"700\\d{7,11}",,,,"7001234567"],,,[,,,,,,,,,[-1]]],NI:[,[,,"(?:1800|[25-8]\\d{3})\\d{4}",,,,,,,[8]],[,,"2\\d{7}",,,,"21234567"],[,,"(?:5(?:5[0-7]|[78]\\d)|6(?:20|3[035]|4[045]|5[05]|77|8[1-9]|9[059])|(?:7[5-8]|8\\d)\\d)\\d{5}",,,,"81234567"],[,,"1800\\d{4}",,,,"18001234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NI",505,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NL:[,[,,"(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",,,,,,,[5,6,7,8,9,10,11]],[,,"(?:1(?:[035]\\d|1[13-578]|6[124-8]|7[24]|8[0-467])|2(?:[0346]\\d|2[2-46-9]|5[125]|9[479])|3(?:[03568]\\d|1[3-8]|2[01]|4[1-8])|4(?:[0356]\\d|1[1-368]|7[58]|8[15-8]|9[23579])|5(?:[0358]\\d|[19][1-9]|2[1-57-9]|4[13-8]|6[126]|7[0-3578])|7\\d\\d)\\d{6}",,,,"101234567",,,[9]],[,,"(?:6[1-58]|970\\d)\\d{7}",,,,"612345678",,,[9,11]],[,,"800\\d{4,7}",,,,"8001234",,,[7,8,9,10]],[,,"90[069]\\d{4,7}",,,,"9061234",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:85|91)\\d{7}",,,,"851234567",,,[9]],"NL",31,"00","0",,,"0",,,,[[,"(\\d{4})","$1",["1[238]|[34]"]],[,"(\\d{2})(\\d{3,4})","$1 $2",["14"]],[,"(\\d{6})","$1",["1"]],[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[[,"(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],[,"(\\d)(\\d{8})","$1 $2",["6"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],[,,"66\\d{7}",,,,"662345678",,,[9]],,,[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)\\d",,,,,,,[5,6]],[,,"140(?:1[035]|2[0346]|3[03568]|4[0356]|5[0358]|8[458])|(?:140(?:1[16-8]|2[259]|3[124]|4[17-9]|5[124679]|7)|8[478]\\d{6})\\d",,,,"14020",,,[5,6,9]],,,[,,,,,,,,,[-1]]],NO:[,[,,"(?:0|[2-9]\\d{3})\\d{4}",,,,,,,[5,8]],[,,"(?:2[1-4]|3[1-3578]|5[1-35-7]|6[1-4679]|7[0-8])\\d{6}",,,,"21234567",,,[8]],[,,"(?:4[015-8]|9\\d)\\d{6}",,,,"40612345",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"NO",47,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],,[,,,,,,,,,[-1]],1,"[02-689]|7[0-8]",[,,,,,,,,,[-1]],[,,"(?:0[235-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],NP:[,[,,"(?:1\\d|9)\\d{9}|[1-9]\\d{7}",,,,,,,[8,10,11],[6,7]],[,,"(?:1[0-6]\\d|99[02-6])\\d{5}|(?:2[13-79]|3[135-8]|4[146-9]|5[135-7]|6[13-9]|7[15-9]|8[1-46-9]|9[1-7])[2-6]\\d{5}",,,,"14567890",,,[8],[6,7]],[,,"9(?:00|6[0-3]|7[0-24-6]|8[0-24-68])\\d{7}",,,,"9841234567",,,[10]],[,,"1(?:66001|800\\d\\d)\\d{5}",,,,"16600101234",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NP",977,"00","0",,,"0",,,,[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]],[,"(\\d{4})(\\d{2})(\\d{5})","$1-$2-$3",["1"]]],[[,"(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],[,"(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],[,"(\\d{3})(\\d{7})","$1-$2",["9"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NR:[,[,,"(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",,,,,,,[7]],[,,"444\\d{4}",,,,"4441234"],[,,"(?:222|55[3-9]|666|777|8\\d\\d|999)\\d{4}",,,,"5551234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NR",674,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NU:[,[,,"(?:[4-7]|888\\d)\\d{3}",,,,,,,[4,7]],[,,"[47]\\d{3}",,,,"7012",,,[4]],[,,"(?:[56]|888[1-9])\\d{3}",,,,"8884012"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"NU",683,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],NZ:[,[,,"[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",,,,,,,[5,6,7,8,9,10]],[,,"240\\d{5}|(?:3[2-79]|[49][2-9]|6[235-9]|7[2-57-9])\\d{6}",,,,"32345678",,,[8],[7]],[,,"2(?:[0-27-9]\\d|6)\\d{6,7}|2(?:1\\d|75)\\d{5}",,,,"211234567",,,[8,9,10]],[,,"508\\d{6,7}|80\\d{6,8}",,,,"800123456",,,[8,9,10]],[,,"(?:1[13-57-9]\\d{5}|50(?:0[08]|30|66|77|88))\\d{3}|90\\d{6,8}",,,,"900123456",,,[7,8,9,10]],[,,,,,,,,,[-1]],[,,"70\\d{7}",,,,"701234567",,,[9]],[,,,,,,,,,[-1]],"NZ",64,"0(?:0|161)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"8(?:1[16-9]|22|3\\d|4[045]|5[459]|6[235-9]|7[0-3579]|90)\\d{2,7}",,,,"83012378"],,,[,,,,,,,,,[-1]]],OM:[,[,,"(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",,,,,,,[7,8,9]],[,,"2[1-6]\\d{6}",,,,"23123456",,,[8]],[,,"1505\\d{4}|(?:7(?:[125-9]\\d|41)|9(?:0[1-9]|[1-9]\\d))\\d{5}",,,,"92123456",,,[8]],[,,"8007\\d{4,5}|(?:500|800[05])\\d{4}",,,,"80071234"],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"OM",968,"00",,,,,,,,[[,"(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],[,"(\\d{2})(\\d{6})","$1 $2",["2"]],[,"(\\d{4})(\\d{4})","$1 $2",["[179]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PA:[,[,,"(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",,,,,,,[7,8,10,11]],[,,"(?:1(?:0\\d|1[0479]|2[37]|3[0137]|4[17]|5[05]|6[058]|7[0167]|8[2358]|9[1389])|2(?:[0235-79]\\d|1[0-7]|4[013-9]|8[02-9])|3(?:[047-9]\\d|1[0-8]|2[0-5]|33|5[0-35]|6[068])|4(?:00|3[0-579]|4\\d|7[0-57-9])|5(?:[01]\\d|2[0-7]|[56]0|79)|7(?:0[09]|2[0-26-8]|3[03]|4[04]|5[05-9]|6[0156]|7[0-24-9]|8[4-9]|90)|8(?:09|2[89]|3\\d|4[0-24-689]|5[014]|8[02])|9(?:0[5-9]|1[0135-8]|2[036-9]|3[35-79]|40|5[0457-9]|6[05-9]|7[04-9]|8[35-8]|9\\d))\\d{4}",,,,"2001234",,,[7]],[,,"(?:1[16]1|21[89]|6\\d{3}|8(?:1[01]|7[23]))\\d{4}",,,,"61234567",,,[7,8]],[,,"800\\d{4,5}|(?:00800|800\\d)\\d{6}",,,,"8001234"],[,,"(?:8(?:22|55|60|7[78]|86)|9(?:00|81))\\d{4}",,,,"8601234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PA",507,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],[,"(\\d{4})(\\d{4})","$1-$2",["[68]"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PE:[,[,,"(?:[14-8]|9\\d)\\d{7}",,,,,,,[8,9],[6,7]],[,,"(?:(?:(?:4[34]|5[14])[0-8]|687)\\d|7(?:173|(?:3[0-8]|55)\\d)|8(?:10[05689]|6(?:0[06-9]|1[6-9]|29)|7(?:0[0569]|[56]0)))\\d{4}|(?:1[0-8]|4[12]|5[236]|6[1-7]|7[246]|8[2-4])\\d{6}",,,,"11234567",,,[8],[6,7]],[,,"9\\d{8}",,,,"912345678",,,[9]],[,,"800\\d{5}",,,,"80012345",,,[8]],[,,"805\\d{5}",,,,"80512345",,,[8]],[,,"801\\d{5}",,,,"80112345",,,[8]],[,,"80[24]\\d{5}",,,,"80212345",,,[8]],[,,,,,,,,,[-1]],"PE",51,"00|19(?:1[124]|77|90)00","0"," Anexo ",,"0",,"00",,[[,"(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],[,"(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PF:[,[,,"4\\d{5}(?:\\d{2})?|8\\d{7,8}",,,,,,,[6,8,9]],[,,"4(?:0[4-689]|9[4-68])\\d{5}",,,,"40412345",,,[8]],[,,"8[7-9]\\d{6}",,,,"87123456",,,[8]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"499\\d{5}",,,,"49901234",,,[8]],"PF",689,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,"44\\d{4}",,,,,,,[6]],[,,"44\\d{4}",,,,"440123",,,[6]],,,[,,,,,,,,,[-1]]],PG:[,[,,"(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",,,,,,,[7,8]],[,,"(?:(?:3[0-2]|4[257]|5[34]|9[78])\\d|64[1-9]|85[02-46-9])\\d{4}",,,,"3123456",,,[7]],[,,"(?:7\\d|8[1-48])\\d{6}",,,,"70123456",,,[8]],[,,"180\\d{4}",,,,"1801234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2(?:0[0-57]|7[568])\\d{4}",,,,"2751234",,,[7]],"PG",675,"00|140[1-3]",,,,,,"00",,[[,"(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],[,"(\\d{4})(\\d{4})","$1 $2",["[78]"]]],,[,,"27[01]\\d{4}",,,,"2700123",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PH:[,[,,"(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",,,,,,,[6,8,9,10,11,12,13],[4,5,7]],[,,"(?:(?:2[3-8]|3[2-68]|4[2-9]|5[2-6]|6[2-58]|7[24578])\\d{3}|88(?:22\\d\\d|42))\\d{4}|(?:2|8[2-8]\\d\\d)\\d{5}",,,,"232345678",,,[6,8,9,10],[4,5,7]],[,,"(?:8(?:1[37]|9[5-8])|9(?:0[5-9]|1[0-24-9]|[235-7]\\d|4[2-9]|8[135-9]|9[1-9]))\\d{7}",,,,"9051234567",,,[10]],[,,"1800\\d{7,9}",,,,"180012345678",,,[11,12,13]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PH",63,"00","0",,,"0",,,,[[,"(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],[,"(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],[,"(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],[,"(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PK:[,[,,"122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",,,,,,,[8,9,10,11,12],[5,6,7]],[,,"(?:(?:21|42)[2-9]|58[126])\\d{7}|(?:2[25]|4[0146-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]\\d{6,7}|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8]))[2-9]\\d{5,6}",,,,"2123456789",,,[9,10],[5,6,7,8]],[,,"3(?:[0-247]\\d|3[0-79]|55|64)\\d{7}",,,,"3012345678",,,[10]],[,,"800\\d{5}(?:\\d{3})?",,,,"80012345",,,[8,11]],[,,"900\\d{5}",,,,"90012345",,,[8]],[,,,,,,,,,[-1]],[,,"122\\d{6}",,,,"122044444",,,[9]],[,,,,,,,,,[-1]],"PK",92,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["1"]],[,"(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],[,"(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],[,"(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],[,"(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:2(?:[125]|3[2358]|4[2-4]|9[2-8])|4(?:[0-246-9]|5[3479])|5(?:[1-35-7]|4[2-467])|6(?:0[468]|[1-8])|7(?:[14]|2[236])|8(?:[16]|2[2-689]|3[23578]|4[3478]|5[2356])|9(?:1|22|3[27-9]|4[2-6]|6[3569]|9[2-7]))111\\d{6}",,,,"21111825888",,,[11,12]],,,[,,,,,,,,,[-1]]],PL:[,[,,"(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",,,,,,,[6,7,8,9,10]],[,,"47\\d{7}|(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])(?:[02-9]\\d{6}|1(?:[0-8]\\d{5}|9\\d{3}(?:\\d{2})?))",,,,"123456789",,,[7,9]],[,,"2131[89]\\d{4}|21(?:1[013-5]|2\\d|3[2-9])\\d{5}|(?:45|5[0137]|6[069]|7[2389]|88)\\d{7}",,,,"512345678",,,[9]],[,,"800\\d{6,7}",,,,"800123456",,,[9,10]],[,,"70[01346-8]\\d{6}",,,,"701234567",,,[9]],[,,"801\\d{6}",,,,"801234567",,,[9]],[,,,,,,,,,[-1]],[,,"39\\d{7}",,,,"391234567",,,[9]],"PL",48,"00",,,,,,,,[[,"(\\d{5})","$1",["19"]],[,"(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],[,"(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],[,"(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]],,[,,"64\\d{4,7}",,,,"641234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]],[,,"804\\d{6}",,,,"804123456",,,[9]],,,[,,,,,,,,,[-1]]],PM:[,[,,"[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",,,,,,,[6,9]],[,,"(?:4[1-35-9]|5[0-47-9]|80[6-9]\\d\\d)\\d{4}",,,,"430123"],[,,"(?:4[02-489]|5[02-9]|708(?:4[0-5]|5[0-6]))\\d{4}",,,,"551234"],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,"8[129]\\d{7}",,,,"810123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PM",508,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PR:[,[,,"(?:[589]\\d\\d|787)\\d{7}",,,,,,,[10],[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"(?:787|939)[2-9]\\d{6}",,,,"7872345678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"PR",1,"011","1",,,"1",,,1,,,[,,,,,,,,,[-1]],,"787|939",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PS:[,[,,"[2489]2\\d{6}|(?:1\\d|5)\\d{8}",,,,,,,[8,9,10],[7]],[,,"(?:22[2-47-9]|42[45]|82[014-68]|92[3569])\\d{5}",,,,"22234567",,,[8],[7]],[,,"5[69]\\d{7}",,,,"599123456",,,[9]],[,,"1800\\d{6}",,,,"1800123456",,,[10]],[,,,,,,,,,[-1]],[,,"1700\\d{6}",,,,"1700123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PS",970,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PT:[,[,,"1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",,,,,,,[9]],[,,"2(?:[12]\\d|3[1-689]|4[1-59]|[57][1-9]|6[1-35689]|8[1-69]|9[1256])\\d{6}",,,,"212345678"],[,,"6(?:[06]92(?:30|9\\d)|[35]92(?:[049]\\d|3[034]))\\d{3}|(?:(?:16|6[0356])93|9(?:[1-36]\\d\\d|480))\\d{5}",,,,"912345678"],[,,"80[02]\\d{6}",,,,"800123456"],[,,"(?:6(?:0[178]|4[68])\\d|76(?:0[1-57]|1[2-47]|2[237]))\\d{5}",,,,"760123456"],[,,"80(?:8\\d|9[1579])\\d{5}",,,,"808123456"],[,,"884[0-4689]\\d{5}",,,,"884123456"],[,,"30\\d{7}",,,,"301234567"],"PT",351,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]],,[,,"6(?:222\\d|89(?:00|88|99))\\d{4}",,,,"622212345"],,,[,,,,,,,,,[-1]],[,,"70(?:38[01]|596|(?:7\\d|8[17])\\d)\\d{4}",,,,"707123456"],,,[,,"600\\d{6}|6[06]92(?:0\\d|3[349]|49)\\d{3}",,,,"600110000"]],PW:[,[,,"(?:[24-8]\\d\\d|345|900)\\d{4}",,,,,,,[7]],[,,"(?:2(?:55|77)|345|488|5(?:35|44|87)|6(?:22|54|79)|7(?:33|47)|8(?:24|55|76)|900)\\d{4}",,,,"2771234"],[,,"(?:(?:46|83)[0-5]|(?:6[2-4689]|78)0)\\d{4}|(?:45|77|88)\\d{5}",,,,"6201234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"PW",680,"01[12]",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],PY:[,[,,"59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",,,,,,,[6,7,8,9,10,11],[5]],[,,"(?:[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36])\\d{5,7}|(?:2(?:2[4-68]|[4-68]\\d|7[15]|9[1-5])|3(?:18|3[167]|4[2357]|51|[67]\\d)|4(?:3[12]|5[13]|9[1-47])|5(?:[1-4]\\d|5[02-4])|6(?:3[1-3]|44|7[1-8])|7(?:4[0-4]|5\\d|6[1-578]|75|8[0-8])|858)\\d{5,6}",,,,"212345678",,,[7,8,9],[5,6]],[,,"9(?:51|6[129]|7[1-6]|8[1-7]|9[1-5])\\d{6}",,,,"961456789",,,[9]],[,,"9800\\d{5,7}",,,,"98000123456",,,[9,10,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"8700[0-4]\\d{4}",,,,"870012345",,,[9]],"PY",595,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],[,"(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],[,"(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],[,"(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"[2-9]0\\d{4,7}",,,,"201234567",,,[6,7,8,9]],,,[,,,,,,,,,[-1]]],QA:[,[,,"800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",,,,,,,[7,8,9,11]],[,,"4(?:1111|2022)\\d{3}|4(?:[04]\\d\\d|14[0-6]|999)\\d{4}",,,,"44123456",,,[8]],[,,"[35-7]\\d{7}",,,,"33123456",,,[8]],[,,"800\\d{4}|(?:0080[01]|800)\\d{6}",,,,"8001234",,,[7,9,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"QA",974,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],[,"(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]],,[,,"2[136]\\d{5}",,,,"2123456",,,[7]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RE:[,[,,"709\\d{6}|(?:26|[689]\\d)\\d{7}",,,,,,,[9]],[,,"26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}",,,,"262161234"],[,,"(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}",,,,"692123456"],[,,"80\\d{7}",,,,"801234567"],[,,"89[1-37-9]\\d{6}",,,,"891123456"],[,,"8(?:1[019]|2[0156]|84|90)\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}",,,,"939901234"],"RE",262,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],,[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RO:[,[,,"(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",,,,,,,[6,9]],[,,"[23][13-6]\\d{7}|(?:2(?:19\\d|[3-6]\\d9)|31\\d\\d)\\d\\d",,,,"211234567"],[,,"(?:630|702)0\\d{5}|(?:6(?:00|2\\d)|7(?:0[013-9]|1[0-3]|[2-7]\\d|8[03-8]|9[0-39]))\\d{6}",,,,"712034567",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"90[0136]\\d{6}",,,,"900123456",,,[9]],[,,"801\\d{6}",,,,"801123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RO",40,"00","0"," int ",,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],[,"(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:37\\d|80[578])\\d{6}",,,,"372123456",,,[9]],,,[,,,,,,,,,[-1]]],RS:[,[,,"38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",,,,,,,[6,7,8,9,10,11,12],[4,5]],[,,"(?:11[1-9]\\d|(?:2[389]|39)(?:0[2-9]|[2-9]\\d))\\d{3,8}|(?:1[02-9]|2[0-24-7]|3[0-8])[2-9]\\d{4,9}",,,,"10234567",,,[7,8,9,10,11,12],[4,5,6]],[,,"6(?:[0-689]|7\\d)\\d{6,7}",,,,"601234567",,,[8,9,10]],[,,"800\\d{3,9}",,,,"80012345"],[,,"(?:78\\d|90[0169])\\d{3,7}",,,,"90012345",,,[6,7,8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RS",381,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],[,"(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7[06]\\d{4,10}",,,,"700123456"],,,[,,,,,,,,,[-1]]],RU:[,[,,"8\\d{13}|[347-9]\\d{9}",,,,,,,[10,14],[7]],[,,"336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",,,,"3011234567",,,[10],[7]],[,,"9\\d{9}",,,,"9123456789",,,[10]],[,,"8(?:0[04]|108\\d{3})\\d{7}",,,,"8001234567"],[,,"80[39]\\d{7}",,,,"8091234567",,,[10]],[,,,,,,,,,[-1]],[,,"808\\d{7}",,,,"8081234567",,,[10]],[,,,,,,,,,[-1]],"RU",7,"810","8",,,"8",,"8~10",,[[,"(\\d{3})(\\d{2})(\\d{2})","$1-$2-$3",["[0-79]"]],[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[[,"(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",,1],[,"(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",,1],[,"(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],RW:[,[,,"(?:06|[27]\\d\\d|[89]00)\\d{6}",,,,,,,[8,9]],[,,"(?:06|2[23568]\\d)\\d{6}",,,,"250123456"],[,,"7[237-9]\\d{7}",,,,"720123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"900\\d{6}",,,,"900123456",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"RW",250,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SA:[,[,,"(?:[15]\\d|800|92)\\d{7}",,,,,,,[9,10],[7]],[,,"1(?:1\\d|2[24-8]|3[35-8]|4[3-68]|6[2-5]|7[235-7])\\d{6}",,,,"112345678",,,[9],[7]],[,,"579[01]\\d{5}|5(?:[013-689]\\d|7[0-8])\\d{6}",,,,"512345678",,,[9]],[,,"800\\d{7}",,,,"8001234567",,,[10]],[,,"925\\d{6}",,,,"925012345",,,[9]],[,,"920\\d{6}",,,,"920012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SA",966,"00","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["9"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SB:[,[,,"[6-9]\\d{6}|[1-6]\\d{4}",,,,,,,[5,7]],[,,"(?:1[4-79]|[23]\\d|4[0-2]|5[03]|6[0-37])\\d{3}",,,,"40123",,,[5]],[,,"48\\d{3}|(?:(?:6[89]|7[1-9]|8[4-9])\\d|9(?:1[2-9]|2[013-9]|3[0-2]|[46]\\d|5[0-46-9]|7[0-689]|8[0-79]|9[0-8]))\\d{4}",,,,"7421234"],[,,"1[38]\\d{3}",,,,"18123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[12]\\d{3}",,,,"51123",,,[5]],"SB",677,"0[01]",,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SC:[,[,,"(?:[2489]\\d|64)\\d{5}",,,,,,,[7]],[,,"4[2-46]\\d{5}",,,,"4217123"],[,,"2[125-8]\\d{5}",,,,"2510123"],[,,"800[08]\\d{3}",,,,"8000000"],[,,"85\\d{5}",,,,"8512345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"971\\d{4}|(?:64|95)\\d{5}",,,,"6412345"],"SC",248,"010|0[0-2]",,,,,,"00",,[[,"(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SD:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1(?:5\\d|8[35-7])\\d{6}",,,,"153123456"],[,,"(?:1[0-2]|9[0-3569])\\d{7}",,,,"911231234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SD",249,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SE:[,[,,"(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",,,,,,,[6,7,8,9,10,12]],[,,"(?:(?:[12][136]|3[356]|4[0246]|6[03]|8\\d)\\d|90[1-9])\\d{4,6}|(?:1(?:2[0-35]|4[0-4]|5[0-25-9]|7[13-6]|[89]\\d)|2(?:2[0-7]|4[0136-8]|5[0138]|7[018]|8[01]|9[0-57])|3(?:0[0-4]|1\\d|2[0-25]|4[056]|7[0-2]|8[0-3]|9[023])|4(?:1[013-8]|3[0135]|5[14-79]|7[0-246-9]|8[0156]|9[0-689])|5(?:0[0-6]|[15][0-5]|2[0-68]|3[0-4]|4\\d|6[03-5]|7[013]|8[0-79]|9[01])|6(?:1[1-3]|2[0-4]|4[02-57]|5[0-37]|6[0-3]|7[0-2]|8[0247]|9[0-356])|9(?:1[0-68]|2\\d|3[02-5]|4[0-3]|5[0-4]|[68][01]|7[0135-8]))\\d{5,6}",,,,"8123456",,,[7,8,9]],[,,"7[02369]\\d{7}",,,,"701234567",,,[9]],[,,"20\\d{4,7}",,,,"20123456",,,[6,7,8,9]],[,,"649\\d{6}|99[1-59]\\d{4}(?:\\d{3})?|9(?:00|39|44)[1-8]\\d{3,6}",,,,"9001234567",,,[7,8,9,10]],[,,"77[0-7]\\d{6}",,,,"771234567",,,[9]],[,,"75[1-8]\\d{6}",,,,"751234567",,,[9]],[,,,,,,,,,[-1]],"SE",46,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1"],[,"(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1"],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1"],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1"],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1"]],[[,"(\\d{2})(\\d{2,3})(\\d{2})","$1 $2 $3",["20"]],[,"(\\d{3})(\\d{4})","$1 $2",["9(?:00|39|44|9)"]],[,"(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"]],[,"(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2,3})(\\d{2})","$1 $2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2,3})(\\d{3})","$1 $2 $3",["9(?:00|39|44)"]],[,"(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["10|7"]],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["9"]],[,"(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]"]]],[,,"74[02-9]\\d{6}",,,,"740123456",,,[9]],,,[,,,,,,,,,[-1]],[,,"10[1-8]\\d{6}",,,,"102345678",,,[9]],,,[,,"(?:25[245]|67[3-68])\\d{9}",,,,"254123456789",,,[12]]],SG:[,[,,"(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",,,,,,,[8,10,11]],[,,"662[0-24-9]\\d{4}|6(?:[0-578]\\d|6[013-57-9]|9[0-35-9])\\d{5}",,,,"61234567",,,[8]],[,,"898[02-8]\\d{4}|(?:8(?:0[1-9]|[1-8]\\d|9[0-7])|9[0-8]\\d)\\d{5}",,,,"81234567",,,[8]],[,,"(?:18|8)00\\d{7}",,,,"18001234567",,,[10,11]],[,,"1900\\d{7}",,,,"19001234567",,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:3[12]\\d|666)\\d{5}",,,,"31234567",,,[8]],"SG",65,"0[0-3]\\d",,,,,,,,[[,"(\\d{4,5})","$1",["1[013-9]|77","1(?:[013-8]|9(?:0[1-9]|[1-9]))|77"]],[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[[,"(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],[,"(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],[,"(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"7000\\d{7}",,,,"70001234567",,,[11]],,,[,,,,,,,,,[-1]]],SH:[,[,,"(?:[256]\\d|8)\\d{3}",,,,,,,[4,5]],[,,"2(?:[0-57-9]\\d|6[4-9])\\d\\d",,,,"22158"],[,,"[56]\\d{4}",,,,"51234",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"262\\d\\d",,,,"26212",,,[5]],"SH",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],1,"[256]",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SI:[,[,,"[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",,,,,,,[5,6,7,8]],[,,"(?:[1-357][2-8]|4[24-8])\\d{6}",,,,"12345678",,,[8],[7]],[,,"65(?:[178]\\d|5[56]|6[01])\\d{4}|(?:[37][01]|4[0139]|51|6[489])\\d{6}",,,,"31234567",,,[8]],[,,"80\\d{4,6}",,,,"80123456",,,[6,7,8]],[,,"89[1-3]\\d{2,5}|90\\d{4,6}",,,,"90123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:59\\d\\d|8(?:1(?:[67]\\d|8[0-589])|2(?:0\\d|2[0-37-9]|8[0-2489])|3[389]\\d))\\d{4}",,,,"59012345",,,[8]],"SI",386,"00|10(?:22|66|88|99)","0",,,"0",,"00",,[[,"(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],[,"(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],[,"(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SJ:[,[,,"0\\d{4}|(?:[489]\\d|79)\\d{6}",,,,,,,[5,8]],[,,"79\\d{6}",,,,"79123456",,,[8]],[,,"(?:4[015-8]|9\\d)\\d{6}",,,,"41234567",,,[8]],[,,"80[01]\\d{5}",,,,"80012345",,,[8]],[,,"82[09]\\d{5}",,,,"82012345",,,[8]],[,,"810(?:0[0-6]|[2-8]\\d)\\d{3}",,,,"81021234",,,[8]],[,,"880\\d{5}",,,,"88012345",,,[8]],[,,"85[0-5]\\d{5}",,,,"85012345",,,[8]],"SJ",47,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"79",[,,,,,,,,,[-1]],[,,"(?:0[235-9]|81(?:0(?:0[7-9]|1\\d)|5\\d\\d))\\d{3}",,,,"02000"],,,[,,"81[23]\\d{5}",,,,"81212345",,,[8]]],SK:[,[,,"[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",,,,,,,[6,7,9]],[,,"(?:2(?:16|[2-9]\\d{3})|(?:(?:[3-5][1-8]\\d|819)\\d|601[1-5])\\d)\\d{4}|(?:2|[3-5][1-8])1[67]\\d{3}|[3-5][1-8]16\\d\\d",,,,"221234567"],[,,"909[1-9]\\d{5}|9(?:0[1-8]|1[0-24-9]|4[03-57-9]|5\\d)\\d{6}",,,,"912123456",,,[9]],[,,"800\\d{6}",,,,"800123456",,,[9]],[,,"9(?:00|[78]\\d)\\d{6}",,,,"900123456",,,[9]],[,,"8[5-9]\\d{7}",,,,"850123456",,,[9]],[,,,,,,,,,[-1]],[,,"6(?:02|5[0-4]|9[0-6])\\d{6}",,,,"690123456",,,[9]],"SK",421,"00","0",,,"0",,,,[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d{4})(\\d{3})","$1 $2",["909","9090"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[[,"(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],[,"(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],[,"(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],[,,"9090\\d{3}",,,,"9090123",,,[7]],,,[,,"9090\\d{3}|(?:602|8(?:00|[5-9]\\d)|9(?:00|[78]\\d))\\d{6}",,,,,,,[7,9]],[,,"96\\d{7}",,,,"961234567",,,[9]],,,[,,,,,,,,,[-1]]],SL:[,[,,"(?:[237-9]\\d|66)\\d{6}",,,,,,,[8],[6]],[,,"22[2-4][2-9]\\d{4}",,,,"22221234",,,,[6]],[,,"(?:25|3[0-5]|66|7[1-9]|8[08]|9[09])\\d{6}",,,,"25123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SL",232,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SM:[,[,,"(?:0549|[5-7]\\d)\\d{6}",,,,,,,[8,10],[6]],[,,"0549(?:8[0157-9]|9\\d)\\d{4}",,,,"0549886377",,,[10],[6]],[,,"6[16]\\d{6}",,,,"66661212",,,[8]],[,,,,,,,,,[-1]],[,,"7[178]\\d{6}",,,,"71123456",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"5[158]\\d{6}",,,,"58001110",,,[8]],"SM",378,"00",,,,"([89]\\d{5})$","0549$1",,,[[,"(\\d{6})","$1",["[89]"]],[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],[,"(\\d{4})(\\d{6})","$1 $2",["0"]]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SN:[,[,,"(?:[378]\\d|93)\\d{7}",,,,,,,[9]],[,,"3(?:0(?:1[0-2]|80)|282|3(?:8[1-9]|9[3-9])|611)\\d{5}",,,,"301012345"],[,,"7(?:(?:[06-8]\\d|[19]0|21)\\d|5(?:0[01]|[19]0|2[25]|3[356]|[4-7]\\d|8[35]))\\d{5}",,,,"701234567"],[,,"800\\d{6}",,,,"800123456"],[,,"88[4689]\\d{6}",,,,"884123456"],[,,"81[02468]\\d{6}",,,,"810123456"],[,,,,,,,,,[-1]],[,,"(?:3(?:392|9[01]\\d)\\d|93(?:3[13]0|929))\\d{4}",,,,"933301234"],"SN",221,"00",,,,,,,,[[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SO:[,[,,"[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",,,,,,,[6,7,8,9]],[,,"(?:1\\d|2[0-79]|3[0-46-8]|4[0-7]|5[57-9])\\d{5}|(?:[134]\\d|8[125])\\d{4}",,,,"4012345",,,[6,7]],[,,"(?:(?:15|(?:3[59]|4[89]|6\\d|7[679]|8[08])\\d|9(?:0\\d|[2-9]))\\d|2(?:4\\d|8))\\d{5}|(?:[67]\\d\\d|904)\\d{5}",,,,"71123456",,,[7,8,9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SO",252,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{4})","$1 $2",["8[125]"]],[,"(\\d{6})","$1",["[134]"]],[,"(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],[,"(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],[,"(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SR:[,[,,"(?:[2-5]|[6-8]\\d|90)\\d{5}",,,,,,,[6,7]],[,,"(?:2[1-3]|3[0-7]|4\\d|5[2-58])\\d{4}",,,,"211234",,,[6]],[,,"(?:6[08]|7[124-7]|8[1-9])\\d{5}",,,,"7412345",,,[7]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"56\\d{4}",,,,"561234",,,[6]],"SR",597,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],[,"(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],[,"(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SS:[,[,,"[19]\\d{8}",,,,,,,[9]],[,,"1[89]\\d{7}",,,,"181234567"],[,,"(?:12|9[1257-9])\\d{7}",,,,"977123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SS",211,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ST:[,[,,"(?:22|9\\d)\\d{5}",,,,,,,[7]],[,,"22\\d{5}",,,,"2221234"],[,,"900[5-9]\\d{3}|9(?:0[1-9]|[89]\\d)\\d{4}",,,,"9812345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"ST",239,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[29]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SV:[,[,,"[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",,,,,,,[7,8,11]],[,,"2(?:79(?:0[0347-9]|[1-9]\\d)|89(?:0[024589]|[1-9]\\d))\\d{3}|2(?:[1-69]\\d|[78][0-8])\\d{5}",,,,"21234567",,,[8]],[,,"[67]\\d{7}",,,,"70123456",,,[8]],[,,"800\\d{8}|80[01]\\d{4}",,,,"8001234",,,[7,11]],[,,"900\\d{4}(?:\\d{4})?",,,,"9001234",,,[7,11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SV",503,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[89]"]],[,"(\\d{4})(\\d{4})","$1 $2",["[267]"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SX:[,[,,"7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"7215(?:4[2-8]|8[239]|9[056])\\d{4}",,,,"7215425678",,,,[7]],[,,"7215(?:1[02]|2\\d|5[034679]|8[014-8])\\d{4}",,,,"7215205678",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002123456"],[,,"900[2-9]\\d{6}",,,,"9002123456"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"SX",1,"011","1",,,"(5\\d{6})$|1","721$1",,,,,[,,,,,,,,,[-1]],,"721",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SY:[,[,,"[1-359]\\d{8}|[1-5]\\d{7}",,,,,,,[8,9],[6,7]],[,,"21\\d{6,7}|(?:1(?:[14]\\d|[2356])|2[235]|3(?:[13]\\d|4)|4[134]|5[1-3])\\d{6}",,,,"112345678",,,,[6,7]],[,,"(?:50|9[1-9])\\d{7}",,,,"944567890",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"SY",963,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",,1]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],SZ:[,[,,"0800\\d{4}|(?:[237]\\d|900)\\d{6}",,,,,,,[8,9]],[,,"[23][2-5]\\d{6}",,,,"22171234",,,[8]],[,,"7[5-9]\\d{6}",,,,"76123456",,,[8]],[,,"0800\\d{4}",,,,"08001234",,,[8]],[,,"900\\d{6}",,,,"900012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"70\\d{6}",,,,"70012345",,,[8]],"SZ",268,"00",,,,,,,,[[,"(\\d{4})(\\d{4})","$1 $2",["[0237]"]],[,"(\\d{5})(\\d{4})","$1 $2",["9"]]],,[,,,,,,,,,[-1]],,,[,,"0800\\d{4}",,,,,,,[8]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TA:[,[,,"8\\d{3}",,,,,,,[4]],[,,"8\\d{3}",,,,"8999"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TA",290,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"8",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TC:[,[,,"(?:[58]\\d\\d|649|900)\\d{7}",,,,,,,[10],[7]],[,,"649(?:266|712|9(?:4\\d|50))\\d{4}",,,,"6497121234",,,,[7]],[,,"649(?:2(?:3[129]|4[1-79])|3\\d\\d|4[34][1-3])\\d{4}",,,,"6492311234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"649(?:71[01]|966)\\d{4}",,,,"6497101234",,,,[7]],"TC",1,"011","1",,,"([2-479]\\d{6})$|1","649$1",,,,,[,,,,,,,,,[-1]],,"649",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TD:[,[,,"(?:22|30|[689]\\d|77)\\d{6}",,,,,,,[8]],[,,"22(?:[37-9]0|5[0-5]|6[89])\\d{4}",,,,"22501234"],[,,"(?:30|[69]\\d|77|8[56])\\d{6}",,,,"63012345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TD",235,"00|16",,,,,,"00",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TG:[,[,,"[279]\\d{7}",,,,,,,[8]],[,,"2(?:2[2-7]|3[23]|4[45]|55|6[67]|77)\\d{5}",,,,"22212345"],[,,"(?:7[0-29]|9[0-36-9])\\d{6}",,,,"90112345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TG",228,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TH:[,[,,"(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",,,,,,,[8,9,10,13]],[,,"(?:1[0689]|2\\d|3[2-9]|4[2-5]|5[2-6]|7[3-7])\\d{6}",,,,"21234567",,,[8]],[,,"67(?:1[0-8]|2[4-7])\\d{5}|(?:14|6[1-6]|[89]\\d)\\d{7}",,,,"812345678",,,[9]],[,,"(?:001800\\d|1800)\\d{6}",,,,"1800123456",,,[10,13]],[,,"1900\\d{6}",,,,"1900123456",,,[10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"6[08]\\d{7}",,,,"601234567",,,[9]],"TH",66,"00[1-9]","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],[,"(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TJ:[,[,,"[0-57-9]\\d{8}",,,,,,,[9],[3,5,6,7]],[,,"(?:3(?:1[3-5]|2[245]|3[12]|4[24-7]|5[25]|72)|4(?:46|74|87))\\d{6}",,,,"372123456",,,,[3,5,6,7]],[,,"(?:33[03-9]|4(?:1[18]|4[02-479])|81[1-9])\\d{6}|(?:[09]\\d|1[0-27-9]|2[0-27]|[34]0|5[05]|7[01578]|8[078])\\d{7}",,,,"917123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TJ",992,"810",,,,,,"8~10",,[[,"(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],[,"(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TK:[,[,,"[2-47]\\d{3,6}",,,,,,,[4,5,6,7]],[,,"(?:2[2-4]|[34]\\d)\\d{2,5}",,,,"3101"],[,,"7[2-4]\\d{2,5}",,,,"7290"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TK",690,"00",,,,,,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TL:[,[,,"7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",,,,,,,[7,8]],[,,"(?:2[1-5]|3[1-9]|4[1-4])\\d{5}",,,,"2112345",,,[7]],[,,"7[2-8]\\d{6}",,,,"77212345",,,[8]],[,,"80\\d{5}",,,,"8012345",,,[7]],[,,"90\\d{5}",,,,"9012345",,,[7]],[,,,,,,,,,[-1]],[,,"70\\d{5}",,,,"7012345",,,[7]],[,,,,,,,,,[-1]],"TL",670,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],[,"(\\d{4})(\\d{4})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TM:[,[,,"(?:[1-6]\\d|71)\\d{6}",,,,,,,[8]],[,,"(?:1(?:2\\d|3[1-9])|2(?:22|4[0-35-8])|3(?:22|4[03-9])|4(?:22|3[128]|4\\d|6[15])|5(?:22|5[7-9]|6[014-689]))\\d{5}",,,,"12345678"],[,,"(?:6\\d|71)\\d{6}",,,,"66123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TM",993,"810","8",,,"8",,"8~10",,[[,"(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],[,"(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],[,"(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TN:[,[,,"[2-57-9]\\d{7}",,,,,,,[8]],[,,"81200\\d{3}|(?:3[0-2]|7\\d)\\d{6}",,,,"30010123"],[,,"3(?:001|[12]40)\\d{4}|(?:(?:[259]\\d|4[0-8])\\d|3(?:1[1-35]|6[0-4]|91))\\d{5}",,,,"20123456"],[,,"8010\\d{4}",,,,"80101234"],[,,"88\\d{6}",,,,"88123456"],[,,"8[12]10\\d{4}",,,,"81101234"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TN",216,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TO:[,[,,"(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",,,,,,,[5,7]],[,,"(?:2\\d|3[0-8]|4[0-4]|50|6[09]|7[0-24-69]|8[05])\\d{3}",,,,"20123",,,[5]],[,,"(?:5(?:4[0-5]|5[4-6])|6(?:[09]\\d|3[02]|8[15-9])|(?:7\\d|8[46-9])\\d|999)\\d{4}",,,,"7715123",,,[7]],[,,"0800\\d{3}",,,,"0800222",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"55[0-37-9]\\d{4}",,,,"5510123",,,[7]],"TO",676,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],[,"(\\d{4})(\\d{3})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TR:[,[,,"4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",,,,,,,[7,10,12,13]],[,,"(?:2(?:[13][26]|[28][2468]|[45][268]|[67][246])|3(?:[13][28]|[24-6][2468]|[78][02468]|92)|4(?:[16][246]|[23578][2468]|4[26]))\\d{7}",,,,"2123456789",,,[10]],[,,"561(?:011|61\\d)\\d{4}|5(?:0[15-7]|1[06]|24|[34]\\d|5[1-59]|9[46])\\d{7}",,,,"5012345678",,,[10]],[,,"8(?:00\\d{7}(?:\\d{2,3})?|11\\d{7})",,,,"8001234567",,,[10,12,13]],[,,"(?:8[89]8|900)\\d{7}",,,,"9001234567",,,[10]],[,,,,,,,,,[-1]],[,,"592(?:21[12]|461)\\d{4}",,,,"5922121234",,,[10]],[,,"850\\d{7}",,,,"8500123456",,,[10]],"TR",90,"00","0",,,"0",,,,[[,"(\\d{3})(\\d)(\\d{3})","$1 $2 $3",["444"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",,1],[,"(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",,1]],[,,"512\\d{7}",,,,"5123456789",,,[10]],,,[,,"(?:444|811\\d{3})\\d{4}",,,,,,,[7,10]],[,,"444\\d{4}",,,,"4441444",,,[7]],,,[,,,,,,,,,[-1]]],TT:[,[,,"(?:[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"868(?:2(?:01|1[5-9]|[23]\\d|4[0-2])|6(?:0[7-9]|1[02-8]|2[1-9]|[3-69]\\d|7[0-79])|82[124])\\d{4}",,,,"8682211234",,,,[7]],[,,"868(?:(?:2[5-9]|3\\d)\\d|4(?:3[0-6]|[6-9]\\d)|6(?:20|78|8\\d)|7(?:0[1-9]|1[02-9]|[2-9]\\d))\\d{4}",,,,"8682911234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"TT",1,"011","1",,,"([2-46-8]\\d{6})$|1","868$1",,,,,[,,,,,,,,,[-1]],,"868",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"868619\\d{4}",,,,"8686191234",,,,[7]]],TV:[,[,,"(?:2|7\\d\\d|90)\\d{4}",,,,,,,[5,6,7]],[,,"2[02-9]\\d{3}",,,,"20123",,,[5]],[,,"(?:7[01]\\d|90)\\d{4}",,,,"901234",,,[6,7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"TV",688,"00",,,,,,,,[[,"(\\d{2})(\\d{3})","$1 $2",["2"]],[,"(\\d{2})(\\d{4})","$1 $2",["90"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],TW:[,[,,"[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",,,,,,,[7,8,9,10,11]],[,,"(?:2[2-8]\\d|370|55[01]|7[1-9])\\d{6}|4(?:(?:0(?:0[1-9]|[2-48]\\d)|1[023]\\d)\\d{4,5}|(?:[239]\\d\\d|4(?:0[56]|12|49))\\d{5})|6(?:[01]\\d{7}|4(?:0[56]|12|24|4[09])\\d{4,5})|8(?:(?:2(?:3\\d|4[0-269]|[578]0|66)|36[24-9]|90\\d\\d)\\d{4}|4(?:0[56]|12|24|4[09])\\d{4,5})|(?:2(?:2(?:0\\d\\d|4(?:0[68]|[249]0|3[0-467]|5[0-25-9]|6[0235689]))|(?:3(?:[09]\\d|1[0-4])|(?:4\\d|5[0-49]|6[0-29]|7[0-5])\\d)\\d)|(?:(?:3[2-9]|5[2-8]|6[0-35-79]|8[7-9])\\d\\d|4(?:2(?:[089]\\d|7[1-9])|(?:3[0-4]|[78]\\d|9[01])\\d))\\d)\\d{3}",,,,"221234567",,,[8,9]],[,,"(?:40001[0-2]|9[0-8]\\d{4})\\d{3}",,,,"912345678",,,[9]],[,,"80[0-79]\\d{6}|800\\d{5}",,,,"800123456",,,[8,9]],[,,"20(?:[013-9]\\d\\d|2)\\d{4}",,,,"203123456",,,[7,9]],[,,,,,,,,,[-1]],[,,"99\\d{7}",,,,"990123456",,,[9]],[,,"7010(?:[0-2679]\\d|3[0-7]|8[0-5])\\d{5}|70\\d{8}",,,,"7012345678",,,[10,11]],"TW",886,"0(?:0[25-79]|19)","0","#",,"0",,,,[[,"(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],[,"(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"50[0-46-9]\\d{6}",,,,"500123456",,,[9]],,,[,,,,,,,,,[-1]]],TZ:[,[,,"(?:[25-8]\\d|41|90)\\d{7}",,,,,,,[9]],[,,"2[2-8]\\d{7}",,,,"222345678"],[,,"(?:6[125-9]|7[13-9])\\d{7}",,,,"621234567"],[,,"80[08]\\d{6}",,,,"800123456"],[,,"90\\d{7}",,,,"900123456"],[,,"8(?:40|6[01])\\d{6}",,,,"840123456"],[,,,,,,,,,[-1]],[,,"41\\d{7}",,,,"412345678"],"TZ",255,"00[056]","0",,,"0",,,,[[,"(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["5"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,"(?:8(?:[04]0|6[01])|90\\d)\\d{6}"],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UA:[,[,,"[89]\\d{9}|[3-9]\\d{8}",,,,,,,[9,10],[5,6,7]],[,,"(?:3[1-8]|4[13-8]|5[1-7]|6[12459])\\d{7}",,,,"311234567",,,[9],[5,6,7]],[,,"790\\d{6}|(?:39|50|6[36-8]|7[1-357]|9[1-9])\\d{7}",,,,"501234567",,,[9]],[,,"800[1-8]\\d{5,6}",,,,"800123456"],[,,"900[239]\\d{5,6}",,,,"900212345"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"89[1-579]\\d{6}",,,,"891234567",,,[9]],"UA",380,"00","0",,,"0",,"0~0",,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],[,"(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UG:[,[,,"800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",,,,,,,[9],[5,6,7]],[,,"20(?:(?:240|30[67])\\d|6(?:00[0-2]|30[0-4]))\\d{3}|(?:20(?:[017]\\d|2[5-9]|3[1-4]|5[0-4]|6[15-9])|[34]\\d{3})\\d{5}",,,,"312345678",,,,[5,6,7]],[,,"72[48]0\\d{5}|7(?:[014-8]\\d|2[067]|36|9[0-289])\\d{6}",,,,"712345678"],[,,"800[1-3]\\d{5}",,,,"800123456"],[,,"90[1-3]\\d{6}",,,,"901123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UG",256,"00[057]","0",,,"0",,,,[[,"(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],[,"(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],US:[,[,,"[2-9]\\d{9}|3\\d{6}",,,,,,,[10],[7]],[,,"3052(?:0[0-8]|[1-9]\\d)\\d{4}|(?:2742|305[3-9])\\d{6}|(?:472|983)[2-47-9]\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-269])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"3052(?:0[0-8]|[1-9]\\d)\\d{4}|(?:2742|305[3-9])\\d{6}|(?:472|983)[2-47-9]\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-269])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}",,,,"2015550123",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"305209\\d{4}",,,,"3052090123",,,,[7]],"US",1,"011","1",,,"1",,,1,[[,"(\\d{3})(\\d{4})","$1-$2",["310"],,,1],[,"(\\d{3})(\\d{4})","$1-$2",["[24-9]|3(?:[02-9]|1[1-9])"]],[,"(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],,,1]],[[,"(\\d{3})(\\d{4})","$1-$2",["310"],,,1],[,"(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[2-9]"]]],[,,,,,,,,,[-1]],1,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],UY:[,[,,"0004\\d{2,9}|[1249]\\d{7}|2\\d{3,4}|(?:[49]\\d|80)\\d{5}",,,,,,,[4,5,6,7,8,9,10,11,12,13]],[,,"(?:1(?:770|9(?:20|[89]7))|(?:2\\d|4[2-7])\\d\\d)\\d{4}",,,,"21231234",,,[8],[7]],[,,"9[1-9]\\d{6}",,,,"94231234",,,[8]],[,,"0004\\d{2,9}|(?:405|80[05])\\d{4}",,,,"8001234",,,[6,7,8,9,10,11,12,13]],[,,"90[0-8]\\d{4}",,,,"9001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UY",598,"0(?:0|1[3-9]\\d)","0"," int. ",,"0",,"00",,[[,"(\\d{4,5})","$1",["21"]],[,"(\\d{3})(\\d{3,4})","$1 $2",["0"]],[,"(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],[,"(\\d{4})(\\d{4})","$1 $2",["[124]"]],[,"(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"21\\d{2,3}",,,,"21123",,,[4,5]],,,[,,,,,,,,,[-1]]],UZ:[,[,,"(?:20|33|[5-9]\\d)\\d{7}",,,,,,,[9]],[,,"(?:55\\d\\d|6(?:1(?:22|3[124]|4[1-4]|5[1-3578]|64)|2(?:22|3[0-57-9]|41)|5(?:22|3[3-7]|5[024-8])|[69]\\d\\d|7(?:[23]\\d|7[69]))|7(?:0(?:5[4-9]|6[0146]|7[124-6]|9[135-8])|[168]\\d\\d|2(?:22|3[13-57-9]|4[1-3579]|5[14])|3(?:2\\d|3[1578]|4[1-35-7]|5[1-57]|61)|4(?:2\\d|3[1-579]|7[1-79])|5(?:22|5[1-9]|6[1457])|9(?:22|5[1-9])))\\d{5}",,,,"669050123"],[,,"(?:(?:[25]0|33|8[78]|9[0-57-9])\\d{3}|6(?:1(?:2(?:2[01]|98)|35[0-4]|50\\d|61[23]|7(?:[01][017]|4\\d|55|9[5-9]))|2(?:(?:11|7\\d)\\d|2(?:[12]1|9[01379])|5(?:[126]\\d|3[0-4]))|5(?:19[01]|2(?:27|9[26])|(?:30|59|7\\d)\\d)|6(?:2(?:1[5-9]|2[0367]|38|41|52|60)|(?:3[79]|9[0-3])\\d|4(?:56|83)|7(?:[07]\\d|1[017]|3[07]|4[047]|5[057]|67|8[0178]|9[79]))|7(?:2(?:24|3[237]|4[5-9]|7[15-8])|5(?:7[12]|8[0589])|7(?:0\\d|[39][07])|9(?:0\\d|7[079])))|7(?:[07]\\d{3}|2(?:2(?:2[79]|95)|3(?:2[5-9]|6[0-6])|57\\d|7(?:0\\d|1[17]|2[27]|3[37]|44|5[057]|66|88))|3(?:2(?:1[0-6]|21|3[469]|7[159])|(?:33|9[4-6])\\d|5(?:0[0-4]|5[579]|9\\d)|7(?:[0-3579]\\d|4[0467]|6[67]|8[078]))|4(?:2(?:29|5[0257]|6[0-7]|7[1-57])|5(?:1[0-4]|8\\d|9[5-9])|7(?:0\\d|1[024589]|2[0-27]|3[0137]|[46][07]|5[01]|7[5-9]|9[079])|9(?:7[015-9]|[89]\\d))|5(?:112|2(?:0\\d|2[29]|[49]4)|3[1568]\\d|52[6-9]|7(?:0[01578]|1[017]|[23]7|4[047]|[5-7]\\d|8[78]|9[079]))|9(?:22[128]|3(?:2[0-4]|7\\d)|57[02569]|7(?:2[05-9]|3[37]|4\\d|60|7[2579]|87|9[07]))))\\d{4}",,,,"912345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"UZ",998,"00",,,,,,,,[[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VA:[,[,,"0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",,,,,,,[6,7,8,9,10,11,12]],[,,"06698\\d{1,6}",,,,"0669812345",,,[6,7,8,9,10,11]],[,,"3[1-9]\\d{8}|3[2-9]\\d{7}",,,,"3123456789",,,[9,10]],[,,"80(?:0\\d{3}|3)\\d{3}",,,,"800123456",,,[6,9]],[,,"(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",,,,"899123456",,,[6,8,9,10]],[,,"84(?:[08]\\d{3}|[17])\\d{3}",,,,"848123456",,,[6,9]],[,,"1(?:78\\d|99)\\d{6}",,,,"1781234567",,,[9,10]],[,,"55\\d{8}",,,,"5512345678",,,[10]],"VA",39,"00",,,,,,,,,,[,,,,,,,,,[-1]],,"06698",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"3[2-8]\\d{9,10}",,,,"33101234501",,,[11,12]]],VC:[,[,,"(?:[58]\\d\\d|784|900)\\d{7}",,,,,,,[10],[7]],[,,"784(?:266|3(?:6[6-9]|7\\d|8[0-6])|4(?:38|5[0-36-8]|8[0-8])|5(?:55|7[0-2]|93)|638|784)\\d{4}",,,,"7842661234",,,,[7]],[,,"784(?:4(?:3[0-5]|5[45]|89|9[0-8])|5(?:2[6-9]|3[0-4])|720)\\d{4}",,,,"7844301234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,"78451[0-2]\\d{4}",,,,"7845101234",,,,[7]],"VC",1,"011","1",,,"([2-7]\\d{6})$|1","784$1",,,,,[,,,,,,,,,[-1]],,"784",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VE:[,[,,"[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",,,,,,,[10],[7]],[,,"(?:2(?:12|3[457-9]|[467]\\d|[58][1-9]|9[1-6])|[4-6]00)\\d{7}",,,,"2121234567",,,,[7]],[,,"4(?:1[24-8]|2[246])\\d{7}",,,,"4121234567"],[,,"800\\d{7}",,,,"8001234567"],[,,"90[01]\\d{7}",,,,"9001234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"VE",58,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1","$CC $1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"501\\d{7}",,,,"5010123456",,,,[7]],,,[,,,,,,,,,[-1]]],VG:[,[,,"(?:284|[58]\\d\\d|900)\\d{7}",,,,,,,[10],[7]],[,,"284(?:229|4(?:22|9[45])|774|8(?:52|6[459]))\\d{4}",,,,"2842291234",,,,[7]],[,,"284(?:245|3(?:0[0-3]|4[0-7]|68|9[34])|4(?:4[0-6]|68|9[69])|5(?:4[0-7]|68|9[69]))\\d{4}",,,,"2843001234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VG",1,"011","1",,,"([2-578]\\d{6})$|1","284$1",,,,,[,,,,,,,,,[-1]],,"284",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VI:[,[,,"[58]\\d{9}|(?:34|90)0\\d{7}",,,,,,,[10],[7]],[,,"340(?:2(?:0\\d|10|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"340(?:2(?:0\\d|10|2[06-8]|4[49]|77)|3(?:32|44)|4(?:2[23]|44|7[34]|89)|5(?:1[34]|55)|6(?:2[56]|4[23]|77|9[023])|7(?:1[2-57-9]|2[57]|7\\d)|884|998)\\d{4}",,,,"3406421234",,,,[7]],[,,"8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",,,,"8002345678"],[,,"900[2-9]\\d{6}",,,,"9002345678"],[,,,,,,,,,[-1]],[,,"52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}",,,,"5002345678"],[,,,,,,,,,[-1]],"VI",1,"011","1",,,"([2-9]\\d{6})$|1","340$1",,1,,,[,,,,,,,,,[-1]],,"340",[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],VN:[,[,,"[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",,,,,,,[7,8,9,10]],[,,"2(?:0[3-9]|1[0-689]|2[0-25-9]|[38][2-9]|4[2-8]|5[124-9]|6[0-39]|7[0-7]|9[0-4679])\\d{7}",,,,"2101234567",,,[10]],[,,"(?:5(?:2[238]|59)|89[6-9]|99[013-9])\\d{6}|(?:3\\d|5[1689]|7[06-9]|8[1-8]|9[0-8])\\d{7}",,,,"912345678",,,[9]],[,,"1800\\d{4,6}|12(?:0[13]|28)\\d{4}",,,,"1800123456",,,[8,9,10]],[,,"1900\\d{4,6}",,,,"1900123456",,,[8,9,10]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"672\\d{6}",,,,"672012345",,,[9]],"VN",84,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[17]99"],"0$1",,1],[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{3})(\\d{4,5})","$1 $2",["69"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[[,"(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",,1],[,"(\\d{4})(\\d{4,6})","$1 $2",["1"],,,1],[,"(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",,1],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",,1],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",,1],[,"(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",,1]],[,,,,,,,,,[-1]],,,[,,"[17]99\\d{4}|69\\d{5,6}",,,,,,,[7,8]],[,,"(?:[17]99|80\\d)\\d{4}|69\\d{5,6}",,,,"1992000",,,[7,8]],,,[,,,,,,,,,[-1]]],VU:[,[,,"[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",,,,,,,[5,7]],[,,"(?:38[0-8]|48[4-9])\\d\\d|(?:2[02-9]|3[4-7]|88)\\d{3}",,,,"22123",,,[5]],[,,"(?:[58]\\d|7[013-7])\\d{5}",,,,"5912345",,,[7]],[,,"81[18]\\d\\d",,,,"81123",,,[5]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:0[1-9]|1[01])\\d{4}",,,,"9010123",,,[7]],"VU",678,"00",,,,,,,,[[,"(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"(?:3[03]|900\\d)\\d{3}",,,,"30123"],,,[,,,,,,,,,[-1]]],WF:[,[,,"(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",,,,,,,[6,9]],[,,"72\\d{4}",,,,"721234",,,[6]],[,,"(?:72|8[23])\\d{4}",,,,"821234",,,[6]],[,,"80[0-5]\\d{6}",,,,"800012345",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9[23]\\d{4}",,,,"921234",,,[6]],"WF",681,"00",,,,,,,,[[,"(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],[,"(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"[48]0\\d{4}",,,,"401234",,,[6]]],WS:[,[,,"(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",,,,,,,[5,6,7,10]],[,,"6[1-9]\\d{3}|(?:[2-5]|60)\\d{4}",,,,"22123",,,[5,6]],[,,"(?:7[1-35-8]|8(?:[3-7]|9\\d{3}))\\d{5}",,,,"7212345",,,[7,10]],[,,"800\\d{3}",,,,"800123",,,[6]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"WS",685,"0",,,,,,,,[[,"(\\d{5})","$1",["[2-5]|6[1-9]"]],[,"(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],[,"(\\d{2})(\\d{5})","$1 $2",["7"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],XK:[,[,,"2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",,,,,,,[8,9,10,11,12]],[,,"38\\d{6,10}|(?:2[89]|39)(?:0\\d{5,6}|[1-9]\\d{5})",,,,"28012345"],[,,"4[3-9]\\d{6}",,,,"43201234",,,[8]],[,,"800\\d{5}",,,,"80001234",,,[8]],[,,"900\\d{5}",,,,"90001234",,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"XK",383,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],[,"(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YE:[,[,,"(?:1|7\\d)\\d{7}|[1-7]\\d{6}",,,,,,,[7,8,9],[6]],[,,"78[0-7]\\d{4}|17\\d{6}|(?:[12][2-68]|3[2358]|4[2-58]|5[2-6]|6[3-58]|7[24-6])\\d{5}",,,,"1234567",,,[7,8],[6]],[,,"7[01378]\\d{7}",,,,"712345678",,,[9]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"YE",967,"00","0",,,"0",,,,[[,"(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],YT:[,[,,"7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",,,,,,,[9]],[,,"269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}",,,,"269601234"],[,,"(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}",,,,"639012345"],[,,"80\\d{7}",,,,"801234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"9(?:(?:39|47)8[01]|769\\d)\\d{4}",,,,"939801234"],"YT",262,"00","0",,,"0",,,,,,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZA:[,[,,"[1-79]\\d{8}|8\\d{4,9}",,,,,,,[5,6,7,8,9,10]],[,,"(?:2(?:0330|4302)|52087)0\\d{3}|(?:1[0-8]|2[1-378]|3[1-69]|4\\d|5[1346-8])\\d{7}",,,,"101234567",,,[9]],[,,"(?:1(?:3492[0-25]|4495[0235]|549(?:20|5[01]))|4[34]492[01])\\d{3}|8[1-4]\\d{3,7}|(?:2[27]|47|54)4950\\d{3}|(?:1(?:049[2-4]|9[12]\\d\\d)|(?:50[0-2]|6\\d\\d|7(?:[0-46-9]\\d|5[0-4]))\\d\\d|8(?:5\\d{3}|7(?:08[67]|158|28[5-9]|310)))\\d{4}|(?:1[6-8]|28|3[2-69]|4[025689]|5[36-8])4920\\d{3}|(?:12|[2-5]1)492\\d{4}",,,,"711234567",,,[5,6,7,8,9]],[,,"80\\d{7}",,,,"801234567",,,[9]],[,,"(?:86[2-9]|9[0-2]\\d)\\d{6}",,,,"862345678",,,[9]],[,,"860\\d{6}",,,,"860123456",,,[9]],[,,,,,,,,,[-1]],[,,"87(?:08[0-589]|15[0-79]|28[0-4]|31[1-9])\\d{4}|87(?:[02][0-79]|1[0-46-9]|3[02-9]|[4-9]\\d)\\d{5}",,,,"871234567",,,[9]],"ZA",27,"00","0",,,"0",,,,[[,"(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"861\\d{6,7}",,,,"861123456",,,[9,10]],,,[,,,,,,,,,[-1]]],ZM:[,[,,"800\\d{6}|(?:21|[579]\\d|63)\\d{7}",,,,,,,[9],[6]],[,,"21[1-8]\\d{6}",,,,"211234567",,,,[6]],[,,"(?:[59][5-8]|7[5-9])\\d{7}",,,,"955123456"],[,,"800\\d{6}",,,,"800123456"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"63\\d{7}",,,,"630123456"],"ZM",260,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3})","$1 $2",["[1-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],ZW:[,[,,"2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",,,,,,,[5,6,7,8,9,10],[3,4]],[,,"(?:1(?:(?:3\\d|9)\\d|[4-8])|2(?:(?:(?:0(?:2[014]|5)|(?:2[0157]|31|84|9)\\d\\d|[56](?:[14]\\d\\d|20)|7(?:[089]|2[03]|[35]\\d\\d))\\d|4(?:2\\d\\d|8))\\d|1(?:2|[39]\\d{4}))|3(?:(?:123|(?:29\\d|92)\\d)\\d\\d|7(?:[19]|[56]\\d))|5(?:0|1[2-478]|26|[37]2|4(?:2\\d{3}|83)|5(?:25\\d\\d|[78])|[689]\\d)|6(?:(?:[16-8]21|28|52[013])\\d\\d|[39])|8(?:[1349]28|523)\\d\\d)\\d{3}|(?:4\\d\\d|9[2-9])\\d{4,5}|(?:(?:2(?:(?:(?:0|8[146])\\d|7[1-7])\\d|2(?:[278]\\d|92)|58(?:2\\d|3))|3(?:[26]|9\\d{3})|5(?:4\\d|5)\\d\\d)\\d|6(?:(?:(?:[0-246]|[78]\\d)\\d|37)\\d|5[2-8]))\\d\\d|(?:2(?:[569]\\d|8[2-57-9])|3(?:[013-59]\\d|8[37])|6[89]8)\\d{3}",,,,"1312345",,,,[3,4]],[,,"7(?:[1278]\\d|3[1-9])\\d{6}",,,,"712345678",,,[9]],[,,"80(?:[01]\\d|20|8[0-8])\\d{3}",,,,"8001234",,,[7]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"86(?:1[12]|22|30|44|55|77|8[368])\\d{6}",,,,"8686123456",,,[10]],"ZW",263,"00","0",,,"0",,,,[[,"(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],[,"(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],[,"(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],[,"(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],[,"(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],[,"(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],[,"(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],[,"(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],[,"(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],[,"(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],800:[,[,,"(?:00|[1-9]\\d)\\d{6}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:00|[1-9]\\d)\\d{6}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",800,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["\\d"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],808:[,[,,"[1-9]\\d{7}",,,,,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1-9]\\d{7}",,,,"12345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",808,,,,,,,,1,[[,"(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],870:[,[,,"7\\d{11}|[235-7]\\d{8}",,,,,,,[9,12]],[,,,,,,,,,[-1]],[,,"(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}",,,,"301234567"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"2\\d{8}",,,,"201234567",,,[9]],"001",870,,,,,,,,,[[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],878:[,[,,"10\\d{10}",,,,,,,[12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"10\\d{10}",,,,"101234567890"],"001",878,,,,,,,,1,[[,"(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],881:[,[,,"6\\d{9}|[0-36-9]\\d{8}",,,,,,,[9,10]],[,,,,,,,,,[-1]],[,,"6\\d{9}|[0-36-9]\\d{8}",,,,"612345678"],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",881,,,,,,,,,[[,"(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],[,"(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],882:[,[,,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",,,,,,,[7,8,9,10,11,12]],[,,,,,,,,,[-1]],[,,"342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",,,,"3421234",,,[7,8,9,10,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}",,,,"390123456789"],"001",882,,,,,,,,,[[,"(\\d{2})(\\d{5})","$1 $2",["16|342"]],[,"(\\d{2})(\\d{6})","$1 $2",["49"]],[,"(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],[,"(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],[,"(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],[,"(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],[,"(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],[,"(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,"348[57]\\d{7}",,,,"34851234567",,,[11]]],883:[,[,,"(?:[1-4]\\d|51)\\d{6,10}",,,,,,,[8,9,10,11,12]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}",,,,"510012345"],"001",883,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],[,"(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],[,"(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],[,"(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],[,"(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]],888:[,[,,"\\d{11}",,,,,,,[11]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",888,,,,,,,,1,[[,"(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,"\\d{11}",,,,"12345678901"],,,[,,,,,,,,,[-1]]],979:[,[,,"[1359]\\d{8}",,,,,,,[9],[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,"[1359]\\d{8}",,,,"123456789",,,,[8]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],"001",979,,,,,,,,1,[[,"(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],,[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]],[,,,,,,,,,[-1]],,,[,,,,,,,,,[-1]]]};function j(){this.g={}}j.h=void 0,j.g=function(){return j.h?j.h:j.h=new j};var H={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"},B={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","+":"+","*":"*","#":"#"},V={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",A:"2",B:"2",C:"2",D:"3",E:"3",F:"3",G:"4",H:"4",I:"4",J:"5",K:"5",L:"5",M:"6",N:"6",O:"6",P:"7",Q:"7",R:"7",S:"7",T:"8",U:"8",V:"8",W:"9",X:"9",Y:"9",Z:"9"},G=RegExp("[+＋]+"),K=RegExp("^[+＋]+"),J=RegExp("([0-9０-９٠-٩۰-۹])"),Z=RegExp("[+＋0-9０-９٠-٩۰-۹]"),W=/[\\\/] *x/,Q=RegExp("[^0-9０-９٠-٩۰-۹A-Za-z#]+$"),Y=/(?:.*?[A-Za-z]){3}.*/,X=RegExp("^\\+([0-9０-９٠-٩۰-۹]|[\\-\\.\\(\\)]?)*[0-9０-９٠-٩۰-۹]([0-9０-９٠-٩۰-۹]|[\\-\\.\\(\\)]?)*$"),tt=RegExp("^([A-Za-z0-9０-９٠-٩۰-۹]+((\\-)*[A-Za-z0-9０-９٠-٩۰-۹])*\\.)*[A-Za-z]+((\\-)*[A-Za-z0-9０-９٠-٩۰-۹])*\\.?$");function et(t){return"([0-9０-９٠-٩۰-۹]{1,"+t+"})"}function it(){return";ext="+et("20")+"|[  \\t,]*(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)[:\\.．]?[  \\t,-]*"+et("20")+"#?|[  \\t,]*(?:[xｘ#＃~～]|int|ｉｎｔ)[:\\.．]?[  \\t,-]*"+et("9")+"#?|[- ]+"+et("6")+"#|[  \\t]*(?:,{2}|;)[:\\.．]?[  \\t,-]*"+et("15")+"#?|[  \\t]*(?:,)+[:\\.．]?[  \\t,-]*"+et("9")+"#?"}var nt=new RegExp("(?:"+it()+")$","i"),st=new RegExp("^[0-9０-９٠-٩۰-۹]{2}$|^[+＋]*(?:[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～*]*[0-9０-９٠-٩۰-۹]){3,}[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～*A-Za-z0-9０-９٠-٩۰-۹]*(?:"+it()+")?$","i"),at=/(\$\d)/,rt=/^\(?\$1\)?$/;function ot(t){return!(2>t.length)&&Mt(st,t)}function dt(t){return Mt(Y,t)?ut(t,V):ut(t,H)}function lt(t){var e=dt(t.toString());T(t),t.g(e)}function ct(t){return null!=t&&(1!=x(t,9)||-1!=b(t,9)[0])}function ut(t,e){for(var i,n=new I,s=t.length,a=0;a<s;++a)null!=(i=e[(i=t.charAt(a)).toUpperCase()])&&n.g(i);return n.toString()}function ht(t){return 0==t.length||rt.test(t)}function pt(t){return null!=t&&isNaN(t)&&t.toUpperCase()in q}function mt(t,e,i){return bt(t,"001"==i?""+e:i)}function ft(t){if(!g(t,2))return"";var e=""+$(t,2);return g(t,4)&&$(t,4)&&0<y(t,8)?Array(y(t,8)+1).join("0")+e:e}function gt(t,e,i,n){switch(e){case 0:return"+"+t+i+n;case 1:return"+"+t+" "+i+n;case 3:return"tel:+"+t+"-"+i+n;default:return i+n}}function vt(t,e){switch(e){case 4:return $(t,5);case 3:return $(t,4);case 1:return $(t,3);case 0:case 2:return $(t,2);case 5:return $(t,6);case 6:return $(t,8);case 7:return $(t,7);case 8:return $(t,21);case 9:return $(t,25);case 10:return $(t,28);default:return $(t,1)}}function $t(t,e){var i=wt(t,e);return null==(t=mt(t,y(e,1),i))?-1:yt(e=ft(e),t)}function yt(t,e){return xt(t,$(e,1))?xt(t,$(e,5))?4:xt(t,$(e,4))?3:xt(t,$(e,6))?5:xt(t,$(e,8))?6:xt(t,$(e,7))?7:xt(t,$(e,21))?8:xt(t,$(e,25))?9:xt(t,$(e,28))?10:xt(t,$(e,2))?$(e,18)||xt(t,$(e,3))?2:0:!$(e,18)&&xt(t,$(e,3))?1:-1:-1}function bt(t,e){if(null==e)return null;e=e.toUpperCase();var i=t.g[e];if(null==i){if(null==(i=q[e]))return null;i=(new E).g(D.m(),i),t.g[e]=i}return i}function xt(t,e){var i=t.length;return!(0<x(e,9)&&-1==b(e,9).indexOf(i))&&Mt(y(e,2),t)}function wt(t,e){if(null==e)return null;var i=y(e,1);if(null==(i=R[i]))t=null;else if(1==i.length)t=i[0];else t:{e=ft(e);for(var n,s=i.length,a=0;a<s;a++){var r=bt(t,n=i[a]);if(g(r,23)){if(0==e.search($(r,23))){t=n;break t}}else if(-1!=yt(e,r)){t=n;break t}}t=null}return t}function _t(t){return null==(t=R[t])?"ZZ":t[0]}function kt(t,e){if(null==(t=bt(t,e)))throw Error("Invalid region code: "+e);return y(t,10)}function St(t,e,i,n){var s=vt(i,n),a=0==x(s,9)?b($(i,1),9):b(s,9);if(s=b(s,10),2==n){if(!ct(vt(i,0)))return St(t,e,i,1);ct(t=vt(i,1))&&((a=a.concat(0==x(t,9)?b($(i,1),9):b(t,9))).sort(),0==s.length?s=b(t,10):(s=s.concat(b(t,10))).sort())}return-1==a[0]?5:(e=e.length,-1<s.indexOf(e)?4:(i=a[0])==e?0:i>e?2:a[a.length-1]<e?3:-1<a.indexOf(e,1)?0:5)}function Ct(t,e,i){var n=ft(e);return(e=y(e,1))in R?St(t,n,e=mt(t,e,_t(e)),i):1}function Pt(t,e){if(0==(t=t.toString()).length||"0"==t.charAt(0))return 0;for(var i,n=t.length,s=1;3>=s&&s<=n;++s)if((i=parseInt(t.substring(0,s),10))in R)return e.g(t.substring(s)),i;return 0}function Et(t,e,i,n,s,a){if(0==e.length)return 0;var r;e=new I(e),null!=i&&(r=$(i,11)),null==r&&(r="NonMatch");var o=e.toString();if(0==o.length)r=20;else if(K.test(o))o=o.replace(K,""),T(e),e.g(dt(o)),r=1;else{if(o=new RegExp(r),lt(e),0==(r=e.toString()).search(o)){o=r.match(o)[0].length;var d=r.substring(o).match(J);d&&null!=d[1]&&0<d[1].length&&"0"==ut(d[1],H)?r=!1:(T(e),e.g(r.substring(o)),r=!0)}else r=!1;r=r?5:20}if(s&&w(a,6,r),20!=r){if(2>=e.h.length)throw Error("Phone number too short after IDD");if(0!=(t=Pt(e,n)))return w(a,1,t),t;throw Error("Invalid country calling code")}return null!=i&&(o=""+(r=y(i,10)),0==(d=e.toString()).lastIndexOf(o,0)&&(o=new I(d.substring(o.length)),d=$(i,1),d=new RegExp(y(d,2)),It(o,i,null),o=o.toString(),!Mt(d,e.toString())&&Mt(d,o)||3==St(t,e.toString(),i,-1)))?(n.g(o),s&&w(a,6,10),w(a,1,r),r):(w(a,1,0),0)}function It(t,e,i){var n=t.toString(),s=n.length,a=$(e,15);if(0!=s&&null!=a&&0!=a.length){var r=new RegExp("^(?:"+a+")");if(s=r.exec(n)){var o=Mt(a=new RegExp(y($(e,1),2)),n),d=s.length-1;null==(e=$(e,16))||0==e.length||null==s[d]||0==s[d].length?o&&!Mt(a,n.substring(s[0].length))||(null!=i&&0<d&&null!=s[d]&&i.g(s[1]),t.set(n.substring(s[0].length))):(n=n.replace(r,e),(!o||Mt(a,n))&&(null!=i&&0<d&&i.g(s[1]),t.set(n)))}}}function Tt(t,e,i){if(!pt(i)&&0<e.length&&"+"!=e.charAt(0))throw Error("Invalid country calling code");return At(t,e,i,!0)}function At(t,e,i,n){if(null==e)throw Error("The string supplied did not seem to be a phone number");if(250<e.length)throw Error("The string supplied is too long to be a phone number");var s=new I,a=e.indexOf(";phone-context=");if(-1===a)a=null;else if((a+=15)>=e.length)a="";else{var r=e.indexOf(";",a);a=-1!==r?e.substring(a,r):e.substring(a)}var o=a;if(null==o?r=!0:0===o.length?r=!1:(r=X.exec(o),o=tt.exec(o),r=null!==r||null!==o),!r)throw Error("The string supplied did not seem to be a phone number");if(null!=a?("+"===a.charAt(0)&&s.g(a),a=e.indexOf("tel:"),s.g(e.substring(0<=a?a+4:0,e.indexOf(";phone-context=")))):(a=s.g,0<=(o=(r=null!=e?e:"").search(Z))?0<=(o=(r=(r=r.substring(o)).replace(Q,"")).search(W))&&(r=r.substring(0,o)):r="",a.call(s,r)),0<(r=(a=s.toString()).indexOf(";isub="))&&(T(s),s.g(a.substring(0,r))),!ot(s.toString()))throw Error("The string supplied did not seem to be a phone number");if(a=s.toString(),!(pt(i)||null!=a&&0<a.length&&K.test(a)))throw Error("Invalid country calling code");a=new U,n&&w(a,5,e);t:{if(0<=(r=(e=s.toString()).search(nt))&&ot(e.substring(0,r)))for(var d=(o=e.match(nt)).length,l=1;l<d;++l)if(null!=o[l]&&0<o[l].length){T(s),s.g(e.substring(0,r)),e=o[l];break t}e=""}0<e.length&&w(a,3,e),r=bt(t,i),e=new I,o=0,d=s.toString();try{o=Et(t,d,r,e,n,a)}catch(c){if("Invalid country calling code"!=c.message||!K.test(d))throw c;if(0==(o=Et(t,d=d.replace(K,""),r,e,n,a)))throw c}if(0!=o?(s=_t(o))!=i&&(r=mt(t,o,s)):(lt(s),e.g(s.toString()),null!=i?w(a,1,o=y(r,10)):n&&(delete a.h[6],a.g&&delete a.g[6])),2>e.h.length)throw Error("The string supplied is too short to be a phone number");if(null!=r&&(i=new I,It(s=new I(e.toString()),r,i),2!=(t=St(t,s.toString(),r,-1))&&4!=t&&5!=t&&(e=s,n&&0<i.toString().length&&w(a,7,i.toString()))),2>(t=(n=e.toString()).length))throw Error("The string supplied is too short to be a phone number");if(17<t)throw Error("The string supplied is too long to be a phone number");if(1<n.length&&"0"==n.charAt(0)){for(w(a,4,!0),t=1;t<n.length-1&&"0"==n.charAt(t);)t++;1!=t&&w(a,8,t)}return w(a,2,parseInt(n,10)),a}function Mt(t,e){return!(!(t=e.match(new RegExp("^(?:"+("string"==typeof t?t:t.source)+")$","i")))||t[0].length!=e.length)}function Lt(t){this.fa=RegExp(" "),this.ja="",this.v=new I,this.da="",this.s=new I,this.ba=new I,this.u=!0,this.ea=this.ca=this.la=!1,this.ga=j.g(),this.$=0,this.h=new I,this.ha=!1,this.o="",this.g=new I,this.j=[],this.ka=t,this.l=Ut(this,this.ka)}j.prototype.format=function(t,e){if(0==$(t,2)&&g(t,5)){var i=y(t,5);if(0<i.length)return i}i=y(t,1);var n=ft(t);if(0==e)return gt(i,0,n,"");if(!(i in R))return n;var s=mt(this,i,_t(i));t=g(t,3)&&0!=$(t,3).length?3==e?";ext="+$(t,3):g(s,13)?$(s,13)+y(t,3):" ext. "+y(t,3):"";t:{for(var a,r=(s=0==b(s,20).length||2==e?b(s,19):b(s,20)).length,o=0;o<r;++o){var d=x(a=s[o],3);if((0==d||0==n.search($(a,3,d-1)))&&Mt(d=new RegExp($(a,1)),n)){s=a;break t}}s=null}return null!=s&&(s=y(r=s,2),a=new RegExp($(r,1)),y(r,5),r=y(r,4),n=2==e&&null!=r&&0<r.length?n.replace(a,s.replace(at,r)):n.replace(a,s),3==e&&(n=(n=n.replace(RegExp("^[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]+"),"")).replace(RegExp("[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]+","g"),"-"))),gt(i,e,n,t)};var Ft=new D;w(Ft,11,"NA");var Dt=RegExp("^[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]*\\$1[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]*(\\$\\d[-x‐-―−ー－-／  ­​⁠　()（）［］.\\[\\]/~⁓∼～]*)*$"),Nt=/[- ]/;function Ut(t,e){var i=t.ga;return e=pt(e)?kt(i,e):0,null!=(t=bt(t.ga,_t(e)))?t:Ft}function Ot(t){for(var e=t.j.length,i=0;i<e;++i){var n=t.j[i],s=y(n,1);if(t.da==s)return!1;var a=t,r=n,o=y(r,1);T(a.v);var d=a;r=y(r,2);var l="999999999999999".match(o)[0];if(0<(d=l.length<d.g.h.length?"":(d=l.replace(new RegExp(o,"g"),r)).replace(RegExp("9","g")," ")).length?(a.v.g(d),a=!0):a=!1,a)return t.da=s,t.ha=Nt.test($(n,4)),t.$=0,!0}return t.u=!1}function zt(t,e){for(var i=[],n=e.length-3,s=t.j.length,a=0;a<s;++a){var r=t.j[a];0==x(r,3)?i.push(t.j[a]):(r=$(r,3,Math.min(n,x(r,3)-1)),0==e.search(r)&&i.push(t.j[a]))}t.j=i}function Rt(t,e){t.s.g(e);var i=e;if(J.test(i)||1==t.s.h.length&&G.test(i)?("+"==e?(i=e,t.ba.g(e)):(i=H[e],t.ba.g(i),t.g.g(i)),e=i):(t.u=!1,t.la=!0),!t.u){if(!t.la)if(Kt(t)){if(Jt(t))return qt(t)}else if(0<t.o.length&&(e=t.g.toString(),T(t.g),t.g.g(t.o),t.g.g(e),i=(e=t.h.toString()).lastIndexOf(t.o),T(t.h),t.h.g(e.substring(0,i))),t.o!=Gt(t))return t.h.g(" "),qt(t);return t.s.toString()}switch(t.ba.h.length){case 0:case 1:case 2:return t.s.toString();case 3:if(!Kt(t))return t.o=Gt(t),Bt(t);t.ea=!0;default:return t.ea?(Jt(t)&&(t.ea=!1),t.h.toString()+t.g.toString()):0<t.j.length?(e=Zt(t,e),0<(i=jt(t)).length?i:(zt(t,t.g.toString()),Ot(t)?Vt(t):t.u?Ht(t,e):t.s.toString())):Bt(t)}}function qt(t){return t.u=!0,t.ea=!1,t.j=[],t.$=0,T(t.v),t.da="",Bt(t)}function jt(t){for(var e=t.g.toString(),i=t.j.length,n=0;n<i;++n){var s=t.j[n],a=y(s,1);if(new RegExp("^(?:"+a+")$").test(e)&&(t.ha=Nt.test($(s,4)),ut(s=Ht(t,s=e.replace(new RegExp(a,"g"),$(s,2))),B)==t.ba))return s}return""}function Ht(t,e){var i=t.h.h.length;return t.ha&&0<i&&" "!=t.h.toString().charAt(i-1)?t.h+" "+e:t.h+e}function Bt(t){var e=t.g.toString();if(3<=e.length){for(var i=t.ca&&0==t.o.length&&0<x(t.l,20)?b(t.l,20):b(t.l,19),n=i.length,s=0;s<n;++s){var a=i[s];0<t.o.length&&ht(y(a,4))&&!$(a,6)&&!g(a,5)||(0!=t.o.length||t.ca||ht(y(a,4))||$(a,6))&&Dt.test(y(a,2))&&t.j.push(a)}return zt(t,e),0<(e=jt(t)).length?e:Ot(t)?Vt(t):t.s.toString()}return Ht(t,e)}function Vt(t){var e=t.g.toString(),i=e.length;if(0<i){for(var n="",s=0;s<i;s++)n=Zt(t,e.charAt(s));return t.u?Ht(t,n):t.s.toString()}return t.h.toString()}function Gt(t){var e=t.g.toString(),i=0;if(1!=$(t.l,10))var n=!1;else n="1"==(n=t.g.toString()).charAt(0)&&"0"!=n.charAt(1)&&"1"!=n.charAt(1);return n?(i=1,t.h.g("1").g(" "),t.ca=!0):g(t.l,15)&&(n=new RegExp("^(?:"+$(t.l,15)+")"),null!=(n=e.match(n))&&null!=n[0]&&0<n[0].length&&(t.ca=!0,i=n[0].length,t.h.g(e.substring(0,i)))),T(t.g),t.g.g(e.substring(i)),e.substring(0,i)}function Kt(t){var e=t.ba.toString(),i=new RegExp("^(?:\\+|"+$(t.l,11)+")");return null!=(i=e.match(i))&&null!=i[0]&&0<i[0].length&&(t.ca=!0,i=i[0].length,T(t.g),t.g.g(e.substring(i)),T(t.h),t.h.g(e.substring(0,i)),"+"!=e.charAt(0)&&t.h.g(" "),!0)}function Jt(t){if(0==t.g.h.length)return!1;var e=new I,i=Pt(t.g,e);return 0!=i&&(T(t.g),t.g.g(e.toString()),"001"==(e=_t(i))?t.l=bt(t.ga,""+i):e!=t.ka&&(t.l=Ut(t,e)),t.h.g(""+i).g(" "),t.o="",!0)}function Zt(t,e){var i=t.v.toString();if(0<=i.substring(t.$).search(t.fa)){var n=i.search(t.fa);return e=i.replace(t.fa,e),T(t.v),t.v.g(e),t.$=n,e.substring(0,t.$+1)}return 1==t.j.length&&(t.u=!1),t.da="",t.s.toString()}const Wt=t=>{const e=[];return t.includes("FIXED_LINE_OR_MOBILE")?(t.includes("MOBILE")||e.push("MOBILE"),t.includes("FIXED_LINE")||e.push("FIXED_LINE")):(t.includes("MOBILE")||t.includes("FIXED_LINE"))&&e.push("FIXED_LINE_OR_MOBILE"),t.concat(e)},Qt={FIXED_LINE:0,MOBILE:1,FIXED_LINE_OR_MOBILE:2,TOLL_FREE:3,PREMIUM_RATE:4,SHARED_COST:5,VOIP:6,PERSONAL_NUMBER:7,PAGER:8,UAN:9,VOICEMAIL:10,UNKNOWN:-1};e("intlTelInputUtilsTemp",{}),e("intlTelInputUtilsTemp.formatNumberAsYouType",(t,e)=>{try{const i=t.replace(/[^+0-9]/g,""),n=new Lt(e);e="";for(let t=0;t<i.length;t++)n.ja=Rt(n,i.charAt(t)),e=n.ja;return e}catch(i){return t}}),e("intlTelInputUtilsTemp.formatNumber",(t,e,i)=>{try{const s=j.g(),a=Tt(s,t,e);var n=Ct(s,a,-1);return 0==n||4==n?s.format(a,void 0===i?0:i):t}catch(s){return t}}),e("intlTelInputUtilsTemp.getExampleNumber",(t,e,i,n)=>{try{const d=j.g();t:{var s=d;if(pt(t)){var a=vt(bt(s,t),i);try{if(g(a,6)){var r=At(s,$(a,6),t,!1);break t}}catch(o){}}r=null}return d.format(r,n?0:e?2:1)}catch(d){return""}}),e("intlTelInputUtilsTemp.getExtension",(t,e)=>{try{return $(Tt(j.g(),t,e),3)}catch(i){return""}}),e("intlTelInputUtilsTemp.getNumberType",(t,e)=>{try{const i=j.g();return $t(i,Tt(i,t,e))}catch(i){return-99}}),e("intlTelInputUtilsTemp.getValidationError",(t,e)=>{if(!e)return 1;try{const i=j.g();return Ct(i,Tt(i,t,e),-1)}catch(i){return"Invalid country calling code"===i.message?1:3>=t.length||"Phone number too short after IDD"===i.message||"The string supplied is too short to be a phone number"===i.message?2:"The string supplied is too long to be a phone number"===i.message?3:-99}}),e("intlTelInputUtilsTemp.isValidNumber",(t,e,i)=>{try{const n=j.g(),s=Tt(n,t,e),a=function(t,e){var i=wt(t,e),n=y(e,1),s=mt(t,n,i);return s=null!=s&&("001"==i||n==kt(t,i))&&-1!=yt(t=ft(e),s)}(n,s);if(i){const t=Wt(i).map(t=>Qt[t]);return a&&t.includes($t(n,s))}return a}catch(n){return!1}}),e("intlTelInputUtilsTemp.isPossibleNumber",(t,e,i)=>{try{const n=j.g(),s=Tt(n,t,e);if(i){const t=Wt(i);for(let e of t)if(0===Ct(n,s,Qt[e]))return!0;return!1}return 0===Ct(n,s,-1)}catch(n){return!1}}),e("intlTelInputUtilsTemp.getCoreNumber",(t,e)=>{try{return $(Tt(j.g(),t,e),2).toString()}catch(i){return""}}),e("intlTelInputUtilsTemp.numberFormat",{E164:0,INTERNATIONAL:1,NATIONAL:2,RFC3966:3}),e("intlTelInputUtilsTemp.numberType",Qt),e("intlTelInputUtilsTemp.validationError",{IS_POSSIBLE:0,INVALID_COUNTRY_CODE:1,TOO_SHORT:2,TOO_LONG:3,IS_POSSIBLE_LOCAL_ONLY:4,INVALID_LENGTH:5})}();const Ua="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0,Oa=Ua.intlTelInputUtilsTemp;delete Ua.intlTelInputUtilsTemp;const za=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),Ra=".enhanced-debug-overlay{position:fixed;bottom:0;left:0;right:0;z-index:999999;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,SF Pro Display,sans-serif;font-size:13px;line-height:1.4;color:#fff;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 -4px 32px #0000004d}.enhanced-debug-overlay.collapsed{height:60px}.enhanced-debug-overlay.expanded{height:40vh;min-height:450px;max-height:calc(100vh - 120px)}body:has(.enhanced-debug-overlay.expanded){padding-bottom:40vh}.debug-body-expanded{padding-bottom:40vh!important;box-sizing:border-box}html.debug-body-expanded{overflow-x:hidden}.debug-bottom-bar{display:flex;align-items:center;justify-content:space-between;height:60px;background:linear-gradient(135deg,#1a1a1a,#2d2d2d);border-top:1px solid #3C7DFF;padding:0 20px;backdrop-filter:blur(20px)}.debug-logo-section{display:flex;align-items:center;gap:12px}.debug-logo{color:#3c7dff;filter:drop-shadow(0 0 8px rgba(60,125,255,.3))}.debug-title{font-weight:600;font-size:16px;color:#fff;letter-spacing:-.2px}.debug-status{display:flex;align-items:center;gap:6px;margin-left:12px;padding:4px 8px;background:#3c7dff1a;border-radius:12px;border:1px solid rgba(60,125,255,.2)}.status-indicator{width:6px;height:6px;border-radius:50%;background:#0f8;box-shadow:0 0 6px #0f8;animation:pulse 2s infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.5}}.status-text{font-size:11px;color:#3c7dff;font-weight:500}.debug-quick-stats{display:flex;align-items:center;gap:24px}.stat-item{display:flex;flex-direction:column;align-items:center;gap:2px}.stat-value{font-size:16px;font-weight:700;color:#3c7dff;min-width:40px;text-align:center}.stat-label{font-size:10px;color:#888;text-transform:uppercase;font-weight:500;letter-spacing:.5px}.debug-controls{display:flex;align-items:center;gap:8px}.debug-control-btn,.debug-expand-btn{width:36px;height:36px;border:none;border-radius:8px;background:#ffffff1a;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;position:relative;overflow:hidden}.debug-control-btn:hover,.debug-expand-btn:hover{background:#3c7dff33;transform:translateY(-1px);box-shadow:0 4px 12px #3c7dff4d}.debug-control-btn.active{background:#3c7dff4d;color:#87b4ff;box-shadow:inset 0 0 0 1px #3c7dff80}.debug-control-btn.active:hover{background:#3c7dff66}.debug-expand-btn{background:#3c7dff;color:#fff}.debug-expand-btn:hover{background:#2563eb;transform:translateY(-1px) scale(1.05)}.expand-icon{transition:transform .3s ease}.expand-icon.rotated{transform:rotate(180deg)}.close-btn:hover{background:#ff475733!important;color:#ff4757}.debug-expanded-content{display:flex;height:calc(100% - 60px);background:#1a1a1a}.debug-highlight{outline:2px solid #3C7DFF!important;outline-offset:2px!important;background:#3c7dff1a!important;position:relative!important;z-index:999998!important}.debug-highlight:after{content:attr(data-debug-label);position:absolute;top:-30px;left:0;background:#3c7dff;color:#fff;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:500;white-space:nowrap;z-index:999999}@media (max-width: 768px){.debug-quick-stats{display:none}.debug-bottom-bar{padding:0 12px}}@media (max-width: 640px){.debug-title{display:none}}",qa='.debug-sidebar{width:240px;background:linear-gradient(180deg,#222,#1a1a1a);border-right:1px solid #333;display:flex;flex-direction:column}.debug-panel-tabs{flex:1;padding:16px 0}.debug-panel-tab{width:100%;display:flex;align-items:center;gap:12px;padding:12px 20px;border:none;background:none;color:#888;cursor:pointer;transition:all .2s ease;position:relative;font-size:14px}.debug-panel-tab:hover{background:#3c7dff1a;color:#fff}.debug-panel-tab.active{background:#3c7dff26;color:#3c7dff;border-right:3px solid #3C7DFF}.debug-panel-tab.active:before{content:"";position:absolute;left:0;top:0;bottom:0;width:3px;background:#3c7dff}.tab-icon{font-size:16px;width:20px;text-align:center}.tab-label{font-weight:500;flex:1}.tab-badge{background:#3c7dff;color:#fff;font-size:10px;font-weight:600;padding:2px 6px;border-radius:10px;min-width:16px;text-align:center}.debug-sidebar-footer{padding:16px;border-top:1px solid #333;display:flex;flex-direction:column;gap:8px}.sidebar-btn{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #333;border-radius:6px;background:#ffffff0d;color:#888;cursor:pointer;font-size:12px;transition:all .2s ease}.sidebar-btn:hover{background:#3c7dff1a;border-color:#3c7dff;color:#3c7dff}@media (max-width: 768px){.debug-sidebar{width:200px}}@media (max-width: 640px){.debug-sidebar{width:180px}}',ja=".debug-main-content{flex:1;background:#1a1a1a;overflow:hidden;display:flex;flex-direction:column}.debug-panel-container{flex:1;display:flex;flex-direction:column;height:100%}.panel-header{display:flex;align-items:center;justify-content:space-between;padding:6px 12px;border-bottom:1px solid #333;background:linear-gradient(135deg,#222,#1a1a1a)}.panel-title{display:flex;align-items:center;gap:12px}.panel-icon{font-size:20px}.panel-title h2{margin:0;font-size:18px;font-weight:600;color:#fff}.panel-actions{display:flex;gap:8px}.panel-action-btn{padding:8px 16px;border:none;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.panel-action-btn.primary{background:#3c7dff;color:#fff}.panel-action-btn.secondary{background:#ffffff1a;color:#fff;border:1px solid #333}.panel-action-btn.danger{background:#ff47571a;color:#ff4757;border:1px solid rgba(255,71,87,.3)}.panel-action-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000004d}.panel-action-btn.primary:hover{background:#2563eb}.panel-action-btn.secondary:hover{background:#ffffff26}.panel-action-btn.danger:hover{background:#ff475733}.panel-horizontal-tabs{display:flex;background:#1a1a1a;border-bottom:1px solid #333;overflow-x:auto}.horizontal-tab{display:flex;align-items:center;gap:8px;padding:12px 20px;background:none;border:none;color:#888;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s ease;white-space:nowrap;border-bottom:2px solid transparent}.horizontal-tab:hover{background:#ffffff0d;color:#ccc}.horizontal-tab.active{color:#3c7dff;border-bottom-color:#3c7dff;background:#3c7dff0d}.horizontal-tab .tab-icon{font-size:14px}.horizontal-tab .tab-label{font-weight:500}.panel-content{flex:1;padding:24px;overflow-y:auto;color:#ccc}.panel-content.no-padding{padding:0}.panel-content::-webkit-scrollbar{width:8px}.panel-content::-webkit-scrollbar-track{background:#ffffff05;border-radius:4px}.panel-content::-webkit-scrollbar-thumb{background:#ffffff1a;border-radius:4px;transition:background .2s ease}.panel-content::-webkit-scrollbar-thumb:hover{background:#fff3}.panel-content::-webkit-scrollbar-thumb:active{background:#ffffff4d}.panel-content{scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.1) rgba(255,255,255,.02)}.panel-content>.enhanced-panel{margin-top:0}.panel-content>.enhanced-panel>*:first-child{margin-top:0}.panel-content .section:first-child,.panel-content .section:first-child .section-title,.panel-content h3:first-child,.panel-content .section-title:first-child,.panel-content h1,.panel-content h2,.panel-content h3,.panel-content h4,.panel-content h5,.panel-content h6{margin-top:0}.enhanced-panel{display:flex;flex-direction:column;gap:24px}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px}.metric-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;display:flex;align-items:center;gap:12px;transition:all .2s ease}.metric-card:hover{border-color:#3c7dff;box-shadow:0 4px 12px #3c7dff1a}.metric-icon{font-size:20px;width:32px;text-align:center}.metric-content{flex:1}.metric-value{font-size:18px;font-weight:700;color:#3c7dff;line-height:1}.metric-label{font-size:11px;color:#888;text-transform:uppercase;font-weight:500;letter-spacing:.5px;margin-top:2px}.section{display:flex;flex-direction:column;gap:16px}.section-title{font-size:16px;font-weight:600;color:#fff;margin:0;padding-bottom:8px;border-bottom:1px solid #333}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.section-controls{display:flex;gap:8px}.sort-btn{background:#ffffff1a;border:1px solid #333;color:#ccc;padding:6px 12px;border-radius:6px;font-size:12px;cursor:pointer;transition:all .2s ease}.sort-btn:hover{background:#3c7dff1a;border-color:#3c7dff;color:#3c7dff}.empty-state{display:flex;flex-direction:column;align-items:center;gap:12px;padding:40px 20px;color:#888;text-align:center}.empty-icon{font-size:32px;opacity:.5}.empty-text{font-size:14px}.empty-action{background:#3c7dff;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:12px;font-weight:500}.json-viewer{background:#0f0f0f;border:1px solid #333;border-radius:8px;overflow:hidden}.json-viewer pre{margin:0;padding:16px;overflow-x:auto;font-family:SF Mono,monospace;font-size:12px;line-height:1.6;color:#e6e6e6}.debug-metric{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #2a2a2a}.debug-metric:last-child{border-bottom:none}.metric-label{color:#888;font-weight:500}.metric-value{color:#3c7dff;font-family:SF Mono,monospace;font-weight:600}@media (max-width: 768px){.panel-header,.panel-content{padding:16px}.metrics-grid{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}}",Ha=".cart-items-list{display:flex;flex-direction:column;gap:8px}.cart-item-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;display:flex;align-items:center;gap:16px}.item-info{flex:1}.item-title{font-weight:600;color:#fff;margin-bottom:4px}.item-details{font-size:12px;color:#888}.item-quantity{display:flex;align-items:center;gap:8px}.qty-btn{width:24px;height:24px;border:1px solid #333;background:#ffffff0d;color:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600}.qty-btn:hover{background:#3c7dff1a;border-color:#3c7dff}.qty-value{font-weight:600;color:#3c7dff;min-width:20px;text-align:center}.item-total{font-weight:600;color:#3c7dff}.remove-btn{width:24px;height:24px;border:1px solid rgba(255,71,87,.3);background:#ff47571a;color:#ff4757;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600}.remove-btn:hover{background:#ff475733}.elements-list{display:flex;flex-direction:column;gap:8px}.element-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;cursor:pointer;transition:all .2s ease}.element-card:hover{border-color:#3c7dff;box-shadow:0 4px 12px #3c7dff1a}.element-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.element-tag{background:#3c7dff;color:#fff;padding:2px 6px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase}.element-index{color:#888;font-size:12px}.element-attributes,.element-enhancers{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}.attribute-tag{background:#ffffff1a;color:#ccc;padding:2px 6px;border-radius:3px;font-size:10px;font-family:SF Mono,monospace}.enhancer-tag{background:#3c7dff33;color:#3c7dff;padding:2px 6px;border-radius:3px;font-size:10px;font-weight:500}.requests-list{display:flex;flex-direction:column;gap:8px}.request-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px}.request-card.error{border-color:#ff47574d}.request-card.success{border-color:#00ff884d}.request-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.request-method{padding:2px 6px;border-radius:3px;font-size:10px;font-weight:600;text-transform:uppercase}.request-method.get{background:#0f83;color:#0f8}.request-method.post{background:#3c7dff33;color:#3c7dff}.request-method.put{background:#ffc10733;color:#ffc107}.request-method.delete{background:#ff475733;color:#ff4757}.request-url{flex:1;color:#ccc;font-family:SF Mono,monospace;font-size:12px}.request-status{padding:2px 6px;border-radius:3px;font-size:10px;font-weight:600}.request-status.status-2xx{background:#0f83;color:#0f8}.request-status.status-4xx,.request-status.status-5xx{background:#ff475733;color:#ff4757}.request-time{color:#888;font-size:11px;font-family:SF Mono,monospace}.request-timestamp{color:#666;font-size:11px;margin-bottom:8px}.request-details summary{cursor:pointer;color:#3c7dff;font-size:12px;margin-top:8px}.request-data,.response-data{margin-top:12px}.request-data h4,.response-data h4{margin:0 0 8px;color:#fff;font-size:12px}.event-types{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}.event-type-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px;padding:12px;text-align:center;cursor:pointer;transition:all .2s ease}.event-type-card:hover{border-color:#3c7dff;box-shadow:0 2px 8px #3c7dff1a}.event-type-name{font-size:12px;color:#fff;font-weight:500}.event-type-count{font-size:16px;color:#3c7dff;font-weight:700;margin-top:4px}.events-timeline{display:flex;flex-direction:column;gap:12px}.timeline-event{display:flex;gap:16px;background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px}.event-time{color:#888;font-size:11px;font-family:SF Mono,monospace;white-space:nowrap;width:80px}.event-content{flex:1}.event-header{display:flex;align-items:center;gap:8px;margin-bottom:4px}.event-type-badge{background:#3c7dff;color:#fff;padding:2px 6px;border-radius:3px;font-size:10px;font-weight:600;text-transform:uppercase}.event-source{color:#888;font-size:10px;text-transform:uppercase;font-weight:500}.event-data-preview{color:#ccc;font-size:12px;font-family:SF Mono,monospace}.event-item{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;margin-bottom:12px;transition:all .2s ease}.event-item:hover{border-color:#3c7dff;box-shadow:0 4px 12px #3c7dff1a}.event-item .event-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.event-type{background:#3c7dff;color:#fff;padding:4px 8px;border-radius:4px;font-size:10px;font-weight:600;text-transform:uppercase}.event-data{background:#0f0f0f;border-radius:4px;padding:12px;font-family:SF Mono,monospace;font-size:11px;color:#ccc;max-height:120px;overflow-y:auto}.debug-mini-cart-display{position:fixed;top:20px;right:20px;background:#000000f2;border:1px solid #333;border-radius:8px;padding:0;min-width:280px;max-width:350px;max-height:400px;box-shadow:0 8px 32px #00000080;font-family:SF Mono,monospace;font-size:12px;color:#ccc;z-index:10000;display:none;overflow:hidden}.debug-mini-cart-display.show{display:block}.debug-mini-cart-header{background:linear-gradient(135deg,#1a1a1a,#111);padding:12px 16px;border-bottom:1px solid #333;display:flex;justify-content:space-between;align-items:center;font-weight:600;color:#3c7dff}.debug-mini-cart-header span{display:flex;align-items:center;gap:8px}.mini-cart-close{background:transparent;border:none;color:#888;font-size:20px;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.mini-cart-close:hover{background:#ff475733;color:#ff4757}.debug-mini-cart-empty{padding:40px 20px;text-align:center;color:#666;font-style:italic}.debug-mini-cart-items{max-height:280px;overflow-y:auto;padding:8px}.debug-mini-cart-item{background:#ffffff08;border:1px solid rgba(255,255,255,.05);border-radius:6px;padding:10px;margin-bottom:6px;transition:all .2s ease}.debug-mini-cart-item:hover{background:#3c7dff0d;border-color:#3c7dff33}.debug-mini-cart-item:last-child{margin-bottom:0}.mini-cart-item-info{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.mini-cart-item-id{color:#3c7dff;font-weight:600;font-size:11px}.mini-cart-item-qty{color:#ffc107;font-weight:600;font-size:11px}.mini-cart-upsell-badge{background:#ff4757;color:#fff;padding:1px 4px;border-radius:3px;font-size:9px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;margin:0 4px}.mini-cart-item-title{color:#fff;font-size:11px;margin-bottom:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mini-cart-item-price{color:#0f8;font-weight:600;font-size:12px;text-align:right}.debug-mini-cart-footer{background:linear-gradient(135deg,#1a1a1a,#111);border-top:1px solid #333;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}.mini-cart-stat{display:flex;align-items:center;gap:6px}.mini-cart-stat span:first-child{color:#888;font-size:11px}.mini-cart-stat span:last-child{color:#fff;font-weight:600}.mini-cart-total{color:#0f8!important;font-size:14px}.debug-mini-cart-items::-webkit-scrollbar{width:6px}.debug-mini-cart-items::-webkit-scrollbar-track{background:#ffffff05;border-radius:3px}.debug-mini-cart-items::-webkit-scrollbar-thumb{background:#3c7dff4d;border-radius:3px}.debug-mini-cart-items::-webkit-scrollbar-thumb:hover{background:#3c7dff80}",Ba=".campaign-overview{background:linear-gradient(135deg,#2a2a2a,#1a1a1a);border:1px solid #333;border-radius:12px;padding:24px;margin-bottom:24px}.campaign-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.campaign-name{margin:0;font-size:24px;font-weight:700;color:#fff;background:linear-gradient(135deg,#3c7dff,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.campaign-badges{display:flex;gap:8px}.campaign-badge{padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.campaign-badge.currency{background:#3c7dff33;color:#3c7dff}.campaign-badge.language{background:#0f83;color:#0f8}.packages-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:20px;margin-bottom:32px}.package-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:12px;overflow:hidden;transition:all .3s ease;position:relative}.package-card:hover{border-color:#3c7dff;box-shadow:0 8px 32px #3c7dff1a;transform:translateY(-2px)}.package-card.in-cart{border-color:#0f8;background:linear-gradient(135deg,#00ff881a,#1a1a1a)}.package-image-container{position:relative;height:140px;background:#f8f9fa;display:flex;align-items:center;justify-content:center;overflow:hidden}.package-image{max-width:100%;max-height:100%;object-fit:contain}.recurring-badge,.cart-badge{position:absolute;top:8px;right:8px;background:#3c7dff;color:#fff;padding:4px 8px;border-radius:12px;font-size:10px;font-weight:600}.cart-badge{background:#0f8;color:#000;top:8px;left:8px}.package-info{padding:16px}.package-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.package-name{margin:0;font-size:16px;font-weight:600;color:#fff;line-height:1.3}.package-id{font-size:11px;color:#888;font-family:SF Mono,monospace}.package-details{display:flex;gap:16px;margin-bottom:12px;font-size:12px;color:#888}.package-pricing{margin-bottom:16px}.price-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.price-label{font-size:12px;color:#888}.price-value{font-weight:600;font-family:SF Mono,monospace}.sale-price{color:#3c7dff;font-size:16px}.retail-price{color:#888;text-decoration:line-through}.recurring-price{color:#ff6b6b}.savings{background:#00ff881a;color:#0f8;padding:4px 8px;border-radius:6px;font-size:11px;font-weight:600;text-align:center;margin-top:8px}.recurring-pricing{border-top:1px solid #333;padding-top:8px;margin-top:8px}.package-actions{display:flex;gap:8px;align-items:center}.package-btn{padding:8px 12px;border:none;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease;flex:1}.add-btn{background:#3c7dff;color:#fff}.add-btn:hover{background:#2563eb}.remove-btn{background:#ff47571a;color:#ff4757;border:1px solid rgba(255,71,87,.3)}.remove-btn:hover{background:#ff475733}.inspect-btn{background:#ffffff1a;color:#ccc;border:1px solid #333;flex:0 0 auto}.inspect-btn:hover{background:#ffffff26;color:#fff}.qty-controls{display:flex;align-items:center;gap:8px;flex:0 0 auto}.qty-controls button{width:24px;height:24px;border:1px solid #333;background:#ffffff0d;color:#fff;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600}.qty-controls span{font-weight:600;color:#3c7dff;min-width:20px;text-align:center}.shipping-methods{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}.shipping-method-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;display:flex;align-items:center;gap:16px;transition:all .2s ease}.shipping-method-card:hover{border-color:#3c7dff;box-shadow:0 4px 12px #3c7dff1a}.shipping-info{flex:1}.shipping-name{font-size:16px;font-weight:600;color:#fff;margin-bottom:4px}.shipping-id{font-size:11px;color:#888;font-family:SF Mono,monospace}.shipping-price{font-size:18px;font-weight:700;color:#3c7dff;font-family:SF Mono,monospace}.shipping-test-btn{background:#3c7dff1a;border:1px solid #3C7DFF;color:#3c7dff;padding:8px 16px;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.shipping-test-btn:hover{background:#3c7dff33}.raw-data-section{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;overflow:hidden}.raw-data-summary{padding:16px;cursor:pointer;display:flex;align-items:center;justify-content:space-between;user-select:none}.raw-data-summary:hover{background:#ffffff0d}.toggle-icon{color:#888;transition:transform .2s ease}.raw-data-section[open] .toggle-icon{transform:rotate(180deg)}.raw-data-section .json-viewer{border-top:1px solid #333;margin:0}@media (max-width: 768px){.packages-grid,.shipping-methods{grid-template-columns:1fr}.campaign-header{flex-direction:column;align-items:flex-start;gap:12px}.package-card{margin-bottom:16px}.package-actions{flex-direction:column;gap:8px}.package-btn{width:100%}}",Va=".enhanced-panel{display:flex;flex-direction:column;gap:24px}.metrics-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px}.metric-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;display:flex;align-items:center;gap:12px;transition:all .2s ease}.metric-card:hover{border-color:#3c7dff;box-shadow:0 4px 12px #3c7dff1a}.metric-icon{font-size:20px;width:32px;text-align:center}.metric-content{flex:1}.metric-value{font-size:18px;font-weight:700;color:#3c7dff;line-height:1}.metric-label{font-size:11px;color:#888;text-transform:uppercase;font-weight:500;letter-spacing:.5px;margin-top:2px}.section{display:flex;flex-direction:column;gap:16px}.section-title{font-size:16px;font-weight:600;color:#fff;margin:0;padding-bottom:8px;border-bottom:1px solid #333}.empty-state{display:flex;flex-direction:column;align-items:center;gap:12px;padding:40px 20px;color:#888;text-align:center}.empty-icon{font-size:32px;opacity:.5}.empty-text{font-size:14px}.empty-action{background:#3c7dff;color:#fff;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:12px;font-weight:500}.config-groups{display:flex;flex-direction:column;gap:24px}.config-group{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:20px}.config-group-title{font-size:14px;font-weight:600;color:#fff;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid #333}.config-items{display:flex;flex-direction:column;gap:12px}.config-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0}.config-key{font-size:12px;color:#ccc;font-weight:500}.config-value{font-size:12px;color:#fff;font-family:SF Mono,monospace}.config-value.enabled{color:#0f8}.config-value.disabled{color:#888}.form-fields-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}.field-status-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px;padding:12px;text-align:center;transition:all .2s ease}.field-status-card.filled{border-color:#00ff884d;background:linear-gradient(135deg,#00ff881a,#1a1a1a)}.field-status-card.error{border-color:#ff47574d;background:linear-gradient(135deg,#ff47571a,#1a1a1a)}.field-name{font-size:11px;color:#ccc;font-weight:500;margin-bottom:4px}.field-status{font-size:14px}.customer-info{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.info-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px}.info-card h4{margin:0 0 12px;font-size:14px;color:#fff;font-weight:600}.info-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.info-label{font-size:12px;color:#888}.info-value{font-size:12px;color:#fff;font-family:SF Mono,monospace}.info-empty{color:#666;font-style:italic;font-size:12px}.address-info,.validation-errors{display:flex;flex-direction:column;gap:8px}.error-item{background:linear-gradient(135deg,#ff47571a,#1a1a1a);border:1px solid rgba(255,71,87,.3);border-radius:6px;padding:12px;display:flex;gap:8px}.error-field{font-weight:600;color:#ff4757;font-size:12px}.error-message{color:#ccc;font-size:12px}.storage-items{display:flex;flex-direction:column;gap:12px}.storage-item-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px;transition:all .2s ease}.storage-item-card.next-item{border-color:#3c7dff4d;background:linear-gradient(135deg,#3c7dff0d,#1a1a1a)}.storage-item-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}.storage-key{flex:1;font-family:SF Mono,monospace;font-size:12px;color:#fff;font-weight:500}.storage-type{padding:2px 6px;border-radius:3px;font-size:10px;font-weight:600;text-transform:uppercase}.storage-type.local{background:#0f83;color:#0f8}.storage-type.session{background:#ffc10733;color:#ffc107}.storage-delete-btn{width:20px;height:20px;border:1px solid rgba(255,71,87,.3);background:#ff47571a;color:#ff4757;border-radius:3px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:12px}.storage-delete-btn:hover{background:#ff475733}.storage-item-size{font-size:10px;color:#666;margin-bottom:8px}.storage-item-value{background:#0f0f0f;border:1px solid #333;border-radius:4px;overflow:hidden}.storage-item-value pre{margin:0;padding:12px;overflow-x:auto;font-family:SF Mono,monospace;font-size:11px;line-height:1.4;color:#e6e6e6;max-height:200px;overflow-y:auto}.json-viewer{background:#0f0f0f;border:1px solid #333;border-radius:8px;overflow:hidden}.json-viewer pre{margin:0;padding:16px;overflow-x:auto;font-family:SF Mono,monospace;font-size:12px;line-height:1.6;color:#e6e6e6;max-height:400px;overflow-y:auto}.analytics-charts{display:flex;flex-direction:column;gap:12px}.analytics-bar{display:flex;flex-direction:column;gap:4px}.bar-label{font-size:12px;color:#ccc;font-weight:500}.bar-container{position:relative;background:#0f0f0f;border:1px solid #333;border-radius:4px;height:24px;overflow:hidden}.bar-fill{background:linear-gradient(90deg,#3c7dff,#2563eb);height:100%;transition:width .3s ease}.bar-value{position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:11px;color:#fff;font-weight:500}.source-stats{display:flex;flex-direction:column;gap:8px}.source-stat-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px}.source-name{font-size:12px;color:#ccc}.source-count{font-size:12px;color:#3c7dff;font-weight:600}.method-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}.method-stat-card{background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:8px;padding:16px}.method-name{font-size:14px;font-weight:600;color:#fff;margin-bottom:8px}.method-metrics{display:flex;flex-direction:column;gap:4px}.method-metrics .metric{font-size:11px;color:#888}.performance-chart{display:flex;flex-direction:column;gap:8px}.performance-bar{display:flex;flex-direction:column;gap:4px}.enhancer-distribution{display:flex;flex-direction:column;gap:8px}.enhancer-dist-item{display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px}.enhancer-type{font-size:12px;color:#ccc}.enhancer-count{font-size:12px;color:#3c7dff;font-weight:600}.performance-metrics{display:flex;flex-direction:column;gap:12px}.performance-metric{display:flex;justify-content:space-between;align-items:center;padding:12px;background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px}.enhancement-timeline{display:flex;flex-direction:column;gap:8px}.timeline-item{display:flex;gap:16px;padding:8px 12px;background:linear-gradient(135deg,#222,#1a1a1a);border:1px solid #333;border-radius:6px}.timeline-time{font-size:11px;color:#888;font-family:SF Mono,monospace;min-width:60px}.timeline-event{font-size:12px;color:#ccc}@media (max-width: 768px){.metrics-grid,.form-fields-grid{grid-template-columns:repeat(2,1fr)}.customer-info{grid-template-columns:1fr}.config-groups{gap:16px}.storage-items{gap:8px}.method-stats{grid-template-columns:1fr}}",Ga=".timeline-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#f8f9fa;border-bottom:1px solid #e9ecef;border-radius:4px 4px 0 0;margin-bottom:12px}.timeline-stats{display:flex;gap:16px}.timeline-stat{display:flex;flex-direction:column;align-items:center;font-size:11px}.timeline-stat-label{color:#6c757d;margin-bottom:2px}.timeline-stat-value{font-weight:600;color:#495057}.timeline-stat-value.recording{color:#28a745}.timeline-stat-value.paused{color:#dc3545}.timeline-controls{display:flex;gap:8px}.timeline-control-btn{padding:6px 12px;border:1px solid #dee2e6;border-radius:3px;background:#fff;font-size:11px;cursor:pointer;transition:all .2s}.timeline-control-btn:hover{background:#f8f9fa;transform:translateY(-1px)}.timeline-control-btn.record{background:#28a745;color:#fff;border-color:#28a745}.timeline-control-btn.pause{background:#ffc107;color:#212529;border-color:#ffc107}.timeline-control-btn.clear{background:#dc3545;color:#fff;border-color:#dc3545}.timeline-control-btn.export{background:#007bff;color:#fff;border-color:#007bff}.timeline-events{max-height:500px;overflow-y:auto;padding:0 4px}.timeline-event{background:#fff;border:1px solid #e9ecef;border-radius:4px;margin-bottom:8px;transition:all .2s;position:relative}.timeline-event:hover{box-shadow:0 2px 8px #0000001a;transform:translateY(-1px)}.timeline-event-header{padding:8px 12px;border-bottom:1px solid #f8f9fa;display:flex;justify-content:space-between;align-items:center}.timeline-event-meta{display:flex;align-items:center;gap:8px;font-size:11px}.timeline-event-icon{font-size:14px}.timeline-event-type{font-weight:600;text-transform:uppercase;letter-spacing:.5px}.timeline-event-time{color:#6c757d;font-style:italic}.timeline-event-name{font-weight:600;color:#495057;font-size:13px}.timeline-event-details{padding:8px 12px;font-size:11px}.timeline-event-source{color:#6c757d;margin-bottom:8px}.timeline-event-data-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.timeline-toggle-data{background:none;border:1px solid #dee2e6;border-radius:2px;padding:2px 6px;font-size:10px;cursor:pointer;color:#007bff}.timeline-toggle-data:hover{background:#f8f9fa}.timeline-event-data-content{background:#f8f9fa;border:1px solid #e9ecef;border-radius:3px;padding:8px;margin:4px 0;font-family:Monaco,Consolas,monospace;font-size:10px;line-height:1.4;max-height:200px;overflow-y:auto}.timeline-event-data-preview{background:#f8f9fa;border:1px solid #e9ecef;border-radius:3px;padding:6px;font-family:Monaco,Consolas,monospace;font-size:10px;color:#6c757d;white-space:pre-wrap;word-break:break-all}.timeline-empty{text-align:center;padding:40px 20px;color:#6c757d}.timeline-empty-icon{font-size:48px;margin-bottom:16px}.timeline-empty-title{font-size:16px;font-weight:600;margin-bottom:8px;color:#495057}.timeline-empty-subtitle{font-size:13px}.analytics-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px}.analytics-card{background:#fff;border:1px solid #e9ecef;border-radius:4px;padding:12px}.analytics-card-full{grid-column:1 / -1}.analytics-card-title{font-weight:600;margin-bottom:12px;color:#495057;font-size:13px;border-bottom:1px solid #f8f9fa;padding-bottom:6px}.analytics-stats{display:flex;flex-direction:column;gap:8px}.analytics-stat{display:flex;justify-content:space-between;font-size:11px}.analytics-stat-label{color:#6c757d}.analytics-stat-value{font-weight:600;color:#495057}.analytics-distribution{display:flex;flex-direction:column;gap:6px}.analytics-distribution-item{display:flex;align-items:center;gap:8px;font-size:11px}.analytics-distribution-bar{flex:1;height:16px;background:#f8f9fa;border-radius:8px;overflow:hidden;position:relative}.analytics-distribution-fill{height:100%;border-radius:8px;transition:width .3s ease}.analytics-distribution-label{min-width:80px;color:#495057;font-weight:500}.analytics-sources{display:flex;flex-direction:column;gap:4px;max-height:200px;overflow-y:auto}.analytics-source-item{display:flex;justify-content:space-between;padding:4px 8px;background:#f8f9fa;border-radius:3px;font-size:11px}.analytics-source-name{color:#495057;flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.analytics-source-count{color:#6c757d;font-weight:600;min-width:20px;text-align:right}.timeline-chart{display:flex;align-items:end;gap:4px;height:100px;padding:8px;background:#f8f9fa;border-radius:4px}.timeline-chart-bar{flex:1;background:linear-gradient(to top,#007bff,#66b3ff);border-radius:2px 2px 0 0;min-height:2px;position:relative;cursor:pointer;transition:all .2s}.timeline-chart-bar:hover{opacity:.8;transform:scaleY(1.1)}.timeline-chart-value{position:absolute;top:-16px;left:50%;transform:translate(-50%);font-size:9px;color:#495057;font-weight:600;opacity:0;transition:opacity .2s}.timeline-chart-bar:hover .timeline-chart-value{opacity:1}.filters-container{padding:12px;display:flex;flex-direction:column;gap:16px}.filter-group{border:1px solid #e9ecef;border-radius:4px;padding:12px;background:#fff}.filter-group-title{font-weight:600;margin-bottom:8px;color:#495057;font-size:12px}.filter-search-input{width:100%;padding:6px 8px;border:1px solid #dee2e6;border-radius:3px;font-size:11px}.filter-search-input:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff40}.filter-checkboxes{display:flex;flex-direction:column;gap:6px}.filter-checkbox{display:flex;align-items:center;gap:6px;font-size:11px;cursor:pointer;padding:4px;border-radius:3px;transition:background .2s}.filter-checkbox:hover{background:#f8f9fa}.filter-checkbox input[type=checkbox]{margin:0}.filter-checkbox-icon{font-size:14px}.filter-checkbox-label{color:#495057}.filter-sources-list{max-height:150px;overflow-y:auto;border:1px solid #e9ecef;border-radius:3px;padding:4px}.filter-empty{color:#6c757d;font-style:italic;text-align:center;padding:12px;font-size:11px}.filter-time-range{width:100%;padding:6px 8px;border:1px solid #dee2e6;border-radius:3px;font-size:11px;background:#fff}.filter-controls{display:flex;gap:8px}.filter-control-btn{flex:1;padding:8px 12px;border:1px solid #dee2e6;border-radius:3px;background:#fff;font-size:11px;cursor:pointer;transition:all .2s}.filter-control-btn:hover{background:#f8f9fa;transform:translateY(-1px)}@media (max-width: 768px){.timeline-header{flex-direction:column;gap:12px;align-items:stretch}.timeline-stats{justify-content:space-around}.analytics-grid{grid-template-columns:1fr}.filter-controls{flex-direction:column}}@keyframes eventAdded{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.timeline-event.new{animation:eventAdded .3s ease-out}.timeline-events::-webkit-scrollbar,.analytics-sources::-webkit-scrollbar,.filter-sources-list::-webkit-scrollbar{width:6px}.timeline-events::-webkit-scrollbar-track,.analytics-sources::-webkit-scrollbar-track,.filter-sources-list::-webkit-scrollbar-track{background:#f8f9fa;border-radius:3px}.timeline-events::-webkit-scrollbar-thumb,.analytics-sources::-webkit-scrollbar-thumb,.filter-sources-list::-webkit-scrollbar-thumb{background:#dee2e6;border-radius:3px}.timeline-events::-webkit-scrollbar-thumb:hover,.analytics-sources::-webkit-scrollbar-thumb:hover,.filter-sources-list::-webkit-scrollbar-thumb:hover{background:#adb5bd}",Ka=class{static loadDebugStyles(){return m(this,null,function*(){if(!this.isLoading&&!this.styleElement){this.isLoading=!0;try{const t=yield this.getDebugStyles();this.styleElement=document.createElement("style"),this.styleElement.id="debug-overlay-styles",this.styleElement.textContent=t,document.head.appendChild(this.styleElement)}catch(t){}finally{this.isLoading=!1}}})}static getDebugStyles(){return m(this,null,function*(){return[Ra,qa,ja,Ha,Ba,Va,Ga].join("\n")})}static removeDebugStyles(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null);const t=document.getElementById("debug-overlay-styles");t&&t.remove()}};Ka.styleElement=null,Ka.isLoading=!1;let Ja=Ka;const Za=Object.freeze(Object.defineProperty({__proto__:null,DebugStyleLoader:Ja},Symbol.toStringTag,{value:"Module"}));t.ApiClient=qt,t.EventBus=st,t.Logger=Q,t.NextCommerce=Ht,t.ProfileManager=Xt,t.ProfileMapper=ee,t.ProfileSelectorEnhancer=se,t.ProfileSwitcherEnhancer=ne,t.SDKInitializer=Yt,t.VERSION=re,t.useCampaignStore=lt,t.useCartStore=Et,t.useCheckoutStore=At,t.useConfigStore=vt,t.useOrderStore=Dt,t.useProfileStore=mt,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
